(window.webpackJsonp=window.webpackJsonp||[]).push([[301],{1623:function(e,t,a){var r=a(369),n=a(1624);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1},s=(r(n,o),n.locals?n.locals:{});e.exports=s},1624:function(e,t,a){(t=a(370)(!1)).push([e.i,".manual-project-create{max-width:700px}.manual-project-create .button{margin-top:8px}",""]),e.exports=t},1625:function(e,t,a){var r=a(369),n=a(1626);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1},s=(r(n,o),n.locals?n.locals:{});e.exports=s},1626:function(e,t,a){(t=a(370)(!1)).push([e.i,"#create-project{padding-top:0!important}#create-project header{padding-top:20px;background-color:#f3f3f3;position:-webkit-sticky;position:sticky;top:48px;z-index:50}.create-project-mode-type-alm.disabled img{filter:grayscale(100%)}.create-project-manual{display:flex!important;justify-content:space-between}.create-project-azdo-repo{width:410px;min-height:40px;box-sizing:border-box;margin-right:auto}.create-project-import-bbs .open .boxed-group-header{border-bottom:1px solid #e6e6e6}.create-project-import-bbs .boxed-group-inner{padding-top:24px}.create-project-import-bbs-repo{width:250px;min-height:40px}.create-project-github-repository{box-sizing:border-box;width:33.33%}.create-project-github-repository .notice{display:block;position:absolute}.create-project-github-repository .notice svg{color:#0a0}.create-project-import table>tbody>tr>td{vertical-align:middle}.create-project-import .project-name,.create-project-import .project-path{max-width:400px}.create-project-import .sq-project-link{max-width:300px}.create-project-import .already-set-up svg{color:#0a0}",""]),e.exports=t},1767:function(e,t,a){"use strict";a.r(t),a.d(t,"CreateProjectPage",(function(){return Ae}));var r=a(366),n=a(393),o=a(561),s=a(419),i=a(648),c=a(464),l=a(6),p=a(378),d=a(406),m=a(1123),h=a(445),u=a.n(h),g=a(381),b=a(4);function j(e,t,a){return Object(b.i)("/api/alm_integrations/set_pat",{almSetting:e,pat:t,username:a}).catch(g.a)}function y(e){return Object(b.c)("/api/alm_integrations/check_pat",{almSetting:e}).then(()=>({status:!0})).catch(async e=>{if(400===e.status){return{status:!1,error:await Object(b.g)(e)}}return Object(g.a)(e)})}var f=a(371),k=a(373),v=a(368),E=a(414),_=a(379),S=a(376),O=a(0),P=a(542),N=a(367),z=a(587),w=a(429);function C(e){return"".concat(e.replace(/\/$/,""),"/_usersSettings/tokens")}function R(e){const{almSetting:{alm:t,url:a},submitting:n=!1,validationFailed:o}=e,[s,i]=r.useState(!1);r.useEffect(()=>{i(!1)},[n]);const[c,p]=r.useState(""),d=o&&!s||s&&!c;let m;return c?d&&(m=Object(l.k)("onboarding.create_project.pat_incorrect",t)):m=Object(l.k)("onboarding.create_project.pat_form.pat_required"),r.createElement("div",{className:"boxed-group abs-width-600"},r.createElement("div",{className:"boxed-group-inner"},r.createElement("h2",null,Object(l.k)("onboarding.create_project.pat_form.title",t)),r.createElement("div",{className:"big-spacer-top big-spacer-bottom"},r.createElement(f.FormattedMessage,{id:"onboarding.create_project.pat_help.instructions",defaultMessage:Object(l.k)("onboarding.create_project.pat_help.instructions",t),values:{link:a?r.createElement("a",{className:"link-with-icon",href:C(a),rel:"noopener noreferrer",target:"_blank"},r.createElement(w.a,{className:"little-spacer-right"}),r.createElement("span",null,Object(l.k)("onboarding.create_project.pat_help.instructions.link",t))):Object(l.k)("onboarding.create_project.pat_help.instructions.link",t),scope:r.createElement("strong",null,r.createElement("em",null,"Code (Read & Write)"))}})),r.createElement("form",{onSubmit:t=>{t.preventDefault(),e.onPersonalAccessTokenCreate(c)}},r.createElement(z.a,{error:m,id:"personal_access_token",isInvalid:d,isValid:!1,label:Object(l.k)("onboarding.create_project.enter_pat"),required:!0},r.createElement("input",{autoFocus:!0,className:N("width-100 little-spacer-bottom",{"is-invalid":d}),id:"personal_access_token",minLength:1,name:"personal_access_token",onChange:e=>{p(e.target.value),i(!0)},type:"text",value:c})),r.createElement(v.h,{disabled:d||n||!s},Object(l.k)("onboarding.create_project.pat_form.list_repositories")),r.createElement(S.a,{className:"spacer-left",loading:n}))))}var x,M=a(404),A=a(375),I=a(622),L=a(433),B=a(537);!function(e){e.Manual="manual",e.AzureDevOps="azure",e.BitbucketServer="bitbucket",e.BitbucketCloud="bitbucketcloud",e.GitHub="github",e.GitLab="gitlab"}(x||(x={}));function F(e,t,a=!1){if(!t||!e.toLowerCase().includes(t.toLowerCase()))return e;const[n,o,s]=e.split(new RegExp("(".concat(t,")(.*)"),"i"));return r.createElement(r.Fragment,null,n,r.createElement("strong",{className:N({underline:a})},o),s)}function V(e){const{importing:t,loading:a,startsOpen:n,project:o,repositories:s=[],searchQuery:i,selectedRepository:c}=e,[d,m]=r.useState(n),[h,u]=r.useState(1),g=s.slice(0,30*h),b=e=>(null==c?void 0:c.projectName)===o.name&&c.name===e.name;return r.createElement(I.a,{className:N("big-spacer-bottom",{open:d}),onClick:()=>{d||e.onOpen(o.name),m(!d)},open:d,title:r.createElement("h3",{title:o.description},F(o.name,i,!0))},d&&r.createElement(S.a,{loading:a},a||0!==s.length?r.createElement(r.Fragment,null,r.createElement("div",{className:"display-flex-wrap"},g.map(a=>r.createElement("div",{className:"create-project-azdo-repo display-flex-start spacer-bottom padded-right",key:a.name},a.sqProjectKey?r.createElement(r.Fragment,null,r.createElement(B.a,{className:"spacer-right",fill:A.colors.green,size:14}),r.createElement("div",{className:"overflow-hidden"},r.createElement("div",{className:"little-spacer-bottom text-ellipsis"},r.createElement(k.c,{to:Object(p.A)(a.sqProjectKey),title:a.sqProjectName},F(a.sqProjectName||a.name,i))),r.createElement("em",null,Object(l.k)("onboarding.create_project.repository_imported")))):r.createElement(L.a,{checked:b(a),className:"overflow-hidden",disabled:t,onCheck:()=>e.onSelectRepository(a),value:a.name},r.createElement("span",{className:"text-ellipsis",title:a.name},F(a.name,i)))))),r.createElement(M.a,{count:g.length,total:s.length,loadMore:()=>u(e=>e+1)})):r.createElement(_.a,{variant:"warning"},r.createElement(f.FormattedMessage,{defaultMessage:Object(l.k)("onboarding.create_project.azure.no_repositories"),id:"onboarding.create_project.azure.no_repositories",values:{link:r.createElement(k.c,{to:{pathname:"/projects/create",query:{mode:x.AzureDevOps,resetPat:1}}},Object(l.k)("onboarding.create_project.update_your_token"))}}))))}function T(e){const{importing:t,loadingRepositories:a,projects:n=[],repositories:o,searchResults:s,searchQuery:i,selectedRepository:c}=e,[p,d]=r.useState(1),m=s?n.filter(e=>void 0!==s[e.name]):n;if(0===m.length)return r.createElement(_.a,{className:"spacer-top",variant:"warning"},s?Object(l.k)("onboarding.create_project.azure.no_results"):r.createElement(f.FormattedMessage,{defaultMessage:Object(l.k)("onboarding.create_project.azure.no_projects"),id:"onboarding.create_project.azure.no_projects",values:{link:r.createElement(k.c,{to:{pathname:"/projects/create",query:{mode:x.AzureDevOps,resetPat:1}}},Object(l.k)("onboarding.create_project.update_your_token"))}}));const h=m.slice(0,10*p),u=s?" - result":"";return r.createElement("div",null,h.map((n,l)=>r.createElement(V,{key:"".concat(n.name).concat(u),importing:t,loading:Boolean(a[n.name]),onOpen:e.onOpenProject,onSelectRepository:e.onSelectRepository,project:n,repositories:s?s[n.name]:o[n.name],selectedRepository:c,searchQuery:i,startsOpen:void 0!==s||0===l})),r.createElement(M.a,{count:h.length,loadMore:()=>d(e=>e+1),total:m.length}))}function H(e){const{additionalActions:t,title:a}=e;return r.createElement("header",{className:"huge-spacer-bottom bordered-bottom overflow-hidden"},r.createElement("h1",{className:"pull-left huge big-spacer-bottom"},a),t)}function q(e){const{alm:t,canAdmin:a}=e;return r.createElement(_.a,{variant:"error"},a?r.createElement(f.FormattedMessage,{defaultMessage:Object(l.k)("onboarding.create_project.wrong_binding_count.admin"),id:"onboarding.create_project.wrong_binding_count.admin",values:{alm:Object(l.k)("onboarding.alm",t),url:r.createElement(k.c,{to:Object(p.q)(P.a)},Object(l.k)("settings.page"))}}):r.createElement(f.FormattedMessage,{defaultMessage:Object(l.k)("onboarding.create_project.wrong_binding_count"),id:"onboarding.create_project.wrong_binding_count",values:{alm:Object(l.k)("onboarding.alm",t)}}))}function K(e){const{canAdmin:t,importing:a,loading:n,loadingRepositories:o,projects:s,repositories:i,searching:c,searchResults:m,searchQuery:h,selectedRepository:u,settings:g,showPersonalAccessTokenForm:b,submittingToken:j,tokenValidationFailed:y}=e,N=g&&g.url,z=!n&&!g,w=!n&&g&&!g.url;return r.createElement(r.Fragment,null,r.createElement(H,{additionalActions:!b&&N&&r.createElement("div",{className:"display-flex-center pull-right"},r.createElement(S.a,{className:"spacer-right",loading:a}),r.createElement(v.a,{className:"button-large button-primary",disabled:!u||a,onClick:e.onImportRepository},Object(l.k)("onboarding.create_project.import_selected_repo"))),title:r.createElement("span",{className:"text-middle"},r.createElement("img",{alt:"",className:"spacer-right",height:"24",src:"".concat(Object(O.getBaseUrl)(),"/images/alm/azure.svg")}),Object(l.k)("onboarding.create_project.azure.title"))}),n&&r.createElement("i",{className:"spinner"}),w&&r.createElement(_.a,{variant:"error"},t?r.createElement(f.FormattedMessage,{defaultMessage:Object(l.k)("onboarding.create_project.azure.no_url.admin"),id:"onboarding.create_project.azure.no_url.admin",values:{alm:Object(l.k)("onboarding.alm",d.a.Azure),url:r.createElement(k.c,{to:Object(p.q)(P.a)},Object(l.k)("settings.page"))}}):Object(l.k)("onboarding.create_project.azure.no_url")),z&&r.createElement(q,{alm:d.a.Azure,canAdmin:!!t}),!n&&g&&g.url&&(b?r.createElement("div",{className:"display-flex-justify-center"},r.createElement(R,{almSetting:g,onPersonalAccessTokenCreate:e.onPersonalAccessTokenCreate,submitting:j,validationFailed:y})):r.createElement(r.Fragment,null,r.createElement("div",{className:"huge-spacer-bottom"},r.createElement(E.a,{onChange:e.onSearch,placeholder:Object(l.k)("onboarding.create_project.search_projects_repositories")})),r.createElement(S.a,{loading:Boolean(c)},r.createElement(T,{importing:a,loadingRepositories:o,onOpenProject:e.onOpenProject,onSelectRepository:e.onSelectRepository,projects:s,repositories:i,searchResults:m,searchQuery:h,selectedRepository:u})))))}function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){U(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class G extends r.PureComponent{constructor(e){super(e),this.mounted=!1,this.fetchInitialData=async()=>{this.setState({loading:!0});const e=await this.checkPersonalAccessToken().catch(()=>!1);let t;e&&(t=await this.fetchAzureProjects());const{repositories:a}=this.state;let r;if(t&&t.length>0){r=t[0].name,this.setState(({loadingRepositories:e})=>({loadingRepositories:Q({},e,{[r]:!0})}));const e=await this.fetchAzureRepositories(r);a[r]=e}this.mounted&&this.setState(({loadingRepositories:n})=>(r&&(n[r]=!1),{patIsValid:e,loading:!1,loadingRepositories:Q({},n),projects:t,repositories:a}))},this.fetchAzureProjects=()=>{const{settings:e}=this.state;return e?(t=e.key,Object(b.d)("/api/alm_integrations/list_azure_projects",{almSetting:t}).catch(g.a)).then(({projects:e})=>e):Promise.resolve(void 0);var t},this.fetchAzureRepositories=e=>{const{settings:t}=this.state;return t?function(e,t){return Object(b.d)("/api/alm_integrations/search_azure_repos",{almSetting:e,projectName:t}).catch(g.a)}(t.key,e).then(({repositories:e})=>e).catch(()=>[]):Promise.resolve([])},this.cleanUrl=()=>{const{location:e,router:t}=this.props;delete e.query.resetPat,t.replace(e)},this.handleOpenProject=async e=>{if(this.state.searchResults)return;this.setState(({loadingRepositories:t})=>({loadingRepositories:Q({},t,{[e]:!0})}));const t=await this.fetchAzureRepositories(e);this.setState(({loadingRepositories:a,repositories:r})=>({loadingRepositories:Q({},a,{[e]:!1}),repositories:Q({},r,{[e]:t})}))},this.handleSearchRepositories=async e=>{const{settings:t}=this.state;if(!t)return;if(0===e.length)return void this.setState({searchResults:void 0,searchQuery:void 0});this.setState({searching:!0});const a=await function(e,t){return Object(b.d)("/api/alm_integrations/search_azure_repos",{almSetting:e,searchQuery:t}).catch(g.a)}(t.key,e).then(({repositories:e})=>e).catch(()=>[]);this.mounted&&this.setState({searching:!1,searchResults:u()(a,"projectName"),searchQuery:e})},this.handleImportRepository=async()=>{const{selectedRepository:e,settings:t}=this.state;if(!t||!e)return;this.setState({importing:!0});const a=await(r=t.key,n=e.projectName,o=e.name,Object(b.j)("/api/alm_integrations/import_azure_project",{almSetting:r,projectName:n,repositoryName:o}).catch(g.a)).then(({project:e})=>e).catch(()=>{});var r,n,o;this.mounted&&(this.setState({importing:!1}),a&&this.props.onProjectCreate(a.key))},this.handleSelectRepository=e=>{this.setState({selectedRepository:e})},this.checkPersonalAccessToken=()=>{const{settings:e}=this.state;return e?y(e.key).then(({status:e})=>e):Promise.resolve(!1)},this.handlePersonalAccessTokenCreate=async e=>{const{settings:t}=this.state;if(t&&!(e.length<1)){this.setState({submittingToken:!0,tokenValidationFailed:!1});try{await j(t.key,e);const a=await this.checkPersonalAccessToken();this.mounted&&(this.setState({submittingToken:!1,patIsValid:a,tokenValidationFailed:!a}),a&&(this.cleanUrl(),this.fetchInitialData()))}catch(e){this.mounted&&this.setState({submittingToken:!1})}}},this.state={settings:e.settings[0],importing:!1,loading:!1,loadingRepositories:{},repositories:{},tokenValidationFailed:!1}}componentDidMount(){this.mounted=!0,this.fetchInitialData()}componentDidUpdate(e){0===e.settings.length&&this.props.settings.length>0&&this.setState({settings:1===this.props.settings.length?this.props.settings[0]:void 0},()=>this.fetchInitialData())}componentWillUnmount(){this.mounted=!1}render(){const{canAdmin:e,loadingBindings:t,location:a}=this.props,{importing:n,loading:o,loadingRepositories:s,patIsValid:i,projects:c,repositories:l,searching:p,searchResults:d,searchQuery:m,selectedRepository:h,settings:u,submittingToken:g,tokenValidationFailed:b}=this.state;return r.createElement(K,{canAdmin:e,importing:n,loading:o||t,loadingRepositories:s,onImportRepository:this.handleImportRepository,onOpenProject:this.handleOpenProject,onPersonalAccessTokenCreate:this.handlePersonalAccessTokenCreate,onSearch:this.handleSearchRepositories,onSelectRepository:this.handleSelectRepository,projects:c,repositories:l,searching:p,searchResults:d,searchQuery:m,selectedRepository:h,settings:u,showPersonalAccessTokenForm:!i||Boolean(a.query.resetPat),submittingToken:g,tokenValidationFailed:b})}}var W=a(374),$=a(395),J=a(377),X=a(390);function Y(e){const{importingSlug:t,isLastPage:a,loadingMore:n,repositories:o=[],searching:s,searchQuery:i}=e;return 0!==o.length||0!==i.length||s?r.createElement("div",{className:"boxed-group big-padded create-project-import"},r.createElement(E.a,{className:"spacer",loading:s,minLength:3,onChange:e.onSearch,placeholder:Object(l.k)("onboarding.create_project.search_prompt")}),r.createElement("hr",null),0===o.length?r.createElement("div",{className:"padded"},Object(l.k)("no_results")):r.createElement("table",{className:"data zebra zebra-hover"},r.createElement("tbody",null,o.map(a=>{return r.createElement("tr",{key:a.uuid},r.createElement("td",null,r.createElement(W.a,{overlay:a.slug},r.createElement("strong",{className:"project-name display-inline-block text-ellipsis"},a.sqProjectKey?r.createElement(k.c,{to:Object(p.A)(a.sqProjectKey)},r.createElement($.a,{className:"spacer-right",qualifier:X.a.Project}),a.name):a.name)),r.createElement("br",null),r.createElement(W.a,{overlay:a.projectKey},r.createElement("span",{className:"text-muted project-path display-inline-block text-ellipsis"},a.projectKey))),r.createElement("td",null,r.createElement("a",{className:"display-inline-flex-center big-spacer-right",href:(n=a.workspace,o=a.slug,"https://bitbucket.org/".concat(n,"/").concat(o)),rel:"noopener noreferrer",target:"_blank"},r.createElement(w.a,{className:"little-spacer-right"}),Object(l.k)("onboarding.create_project.bitbucketcloud.link"))),a.sqProjectKey?r.createElement("td",null,r.createElement("span",{className:"display-flex-center display-flex-justify-end already-set-up"},r.createElement(B.a,{className:"little-spacer-right",size:12}),Object(l.k)("onboarding.create_project.repository_imported"))):r.createElement("td",{className:"text-right"},r.createElement(v.a,{disabled:Boolean(t),onClick:()=>{e.onImport(a.slug)}},Object(l.k)("onboarding.create_project.set_up"),t===a.slug&&r.createElement(S.a,{className:"spacer-left"}))));var n,o}))),r.createElement("footer",{className:"spacer-top note text-center"},a&&Object(l.l)("x_of_y_shown",Object(J.formatMeasure)(o.length,"INT",null),Object(J.formatMeasure)(o.length,"INT",null)),!a&&r.createElement(v.a,{className:"spacer-left",disabled:n,"data-test":"show-more",onClick:e.onLoadMore},Object(l.k)("show_more")),n&&r.createElement(S.a,{className:"text-bottom spacer-left position-absolute"}))):r.createElement(_.a,{className:"spacer-top",variant:"warning"},r.createElement(f.FormattedMessage,{defaultMessage:Object(l.k)("onboarding.create_project.bitbucketcloud.no_projects"),id:"onboarding.create_project.bitbucketcloud.no_projects",values:{link:r.createElement(k.c,{to:{pathname:"/projects/create",query:{mode:x.BitbucketCloud,resetPat:1}}},Object(l.k)("onboarding.create_project.update_your_token"))}}))}function Z(e,t=""){return e===d.a.BitbucketServer?"".concat(t.replace(/\/$/,""),"/plugins/servlet/access-tokens/add"):e===d.a.BitbucketCloud?"https://bitbucket.org/account/settings/app-passwords/new":e===d.a.GitLab?"https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html":""}class ee extends r.PureComponent{constructor(e){super(e),this.mounted=!1,this.handleUsernameChange=e=>{this.setState({touched:!0,username:e.target.value})},this.handlePasswordChange=e=>{this.setState({touched:!0,password:e.target.value})},this.handleSubmit=async e=>{const{password:t,username:a}=this.state,{almSetting:{key:r}}=this.props;if(e.preventDefault(),t){this.setState({submitting:!0}),await j(r,t,a).catch(()=>{});const{status:e,error:n}=await y(r).then(({status:e,error:t})=>({status:e,error:t})).catch(()=>({status:!1,error:Object(l.k)("default_error_message")}));this.mounted&&e?(this.setState({checkingPat:!1,touched:!1,password:"",submitting:!1,username:"",validationFailed:!1}),this.props.onPersonalAccessTokenCreated()):this.mounted&&this.setState({submitting:!1,touched:!1,validationFailed:!0,validationErrorMessage:n})}},this.state={checkingPat:!1,touched:!1,password:"",submitting:!1,validationFailed:!1}}async componentDidMount(){const{almSetting:{key:e},resetPat:t}=this.props;if(this.mounted=!0,!t){this.setState({checkingPat:!0});const{patIsValid:t,error:a}=await y(e).then(({status:e,error:t})=>({patIsValid:e,error:t})).catch(()=>({patIsValid:status,error:Object(l.k)("default_error_message")}));t&&this.props.onPersonalAccessTokenCreated(),this.mounted&&(a==="personal access token for '".concat(e,"' is missing")?this.setState({checkingPat:!1}):this.setState({checkingPat:!1,validationFailed:!0,validationErrorMessage:a}))}}componentWillUnmount(){this.mounted=!1}render(){const{almSetting:{alm:e,url:t}}=this.props,{checkingPat:a,submitting:n,touched:o,password:s,username:i,validationFailed:c,validationErrorMessage:p}=this.state;if(a)return r.createElement(S.a,{className:"spacer-left",loading:!0});const m=e===d.a.BitbucketCloud?".bitbucketcloud":"",h=c&&!o,u=Boolean(s)&&(e!==d.a.BitbucketCloud||Boolean(i)),g=h||n||!u,b=null!=p?p:Object(l.k)("onboarding.create_project.pat_incorrect",e);return r.createElement("div",{className:"display-flex-start"},r.createElement("form",{className:"width-50",onSubmit:this.handleSubmit},r.createElement("h2",{className:"big"},Object(l.k)("onboarding.create_project.pat_form.title",e)),r.createElement("p",{className:"big-spacer-top big-spacer-bottom"},Object(l.k)("onboarding.create_project.pat_form.help",e)),e===d.a.BitbucketCloud&&r.createElement(z.a,{error:void 0,id:"enter_username_validation",isInvalid:!1,isValid:!1,label:Object(l.k)("onboarding.create_project.enter_username"),required:!0},r.createElement("input",{autoFocus:!0,className:N("input-super-large",{"is-invalid":h}),id:"username",minLength:1,name:"username",value:i,onChange:this.handleUsernameChange,type:"text"})),r.createElement(z.a,{error:b,id:"personal_access_token_validation",isInvalid:!1,isValid:!1,label:Object(l.k)("onboarding.create_project.enter_pat".concat(m)),required:!0},r.createElement("input",{autoFocus:e!==d.a.BitbucketCloud,className:N("input-super-large",{"is-invalid":h}),id:"personal_access_token",minLength:1,value:s,onChange:this.handlePasswordChange,type:"text"})),r.createElement(z.a,{error:b,id:"personal_access_token_submit",isInvalid:h,isValid:!1,label:null},r.createElement(v.h,{disabled:g},Object(l.k)("save")),r.createElement(S.a,{className:"spacer-left",loading:n}))),r.createElement(_.a,{className:"big-spacer-left width-50",display:"block",variant:"info"},e===d.a.BitbucketCloud&&r.createElement(r.Fragment,null,r.createElement("h3",null,Object(l.k)("onboarding.create_project.pat_help.instructions_username.bitbucketcloud.title")),r.createElement("p",{className:"big-spacer-top big-spacer-bottom"},Object(l.k)("onboarding.create_project.pat_help.instructions_username.bitbucketcloud")),r.createElement("div",{className:"text-middle big-spacer-bottom"},r.createElement("img",{alt:"",className:"spacer-right",height:"16",src:"".concat(Object(O.getBaseUrl)(),"/images/alm/").concat(d.a.BitbucketServer,".svg")}),r.createElement("a",{href:"https://bitbucket.org/account/settings/",rel:"noopener noreferrer",target:"_blank"},Object(l.k)("onboarding.create_project.pat_help.instructions_username.bitbucketcloud.link")))),r.createElement("h3",null,Object(l.k)("onboarding.create_project.pat_help".concat(m,".title"))),r.createElement("p",{className:"big-spacer-top big-spacer-bottom"},r.createElement(f.FormattedMessage,{id:"onboarding.create_project.pat_help.instructions",defaultMessage:Object(l.k)("onboarding.create_project.pat_help".concat(m,".instructions")),values:{alm:Object(l.k)("onboarding.alm",e)}})),(t||e===d.a.BitbucketCloud)&&r.createElement("div",{className:"text-middle"},r.createElement("img",{alt:"",className:"spacer-right",height:"16",src:"".concat(Object(O.getBaseUrl)(),"/images/alm/").concat(e===d.a.BitbucketCloud?d.a.BitbucketServer:e,".svg")}),r.createElement("a",{href:Z(e,t),rel:"noopener noreferrer",target:"_blank"},Object(l.k)("onboarding.create_project.pat_help".concat(m,".link")))),r.createElement("p",{className:"big-spacer-top big-spacer-bottom"},Object(l.k)("onboarding.create_project.pat_help.instructions2",e)),r.createElement("ul",null,e===d.a.BitbucketServer&&r.createElement("li",null,r.createElement(f.FormattedMessage,{defaultMessage:Object(l.k)("onboarding.create_project.pat_help.bbs_permission_projects"),id:"onboarding.create_project.pat_help.bbs_permission_projects",values:{perm:r.createElement("strong",null,Object(l.k)("onboarding.create_project.pat_help.read_permission"))}})),(e===d.a.BitbucketServer||e===d.a.BitbucketCloud)&&r.createElement("li",null,r.createElement(f.FormattedMessage,{defaultMessage:Object(l.k)("onboarding.create_project.pat_help.bbs_permission_repos"),id:"onboarding.create_project.pat_help.bbs_permission_repos",values:{perm:r.createElement("strong",null,Object(l.k)("onboarding.create_project.pat_help.read_permission"))}})),e===d.a.GitLab&&r.createElement("li",{className:"spacer-bottom"},r.createElement("strong",null,Object(l.k)("onboarding.create_project.pat_help.gitlab.read_api_permission"))))))}}function te(e){const{importingSlug:t,isLastPage:a,settings:n,canAdmin:o,loading:s,loadingMore:i,repositories:c,resetPat:p,searching:m,searchQuery:h,showPersonalAccessTokenForm:u}=e;return r.createElement(r.Fragment,null,r.createElement(H,{title:r.createElement("span",{className:"text-middle"},r.createElement("img",{alt:"",className:"spacer-right",height:"24",src:"".concat(Object(O.getBaseUrl)(),"/images/alm/bitbucket.svg")}),Object(l.k)("onboarding.create_project.bitbucketcloud.title"))}),s&&r.createElement("i",{className:"spinner"}),!s&&!n&&r.createElement(q,{alm:d.a.BitbucketCloud,canAdmin:!!o}),!s&&n&&(u?r.createElement(ee,{almSetting:n,resetPat:p,onPersonalAccessTokenCreated:e.onPersonalAccessTokenCreated}):r.createElement(Y,{importingSlug:t,isLastPage:a,loadingMore:i,searchQuery:h,searching:m,onImport:e.onImport,onSearch:e.onSearch,onLoadMore:e.onLoadMore,repositories:c})))}class ae extends r.PureComponent{constructor(e){super(e),this.mounted=!1,this.handlePersonalAccessTokenCreated=async()=>{this.setState({showPersonalAccessTokenForm:!1}),this.cleanUrl(),this.setState({loading:!0}),await this.fetchData(),this.setState({loading:!1})},this.cleanUrl=()=>{const{location:e,router:t}=this.props;delete e.query.resetPat,t.replace(e)},this.handleError=()=>{this.mounted&&this.setState({projectsPaging:{pageIndex:1,pageSize:30},repositories:[],resetPat:!0,showPersonalAccessTokenForm:!0})},this.handleSearch=e=>{this.setState({searching:!0,projectsPaging:{pageIndex:1,pageSize:30},searchQuery:e},async()=>{await this.fetchData(),this.mounted&&this.setState({searching:!1})})},this.handleLoadMore=()=>{this.setState(e=>({loadingMore:!0,projectsPaging:{pageIndex:e.projectsPaging.pageIndex+1,pageSize:e.projectsPaging.pageSize}}),async()=>{await this.fetchData(!0),this.mounted&&this.setState({loadingMore:!1})})},this.handleImport=async e=>{const{settings:t}=this.state;if(!t)return;this.setState({importingSlug:e});const a=await function(e,t){return Object(b.j)("/api/alm_integrations/import_bitbucketcloud_repo",{almSetting:e,repositorySlug:t}).catch(g.a)}(t.key,e).catch(()=>{});this.mounted&&(this.setState({importingSlug:void 0}),a&&this.props.onProjectCreate(a.project.key))},this.state={loading:!1,loadingMore:!1,resetPat:!1,projectsPaging:{pageIndex:1,pageSize:30},repositories:[],searching:!1,searchQuery:"",settings:e.settings[0],showPersonalAccessTokenForm:!0}}componentDidMount(){this.mounted=!0}componentDidUpdate(e){0===e.settings.length&&this.props.settings.length>0&&this.setState({settings:this.props.settings[0]},()=>this.fetchData())}async fetchData(e=!1){const{settings:t,searchQuery:a,projectsPaging:{pageIndex:r,pageSize:n},showPersonalAccessTokenForm:o}=this.state;if(t&&!o){const{isLastPage:o,repositories:s}=await function(e,t,a,r){return Object(b.d)("/api/alm_integrations/search_bitbucketcloud_repos",{almSetting:e,repositoryName:t,p:r,ps:a})}(t.key,a,n,r).catch(()=>(this.handleError(),{isLastPage:void 0,repositories:void 0}));this.mounted&&void 0!==o&&void 0!==s&&(e?this.setState(e=>({isLastPage:o,repositories:[...e.repositories,...s]})):this.setState({isLastPage:o,repositories:s}))}}render(){const{canAdmin:e,loadingBindings:t,location:a}=this.props,{importingSlug:n,isLastPage:o=!0,settings:s,loading:i,loadingMore:c,repositories:l,showPersonalAccessTokenForm:p,resetPat:d,searching:m,searchQuery:h}=this.state;return r.createElement(te,{importingSlug:n,isLastPage:o,settings:s,canAdmin:e,loadingMore:c,loading:i||t,onImport:this.handleImport,onLoadMore:this.handleLoadMore,onPersonalAccessTokenCreated:this.handlePersonalAccessTokenCreated,onSearch:this.handleSearch,repositories:l,searching:m,searchQuery:h,resetPat:d||Boolean(a.query.resetPat),showPersonalAccessTokenForm:p||Boolean(a.query.resetPat)})}}var re=a(405),ne=a.n(re),oe=a(470),se=a.n(oe);function ie(e){var t;const{disableRepositories:a,open:n,project:o,repositories:s,selectedRepository:i,showingAllRepositories:c}=e,d=s.length,m=null!==(t=null==o?void 0:o.name)&&void 0!==t?t:Object(l.k)("search_results");return r.createElement(I.a,{className:N("big-spacer-bottom",{open:n,"not-clickable":!e.onClick,"no-hover":!e.onClick}),onClick:e.onClick?e.onClick:()=>{},open:n,title:r.createElement("h3",null,m)},n&&r.createElement(r.Fragment,null,r.createElement("div",{className:"display-flex-wrap"},0===d&&r.createElement(_.a,{variant:"warning"},r.createElement(f.FormattedMessage,{defaultMessage:Object(l.k)("onboarding.create_project.no_bbs_repos"),id:"onboarding.create_project.no_bbs_repos",values:{link:r.createElement(k.c,{to:{pathname:"/projects/create",query:{mode:x.BitbucketServer,resetPat:1}}},Object(l.k)("onboarding.create_project.update_your_token"))}})),s.map(t=>t.sqProjectKey?r.createElement("div",{className:"display-flex-start spacer-right spacer-bottom create-project-import-bbs-repo",key:t.id},r.createElement(B.a,{className:"spacer-right",fill:A.colors.green,size:14}),r.createElement("div",{className:"overflow-hidden"},r.createElement("div",{className:"little-spacer-bottom text-ellipsis"},r.createElement("strong",{title:t.name},r.createElement(k.c,{to:Object(p.A)(t.sqProjectKey)},t.name))),r.createElement("em",null,Object(l.k)("onboarding.create_project.repository_imported")))):r.createElement(L.a,{checked:(null==i?void 0:i.id)===t.id,className:N("display-flex-start spacer-right spacer-bottom create-project-import-bbs-repo overflow-hidden",{disabled:a,"text-muted":a,"link-no-underline":a}),key:t.id,onCheck:()=>e.onSelectRepository(t),value:String(t.id)},r.createElement("strong",{className:"text-ellipsis",title:t.name},t.name)))),!c&&d>0&&r.createElement(_.a,{variant:"warning"},Object(l.l)("onboarding.create_project.only_showing_X_first_repos",d))))}function ce(e){const{disableRepositories:t,projects:a,projectRepositories:n,selectedRepository:o}=e,[s,i]=r.useState(a.length>0?[a[0].key]:[]),c=a.length<=s.length;return r.createElement(r.Fragment,null,r.createElement("div",{className:"overflow-hidden spacer-bottom"},r.createElement(v.c,{className:"pull-right",onClick:()=>i(c?[]:a.map(e=>e.key))},c?Object(l.k)("collapse_all"):Object(l.k)("expand_all"))),a.map(a=>{const c=s.includes(a.key),{allShown:l,repositories:p=[]}=n[a.key]||{};return r.createElement(ie,{disableRepositories:t,key:a.key,onClick:()=>((e,t)=>{i(e?ne()(s,t):se()([...s,t]))})(c,a.key),onSelectRepository:e.onSelectRepository,open:c,project:a,repositories:p,selectedRepository:o,showingAllRepositories:l})}))}function le(e){const{disableRepositories:t,projects:a,searching:n,searchResults:o=[],selectedRepository:s}=e;if(0===o.length&&!n)return r.createElement(_.a,{className:"big-spacer-top",variant:"warning"},Object(l.k)("onboarding.create_project.no_bbs_repos.filter"));const i=a.filter(e=>o.some(t=>t.projectKey===e.key)),c=i.map(e=>e.key),p=o.filter(e=>!c.includes(e.projectKey));return r.createElement("div",{className:"big-spacer-top"},r.createElement(S.a,{loading:n},p.length>0&&r.createElement(ie,{disableRepositories:t,onSelectRepository:e.onSelectRepository,open:!0,repositories:p,selectedRepository:s,showingAllRepositories:!0}),i.map(a=>{const n=o.filter(e=>e.projectKey===a.key);return r.createElement(ie,{disableRepositories:t,key:a.key,onSelectRepository:e.onSelectRepository,open:!0,project:a,repositories:n,selectedRepository:s,showingAllRepositories:!0})})))}function pe(e){const{disableRepositories:t,projects:a=[],projectRepositories:n={},searchResults:o,searching:s,selectedRepository:i}=e;return 0===a.length?r.createElement(_.a,{className:"spacer-top",variant:"warning"},r.createElement(f.FormattedMessage,{defaultMessage:Object(l.k)("onboarding.create_project.no_bbs_projects"),id:"onboarding.create_project.no_bbs_projects",values:{link:r.createElement(k.c,{to:{pathname:"/projects/create",query:{mode:x.BitbucketServer,resetPat:1}}},Object(l.k)("onboarding.create_project.update_your_token"))}})):r.createElement("div",{className:"create-project-import-bbs"},r.createElement(E.a,{onChange:e.onSearch,placeholder:Object(l.k)("onboarding.create_project.search_repositories_by_name")}),s||o?r.createElement(le,{disableRepositories:t,onSelectRepository:e.onSelectRepository,projects:a,searchResults:o,searching:s,selectedRepository:i}):r.createElement(ce,{disableRepositories:t,onSelectRepository:e.onSelectRepository,projectRepositories:n,projects:a,selectedRepository:i}))}function de(e){const{bitbucketSetting:t,canAdmin:a,importing:n,loading:o,projects:s,projectRepositories:i,selectedRepository:c,searching:p,searchResults:m,showPersonalAccessTokenForm:h,resetPat:u}=e;return r.createElement(r.Fragment,null,r.createElement(H,{additionalActions:!h&&r.createElement("div",{className:"display-flex-center pull-right"},r.createElement(S.a,{className:"spacer-right",loading:n}),r.createElement(v.a,{className:"button-large button-primary",disabled:!c||n,onClick:e.onImportRepository},Object(l.k)("onboarding.create_project.import_selected_repo"))),title:r.createElement("span",{className:"text-middle"},r.createElement("img",{alt:"",className:"spacer-right",height:"24",src:"".concat(Object(O.getBaseUrl)(),"/images/alm/bitbucket.svg")}),Object(l.k)("onboarding.create_project.from_bbs"))}),o&&r.createElement("i",{className:"spinner"}),!o&&!t&&r.createElement(q,{alm:d.a.BitbucketServer,canAdmin:!!a}),!o&&t&&(h?r.createElement(ee,{almSetting:t,onPersonalAccessTokenCreated:e.onPersonalAccessTokenCreated,resetPat:u}):r.createElement(pe,{disableRepositories:n,onSearch:e.onSearch,onSelectRepository:e.onSelectRepository,projectRepositories:i,projects:s,searchResults:m,searching:p,selectedRepository:c})))}function me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function he(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ue extends r.PureComponent{constructor(e){super(e),this.mounted=!1,this.fetchInitialData=async()=>{const{showPersonalAccessTokenForm:e}=this.state;if(!e){this.setState({loading:!0});const e=await this.fetchBitbucketProjects().catch(()=>{});let t;e&&e.length>0&&(t=await this.fetchBitbucketRepositories(e).catch(()=>{})),this.mounted&&this.setState({projects:e,projectRepositories:t,loading:!1})}},this.fetchBitbucketProjects=()=>{const{bitbucketSetting:e}=this.state;return e?(t=e.key,Object(b.d)("/api/alm_integrations/list_bitbucketserver_projects",{almSetting:t})).then(({projects:e})=>e):Promise.resolve(void 0);var t},this.fetchBitbucketRepositories=e=>{const{bitbucketSetting:t}=this.state;return t?Promise.all(e.map(e=>{return(a=t.key,r=e.name,Object(b.d)("/api/alm_integrations/search_bitbucketserver_repos",{almSetting:a,projectName:r})).then(({isLastPage:t,repositories:a})=>{const r=a.filter(t=>t.projectKey===e.key);return{repositories:r,isLastPage:t||r.length<25,projectKey:e.key}});var a,r})).then(e=>e.reduce((e,{isLastPage:t,projectKey:a,repositories:r})=>function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?me(Object(a),!0).forEach((function(t){he(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):me(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{[a]:{allShown:t,repositories:r}}),{})):Promise.resolve(void 0)},this.cleanUrl=()=>{const{location:e,router:t}=this.props;delete e.query.resetPat,t.replace(e)},this.handlePersonalAccessTokenCreated=async()=>{this.setState({showPersonalAccessTokenForm:!1}),this.cleanUrl(),await this.fetchInitialData()},this.handleImportRepository=()=>{const{bitbucketSetting:e,selectedRepository:t}=this.state;var a,r,n;e&&t&&(this.setState({importing:!0}),(a=e.key,r=t.projectKey,n=t.slug,Object(b.j)("/api/alm_integrations/import_bitbucketserver_project",{almSetting:a,projectKey:r,repositorySlug:n}).catch(g.a)).then(({project:{key:e}})=>{this.mounted&&(this.setState({importing:!1}),this.props.onProjectCreate(e))}).catch(()=>{this.mounted&&this.setState({importing:!1})}))},this.handleSearch=e=>{const{bitbucketSetting:t}=this.state;var a,r;t&&(e?(this.setState({searching:!0,selectedRepository:void 0}),(a=t.key,r=e,Object(b.d)("/api/alm_integrations/search_bitbucketserver_repos",{almSetting:a,repositoryName:r})).then(({repositories:e})=>{this.mounted&&this.setState({searching:!1,searchResults:e})}).catch(()=>{this.mounted&&this.setState({searching:!1})})):this.setState({searching:!1,searchResults:void 0,selectedRepository:void 0}))},this.handleSelectRepository=e=>{this.setState({selectedRepository:e})},this.state={bitbucketSetting:e.bitbucketSettings[0],importing:!1,loading:!1,searching:!1,showPersonalAccessTokenForm:!0}}componentDidMount(){this.mounted=!0}componentDidUpdate(e){0===e.bitbucketSettings.length&&this.props.bitbucketSettings.length>0&&this.setState({bitbucketSetting:this.props.bitbucketSettings[0]},()=>this.fetchInitialData())}componentWillUnmount(){this.mounted=!1}render(){const{canAdmin:e,loadingBindings:t,location:a}=this.props,{bitbucketSetting:n,importing:o,loading:s,projectRepositories:i,projects:c,searching:l,searchResults:p,selectedRepository:d,showPersonalAccessTokenForm:m}=this.state;return r.createElement(de,{bitbucketSetting:n,canAdmin:e,importing:o,loading:s||t,onImportRepository:this.handleImportRepository,onPersonalAccessTokenCreated:this.handlePersonalAccessTokenCreated,onSearch:this.handleSearch,onSelectRepository:this.handleSelectRepository,projectRepositories:i,projects:c,resetPat:Boolean(a.query.resetPat),searchResults:p,searching:l,selectedRepository:d,showPersonalAccessTokenForm:m||Boolean(a.query.resetPat)})}}var ge=a(930);function be(e,t,a,n=!1){const{almCounts:o,appState:{canAdmin:s},loadingBindings:i}=e,c=o[d.a.BitbucketCloud]>0,p=t===d.a.BitbucketServer,m=p?o[d.a.BitbucketServer]+o[d.a.BitbucketCloud]:o[t],h=m>0,u=m>1,g=i||u||!h&&!s;let b="";return u?b=Object(l.l)("onboarding.create_project.too_many_alm_instances_X",Object(l.k)("alm",t)):h||(b=s?Object(l.k)("onboarding.create_project.alm_not_configured.admin"):Object(l.k)("onboarding.create_project.alm_not_configured")),r.createElement("div",{className:"display-flex-column"},r.createElement("button",{className:N("button button-huge display-flex-column create-project-mode-type-alm",{disabled:g,"big-spacer-right":!n}),disabled:g,onClick:()=>u||!h&&!s?null:!h&&s?e.onConfigMode(t):e.onSelectMode(p&&c?x.BitbucketCloud:a),type:"button"},r.createElement("img",{alt:"",height:50,src:"".concat(Object(O.getBaseUrl)(),"/images/alm/").concat(t,".svg")}),r.createElement("div",{className:"medium big-spacer-top abs-height-50 display-flex-center"},Object(l.k)("onboarding.create_project.select_method",t)),i&&r.createElement("span",null,Object(l.k)("onboarding.create_project.check_alm_supported"),r.createElement("i",{className:"little-spacer-left spinner"})),!i&&b&&r.createElement("p",{className:"text-muted small spacer-top",style:{lineHeight:1.5}},b)))}var je=Object(c.a)((function(e){const{appState:{canAdmin:t},almCounts:a}=e,n=Object.values(a).reduce((e,t)=>e+t);return r.createElement(r.Fragment,null,r.createElement("h1",{className:"huge-spacer-top huge-spacer-bottom"},Object(l.k)("onboarding.create_project.select_method")),r.createElement("p",null,Object(l.k)("onboarding.create_project.select_method.devops_platform")),0===n&&t&&r.createElement("p",{className:"spacer-top"},Object(l.k)("onboarding.create_project.select_method.no_alm_yet.admin")),r.createElement("div",{className:"big-spacer-top huge-spacer-bottom display-flex-center"},be(e,d.a.Azure,x.AzureDevOps),be(e,d.a.BitbucketServer,x.BitbucketServer),be(e,d.a.GitHub,x.GitHub),be(e,d.a.GitLab,x.GitLab,!0)),r.createElement("p",{className:"big-spacer-bottom"},Object(l.k)("onboarding.create_project.select_method.manually")),r.createElement("button",{className:"button button-huge display-flex-column create-project-mode-type-manual",onClick:()=>e.onSelectMode(x.Manual),type:"button"},r.createElement(ge.a,{size:50}),r.createElement("div",{className:"medium big-spacer-top"},Object(l.k)("onboarding.create_project.select_method.manual"))))})),ye=a(422),fe=a.n(ye),ke=a(655);function ve({key:e,name:t}){return{value:e,label:t}}const Ee=e=>t=>Promise.resolve(e.filter(e=>!t||e.name.includes(t)).map(ve));function _e(e){const{canAdmin:t,error:a,importing:n,loadingBindings:o,loadingOrganizations:s,organizations:i,selectedOrganization:c,selectedRepository:d}=e;return o?r.createElement(S.a,null):r.createElement("div",null,r.createElement(H,{additionalActions:c&&r.createElement("div",{className:"display-flex-center pull-right"},r.createElement(S.a,{className:"spacer-right",loading:n}),r.createElement(v.a,{className:"button-large button-primary",disabled:!d||n,onClick:e.onImportRepository},Object(l.k)("onboarding.create_project.import_selected_repo"))),title:r.createElement("span",{className:"text-middle display-flex-center"},r.createElement("img",{alt:"",className:"spacer-right",height:24,src:"".concat(Object(O.getBaseUrl)(),"/images/alm/github.svg")}),Object(l.k)("onboarding.create_project.github.title"))}),a?r.createElement("div",{className:"display-flex-justify-center"},r.createElement("div",{className:"boxed-group padded width-50 huge-spacer-top"},r.createElement("h2",{className:"big-spacer-bottom"},Object(l.k)("onboarding.create_project.github.warning.title")),r.createElement(_.a,{variant:"warning"},t?r.createElement(f.FormattedMessage,{id:"onboarding.create_project.github.warning.message_admin",defaultMessage:Object(l.k)("onboarding.create_project.github.warning.message_admin"),values:{link:r.createElement(k.c,{to:"/admin/settings?category=almintegration"},Object(l.k)("onboarding.create_project.github.warning.message_admin.link"))}}):Object(l.k)("onboarding.create_project.github.warning.message")))):r.createElement(S.a,{loading:s},r.createElement("div",{className:"form-field"},r.createElement("label",null,Object(l.k)("onboarding.create_project.github.choose_organization")),i.length>0?r.createElement(ke.a,{defaultOptions:i.map(ve),onSearch:Ee(i),minimumQueryLength:0,onSelect:({value:t})=>e.onSelectOrganization(t),value:c&&ve(c)}):!s&&r.createElement(_.a,{className:"spacer-top",variant:"error"},t?r.createElement(f.FormattedMessage,{id:"onboarding.create_project.github.no_orgs_admin",defaultMessage:Object(l.k)("onboarding.create_project.github.no_orgs_admin"),values:{link:r.createElement(k.c,{to:"/admin/settings?category=almintegration"},Object(l.k)("onboarding.create_project.github.warning.message_admin.link"))}}):Object(l.k)("onboarding.create_project.github.no_orgs")))),function(e){const{importing:t,loadingRepositories:a,repositories:n,repositoryPaging:o,searchQuery:s,selectedOrganization:i,selectedRepository:c}=e,d=e=>!!e.sqProjectKey||a||t;return i&&n&&r.createElement("div",{className:"boxed-group padded display-flex-wrap"},r.createElement("div",{className:"width-100"},r.createElement(E.a,{className:"big-spacer-bottom",onChange:e.onSearch,placeholder:Object(l.k)("onboarding.create_project.search_repositories"),value:s})),0===n.length?r.createElement("div",{className:"padded"},r.createElement(S.a,{loading:a},Object(l.k)("no_results"))):n.map(t=>{return r.createElement(L.a,{className:"spacer-top spacer-bottom padded create-project-github-repository",key:t.key,checked:(a=t,!!a.sqProjectKey||!!c&&c.key===a.key),disabled:d(t),value:t.key,onCheck:e.onSelectRepository},r.createElement("div",{className:"big overflow-hidden max-width-100",title:t.name},r.createElement("div",{className:"text-ellipsis"},t.sqProjectKey?r.createElement("div",{className:"display-flex-center max-width-100"},r.createElement(k.c,{className:"display-flex-center max-width-60",to:Object(p.A)(t.sqProjectKey)},r.createElement($.a,{className:"spacer-right",qualifier:X.a.Project}),r.createElement("span",{className:"text-ellipsis"},t.name)),r.createElement("em",{className:"display-flex-center small big-spacer-left flex-0"},r.createElement("span",{className:"text-muted-2"},Object(l.k)("onboarding.create_project.repository_imported")),r.createElement(B.a,{className:"little-spacer-left",size:12,fill:A.colors.green}))):t.name),t.url&&r.createElement("a",{className:"notice small display-flex-center little-spacer-top",onClick:e=>e.stopPropagation(),target:"_blank",href:t.url,rel:"noopener noreferrer"},Object(l.k)("onboarding.create_project.see_on_github"))));var a}),r.createElement("div",{className:"display-flex-justify-center width-100"},r.createElement(M.a,{count:n.length,total:o.total,loadMore:e.onLoadMore,loading:a})))}(e))}class Se extends r.Component{constructor(e){super(e),this.mounted=!1,this.triggerSearch=e=>{const{selectedOrganization:t}=this.state;t&&(this.setState({selectedRepository:void 0}),this.fetchRepositories({organizationKey:t.key,query:e}))},this.handleSelectOrganization=e=>{this.setState(({organizations:t})=>({searchQuery:"",selectedRepository:void 0,selectedOrganization:t.find(t=>t.key===e)})),this.fetchRepositories({organizationKey:e})},this.handleSelectRepository=e=>{this.setState(({repositories:t})=>({selectedRepository:null==t?void 0:t.find(t=>t.key===e)}))},this.handleSearch=e=>{this.setState({searchQuery:e}),this.triggerSearch(e)},this.handleLoadMore=()=>{const{repositoryPaging:e,searchQuery:t,selectedOrganization:a}=this.state;a&&this.fetchRepositories({organizationKey:a.key,page:e.pageIndex+1,query:t})},this.handleImportRepository=async()=>{const{selectedOrganization:e,selectedRepository:t,settings:a}=this.state;if(a&&e&&t){this.setState({importing:!0});try{const{project:s}=await(r=a.key,n=e.key,o=t.key,Object(b.j)("/api/alm_integrations/import_github_project",{almSetting:r,organization:n,repositoryKey:o}).catch(g.a));this.props.onProjectCreate(s.key)}finally{this.mounted&&this.setState({importing:!1})}}var r,n,o},this.state={error:!1,importing:!1,loadingOrganizations:!0,loadingRepositories:!1,organizations:[],repositories:[],repositoryPaging:{pageSize:30,total:0,pageIndex:1},searchQuery:"",settings:e.settings[0]},this.triggerSearch=fe()(this.triggerSearch,250)}componentDidMount(){this.mounted=!0,this.initialize()}componentDidUpdate(e){0===e.settings.length&&this.props.settings.length>0&&this.setState({settings:this.props.settings[0]},()=>this.initialize())}componentWillUnmount(){this.mounted=!1}async initialize(){var e;const{location:t,router:a}=this.props,{settings:r}=this.state;if(!r||!r.url)return void this.setState({error:!0});this.setState({error:!1});const n=null===(e=t.query)||void 0===e?void 0:e.code;try{n?(delete t.query.code,a.replace(t),await this.fetchOrganizations(r,n)):await this.redirectToGithub(r)}catch(e){this.mounted&&this.setState({error:!0})}}async redirectToGithub(e){if(!e.url)return;const{clientId:t}=await(a=e.key,Object(b.d)("/api/alm_integrations/get_github_client_id",{almSetting:a}));var a;if(!t)return void this.setState({error:!0});const r=[{param:"client_id",value:t},{param:"redirect_uri",value:"".concat(Object(p.s)(),"/projects/create?mode=").concat(d.a.GitHub)}].map(({param:e,value:t})=>"".concat(e,"=").concat(t)).join("&");let n;n=e.url.includes("/api/v3")?e.url.replace("/api/v3",""):e.url.replace("api.",""),n=n.replace(/\/$/,""),window.location.replace("".concat(n,"/login/oauth/authorize?").concat(r))}async fetchOrganizations(e,t){const{organizations:a}=await function(e,t){return Object(b.d)("/api/alm_integrations/list_github_organizations",{almSetting:e,token:t}).catch(e=>{e&&400!==e.status&&Object(g.a)(e)})}(e.key,t);this.mounted&&this.setState({loadingOrganizations:!1,organizations:a})}async fetchRepositories(e){const{organizationKey:t,page:a=1,query:r}=e,{settings:n}=this.state;if(n){this.setState({loadingRepositories:!0});try{const e=await function(e){const{almSetting:t,organization:a,pageSize:r,page:n=1,query:o}=e;return Object(b.d)("/api/alm_integrations/list_github_repositories",{almSetting:t,organization:a,p:n,ps:r,q:o||void 0}).catch(g.a)}({almSetting:n.key,organization:t,pageSize:30,page:a,query:r});this.mounted&&this.setState(({repositories:t})=>({loadingRepositories:!1,repositoryPaging:e.paging,repositories:1===a?e.repositories:[...t,...e.repositories]}))}catch(e){this.mounted&&this.setState({loadingRepositories:!1,repositoryPaging:{pageIndex:1,pageSize:30,total:0},repositories:[]})}}else this.setState({error:!0})}render(){const{canAdmin:e,loadingBindings:t}=this.props,{error:a,importing:n,loadingOrganizations:o,loadingRepositories:s,organizations:i,repositoryPaging:c,repositories:l,searchQuery:p,selectedOrganization:d,selectedRepository:m}=this.state;return r.createElement(_e,{canAdmin:e,error:a,importing:n,loadingBindings:t,loadingOrganizations:o,loadingRepositories:s,onImportRepository:this.handleImportRepository,onLoadMore:this.handleLoadMore,onSearch:this.handleSearch,onSelectOrganization:this.handleSelectOrganization,onSelectRepository:this.handleSelectRepository,organizations:i,repositoryPaging:c,searchQuery:p,repositories:l,selectedOrganization:d,selectedRepository:m})}}function Oe(e){const{importingGitlabProjectId:t,loadingMore:a,projects:n=[],projectsPaging:o,searching:s,searchQuery:i}=e;return 0!==n.length||0!==i.length||s?r.createElement("div",{className:"boxed-group big-padded create-project-import"},r.createElement(E.a,{className:"spacer",loading:s,minLength:3,onChange:e.onSearch,placeholder:Object(l.k)("onboarding.create_project.search_prompt")}),r.createElement("hr",null),0===n.length?r.createElement("div",{className:"padded"},Object(l.k)("no_results")):r.createElement("table",{className:"data zebra zebra-hover"},r.createElement("tbody",null,n.map(a=>r.createElement("tr",{key:a.id},r.createElement("td",null,r.createElement(W.a,{overlay:a.slug},r.createElement("strong",{className:"project-name display-inline-block text-ellipsis"},a.sqProjectKey?r.createElement(k.c,{to:Object(p.A)(a.sqProjectKey)},r.createElement($.a,{className:"spacer-right",qualifier:X.a.Project}),a.sqProjectName):a.name)),r.createElement("br",null),r.createElement(W.a,{overlay:a.pathSlug},r.createElement("span",{className:"text-muted project-path display-inline-block text-ellipsis"},a.pathName))),r.createElement("td",null,r.createElement("a",{className:"display-inline-flex-center big-spacer-right",href:a.url,rel:"noopener noreferrer",target:"_blank"},r.createElement(w.a,{className:"little-spacer-right"}),Object(l.k)("onboarding.create_project.gitlab.link"))),a.sqProjectKey?r.createElement("td",null,r.createElement("span",{className:"display-flex-center display-flex-justify-end already-set-up"},r.createElement(B.a,{className:"little-spacer-right",size:12}),Object(l.k)("onboarding.create_project.repository_imported"))):r.createElement("td",{className:"text-right"},r.createElement(v.a,{disabled:!!t,onClick:()=>e.onImport(a.id)},Object(l.k)("onboarding.create_project.set_up"),t===a.id&&r.createElement(S.a,{className:"spacer-left"}))))))),r.createElement(M.a,{count:n.length,loadMore:e.onLoadMore,loading:a,total:o.total})):r.createElement(_.a,{className:"spacer-top",variant:"warning"},r.createElement(f.FormattedMessage,{defaultMessage:Object(l.k)("onboarding.create_project.gitlab.no_projects"),id:"onboarding.create_project.gitlab.no_projects",values:{link:r.createElement(k.c,{to:{pathname:"/projects/create",query:{mode:x.GitLab,resetPat:1}}},Object(l.k)("onboarding.create_project.update_your_token"))}}))}function Pe(e){const{canAdmin:t,importingGitlabProjectId:a,loading:n,loadingMore:o,projects:s,projectsPaging:i,resetPat:c,searching:p,searchQuery:m,settings:h,showPersonalAccessTokenForm:u}=e;return r.createElement(r.Fragment,null,r.createElement(H,{title:r.createElement("span",{className:"text-middle"},r.createElement("img",{alt:"",className:"spacer-right",height:"24",src:"".concat(Object(O.getBaseUrl)(),"/images/alm/gitlab.svg")}),Object(l.k)("onboarding.create_project.gitlab.title"))}),n&&r.createElement("i",{className:"spinner"}),!n&&!h&&r.createElement(q,{alm:d.a.GitLab,canAdmin:!!t}),!n&&h&&(u?r.createElement(ee,{almSetting:h,resetPat:c,onPersonalAccessTokenCreated:e.onPersonalAccessTokenCreated}):r.createElement(Oe,{importingGitlabProjectId:a,loadingMore:o,onImport:e.onImport,onLoadMore:e.onLoadMore,onSearch:e.onSearch,projects:s,projectsPaging:i,searching:p,searchQuery:m})))}class Ne extends r.PureComponent{constructor(e){super(e),this.mounted=!1,this.fetchInitialData=async()=>{const{showPersonalAccessTokenForm:e}=this.state;if(!e){this.setState({loading:!0});const e=await this.fetchProjects();if(this.mounted&&e){const{projects:t,projectsPaging:a}=e;this.setState({loading:!1,projects:t,projectsPaging:a})}else this.setState({loading:!1})}},this.handleError=()=>{this.mounted&&this.setState({resetPat:!0,showPersonalAccessTokenForm:!0})},this.fetchProjects=async(e=1,t)=>{const{settings:a}=this.state;if(!a)return Promise.resolve(void 0);try{return await function(e){const{almSetting:t,pageSize:a,page:r,query:n}=e;return Object(b.d)("/api/alm_integrations/search_gitlab_repos",{almSetting:t,projectName:n||void 0,p:r,ps:a}).then(({repositories:e,paging:t})=>({projects:e,projectsPaging:t})).catch(g.a)}({almSetting:a.key,page:e,pageSize:30,query:t})}catch(e){return this.handleError()}},this.doImport=async e=>{const{settings:t}=this.state;if(!t)return Promise.resolve(void 0);try{return await function(e){const{almSetting:t,gitlabProjectId:a}=e;return Object(b.j)("/api/alm_integrations/import_gitlab_project",{almSetting:t,gitlabProjectId:a}).catch(g.a)}({almSetting:t.key,gitlabProjectId:e})}catch(e){return this.handleError()}},this.handleImport=async e=>{this.setState({importingGitlabProjectId:e});const t=await this.doImport(e);this.mounted&&(this.setState({importingGitlabProjectId:void 0}),t&&this.props.onProjectCreate(t.project.key))},this.handleLoadMore=async()=>{this.setState({loadingMore:!0});const{projectsPaging:{pageIndex:e},searchQuery:t}=this.state,a=await this.fetchProjects(e+1,t);this.mounted&&this.setState(({projects:e=[],projectsPaging:t})=>({loadingMore:!1,projects:a?[...e,...a.projects]:e,projectsPaging:a?a.projectsPaging:t}))},this.handleSearch=async e=>{this.setState({searching:!0,searchQuery:e});const t=await this.fetchProjects(1,e);this.mounted&&this.setState(({projects:e,projectsPaging:a})=>({searching:!1,projects:t?t.projects:e,projectsPaging:t?t.projectsPaging:a}))},this.cleanUrl=()=>{const{location:e,router:t}=this.props;delete e.query.resetPat,t.replace(e)},this.handlePersonalAccessTokenCreated=async()=>{this.setState({showPersonalAccessTokenForm:!1,resetPat:!1}),this.cleanUrl(),await this.fetchInitialData()},this.state={loading:!1,loadingMore:!1,projectsPaging:{pageIndex:1,total:0,pageSize:30},resetPat:!1,showPersonalAccessTokenForm:!0,searching:!1,searchQuery:"",settings:1===e.settings.length?e.settings[0]:void 0}}componentDidMount(){this.mounted=!0}componentDidUpdate(e){0===e.settings.length&&this.props.settings.length>0&&this.setState({settings:1===this.props.settings.length?this.props.settings[0]:void 0},()=>this.fetchInitialData())}componentWillUnmount(){this.mounted=!1}render(){const{canAdmin:e,loadingBindings:t,location:a}=this.props,{importingGitlabProjectId:n,loading:o,loadingMore:s,projects:i,projectsPaging:c,resetPat:l,searching:p,searchQuery:d,settings:m,showPersonalAccessTokenForm:h}=this.state;return r.createElement(Pe,{settings:m,canAdmin:e,importingGitlabProjectId:n,loading:o||t,loadingMore:s,onImport:this.handleImport,onLoadMore:this.handleLoadMore,onPersonalAccessTokenCreated:this.handlePersonalAccessTokenCreated,onSearch:this.handleSearch,projects:i,projectsPaging:c,resetPat:l||Boolean(a.query.resetPat),searching:p,searchQuery:d,showPersonalAccessTokenForm:h||Boolean(a.query.resetPat)})}}var ze=a(425),we=a(852),Ce=a(399),Re=a(853);a(1623);class xe extends r.PureComponent{constructor(e){super(e),this.mounted=!1,this.checkFreeKey=e=>(this.setState({validatingProjectKey:!0}),Object(ze.f)({component:e}).then(t=>{this.mounted&&e===this.state.projectKey&&this.setState({projectKeyError:t?Object(l.k)("onboarding.create_project.project_key.taken"):void 0,validatingProjectKey:!1})}).catch(()=>{this.mounted&&e===this.state.projectKey&&this.setState({projectKeyError:void 0,validatingProjectKey:!1})})),this.handleFormSubmit=e=>{e.preventDefault();const{state:t}=this;this.canSubmit(t)&&(this.setState({submitting:!0}),Object(ze.c)({project:t.projectKey,name:(t.projectName||t.projectKey).trim()}).then(({project:e})=>this.props.onProjectCreate(e.key),()=>{this.mounted&&this.setState({submitting:!1})}))},this.handleProjectKeyChange=(e,t=!1)=>{const a=this.validateKey(e);this.setState({projectKey:e,projectKeyError:a,projectKeyTouched:t}),void 0===a&&this.checkFreeKey(e)},this.handleProjectNameChange=(e,t=!1)=>{this.setState({projectName:e,projectNameError:this.validateName(e),projectNameTouched:t},()=>{if(!this.state.projectKeyTouched){const e=this.state.projectName.trim().replace(Re.a,"-");this.handleProjectKeyChange(e)}})},this.validateKey=e=>{const t=Object(Re.b)(e);return t===X.b.Valid?void 0:Object(l.k)("onboarding.create_project.project_key.error",t)},this.validateName=e=>0===e.length?Object(l.k)("onboarding.create_project.display_name.error.empty"):e.length>255?Object(l.k)("onboarding.create_project.display_name.error.too_long"):void 0,this.state={projectKey:"",projectName:"",submitting:!1,validatingProjectKey:!1},this.checkFreeKey=fe()(this.checkFreeKey,250)}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}canSubmit(e){const{projectKey:t,projectKeyError:a,projectName:r,projectNameError:n}=e;return Boolean(void 0===a&&void 0===n&&t.length>0&&r.length>0)}render(){const{projectKey:e,projectKeyError:t,projectKeyTouched:a,projectName:n,projectNameError:o,projectNameTouched:s,validatingProjectKey:i,submitting:c}=this.state,{branchesEnabled:p}=this.props,d=!(!a&&!s),m=d&&void 0!==o,h=d&&void 0===o;return r.createElement(r.Fragment,null,r.createElement(H,{title:Object(l.k)("onboarding.create_project.setup_manually")}),r.createElement("div",{className:"create-project-manual"},r.createElement("div",{className:"flex-1 huge-spacer-right"},r.createElement("form",{className:"manual-project-create",onSubmit:this.handleFormSubmit},r.createElement(Ce.a,{className:"big-spacer-bottom"}),r.createElement(z.a,{className:"form-field",description:Object(l.k)("onboarding.create_project.display_name.description"),error:o,id:"project-name",isInvalid:m,isValid:h,label:Object(l.k)("onboarding.create_project.display_name"),required:!0},r.createElement("input",{className:N("input-super-large",{"is-invalid":m,"is-valid":h}),id:"project-name",maxLength:255,minLength:1,onChange:e=>this.handleProjectNameChange(e.currentTarget.value,!0),type:"text",value:n,autoFocus:!0})),r.createElement(we.a,{error:t,label:Object(l.k)("onboarding.create_project.project_key"),onProjectKeyChange:e=>this.handleProjectKeyChange(e.currentTarget.value,!0),projectKey:e,touched:d,validating:i}),r.createElement(v.h,{disabled:!this.canSubmit(this.state)||c},Object(l.k)("set_up")),r.createElement(S.a,{className:"spacer-left",loading:c})),p&&r.createElement(_.a,{variant:"info",display:"inline",className:"big-spacer-top"},Object(l.k)("onboarding.create_project.pr_decoration.information")))))}}a(1625);const Me={[d.a.Azure]:x.AzureDevOps,[d.a.BitbucketCloud]:x.BitbucketCloud,[d.a.BitbucketServer]:x.BitbucketServer,[d.a.GitHub]:x.GitHub,[d.a.GitLab]:x.GitLab};class Ae extends r.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={azureSettings:[],bitbucketSettings:[],bitbucketCloudSettings:[],githubSettings:[],gitlabSettings:[],loading:!0},this.fetchAlmBindings=()=>(this.setState({loading:!0}),Object(o.j)().then(e=>{this.mounted&&this.setState({azureSettings:e.filter(e=>e.alm===d.a.Azure),bitbucketSettings:e.filter(e=>e.alm===d.a.BitbucketServer),bitbucketCloudSettings:e.filter(e=>e.alm===d.a.BitbucketCloud),githubSettings:e.filter(e=>e.alm===d.a.GitHub),gitlabSettings:e.filter(e=>e.alm===d.a.GitLab),loading:!1})}).catch(()=>{this.mounted&&this.setState({loading:!1})})),this.handleModeSelect=e=>{const{router:t,location:a}=this.props;t.push({pathname:a.pathname,query:{mode:e}})},this.handleModeConfig=e=>{this.setState({creatingAlmDefinition:e})},this.handleProjectCreate=e=>{this.props.router.push(Object(p.A)(e))},this.handleOnCancelCreation=()=>{this.setState({creatingAlmDefinition:void 0})},this.handleAfterSubmit=async()=>{let{creatingAlmDefinition:e}=this.state;if(this.setState({creatingAlmDefinition:void 0}),await this.fetchAlmBindings(),this.mounted&&e){const{bitbucketCloudSettings:t}=this.state;e===d.a.BitbucketServer&&t.length>0&&(e=d.a.BitbucketCloud),this.handleModeSelect(Me[e])}}}componentDidMount(){this.mounted=!0,this.fetchAlmBindings()}componentWillUnmount(){this.mounted=!1}renderProjectCreation(e){const{appState:{canAdmin:t,branchesEnabled:a},location:n,router:o}=this.props,{azureSettings:s,bitbucketSettings:i,bitbucketCloudSettings:c,githubSettings:l,gitlabSettings:p,loading:m}=this.state;switch(e){case x.AzureDevOps:return r.createElement(G,{canAdmin:!!t,loadingBindings:m,location:n,onProjectCreate:this.handleProjectCreate,router:o,settings:s});case x.BitbucketServer:return r.createElement(ue,{canAdmin:!!t,bitbucketSettings:i,loadingBindings:m,location:n,onProjectCreate:this.handleProjectCreate,router:o});case x.BitbucketCloud:return r.createElement(ae,{canAdmin:!!t,loadingBindings:m,location:n,onProjectCreate:this.handleProjectCreate,router:o,settings:c});case x.GitHub:return r.createElement(Se,{canAdmin:!!t,loadingBindings:m,location:n,onProjectCreate:this.handleProjectCreate,router:o,settings:l});case x.GitLab:return r.createElement(Ne,{canAdmin:!!t,loadingBindings:m,location:n,onProjectCreate:this.handleProjectCreate,router:o,settings:p});case x.Manual:return r.createElement(xe,{branchesEnabled:!!a,onProjectCreate:this.handleProjectCreate});default:{const e={[d.a.Azure]:s.length,[d.a.BitbucketServer]:i.length,[d.a.BitbucketCloud]:c.length,[d.a.GitHub]:l.length,[d.a.GitLab]:p.length};return r.createElement(je,{almCounts:e,loadingBindings:m,onSelectMode:this.handleModeSelect,onConfigMode:this.handleModeConfig})}}}render(){var e;const{location:t}=this.props,{creatingAlmDefinition:a}=this.state,o=null===(e=t.query)||void 0===e?void 0:e.mode;return r.createElement(r.Fragment,null,r.createElement(n.a,{title:Object(l.k)("onboarding.create_project.select_method"),titleTemplate:"%s"}),r.createElement(s.a,{anchor:"create_project_main"}),r.createElement("div",{className:"page page-limited huge-spacer-bottom position-relative",id:"create-project"},this.renderProjectCreation(o),a&&r.createElement(m.a,{alm:a,alreadyHaveInstanceConfigured:!1,onCancel:this.handleOnCancelCreation,afterSubmit:this.handleAfterSubmit,enforceValidation:!0})))}}t.default=Object(i.a)(Object(c.a)(Ae))},361:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return n}));var r=a(496);function n(){const e=Object(r.a)(),t=window.location.pathname+window.location.search+window.location.hash;e.replace({pathname:"/sessions/new",query:{return_to:t}})}},395:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a(366),n=a(375),o=a(372);function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}const i={app:function(e){let{fill:t}=e,a=s(e,["fill"]);return r.createElement(o.a,Object.assign({},a),r.createElement("path",{d:"M3.014 10.986a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zm9.984 0a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zm-5.004-.021c1.103 0 2 .896 2 2s-.897 2-2 2a2 2 0 0 1 0-4zm-4.98 1.021a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm-5.004-.021a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM2.984 6a2 2 0 1 1-.001 4.001A2 2 0 0 1 2.984 6zm9.984 0a2 2 0 1 1-.001 4.001A2 2 0 0 1 12.968 6zm-5.004-.021c1.103 0 2 .897 2 2a2 2 0 1 1-2-2zM2.984 7a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm-5.004-.021a1.001 1.001 0 0 1 0 2 1 1 0 0 1 0-2zM3 1.025a2 2 0 1 1-.001 4.001A2 2 0 0 1 3 1.025zm9.984 0a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zM7.98 1.004c1.103 0 2 .896 2 2s-.897 2-2 2a2 2 0 0 1 0-4zM3 2.025a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM7.98 2.004a1.001 1.001 0 0 1 0 2 1 1 0 0 1 0-2z",style:{fill:t||n.colors.blue}}))},brc:function(e){let{fill:t}=e,a=s(e,["fill"]);return r.createElement(o.a,Object.assign({},a),r.createElement("path",{d:"M8 9V8h6v1h1v1h1v6H6v-6h1V9h1zm7 2H7v4h8v-4zm-1-7v3h-1V5H1v7h4v1H0V4h14zm-1-2v1.5h-1V3H2v.5H1V2h12zm-1-2v1.5h-1V1H3v.5H2V0h10z",style:{fill:t||n.colors.blue}}))},dev:function(e){let{fill:t}=e,a=s(e,["fill"]);return r.createElement(o.a,Object.assign({},a),r.createElement("path",{d:"M7.974 8.02a3.5 3.5 0 0 1-2.482-1.017 3.428 3.428 0 0 1-1.028-2.455c0-.927.365-1.8 1.028-2.455a3.505 3.505 0 0 1 2.482-1.017 3.5 3.5 0 0 1 2.482 1.017 3.434 3.434 0 0 1 1.027 2.455c0 .928-.365 1.8-1.027 2.455A3.504 3.504 0 0 1 7.974 8.02zm0-5.778c-1.286 0-2.332 1.034-2.332 2.306s1.046 2.307 2.332 2.307c1.285 0 2.332-1.035 2.332-2.307S9.258 2.242 7.974 2.242zm3.534 6.418c.127.016.243.045.348.086.17.066.302.146.406.246.132.124.253.282.36.47.126.218.226.442.3.668.08.253.15.535.206.838.056.313.095.604.113.867.02.28.03.57.03.862 0 .532-.174.758-.306.882-.142.132-.397.31-.973.31H3.948c-.233 0-.437-.03-.606-.09-.14-.05-.26-.123-.366-.222-.13-.123-.306-.35-.306-.88 0-.294.01-.584.03-.863.018-.263.056-.554.112-.867a6.5 6.5 0 0 1 .207-.838c.073-.226.173-.45.298-.667.108-.19.23-.347.36-.47.106-.1.238-.18.407-.247.105-.04.22-.07.348-.086.202.13.432.277.683.435.342.217.756.4 1.265.564.523.166 1.06.25 1.59.25a5.25 5.25 0 0 0 1.592-.25c.51-.164.923-.348 1.266-.565.25-.158.48-.304.682-.435l-.002.002zm-.244-1.18c-.055 0-.184.066-.387.196-.202.13-.43.276-.685.437-.255.16-.586.307-.994.437-.408.13-.818.196-1.23.196-.41 0-.82-.065-1.228-.196a4.303 4.303 0 0 1-.993-.437c-.255-.16-.484-.306-.686-.437-.202-.13-.33-.196-.386-.196-.374 0-.716.06-1.026.183-.31.12-.572.283-.787.487a3.28 3.28 0 0 0-.57.737 4.662 4.662 0 0 0-.395.888c-.098.303-.18.633-.244.988a9.652 9.652 0 0 0-.128.992c-.02.306-.032.62-.032.942 0 .73.224 1.304.672 1.726.448.42 1.043.632 1.785.632h8.044c.743 0 1.34-.21 1.787-.633.447-.42.67-.996.67-1.725 0-.32-.01-.635-.03-.942a9.159 9.159 0 0 0-.374-1.98c-.098-.304-.23-.6-.395-.888a3.23 3.23 0 0 0-.57-.737 2.404 2.404 0 0 0-.788-.487 2.779 2.779 0 0 0-1.026-.183h-.004z",style:{fill:t||n.colors.blue}}))},dir:l,fil:function(e){let{fill:t}=e,a=s(e,["fill"]);return r.createElement(o.a,Object.assign({},a),r.createElement("path",{d:"M14 15H2V1l7.997.02c1 .034 1.759.758 2.428 1.42.667.663 1.561 1.605 1.574 2.555H14V15zM9 2H3v12h10V6H9V2zm3 10H4v-1h8v1zm0-2H4V9h8v1zm-1.988-5h3.008c-.012-.674-.714-1.443-1.204-1.937-.488-.495-1.039-1.058-1.816-1.055v2.96l.012.032z",style:{fill:t||n.colors.blue}}))},svw:function(e){let{fill:t}=e,a=s(e,["fill"]);return r.createElement(o.a,Object.assign({},a),r.createElement("path",{d:"M14 7h2v9H7v-2H0V0h14v7zM8 8v7h7V8H8zm3 6H9v-2h2v2zm3 0h-2v-2h2v2zm-1-7V1H1v12h6V7h6zm-7 5H2V8h4v4zm5-1H9V9h2v2zm3 0h-2V9h2v2zM5 9H3v2h2V9zm1-3H2V2h4v4zm6 0H8V2h4v4zM5 3H3v2h2V3zm6 0H9v2h2V3z",style:{fill:t||n.colors.blue}}))},trk:p,uts:d,vw:function(e){let{fill:t}=e,a=s(e,["fill"]);return r.createElement(o.a,Object.assign({},a),r.createElement("path",{d:"M14.97 14.97H1.016V1.015H14.97V14.97zm-1-12.955H2.015V13.97H13.97V2.015zm-.973 10.982H9V9h3.997v3.997zM7 12.996H3.004V9H7v3.996zM11.997 10H10v1.997h1.997V10zM6 10H4.004v1.996H6V10zm1-3H3.006V3.006H7V7zm5.985 0H9V3.015h3.985V7zM6 4.006H4.006V6H6V4.006zm5.985.009H10V6h1.985V4.015z",style:{fill:t||n.colors.blue}}))},cla:d,dev_prj:p,lib:function(e){let{fill:t}=e,a=s(e,["fill"]);return r.createElement(o.a,Object.assign({},a),r.createElement("path",{d:"M1 13h4V3H1v10zm3-1H2v-2h2v2zM2 4h2v4H2V4zm4 9h4V3H6v10zm3-1H7v-2h2v2zM7 4h2v4H7V4zm4 9h4V3h-4v10zm3-1h-2v-2h2v2zm-2-8h2v4h-2V4z",style:{fill:t||n.colors.blue}}))},pac:l};function c(e){if(!e.qualifier)return null;const t=e.qualifier.toLowerCase(),a=i[t];return a?r.createElement(a,{className:e.className,fill:e.fill}):null}function l(e){let{fill:t}=e,a=s(e,["fill"]);return r.createElement(o.a,Object.assign({},a),r.createElement("path",{d:"M14 12.286V5.703a.673.673 0 0 0-.195-.5.644.644 0 0 0-.49-.203H6.704a.686.686 0 0 1-.5-.214.707.707 0 0 1-.203-.51v-.57c0-.2-.07-.363-.207-.502A.679.679 0 0 0 5.29 3H2.707a.672.672 0 0 0-.5.204.683.683 0 0 0-.206.5v8.582c0 .2.07.367.206.506.137.14.304.208.5.208h10.61a.66.66 0 0 0 .49-.208.685.685 0 0 0 .194-.506H14zm1-6.598v6.65c0 .458-.152.83-.475 1.16-.324.326-.7.502-1.15.502H2.647c-.452 0-.84-.175-1.162-.503a1.572 1.572 0 0 1-.486-1.158V3.654a1.6 1.6 0 0 1 .486-1.17A1.578 1.578 0 0 1 2.648 2h2.7c.45 0 .84.157 1.164.485.324.328.488.714.488 1.17V4h6.373c.452 0 .83.174 1.152.5.323.33.475.73.475 1.187v.001z",style:{fill:t||n.colors.orange}}))}function p(e){let{fill:t}=e,a=s(e,["fill"]);return r.createElement(o.a,Object.assign({},a),r.createElement("path",{d:"M14.985 13.988L1 14.005 1.02 5h13.966v8.988h-.001zM1.998 5.995l.006 7.02L14.022 13 14 6.004l-12.002-.01v.001zM3 4.5V4h9.996l.004.5h1l-.005-1.497-11.98.003L2 4.5h1zm1-2v-.504h8.002L12 2.5h1l-.004-1.495H3.003L3 2.5h1z",style:{fill:t||n.colors.blue}}))}function d(e){let{fill:t}=e,a=s(e,["fill"]);return r.createElement(o.a,Object.assign({},a),r.createElement("path",{d:"M14 15H2V1l7.997.02c1.013-.03 1.57.893 2.239 1.555.667.663 1.75 1.47 1.763 2.42H14V15zM9 2H3v12h10V6H9V2zM7 8l-3 2.5L7 13V8zm1 5l3-2.5L8 8v5zm2.012-8h3.008c-.012-.674-.78-1.258-1.27-1.752-.488-.495-.973-1.243-1.75-1.24v2.96l.012.032z",style:{fill:t||n.colors.blue}}))}},404:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a(367),n=a(366),o=a(6),s=a(377),i=a(376),c=a(368);function l(e){const{className:t,count:a,loading:l,needReload:p,total:d,ready:m=!0}=e,h=d&&d>a;let u;return p&&e.reload?u=n.createElement(c.a,{className:"spacer-left","data-test":"reload",disabled:l,onClick:e.reload},Object(o.k)("reload")):h&&e.loadMore&&(u=n.createElement(c.a,{className:"spacer-left",disabled:l,"data-test":"show-more",onClick:e.loadMore},Object(o.k)("show_more"))),n.createElement("footer",{className:r("spacer-top note text-center",{"new-loading":!m},t)},Object(o.l)("x_of_y_shown",Object(s.formatMeasure)(a,"INT",null),Object(s.formatMeasure)(d,"INT",null)),u,l&&n.createElement(i.a,{className:"text-bottom spacer-left position-absolute"}))}},405:function(e,t,a){var r=a(420),n=a(450),o=a(413),s=n((function(e,t){return o(e)?r(e,t):[]}));e.exports=s},413:function(e,t,a){var r=a(449),n=a(7);e.exports=function(e){return n(e)&&r(e)}},419:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a(366),n=a(6),o=a(476);function s(e){return r.createElement(o.a.Consumer,null,({addA11ySkipLink:t,removeA11ySkipLink:a})=>r.createElement(i,Object.assign({addA11ySkipLink:t,removeA11ySkipLink:a},e)))}class i extends r.PureComponent{constructor(){super(...arguments),this.getLink=()=>{const{anchor:e,label:t=Object(n.k)("skip_to_content"),weight:a}=this.props;return{key:e,label:t,weight:a}}}componentDidMount(){this.props.addA11ySkipLink(this.getLink())}componentWillUnmount(){this.props.removeA11ySkipLink(this.getLink())}render(){const{anchor:e}=this.props;return r.createElement("span",{id:"a11y_target__".concat(e)})}}},420:function(e,t,a){var r=a(49),n=a(486),o=a(487),s=a(23),i=a(51),c=a(50);e.exports=function(e,t,a,l){var p=-1,d=n,m=!0,h=e.length,u=[],g=t.length;if(!h)return u;a&&(t=s(t,i(a))),l?(d=o,m=!1):t.length>=200&&(d=c,m=!1,t=new r(t));e:for(;++p<h;){var b=e[p],j=null==a?b:a(b);if(b=l||0!==b?b:0,m&&j==j){for(var y=g;y--;)if(t[y]===j)continue e;u.push(b)}else d(t,j,l)||u.push(b)}return u}},429:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a(366),n=a(372);function o(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function s(e){let{fill:t="currentColor"}=e,a=o(e,["fill"]);return r.createElement(n.a,Object.assign({},a),r.createElement("path",{d:"M12 9.25v2.5A2.25 2.25 0 0 1 9.75 14h-6.5A2.25 2.25 0 0 1 1 11.75v-6.5A2.25 2.25 0 0 1 3.25 3h5.5c.14 0 .25.11.25.25v.5c0 .14-.11.25-.25.25h-5.5C2.562 4 2 4.563 2 5.25v6.5c0 .688.563 1.25 1.25 1.25h6.5c.688 0 1.25-.563 1.25-1.25v-2.5c0-.14.11-.25.25-.25h.5c.14 0 .25.11.25.25zm3-6.75v4c0 .273-.227.5-.5.5a.497.497 0 0 1-.352-.148l-1.375-1.375L7.68 10.57a.27.27 0 0 1-.18.078.27.27 0 0 1-.18-.078l-.89-.89a.27.27 0 0 1-.078-.18.27.27 0 0 1 .078-.18l5.093-5.093-1.375-1.375A.497.497 0 0 1 10 2.5c0-.273.227-.5.5-.5h4c.273 0 .5.227.5.5z",style:{fill:t}}))}},433:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a(367),n=a(366);a(439);class o extends n.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{e.preventDefault(),this.props.disabled||this.props.onCheck(this.props.value)}}render(){const{className:e,checked:t,children:a,disabled:o}=this.props;return n.createElement("a",{"aria-checked":t,className:r("display-inline-flex-center link-radio",e,{disabled:o}),href:"#",onClick:this.handleClick,role:"radio"},n.createElement("i",{className:r("icon-radio","spacer-right",{"is-checked":t})}),a)}}},466:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a(366),n=a(372);function o(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function s(e){let{fill:t="currentColor"}=e,a=o(e,["fill"]);return r.createElement(n.a,Object.assign({},a),r.createElement("path",{d:"M7.72 11.596L3.119 6.992A.382.382 0 0 1 3 6.713c0-.108.04-.2.118-.279l1.03-1.03a.382.382 0 0 1 .278-.117c.108 0 .201.04.28.117L8 8.7l3.294-3.295a.382.382 0 0 1 .28-.117c.108 0 .2.04.279.117l1.03 1.03a.382.382 0 0 1 .117.28c0 .107-.04.2-.118.278L8.28 11.596a.382.382 0 0 1-.279.117.382.382 0 0 1-.28-.117z",style:{fill:t}}))}},484:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a(366),n=a(466),o=a(460);function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function i(e){let{open:t}=e,a=s(e,["open"]);return t?r.createElement(n.a,Object.assign({},a)):r.createElement(o.a,Object.assign({},a))}},622:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a(367),n=a(366),o=a(484);class s extends n.PureComponent{constructor(){super(...arguments),this.state={hoveringInner:!1},this.handleClick=()=>{this.props.onClick(this.props.data)},this.onDetailEnter=()=>{this.setState({hoveringInner:!0})},this.onDetailLeave=()=>{this.setState({hoveringInner:!1})}}render(){const{className:e,open:t,renderHeader:a,title:s}=this.props;return n.createElement("div",{className:r("boxed-group boxed-group-accordion",e,{"no-hover":this.state.hoveringInner})},n.createElement("div",{className:"boxed-group-header",onClick:this.handleClick,role:"listitem"},n.createElement("span",{className:"boxed-group-accordion-title"},n.createElement(o.a,{className:"little-spacer-right",open:t}),s),a&&a()),t&&n.createElement("div",{className:"boxed-group-inner",onMouseEnter:this.onDetailEnter,onMouseLeave:this.onDetailLeave},this.props.children))}}},648:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a(366),n=a(361),o=a(402),s=a(527),i=a(441);function c(e){class t extends r.Component{componentDidMount(){Object(o.b)(this.props.currentUser)||Object(n.default)()}render(){return Object(o.b)(this.props.currentUser)?r.createElement(e,Object.assign({},this.props)):null}}return t.displayName=Object(s.a)(e,"whenLoggedIn"),Object(i.a)(t)}},655:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a(422),n=a.n(r),o=a(366),s=a(6),i=a(388);class c extends o.PureComponent{constructor(e){super(e),this.mounted=!1,this.handleSearch=e=>{const t=e;this.props.onSearch(t).then(e=>{this.mounted&&this.setState(a=>({loading:!1,options:a.query===t?e:a.options}))},()=>{this.mounted&&this.setState({loading:!1})})},this.handleChange=e=>{Array.isArray(e)?this.props.onMultiSelect&&this.props.onMultiSelect(e):this.props.onSelect&&this.props.onSelect(e)},this.handleInputChange=e=>{if(e.length>=this.minimumQueryLength)this.setState({loading:!0,query:e}),this.handleSearch(e);else{const t=0===e.length&&this.props.defaultOptions||[];this.setState({options:t,query:e})}},this.handleFilterOption=()=>!0,this.state={loading:!1,options:e.defaultOptions||[],query:""},this.handleSearch=n()(this.handleSearch,250)}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}get autofocus(){return void 0===this.props.autofocus||this.props.autofocus}get minimumQueryLength(){return void 0!==this.props.minimumQueryLength?this.props.minimumQueryLength:2}get resetOnBlur(){return void 0===this.props.resetOnBlur||this.props.resetOnBlur}render(){const e=this.props.canCreate?i.a:i.b;return o.createElement(e,{autoFocus:this.autofocus,className:this.props.className,clearable:this.props.clearable,escapeClearsValue:!1,filterOption:this.handleFilterOption,isLoading:this.state.loading,multi:this.props.multi,noResultsText:this.state.query.length<this.minimumQueryLength?Object(s.l)("select2.tooShort",this.minimumQueryLength):Object(s.k)("select2.noMatches"),onBlurResetsInput:this.resetOnBlur,onChange:this.handleChange,onInputChange:this.handleInputChange,optionRenderer:this.props.renderOption,options:this.state.options,placeholder:Object(s.k)("search_verb"),promptTextCreator:this.props.promptTextCreator,searchable:!0,value:this.props.value,valueRenderer:this.props.renderOption})}}},852:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a(367),n=a(366),o=a(587),s=a(428),i=a(6);function c(e){const{error:t,help:a,label:c,placeholder:l,projectKey:p,touched:d,validating:m,autofocus:h=!1}=e,u=d&&void 0!==t,g=d&&!m&&void 0===t;return n.createElement(o.a,{className:"form-field",description:Object(i.k)("onboarding.create_project.project_key.description"),error:t,help:a,id:"project-key",isInvalid:u,isValid:g,label:c,required:void 0!==c},n.createElement("input",{autoFocus:h,className:r("input-super-large",{"is-invalid":u,"is-valid":g}),id:"project-key",maxLength:s.e,minLength:1,onChange:e.onProjectKeyChange,placeholder:l,type:"text",value:p}))}},853:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i}));var r=a(390),n=a(428);const o=/^[\w\-.:]*[a-z\-_.:]+[\w\-.:]*$/i,s=/[^\w\-:.]+/gi;function i(e){return 0===e.length?r.b.Empty:e.length>n.e?r.b.TooLong:o.test(e)?r.b.Valid:/^[0-9]+$/.test(e)?r.b.OnlyDigits:r.b.InvalidChar}},930:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a(366),n=a(372);function o(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function s(e){let{fill:t="currentColor"}=e,a=o(e,["fill"]);return r.createElement(n.a,Object.assign({},a),r.createElement("path",{d:"M6.27 11.07L3.2 8l3.07-3.07L5.33 4l-4 4 4 4 .94-.93zm3.46 0L12.8 8 9.73 4.93l.94-.93 4 4-4 4-.94-.93z",fill:t,fillRule:"nonzero"}))}}}]);
//# sourceMappingURL=301.m.41d919bd.chunk.js.map