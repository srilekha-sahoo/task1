{"version":3,"sources":["webpack:///./src/main/js/apps/settings/components/DefinitionActions.tsx","webpack:///./src/main/js/apps/settings/components/inputs/InputForSecured.tsx","webpack:///./src/main/js/apps/settings/components/inputs/InputForBoolean.tsx","webpack:///./src/main/js/apps/settings/components/inputs/InputForJSON.tsx","webpack:///./src/main/js/apps/settings/components/inputs/SimpleInput.tsx","webpack:///./src/main/js/apps/settings/components/inputs/InputForNumber.tsx","webpack:///./src/main/js/apps/settings/components/inputs/InputForPassword.tsx","webpack:///./src/main/js/apps/settings/components/inputs/InputForSingleSelectList.tsx","webpack:///./src/main/js/apps/settings/components/inputs/InputForString.tsx","webpack:///./src/main/js/apps/settings/components/inputs/InputForText.tsx","webpack:///./src/main/js/apps/settings/components/inputs/PrimitiveInput.tsx","webpack:///./src/main/js/apps/settings/components/inputs/MultiValueInput.tsx","webpack:///./src/main/js/apps/settings/components/inputs/PropertySetInput.tsx","webpack:///./src/main/js/apps/settings/components/inputs/Input.tsx","webpack:///./src/main/js/apps/settings/components/Definition.tsx","webpack:///./src/main/js/apps/settings/components/DefinitionsList.tsx","webpack:///./src/main/js/apps/settings/components/EmailForm.tsx","webpack:///./src/main/js/apps/settings/components/SubCategoryDefinitionsList.tsx","webpack:///./src/main/js/apps/settings/components/CategoryDefinitionsList.tsx","webpack:///./src/main/js/apps/settings/components/almIntegration/AlmBindingDefinitionBox.tsx","webpack:///./src/main/js/apps/settings/components/almIntegration/CreationTooltip.tsx","webpack:///./src/main/js/apps/settings/components/almIntegration/AlmTabRenderer.tsx","webpack:///./src/main/js/apps/settings/components/almIntegration/AlmTab.tsx","webpack:///./src/main/js/apps/settings/components/almIntegration/DeleteModal.tsx","webpack:///./src/main/js/apps/settings/components/almIntegration/AlmIntegrationRenderer.tsx","webpack:///./src/main/js/apps/settings/components/almIntegration/AlmIntegration.tsx","webpack:///./src/main/js/apps/settings/components/AnalysisScope.tsx","webpack:///./src/main/js/apps/settings/components/CategoryOverrides.ts","webpack:///./src/main/js/apps/settings/components/Languages.tsx","webpack:///./src/main/js/apps/settings/components/NewCodePeriod.tsx","webpack:///./src/main/js/apps/settings/components/pullRequestDecorationBinding/AlmSpecificForm.tsx","webpack:///./src/main/js/apps/settings/components/pullRequestDecorationBinding/PRDecorationBindingRenderer.tsx","webpack:///./src/main/js/apps/settings/components/pullRequestDecorationBinding/PRDecorationBinding.tsx","webpack:///./src/main/js/apps/settings/components/AdditionalCategories.tsx","webpack:///./src/main/js/apps/settings/components/AllCategoriesList.tsx","webpack:///./src/main/js/apps/settings/components/SettingsSearchRenderer.tsx","webpack:///./src/main/js/apps/settings/components/SettingsSearch.tsx","webpack:///./src/main/js/apps/settings/components/PageHeader.tsx","webpack:///./src/main/js/apps/settings/components/SettingsApp.tsx","webpack:///./src/main/js/components/controls/SimpleModal.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/components/controls/ConfirmModal.tsx","webpack:///./src/main/js/helpers/sanitize.ts","webpack:///./src/main/js/api/settings.ts","webpack:///./src/main/js/helpers/pages.ts","webpack:///./src/main/js/components/common/ScreenPositionHelper.tsx","webpack:///./src/main/js/types/settings.ts","webpack:///./node_modules/lodash/find.js","webpack:///./node_modules/lodash/_createFind.js","webpack:///./node_modules/lodash/findIndex.js","webpack:///./src/main/js/components/controls/BoxedTabs.tsx","webpack:///./src/main/js/components/icons/RecommendedIcon.tsx","webpack:///./src/main/js/components/controls/RadioCard.tsx","webpack:///./src/main/js/apps/settings/store/actions.ts","webpack:///./src/main/js/api/newCodePeriod.ts","webpack:///./src/main/js/apps/projectBaseline/utils.ts","webpack:///./src/main/js/apps/projectBaseline/components/BaselineSettingDays.tsx","webpack:///./src/main/js/apps/projectBaseline/components/BaselineSettingPreviousVersion.tsx","webpack:///./src/main/js/components/controls/Toggle.tsx","webpack:///./src/main/js/components/controls/RadioCard.css?3dc8","webpack:///./src/main/js/components/controls/RadioCard.css","webpack:///./src/main/js/components/controls/Toggle.css?f7a0","webpack:///./src/main/js/components/controls/Toggle.css","webpack:///./src/main/js/components/icons/LockIcon.tsx"],"names":["state","reseting","handleClose","this","setState","handleReset","handleSubmit","props","onReset","header","Modal","contentLabel","onRequestClose","className","onSubmit","onClick","setting","changedValue","isDefault","hasValueChanged","showReset","definition","hasValue","style","lineHeight","disabled","hasError","onSave","onCancel","renderModal","changing","handleInputChange","value","onChange","handleChangeClick","nextProps","input","Input","name","type","autoComplete","renderInput","LockIcon","fill","gray60","InputForBoolean","displayedValue","Toggle","formatError","event","target","format","JSON","stringify","parse","undefined","e","rows","Alert","variant","currentTarget","handleKeyDown","keyCode","autoFocus","onKeyDown","InputForNumber","InputForPassword","options","map","option","label","Select","clearable","InputForString","PrimitiveInput","other","typeMapping","STRING","TEXT","PASSWORD","BOOLEAN","INTEGER","LONG","FLOAT","SINGLE_SELECT_LIST","InputComponent","ensureValue","handleSingleInputChange","index","newValue","splice","handleDeleteValue","isLast","key","length","fieldKey","emptyValue","newFields","fieldValues","fields","field","newSetting","width","minWidth","marginTop","description","renderFields","multiValues","PROPERTY_SET","mounted","success","handleChange","clearTimeout","timeout","changeValue","handleCheck","component","componentKey","resetValue","then","cancelChange","safeSetState","window","setTimeout","handleCancel","passValidation","checkValue","handleSave","saveValue","changes","loading","validationMessage","propertyName","effectiveValue","title","dangerouslySetInnerHTML","__html","sanitize","AlertErrorIcon","AlertSuccessIcon","mapDispatchToProps","ownProps","DefinitionsList","settings","ref","scrollToDefinition","super","handleError","response","message","error","handleFormSubmit","preventDefault","recipient","subject","onRecipientChange","onSubjectChange","onMessageChange","currentUser","email","MandatoryFieldsExplanation","htmlFor","MandatoryFieldMarker","id","required","DeferredSpinner","withCurrentUser","scrollToSubCategoryOrDefinition","element","hash","location","substr","getAttribute","topOffset","bottomOffset","smooth","renderEmailForm","subCategoryKey","category","fetchValues","prevProps","prevKeys","keys","query","replace","document","querySelector","bySubCategory","subCategory","subCategories","Object","sortedSubCategories","toLowerCase","filteredSubCategories","filter","c","withRouter","DEFAULT_STATUS","alertSuccess","failureMessage","Validating","STATUS_ICON","Failure","Success","getPrDecoFeatureDescription","alm","GitLab","GitHub","AlmBindingDefinitionBox","branchesEnabled","multipleDefinitions","status","onEdit","EditIcon","onDelete","DeleteIcon","url","Warning","Tooltip","overlay","HelpTooltip","defaultMessage","values","link","href","developer","sourceEdition","community","rel","getPRDecorationFeatureStatus","includes","BitbucketCloud","getImportFeatureStatus","to","onCheck","withAppState","appState","edition","children","preventCreation","enterprise","mouseLeaveDelay","AlmTabRenderer","almTab","definitions","definitionStatus","editDefinition","editedDefinition","loadingAlmDefinitions","loadingProjectCount","multipleAlmEnabled","onCreate","def","AlmBindingDefinitionForm","bindingDefinition","alreadyHaveInstanceConfigured","afterSubmit","CategoryDefinitionsList","handleCreate","handleEdit","definitionKey","find","d","handleAfterSubmit","config","onUpdateDefinitions","DeleteModal","projectCount","ConfirmModal","confirmButtonText","confirmData","isDestructive","onClose","onConfirm","showProjectCountWarning","tabs","alt","height","src","BitbucketServer","Azure","AlmIntegrationRenderer","definitionKeyForDeletion","currentAlmTab","bindingDefinitions","azure","gitlab","github","bitbucket","bitbucketcloud","BoxedTabs","onSelect","onSelectAlmTab","selected","onCheckConfiguration","onCancelDelete","onConfirmDelete","handleConfirmDelete","fetchPullRequestDecorationSetting","catch","handleSelectAlm","router","push","handleCancelDelete","handleDelete","async","_","forEach","Boolean","AnalysisScope","selectedCategory","abap","apex","cobol","css","flex","go","html","java","javascript","json","kotlin","php","python","rpg","ruby","scala","swift","typescript","xml","yaml","categories","availableLanguages","selectedLanguage","lowerCasedLanguagesCategory","lowerCasedSelectedCategory","originalValue","getLanguages","newOption","placeholder","days","saving","onSelectDays","onSelectSetting","currentSetting","currentSettingValue","String","fetchNewCodePeriodSetting","isChanged","isValid","BaselineSettingPreviousVersion","BaselineSettingDays","onChangeDays","renderFieldWrapper","help","renderHelp","helpExample","helpParams","renderLabel","optional","renderBooleanField","onFieldChange","propKey","inputExtra","v","renderField","maxLength","AlmSpecificForm","instances","formData","repository","slug","summaryCommentEnabled","monorepo","monorepoEnabled","formFields","instance","i","doc_link","display","optionRenderer","PRDecorationBindingRenderer","isConfigured","updating","successfullyUpdated","checkingConfiguration","configurationErrors","isSysAdmin","autosize","menuContainerStyle","maxWidth","searchable","valueKey","valueRenderer","errors","msg","scope","Global","REQUIRED_FIELDS_BY_ALM","fetchDefinitions","project","Promise","all","getProjectBinding","originalData","newFormData","validateForm","checkConfiguration","catchError","projectKey","additionalFields","submitProjectAlmBinding","handleFieldChange","isDataSame","reduce","result","handleCheckConfiguration","NotFound","throwGlobalError","almSpecificFields","almSetting","reject","projectName","repositoryName","oKey","oRepository","oSlug","osummaryCommentEnabled","omonorepo","Admin","datacenter","ADDITIONAL_CATEGORIES","renderComponent","availableGlobally","availableForProject","displayTab","requiresBranchesEnabled","defaultCategory","categoriesWithName","concat","sortedCategories","active","SettingsSearchRenderer","results","searchQuery","selectedResult","showResults","scrollableNodeRef","selectedNodeRef","parent","current","selectedNode","OutsideClickHandler","onClickOutside","SearchBox","onSearchInputChange","onFocus","onSearchInputFocus","onSearchInputKeyDown","Dropdown","noPadding","r","onMouseEnter","onMouseOverResult","doSearch","cleanQuery","search","split","s","join","match","definitionsByKey","hideResults","handleFocus","handleSearchChange","handleMouseOverResult","Enter","openSelected","UpArrow","selectPrevious","DownArrow","selectNext","findIndex","buildSearchIndex","add","splitkey","PageHeader","InstanceMessage","fetchSettings","stopLoading","originalCategory","foundAdditionalCategory","isProjectSettings","shouldRenderAdditionalCategory","Suggestions","suggestions","defer","ScreenPositionHelper","top","AllCategoriesList","SimpleModal","submitting","stopSubmitting","handleCloseClick","blur","submit","handleSubmitClick","modalProps","onCloseClick","onFormSubmit","onSubmitClick","Consumer","addSuggestions","removeSuggestions","SuggestionsInner","renderModalContent","confirmDisable","headerDescription","cancelButtonText","noBackdrop","size","sanitizeStringRestricted","ALLOWED_TAGS","ALLOWED_ATTR","sanitizeString","USE_PROFILES","getDefinitions","getValues","data","setSecuredSettings","setSettingValue","setSimpleSettingValue","resetSettingValue","sendTestEmail","checkSecretKey","generateSecretKey","encryptValue","addSideBarClass","toggleBodyClass","addWhitePageClass","removeSideBarClass","removeWhitePageClass","force","body","classList","toggle","documentElement","getPosition","containerPos","container","getBoundingClientRect","pageYOffset","left","pageXOffset","debouncedOnResize","forceUpdate","addEventListener","removeEventListener","SettingsKey","SettingType","createFind","module","exports","baseIteratee","isArrayLike","findIndexFunc","collection","predicate","fromIndex","iterable","iteratee","baseFindIndex","toInteger","nativeMax","Math","max","array","TabContainer","div","baseBorder","barBorderColor","highlightHoverMixin","barBackgroundColorHighlight","StyledTab","button","barBackgroundColor","gridSize","ActiveBorder","blue","RecommendedIcon","iconProps","Icon","recommended","titleInfo","vertical","isActionable","role","tabIndex","dispatch","filtered","getState","defaultValue","isURLKind","URL","getNewCodePeriod","setNewCodePeriod","resetNewCodePeriod","listBranchesNewCodePeriod","validateDays","parsed","parseInt","isNaN","getSettingValue","analysis","referenceBranch","validateSetting","overrideGeneralSetting","isInvalid","getValue","handleClick","api","content","__esModule","default","exported","locals","___CSS_LOADER_API_IMPORT___"],"mappings":"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","file":"js/295.m.61edcf1b.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink, SubmitButton } from '../../../components/controls/buttons';\nimport Modal from '../../../components/controls/Modal';\nimport { translate } from '../../../helpers/l10n';\nimport { Setting } from '../../../types/settings';\nimport { getDefaultValue, isEmptyValue } from '../utils';\n\ntype Props = {\n  changedValue: string;\n  hasError: boolean;\n  hasValueChanged: boolean;\n  isDefault: boolean;\n  onCancel: () => void;\n  onReset: () => void;\n  onSave: () => void;\n  setting: Setting;\n};\n\ntype State = { reseting: boolean };\n\nexport default class DefinitionActions extends React.PureComponent<Props, State> {\n  state: State = { reseting: false };\n\n  handleClose = () => {\n    this.setState({ reseting: false });\n  };\n\n  handleReset = () => {\n    this.setState({ reseting: true });\n  };\n\n  handleSubmit = () => {\n    this.props.onReset();\n    this.handleClose();\n  };\n\n  renderModal() {\n    const header = translate('settings.reset_confirm.title');\n    return (\n      <Modal contentLabel={header} onRequestClose={this.handleClose}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"modal-body\">\n            <p>{translate('settings.reset_confirm.description')}</p>\n          </div>\n          <footer className=\"modal-foot\">\n            <SubmitButton className=\"button-red\">{translate('reset_verb')}</SubmitButton>\n            <ResetButtonLink onClick={this.handleClose}>{translate('cancel')}</ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n\n  render() {\n    const { setting, changedValue, isDefault, hasValueChanged } = this.props;\n    const hasBeenChangedToEmptyValue =\n      changedValue != null && isEmptyValue(setting.definition, changedValue);\n    const showReset = hasBeenChangedToEmptyValue || (!isDefault && setting.hasValue);\n\n    return (\n      <>\n        {isDefault && !hasValueChanged && (\n          <div className=\"spacer-top note\" style={{ lineHeight: '24px' }}>\n            {translate('settings._default')}\n          </div>\n        )}\n        <div className=\"settings-definition-changes nowrap\">\n          {hasValueChanged && (\n            <Button\n              className=\"spacer-right button-success\"\n              disabled={this.props.hasError}\n              onClick={this.props.onSave}>\n              {translate('save')}\n            </Button>\n          )}\n\n          {showReset && (\n            <Button className=\"spacer-right\" onClick={this.handleReset}>\n              {translate('reset_verb')}\n            </Button>\n          )}\n\n          {hasValueChanged && (\n            <ResetButtonLink className=\"spacer-right\" onClick={this.props.onCancel}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          )}\n\n          {showReset && (\n            <span className=\"note\">\n              {translate('default')}\n              {': '}\n              {getDefaultValue(setting)}\n            </span>\n          )}\n\n          {this.state.reseting && this.renderModal()}\n        </div>\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { colors } from '../../../../app/theme';\nimport { Button } from '../../../../components/controls/buttons';\nimport LockIcon from '../../../../components/icons/LockIcon';\nimport { translate } from '../../../../helpers/l10n';\nimport {\n  DefaultInputProps,\n  DefaultSpecializedInputProps,\n  getUniqueName,\n  isDefaultOrInherited\n} from '../../utils';\n\ninterface State {\n  changing: boolean;\n}\n\ninterface Props extends DefaultInputProps {\n  input: React.ComponentType<DefaultSpecializedInputProps>;\n}\n\nexport default class InputForSecured extends React.PureComponent<Props, State> {\n  state: State = {\n    changing: !this.props.setting.hasValue\n  };\n\n  componentWillReceiveProps(nextProps: Props) {\n    /*\n     * Reset `changing` if:\n     *  - the value is reset (valueChanged -> !valueChanged)\n     *     or\n     *  - the value changes from outside the input (i.e. store update/reset/cancel)\n     */\n    if (\n      (this.props.hasValueChanged || this.props.setting !== nextProps.setting) &&\n      !nextProps.hasValueChanged\n    ) {\n      this.setState({ changing: !nextProps.setting.hasValue });\n    }\n  }\n\n  handleInputChange = (value: string) => {\n    this.props.onChange(value);\n  };\n\n  handleChangeClick = () => {\n    this.setState({ changing: true });\n  };\n\n  renderInput() {\n    const { input: Input, setting, value } = this.props;\n    const name = getUniqueName(setting.definition);\n    return (\n      // The input hidden will prevent browser asking for saving login information\n      <>\n        <input className=\"hidden\" type=\"password\" />\n        <Input\n          autoComplete=\"off\"\n          className=\"js-setting-input settings-large-input\"\n          isDefault={isDefaultOrInherited(setting)}\n          name={name}\n          onChange={this.handleInputChange}\n          setting={setting}\n          type=\"password\"\n          value={value}\n        />\n      </>\n    );\n  }\n\n  render() {\n    if (this.state.changing) {\n      return this.renderInput();\n    }\n\n    return (\n      <>\n        <LockIcon className=\"text-middle big-spacer-right\" fill={colors.gray60} />\n        <Button className=\"text-middle\" onClick={this.handleChangeClick}>\n          {translate('change_verb')}\n        </Button>\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Toggle from '../../../../components/controls/Toggle';\nimport { translate } from '../../../../helpers/l10n';\nimport { DefaultSpecializedInputProps } from '../../utils';\n\ninterface Props extends DefaultSpecializedInputProps {\n  value: string | boolean | undefined;\n}\n\nexport default function InputForBoolean({ onChange, name, value }: Props) {\n  const displayedValue = value != null ? value : false;\n  return (\n    <div className=\"display-inline-block text-top\">\n      <Toggle name={name} onChange={onChange} value={displayedValue} />\n      {value == null && <span className=\"spacer-left note\">{translate('settings.not_set')}</span>}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from '../../../../components/controls/buttons';\nimport { Alert } from '../../../../components/ui/Alert';\nimport { translate } from '../../../../helpers/l10n';\nimport { DefaultSpecializedInputProps } from '../../utils';\n\nconst JSON_SPACE_SIZE = 4;\n\ninterface State {\n  formatError: boolean;\n}\n\nexport default class InputForJSON extends React.PureComponent<DefaultSpecializedInputProps, State> {\n  state: State = { formatError: false };\n\n  handleInputChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ formatError: false });\n    this.props.onChange(event.target.value);\n  };\n\n  format = () => {\n    const { value } = this.props;\n    try {\n      if (value) {\n        this.props.onChange(JSON.stringify(JSON.parse(value), undefined, JSON_SPACE_SIZE));\n      }\n    } catch (e) {\n      this.setState({ formatError: true });\n    }\n  };\n\n  render() {\n    const { formatError } = this.state;\n    return (\n      <div className=\"display-flex-end\">\n        <textarea\n          className=\"settings-large-input text-top monospaced spacer-right\"\n          name={this.props.name}\n          onChange={this.handleInputChange}\n          rows={5}\n          value={this.props.value || ''}\n        />\n        <div>\n          {formatError && <Alert variant=\"info\">{translate('settings.json.format_error')} </Alert>}\n          <Button className=\"spacer-top\" onClick={this.format}>\n            {translate('settings.json.format')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { DefaultSpecializedInputProps } from '../../utils';\n\ninterface Props extends DefaultSpecializedInputProps {\n  value: string | number;\n}\n\nexport default class SimpleInput extends React.PureComponent<Props> {\n  handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.props.onChange(event.currentTarget.value);\n  };\n\n  handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.keyCode === 13 && this.props.onSave) {\n      this.props.onSave();\n    } else if (event.keyCode === 27 && this.props.onCancel) {\n      this.props.onCancel();\n    }\n  };\n\n  render() {\n    const { autoComplete, autoFocus, className, name, value = '', type } = this.props;\n    return (\n      <input\n        autoComplete={autoComplete}\n        autoFocus={autoFocus}\n        className={classNames('text-top', className)}\n        name={name}\n        onChange={this.handleInputChange}\n        onKeyDown={this.handleKeyDown}\n        type={type}\n        value={value}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DefaultSpecializedInputProps } from '../../utils';\nimport SimpleInput from './SimpleInput';\n\nexport default function InputForNumber(props: DefaultSpecializedInputProps) {\n  return <SimpleInput className=\"input-small\" type=\"text\" {...props} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DefaultSpecializedInputProps } from '../../utils';\nimport SimpleInput from './SimpleInput';\n\nexport default function InputForPassword(props: DefaultSpecializedInputProps) {\n  return (\n    <SimpleInput {...props} className=\"settings-large-input\" type=\"password\" autoComplete=\"off\" />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Select from '../../../../components/controls/Select';\nimport { SettingCategoryDefinition } from '../../../../types/settings';\nimport { DefaultSpecializedInputProps } from '../../utils';\n\ntype Props = DefaultSpecializedInputProps & Pick<SettingCategoryDefinition, 'options'>;\n\nexport default class InputForSingleSelectList extends React.PureComponent<Props> {\n  handleInputChange = ({ value }: { value: string }) => {\n    this.props.onChange(value);\n  };\n\n  render() {\n    const options = this.props.options.map(option => ({\n      label: option,\n      value: option\n    }));\n\n    return (\n      <Select\n        className=\"settings-large-input\"\n        clearable={false}\n        name={this.props.name}\n        onChange={this.handleInputChange}\n        options={options}\n        value={this.props.value}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DefaultSpecializedInputProps } from '../../utils';\nimport SimpleInput from './SimpleInput';\n\nexport default function InputForString(props: DefaultSpecializedInputProps) {\n  return <SimpleInput className=\"settings-large-input\" type=\"text\" {...props} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DefaultSpecializedInputProps } from '../../utils';\n\nexport default class InputForText extends React.PureComponent<DefaultSpecializedInputProps> {\n  handleInputChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.props.onChange(event.target.value);\n  };\n\n  render() {\n    return (\n      <textarea\n        className=\"settings-large-input text-top\"\n        name={this.props.name}\n        onChange={this.handleInputChange}\n        rows={5}\n        value={this.props.value || ''}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SettingType } from '../../../../types/settings';\nimport { DefaultSpecializedInputProps } from '../../utils';\nimport InputForBoolean from './InputForBoolean';\nimport InputForJSON from './InputForJSON';\nimport InputForNumber from './InputForNumber';\nimport InputForPassword from './InputForPassword';\nimport InputForSingleSelectList from './InputForSingleSelectList';\nimport InputForString from './InputForString';\nimport InputForText from './InputForText';\n\nfunction withOptions(options: string[]): React.ComponentType<DefaultSpecializedInputProps> {\n  return function Wrapped(props: DefaultSpecializedInputProps) {\n    return <InputForSingleSelectList options={options} {...props} />;\n  };\n}\n\nexport default function PrimitiveInput(props: DefaultSpecializedInputProps) {\n  const { setting, name, isDefault, ...other } = props;\n  const { definition } = setting;\n  const typeMapping: {\n    [type in SettingType]?: React.ComponentType<DefaultSpecializedInputProps>;\n  } = {\n    STRING: InputForString,\n    TEXT: InputForText,\n    JSON: InputForJSON,\n    PASSWORD: InputForPassword,\n    BOOLEAN: InputForBoolean,\n    INTEGER: InputForNumber,\n    LONG: InputForNumber,\n    FLOAT: InputForNumber,\n    SINGLE_SELECT_LIST: withOptions(definition.options)\n  };\n\n  const InputComponent = (definition.type && typeMapping[definition.type]) || InputForString;\n\n  return <InputComponent isDefault={isDefault} name={name} setting={setting} {...other} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DeleteButton } from '../../../../components/controls/buttons';\nimport { DefaultSpecializedInputProps, getEmptyValue } from '../../utils';\nimport PrimitiveInput from './PrimitiveInput';\n\nexport default class MultiValueInput extends React.PureComponent<DefaultSpecializedInputProps> {\n  ensureValue = () => {\n    return this.props.value || [];\n  };\n\n  handleSingleInputChange = (index: number, value: any) => {\n    const newValue = [...this.ensureValue()];\n    newValue.splice(index, 1, value);\n    this.props.onChange(newValue);\n  };\n\n  handleDeleteValue = (index: number) => {\n    const newValue = [...this.ensureValue()];\n    newValue.splice(index, 1);\n    this.props.onChange(newValue);\n  };\n\n  renderInput(value: any, index: number, isLast: boolean) {\n    const { setting, isDefault, name } = this.props;\n    return (\n      <li className=\"spacer-bottom\" key={index}>\n        <PrimitiveInput\n          isDefault={isDefault}\n          name={name}\n          hasValueChanged={this.props.hasValueChanged}\n          onChange={value => this.handleSingleInputChange(index, value)}\n          setting={setting}\n          value={value}\n        />\n\n        {!isLast && (\n          <div className=\"display-inline-block spacer-left\">\n            <DeleteButton\n              className=\"js-remove-value\"\n              onClick={() => this.handleDeleteValue(index)}\n            />\n          </div>\n        )}\n      </li>\n    );\n  }\n\n  render() {\n    const displayedValue = [...this.ensureValue(), ...getEmptyValue(this.props.setting.definition)];\n    return (\n      <div>\n        <ul>\n          {displayedValue.map((value, index) =>\n            this.renderInput(value, index, index === displayedValue.length - 1)\n          )}\n        </ul>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DeleteButton } from '../../../../components/controls/buttons';\nimport {\n  DefaultSpecializedInputProps,\n  getEmptyValue,\n  getUniqueName,\n  isCategoryDefinition\n} from '../../utils';\nimport PrimitiveInput from './PrimitiveInput';\n\nexport default class PropertySetInput extends React.PureComponent<DefaultSpecializedInputProps> {\n  ensureValue() {\n    return this.props.value || [];\n  }\n\n  handleDeleteValue = (index: number) => {\n    const newValue = [...this.ensureValue()];\n    newValue.splice(index, 1);\n    this.props.onChange(newValue);\n  };\n\n  handleInputChange = (index: number, fieldKey: string, value: any) => {\n    const emptyValue = getEmptyValue(this.props.setting.definition)[0];\n    const newValue = [...this.ensureValue()];\n    const newFields = { ...emptyValue, ...newValue[index], [fieldKey]: value };\n    newValue.splice(index, 1, newFields);\n    return this.props.onChange(newValue);\n  };\n\n  renderFields(fieldValues: any, index: number, isLast: boolean) {\n    const { setting, isDefault } = this.props;\n    const { definition } = setting;\n\n    return (\n      <tr key={index}>\n        {isCategoryDefinition(definition) &&\n          definition.fields.map(field => {\n            const newSetting = {\n              ...setting,\n              definition: field,\n              value: fieldValues[field.key]\n            };\n            return (\n              <td key={field.key}>\n                <PrimitiveInput\n                  isDefault={isDefault}\n                  hasValueChanged={this.props.hasValueChanged}\n                  name={getUniqueName(definition, field.key)}\n                  onChange={value => this.handleInputChange(index, field.key, value)}\n                  setting={newSetting}\n                  value={fieldValues[field.key]}\n                />\n              </td>\n            );\n          })}\n        <td className=\"thin nowrap text-middle\">\n          {!isLast && (\n            <DeleteButton\n              className=\"js-remove-value\"\n              onClick={() => this.handleDeleteValue(index)}\n            />\n          )}\n        </td>\n      </tr>\n    );\n  }\n\n  render() {\n    const { definition } = this.props.setting;\n    const displayedValue = [...this.ensureValue(), ...getEmptyValue(definition)];\n\n    return (\n      <div>\n        <table\n          className=\"data zebra-hover no-outer-padding\"\n          style={{ width: 'auto', minWidth: 480, marginTop: -12 }}>\n          <thead>\n            <tr>\n              {isCategoryDefinition(definition) &&\n                definition.fields.map(field => (\n                  <th key={field.key}>\n                    {field.name}\n                    {field.description != null && (\n                      <span className=\"spacer-top small\">{field.description}</span>\n                    )}\n                  </th>\n                ))}\n              <th>&nbsp;</th>\n            </tr>\n          </thead>\n          <tbody>\n            {displayedValue.map((fieldValues, index) =>\n              this.renderFields(fieldValues, index, index === displayedValue.length - 1)\n            )}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SettingType } from '../../../../types/settings';\nimport {\n  DefaultInputProps,\n  DefaultSpecializedInputProps,\n  getUniqueName,\n  isCategoryDefinition,\n  isDefaultOrInherited,\n  isSecuredDefinition\n} from '../../utils';\nimport InputForSecured from './InputForSecured';\nimport MultiValueInput from './MultiValueInput';\nimport PrimitiveInput from './PrimitiveInput';\nimport PropertySetInput from './PropertySetInput';\n\nexport default function Input(props: DefaultInputProps) {\n  const { setting } = props;\n  const { definition } = setting;\n  const name = getUniqueName(definition);\n\n  let Input: React.ComponentType<DefaultSpecializedInputProps> = PrimitiveInput;\n\n  if (isCategoryDefinition(definition) && definition.multiValues) {\n    Input = MultiValueInput;\n  }\n\n  if (definition.type === SettingType.PROPERTY_SET) {\n    Input = PropertySetInput;\n  }\n\n  if (isSecuredDefinition(definition)) {\n    return <InputForSecured input={Input} {...props} />;\n  }\n\n  return <Input {...props} name={name} isDefault={isDefaultOrInherited(setting)} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport AlertErrorIcon from '../../../components/icons/AlertErrorIcon';\nimport AlertSuccessIcon from '../../../components/icons/AlertSuccessIcon';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { sanitizeStringRestricted } from '../../../helpers/sanitize';\nimport {\n  getSettingsAppChangedValue,\n  getSettingsAppValidationMessage,\n  isSettingsAppLoading,\n  Store\n} from '../../../store/rootReducer';\nimport { Setting } from '../../../types/settings';\nimport { checkValue, resetValue, saveValue } from '../store/actions';\nimport { cancelChange, changeValue, passValidation } from '../store/settingsPage';\nimport {\n  getPropertyDescription,\n  getPropertyName,\n  getSettingValue,\n  isDefaultOrInherited\n} from '../utils';\nimport DefinitionActions from './DefinitionActions';\nimport Input from './inputs/Input';\n\ninterface Props {\n  cancelChange: (key: string) => void;\n  changeValue: (key: string, value: any) => void;\n  changedValue: any;\n  checkValue: (key: string) => boolean;\n  component?: T.Component;\n  loading: boolean;\n  passValidation: (key: string) => void;\n  resetValue: (key: string, component?: string) => Promise<void>;\n  saveValue: (key: string, component?: string) => Promise<void>;\n  setting: Setting;\n  validationMessage?: string;\n}\n\ninterface State {\n  success: boolean;\n}\n\nconst SAFE_SET_STATE_DELAY = 3000;\n\nexport class Definition extends React.PureComponent<Props, State> {\n  timeout?: number;\n  mounted = false;\n  state = { success: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  safeSetState(changes: State) {\n    if (this.mounted) {\n      this.setState(changes);\n    }\n  }\n\n  handleChange = (value: any) => {\n    clearTimeout(this.timeout);\n    this.props.changeValue(this.props.setting.definition.key, value);\n    this.handleCheck();\n  };\n\n  handleReset = () => {\n    const { component, setting } = this.props;\n    const { definition } = setting;\n    const componentKey = component && component.key;\n    return this.props.resetValue(definition.key, componentKey).then(() => {\n      this.props.cancelChange(definition.key);\n      this.safeSetState({ success: true });\n      this.timeout = window.setTimeout(\n        () => this.safeSetState({ success: false }),\n        SAFE_SET_STATE_DELAY\n      );\n    });\n  };\n\n  handleCancel = () => {\n    const { setting } = this.props;\n    this.props.cancelChange(setting.definition.key);\n    this.props.passValidation(setting.definition.key);\n  };\n\n  handleCheck = () => {\n    const { setting } = this.props;\n    this.props.checkValue(setting.definition.key);\n  };\n\n  handleSave = () => {\n    if (this.props.changedValue != null) {\n      this.safeSetState({ success: false });\n      const { component, setting } = this.props;\n      this.props.saveValue(setting.definition.key, component && component.key).then(\n        () => {\n          this.safeSetState({ success: true });\n          this.timeout = window.setTimeout(\n            () => this.safeSetState({ success: false }),\n            SAFE_SET_STATE_DELAY\n          );\n        },\n        () => {\n          /* Do nothing */\n        }\n      );\n    }\n  };\n\n  render() {\n    const { changedValue, loading, setting, validationMessage } = this.props;\n    const { definition } = setting;\n    const propertyName = getPropertyName(definition);\n    const hasError = validationMessage != null;\n    const hasValueChanged = changedValue != null;\n    const effectiveValue = hasValueChanged ? changedValue : getSettingValue(setting);\n    const isDefault = isDefaultOrInherited(setting);\n    const description = getPropertyDescription(definition);\n    return (\n      <div\n        className={classNames('settings-definition', {\n          'settings-definition-changed': hasValueChanged\n        })}\n        data-key={definition.key}>\n        <div className=\"settings-definition-left\">\n          <h3 className=\"settings-definition-name\" title={propertyName}>\n            {propertyName}\n          </h3>\n\n          {description && (\n            <div\n              className=\"markdown small spacer-top\"\n              // eslint-disable-next-line react/no-danger\n              dangerouslySetInnerHTML={{ __html: sanitizeStringRestricted(description) }}\n            />\n          )}\n\n          <div className=\"settings-definition-key note little-spacer-top\">\n            {translateWithParameters('settings.key_x', definition.key)}\n          </div>\n        </div>\n\n        <div className=\"settings-definition-right\">\n          <div className=\"settings-definition-state\">\n            {loading && (\n              <span className=\"text-info\">\n                <i className=\"spinner spacer-right\" />\n                {translate('settings.state.saving')}\n              </span>\n            )}\n\n            {!loading && validationMessage && (\n              <span className=\"text-danger\">\n                <AlertErrorIcon className=\"spacer-right\" />\n                <span>\n                  {translateWithParameters('settings.state.validation_failed', validationMessage)}\n                </span>\n              </span>\n            )}\n\n            {!loading && !hasError && this.state.success && (\n              <span className=\"text-success\">\n                <AlertSuccessIcon className=\"spacer-right\" />\n                {translate('settings.state.saved')}\n              </span>\n            )}\n          </div>\n          <form>\n            <Input\n              hasValueChanged={hasValueChanged}\n              onCancel={this.handleCancel}\n              onChange={this.handleChange}\n              onSave={this.handleSave}\n              setting={setting}\n              value={effectiveValue}\n            />\n            <DefinitionActions\n              changedValue={changedValue}\n              hasError={hasError}\n              hasValueChanged={hasValueChanged}\n              isDefault={isDefault}\n              onCancel={this.handleCancel}\n              onReset={this.handleReset}\n              onSave={this.handleSave}\n              setting={setting}\n            />\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store, ownProps: Pick<Props, 'setting'>) => ({\n  changedValue: getSettingsAppChangedValue(state, ownProps.setting.definition.key),\n  loading: isSettingsAppLoading(state, ownProps.setting.definition.key),\n  validationMessage: getSettingsAppValidationMessage(state, ownProps.setting.definition.key)\n});\n\nconst mapDispatchToProps = {\n  cancelChange: cancelChange as any,\n  changeValue: changeValue as any,\n  checkValue: checkValue as any,\n  passValidation: passValidation as any,\n  resetValue: resetValue as any,\n  saveValue: saveValue as any\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Definition);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Setting } from '../../../types/settings';\nimport Definition from './Definition';\n\ninterface Props {\n  component?: T.Component;\n  scrollToDefinition: (element: HTMLLIElement) => void;\n  settings: Setting[];\n}\n\nexport default function DefinitionsList(props: Props) {\n  const { component, settings } = props;\n  return (\n    <ul className=\"settings-definitions-list\">\n      {settings.map(setting => (\n        <li\n          key={setting.definition.key}\n          data-key={setting.definition.key}\n          ref={props.scrollToDefinition}>\n          <Definition component={component} setting={setting} />\n        </li>\n      ))}\n    </ul>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sendTestEmail } from '../../../api/settings';\nimport { SubmitButton } from '../../../components/controls/buttons';\nimport { withCurrentUser } from '../../../components/hoc/withCurrentUser';\nimport { Alert } from '../../../components/ui/Alert';\nimport DeferredSpinner from '../../../components/ui/DeferredSpinner';\nimport MandatoryFieldMarker from '../../../components/ui/MandatoryFieldMarker';\nimport MandatoryFieldsExplanation from '../../../components/ui/MandatoryFieldsExplanation';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { parseError } from '../../../helpers/request';\n\ninterface Props {\n  currentUser: T.LoggedInUser;\n}\n\ninterface State {\n  recipient: string;\n  subject: string;\n  message: string;\n  loading: boolean;\n  success?: string;\n  error?: string;\n}\n\nexport class EmailForm extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      recipient: this.props.currentUser.email || '',\n      subject: translate('email_configuration.test.subject'),\n      message: translate('email_configuration.test.message_text'),\n      loading: false\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleError = (response: Response) => {\n    return parseError(response).then(message => {\n      if (this.mounted) {\n        this.setState({ error: message, loading: false });\n      }\n    });\n  };\n\n  handleFormSubmit = (event: React.FormEvent) => {\n    event.preventDefault();\n    this.setState({ success: undefined, error: undefined, loading: true });\n    const { recipient, subject, message } = this.state;\n    sendTestEmail(recipient, subject, message).then(() => {\n      if (this.mounted) {\n        this.setState({ success: recipient, loading: false });\n      }\n    }, this.handleError);\n  };\n\n  onRecipientChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ recipient: event.target.value });\n  };\n\n  onSubjectChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ subject: event.target.value });\n  };\n\n  onMessageChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ message: event.target.value });\n  };\n\n  render() {\n    const { error, loading, message, recipient, subject, success } = this.state;\n    return (\n      <div className=\"settings-definition\">\n        <div className=\"settings-definition-left\">\n          <h3 className=\"settings-definition-name\">\n            {translate('email_configuration.test.title')}\n          </h3>\n        </div>\n\n        <form className=\"settings-definition-right\" onSubmit={this.handleFormSubmit}>\n          {success && (\n            <div className=\"form-field\">\n              <Alert variant=\"success\">\n                {translateWithParameters('email_configuration.test.email_was_sent_to_x', success)}\n              </Alert>\n            </div>\n          )}\n\n          {error !== undefined && (\n            <div className=\"form-field\">\n              <Alert variant=\"error\">{error}</Alert>\n            </div>\n          )}\n\n          <MandatoryFieldsExplanation className=\"form-field\" />\n\n          <div className=\"form-field\">\n            <label htmlFor=\"test-email-to\">\n              {translate('email_configuration.test.to_address')}\n              <MandatoryFieldMarker />\n            </label>\n            <input\n              className=\"settings-large-input\"\n              disabled={loading}\n              id=\"test-email-to\"\n              onChange={this.onRecipientChange}\n              required={true}\n              type=\"email\"\n              value={recipient}\n            />\n          </div>\n          <div className=\"form-field\">\n            <label htmlFor=\"test-email-subject\">\n              {translate('email_configuration.test.subject')}\n            </label>\n            <input\n              className=\"settings-large-input\"\n              disabled={loading}\n              id=\"test-email-subject\"\n              onChange={this.onSubjectChange}\n              type=\"text\"\n              value={subject}\n            />\n          </div>\n          <div className=\"form-field\">\n            <label htmlFor=\"test-email-message\">\n              {translate('email_configuration.test.message')}\n              <MandatoryFieldMarker />\n            </label>\n            <textarea\n              className=\"settings-large-input\"\n              disabled={loading}\n              id=\"test-email-message\"\n              onChange={this.onMessageChange}\n              required={true}\n              rows={5}\n              value={message}\n            />\n          </div>\n\n          <SubmitButton disabled={loading}>\n            {translate('email_configuration.test.send')}\n          </SubmitButton>\n          {loading && <DeferredSpinner className=\"spacer-left\" />}\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default withCurrentUser(EmailForm);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { groupBy, isEqual, sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Location, withRouter } from '../../../components/hoc/withRouter';\nimport { sanitizeStringRestricted } from '../../../helpers/sanitize';\nimport { scrollToElement } from '../../../helpers/scrolling';\nimport { SettingWithCategory } from '../../../types/settings';\nimport { getSubCategoryDescription, getSubCategoryName } from '../utils';\nimport DefinitionsList from './DefinitionsList';\nimport EmailForm from './EmailForm';\n\nexport interface SubCategoryDefinitionsListProps {\n  category: string;\n  component?: T.Component;\n  fetchValues: Function;\n  location: Location;\n  settings: Array<SettingWithCategory>;\n  subCategory?: string;\n}\n\nconst SCROLL_OFFSET_TOP = 200;\nconst SCROLL_OFFSET_BOTTOM = 500;\n\nexport class SubCategoryDefinitionsList extends React.PureComponent<\n  SubCategoryDefinitionsListProps\n> {\n  componentDidMount() {\n    this.fetchValues();\n  }\n\n  componentDidUpdate(prevProps: SubCategoryDefinitionsListProps) {\n    const prevKeys = prevProps.settings.map(setting => setting.definition.key);\n    const keys = this.props.settings.map(setting => setting.definition.key);\n    if (prevProps.component !== this.props.component || !isEqual(prevKeys, keys)) {\n      this.fetchValues();\n    }\n\n    const { hash } = this.props.location;\n    if (hash && prevProps.location.hash !== hash) {\n      const query = `[data-key=${hash.substr(1).replace(/[.#/]/g, '\\\\$&')}]`;\n      const element = document.querySelector<HTMLHeadingElement | HTMLLIElement>(query);\n      this.scrollToSubCategoryOrDefinition(element);\n    }\n  }\n\n  scrollToSubCategoryOrDefinition = (element: HTMLHeadingElement | HTMLLIElement | null) => {\n    if (element) {\n      const { hash } = this.props.location;\n      if (hash && hash.substr(1) === element.getAttribute('data-key')) {\n        scrollToElement(element, {\n          topOffset: SCROLL_OFFSET_TOP,\n          bottomOffset: SCROLL_OFFSET_BOTTOM,\n          smooth: true\n        });\n      }\n    }\n  };\n\n  fetchValues() {\n    const keys = this.props.settings.map(setting => setting.definition.key);\n    return this.props.fetchValues(keys, this.props.component && this.props.component.key);\n  }\n\n  renderEmailForm = (subCategoryKey: string) => {\n    const isEmailSettings = this.props.category === 'general' && subCategoryKey === 'email';\n    if (!isEmailSettings) {\n      return null;\n    }\n    return <EmailForm />;\n  };\n\n  render() {\n    const bySubCategory = groupBy(this.props.settings, setting => setting.definition.subCategory);\n    const subCategories = Object.keys(bySubCategory).map(key => ({\n      key,\n      name: getSubCategoryName(bySubCategory[key][0].definition.category, key),\n      description: getSubCategoryDescription(bySubCategory[key][0].definition.category, key)\n    }));\n    const sortedSubCategories = sortBy(subCategories, subCategory =>\n      subCategory.name.toLowerCase()\n    );\n    const filteredSubCategories = this.props.subCategory\n      ? sortedSubCategories.filter(c => c.key === this.props.subCategory)\n      : sortedSubCategories;\n    return (\n      <ul className=\"settings-sub-categories-list\">\n        {filteredSubCategories.map(subCategory => (\n          <li key={subCategory.key}>\n            <h2\n              className=\"settings-sub-category-name\"\n              data-key={subCategory.key}\n              ref={this.scrollToSubCategoryOrDefinition}>\n              {subCategory.name}\n            </h2>\n            {subCategory.description != null && (\n              <div\n                className=\"settings-sub-category-description markdown\"\n                // eslint-disable-next-line react/no-danger\n                dangerouslySetInnerHTML={{\n                  __html: sanitizeStringRestricted(subCategory.description)\n                }}\n              />\n            )}\n            <DefinitionsList\n              component={this.props.component}\n              scrollToDefinition={this.scrollToSubCategoryOrDefinition}\n              settings={bySubCategory[subCategory.key]}\n            />\n            {this.renderEmailForm(subCategory.key)}\n          </li>\n        ))}\n      </ul>\n    );\n  }\n}\n\nexport default withRouter(SubCategoryDefinitionsList);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { getSettingsAppSettingsForCategory, Store } from '../../../store/rootReducer';\nimport { fetchValues } from '../store/actions';\nimport SubCategoryDefinitionsList from './SubCategoryDefinitionsList';\n\ninterface Props {\n  category: string;\n  component?: T.Component;\n}\n\nconst mapStateToProps = (state: Store, ownProps: Props) => ({\n  settings: getSettingsAppSettingsForCategory(\n    state,\n    ownProps.category,\n    ownProps.component && ownProps.component.key\n  )\n});\n\nconst mapDispatchToProps = { fetchValues };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubCategoryDefinitionsList);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { Button } from '../../../../components/controls/buttons';\nimport HelpTooltip from '../../../../components/controls/HelpTooltip';\nimport Tooltip from '../../../../components/controls/Tooltip';\nimport AlertErrorIcon from '../../../../components/icons/AlertErrorIcon';\nimport AlertSuccessIcon from '../../../../components/icons/AlertSuccessIcon';\nimport DeleteIcon from '../../../../components/icons/DeleteIcon';\nimport EditIcon from '../../../../components/icons/EditIcon';\nimport { Alert } from '../../../../components/ui/Alert';\nimport { ALM_DOCUMENTATION_PATHS, IMPORT_COMPATIBLE_ALMS } from '../../../../helpers/constants';\nimport { getEdition, getEditionUrl } from '../../../../helpers/editions';\nimport { translate } from '../../../../helpers/l10n';\nimport {\n  AlmBindingDefinitionBase,\n  AlmKeys,\n  AlmSettingsBindingStatus,\n  AlmSettingsBindingStatusType\n} from '../../../../types/alm-settings';\nimport { EditionKey } from '../../../../types/editions';\n\nexport interface AlmBindingDefinitionBoxProps {\n  alm: AlmKeys;\n  branchesEnabled: boolean;\n  definition: AlmBindingDefinitionBase;\n  multipleDefinitions: boolean;\n  onCheck: (definitionKey: string) => void;\n  onDelete: (definitionKey: string) => void;\n  onEdit: (definitionKey: string) => void;\n  status?: AlmSettingsBindingStatus;\n}\n\nconst DEFAULT_STATUS: AlmSettingsBindingStatus = {\n  alertSuccess: false,\n  failureMessage: '',\n  type: AlmSettingsBindingStatusType.Validating\n};\n\nconst STATUS_ICON = {\n  [AlmSettingsBindingStatusType.Failure]: <AlertErrorIcon className=\"spacer-left\" />,\n  [AlmSettingsBindingStatusType.Success]: <AlertSuccessIcon className=\"spacer-left\" />\n};\n\nfunction getPRDecorationFeatureStatus(\n  branchesEnabled: boolean,\n  type: AlmSettingsBindingStatusType.Success | AlmSettingsBindingStatusType.Failure\n) {\n  if (branchesEnabled) {\n    return STATUS_ICON[type];\n  }\n\n  return (\n    <div className=\"display-inline-flex-center\">\n      <strong className=\"spacer-left\">\n        {translate('settings.almintegration.feature.pr_decoration.disabled')}\n      </strong>\n      <HelpTooltip\n        className=\"little-spacer-left\"\n        overlay={\n          <FormattedMessage\n            id=\"settings.almintegration.feature.pr_decoration.disabled.no_branches\"\n            defaultMessage={translate(\n              'settings.almintegration.feature.pr_decoration.disabled.no_branches'\n            )}\n            values={{\n              link: (\n                <a\n                  href={getEditionUrl(getEdition(EditionKey.developer), {\n                    sourceEdition: EditionKey.community\n                  })}\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\">\n                  {translate(\n                    'settings.almintegration.feature.pr_decoration.disabled.no_branches.link'\n                  )}\n                </a>\n              )\n            }}\n          />\n        }\n      />\n    </div>\n  );\n}\n\nfunction getImportFeatureStatus(\n  alm: AlmKeys,\n  definition: AlmBindingDefinitionBase,\n  multipleDefinitions: boolean,\n  type: AlmSettingsBindingStatusType.Success | AlmSettingsBindingStatusType.Failure\n) {\n  if (multipleDefinitions) {\n    return (\n      <div className=\"display-inline-flex-center\">\n        <strong className=\"spacer-left\">\n          {translate('settings.almintegration.feature.alm_repo_import.disabled')}\n        </strong>\n        <HelpTooltip\n          className=\"little-spacer-left\"\n          overlay={translate('settings.almintegration.feature.alm_repo_import.disabled.multiple')}\n        />\n      </div>\n    );\n  }\n\n  if (!definition.url && alm !== AlmKeys.BitbucketCloud) {\n    return (\n      <div className=\"display-inline-flex-center\">\n        <strong className=\"spacer-left\">\n          {translate('settings.almintegration.feature.alm_repo_import.disabled')}\n        </strong>\n        <HelpTooltip\n          className=\"little-spacer-left\"\n          overlay={translate('settings.almintegration.feature.alm_repo_import.disabled.no_url')}\n        />\n      </div>\n    );\n  }\n\n  return STATUS_ICON[type];\n}\n\nfunction getPrDecoFeatureDescription(alm: AlmKeys) {\n  switch (alm) {\n    case AlmKeys.GitLab:\n      return translate('settings.almintegration.feature.status_reporting.description_mr');\n    case AlmKeys.GitHub:\n      return translate(\n        'settings.almintegration.feature.status_reporting.description_pr_and_commits'\n      );\n    default:\n      return translate('settings.almintegration.feature.status_reporting.description_pr');\n  }\n}\n\nexport default function AlmBindingDefinitionBox(props: AlmBindingDefinitionBoxProps) {\n  const { alm, branchesEnabled, definition, multipleDefinitions, status = DEFAULT_STATUS } = props;\n\n  return (\n    <div className=\"boxed-group-inner bordered spacer-top spacer-bottom it__alm-binding-definition\">\n      <div className=\"actions pull-right\">\n        <Button onClick={() => props.onEdit(definition.key)}>\n          <EditIcon className=\"spacer-right\" />\n          {translate('edit')}\n        </Button>\n        <Button className=\"button-red spacer-left\" onClick={() => props.onDelete(definition.key)}>\n          <DeleteIcon className=\"spacer-right\" />\n          {translate('delete')}\n        </Button>\n      </div>\n\n      <div className=\"big-spacer-bottom\">\n        <h3>{definition.key}</h3>\n        {definition.url && <span>{definition.url}</span>}\n      </div>\n\n      {status.type === AlmSettingsBindingStatusType.Validating ? (\n        <>\n          <i className=\"spinner spacer-right\" />\n          {translate('settings.almintegration.checking_configuration')}\n        </>\n      ) : (\n        <>\n          {status.type !== AlmSettingsBindingStatusType.Warning && (\n            <div className=\"display-flex-row spacer-bottom\">\n              <div className=\"huge-spacer-right\">\n                <Tooltip overlay={getPrDecoFeatureDescription(alm)}>\n                  <span>{translate('settings.almintegration.feature.status_reporting.title')}</span>\n                </Tooltip>\n                {getPRDecorationFeatureStatus(branchesEnabled, status.type)}\n              </div>\n              {IMPORT_COMPATIBLE_ALMS.includes(alm) && (\n                <div>\n                  <Tooltip\n                    overlay={translate(\n                      'settings.almintegration.feature.alm_repo_import.description'\n                    )}>\n                    <span>\n                      {translate('settings.almintegration.feature.alm_repo_import.title')}\n                    </span>\n                  </Tooltip>\n                  {getImportFeatureStatus(alm, definition, multipleDefinitions, status.type)}\n                </div>\n              )}\n            </div>\n          )}\n\n          <div className=\"width-50\">\n            {status.type === AlmSettingsBindingStatusType.Warning && (\n              <Alert variant=\"warning\">\n                {translate('settings.almintegration.could_not_validate')}\n              </Alert>\n            )}\n\n            {status.type === AlmSettingsBindingStatusType.Failure && (\n              <Alert variant=\"error\">{status.failureMessage}</Alert>\n            )}\n\n            {status.type === AlmSettingsBindingStatusType.Success && status.alertSuccess && (\n              <>\n                <Alert variant=\"success\">\n                  {translate('settings.almintegration.configuration_valid')}\n                </Alert>\n                {alm === AlmKeys.GitHub && (\n                  <Alert variant=\"warning\">\n                    <FormattedMessage\n                      id=\"settings.almintegration.github.additional_permission\"\n                      defaultMessage={translate(\n                        'settings.almintegration.github.additional_permission'\n                      )}\n                      values={{\n                        link: (\n                          <Link target=\"_blank\" to={ALM_DOCUMENTATION_PATHS[AlmKeys.GitHub]}>\n                            {translate('learn_more')}\n                          </Link>\n                        )\n                      }}\n                    />\n                  </Alert>\n                )}\n              </>\n            )}\n          </div>\n\n          <Button className=\"big-spacer-top\" onClick={() => props.onCheck(definition.key)}>\n            {translate('settings.almintegration.check_configuration')}\n          </Button>\n        </>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport Tooltip from '../../../../components/controls/Tooltip';\nimport { withAppState } from '../../../../components/hoc/withAppState';\nimport { getEdition, getEditionUrl } from '../../../../helpers/editions';\nimport { translate } from '../../../../helpers/l10n';\nimport { AlmKeys } from '../../../../types/alm-settings';\nimport { EditionKey } from '../../../../types/editions';\n\nexport interface CreationTooltipProps {\n  alm: AlmKeys;\n  appState: T.AppState;\n  children: React.ReactElement<{}>;\n  preventCreation: boolean;\n}\n\nexport function CreationTooltip(props: CreationTooltipProps) {\n  const {\n    alm,\n    appState: { edition },\n    children,\n    preventCreation\n  } = props;\n\n  const sourceEdition = edition ? EditionKey[edition] : undefined;\n\n  return (\n    <Tooltip\n      overlay={\n        preventCreation ? (\n          <FormattedMessage\n            id=\"settings.almintegration.create.tooltip\"\n            defaultMessage={translate('settings.almintegration.create.tooltip')}\n            values={{\n              link: (\n                <a\n                  href={getEditionUrl(getEdition(EditionKey.enterprise), {\n                    sourceEdition\n                  })}\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\">\n                  {translate('settings.almintegration.create.tooltip.link')}\n                </a>\n              ),\n              alm: translate('alm', alm)\n            }}\n          />\n        ) : null\n      }\n      mouseLeaveDelay={0.25}>\n      {children}\n    </Tooltip>\n  );\n}\n\nexport default withAppState(CreationTooltip);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from '../../../../components/controls/buttons';\nimport DeferredSpinner from '../../../../components/ui/DeferredSpinner';\nimport { translate } from '../../../../helpers/l10n';\nimport {\n  AlmBindingDefinition,\n  AlmBindingDefinitionBase,\n  AlmKeys,\n  AlmSettingsBindingStatus,\n  isBitbucketCloudBindingDefinition\n} from '../../../../types/alm-settings';\nimport { ALM_INTEGRATION } from '../AdditionalCategoryKeys';\nimport CategoryDefinitionsList from '../CategoryDefinitionsList';\nimport AlmBindingDefinitionBox from './AlmBindingDefinitionBox';\nimport AlmBindingDefinitionForm from './AlmBindingDefinitionForm';\nimport { AlmTabs } from './AlmIntegration';\nimport CreationTooltip from './CreationTooltip';\n\nexport interface AlmTabRendererProps {\n  almTab: AlmTabs;\n  branchesEnabled: boolean;\n  definitionStatus: T.Dict<AlmSettingsBindingStatus>;\n  editDefinition?: boolean;\n  editedDefinition?: AlmBindingDefinition;\n  definitions: AlmBindingDefinition[];\n  loadingAlmDefinitions: boolean;\n  loadingProjectCount: boolean;\n  multipleAlmEnabled: boolean;\n  onCancel: () => void;\n  onCheck: (definitionKey: string) => void;\n  onCreate: () => void;\n  onDelete: (definitionKey: string) => void;\n  onEdit: (definitionKey: string) => void;\n  afterSubmit: (config: AlmBindingDefinitionBase) => void;\n}\n\nexport default function AlmTabRenderer(props: AlmTabRendererProps) {\n  const {\n    almTab,\n    branchesEnabled,\n    definitions,\n    definitionStatus,\n    editDefinition,\n    editedDefinition,\n    loadingAlmDefinitions,\n    loadingProjectCount,\n    multipleAlmEnabled\n  } = props;\n\n  const preventCreation = loadingProjectCount || (!multipleAlmEnabled && definitions.length > 0);\n\n  return (\n    <div className=\"bordered\">\n      <div className=\"big-padded\">\n        <DeferredSpinner loading={loadingAlmDefinitions}>\n          {definitions.length === 0 && (\n            <p className=\"spacer-top\">{translate('settings.almintegration.empty', almTab)}</p>\n          )}\n\n          <div className={definitions.length > 0 ? 'spacer-bottom text-right' : 'big-spacer-top'}>\n            <CreationTooltip alm={almTab} preventCreation={preventCreation}>\n              <Button\n                data-test=\"settings__alm-create\"\n                disabled={preventCreation}\n                onClick={props.onCreate}>\n                {translate('settings.almintegration.create')}\n              </Button>\n            </CreationTooltip>\n          </div>\n          {definitions.map(def => (\n            <AlmBindingDefinitionBox\n              alm={isBitbucketCloudBindingDefinition(def) ? AlmKeys.BitbucketCloud : almTab}\n              branchesEnabled={branchesEnabled}\n              definition={def}\n              key={def.key}\n              multipleDefinitions={definitions.length > 1}\n              onCheck={props.onCheck}\n              onDelete={props.onDelete}\n              onEdit={props.onEdit}\n              status={definitionStatus[def.key]}\n            />\n          ))}\n\n          {editDefinition && (\n            <AlmBindingDefinitionForm\n              alm={almTab}\n              bindingDefinition={editedDefinition}\n              alreadyHaveInstanceConfigured={definitions.length > 0}\n              onCancel={props.onCancel}\n              afterSubmit={props.afterSubmit}\n            />\n          )}\n        </DeferredSpinner>\n      </div>\n\n      <div className=\"huge-spacer-top huge-spacer-bottom bordered-top\" />\n\n      <div className=\"big-padded\">\n        <CategoryDefinitionsList category={ALM_INTEGRATION} subCategory={almTab} />\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport {\n  AlmBindingDefinition,\n  AlmBindingDefinitionBase,\n  AlmSettingsBindingStatus\n} from '../../../../types/alm-settings';\nimport { AlmTabs } from './AlmIntegration';\nimport AlmTabRenderer from './AlmTabRenderer';\n\ninterface Props {\n  almTab: AlmTabs;\n  branchesEnabled: boolean;\n  definitions: AlmBindingDefinition[];\n  definitionStatus: T.Dict<AlmSettingsBindingStatus>;\n  loadingAlmDefinitions: boolean;\n  loadingProjectCount: boolean;\n  multipleAlmEnabled: boolean;\n  onCheck: (definitionKey: string) => void;\n  onDelete: (definitionKey: string) => void;\n  onUpdateDefinitions: () => void;\n}\n\ninterface State {\n  editedDefinition?: AlmBindingDefinition;\n  editDefinition?: boolean;\n}\n\nexport default class AlmTab extends React.PureComponent<Props, State> {\n  state: State = {};\n  mounted = false;\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleCancel = () => {\n    this.setState({ editDefinition: false, editedDefinition: undefined });\n  };\n\n  handleCreate = () => {\n    this.setState({ editDefinition: true, editedDefinition: undefined });\n  };\n\n  handleEdit = (definitionKey: string) => {\n    const editedDefinition = this.props.definitions.find(d => d.key === definitionKey);\n    this.setState({ editDefinition: true, editedDefinition });\n  };\n\n  handleAfterSubmit = (config: AlmBindingDefinitionBase) => {\n    if (this.mounted) {\n      this.setState({\n        editDefinition: false,\n        editedDefinition: undefined\n      });\n    }\n\n    this.props.onUpdateDefinitions();\n\n    this.props.onCheck(config.key);\n  };\n\n  render() {\n    const {\n      almTab,\n      branchesEnabled,\n      definitions,\n      definitionStatus,\n      loadingAlmDefinitions,\n      loadingProjectCount,\n      multipleAlmEnabled\n    } = this.props;\n    const { editDefinition, editedDefinition } = this.state;\n\n    return (\n      <AlmTabRenderer\n        almTab={almTab}\n        branchesEnabled={branchesEnabled}\n        definitions={definitions}\n        definitionStatus={definitionStatus}\n        editDefinition={editDefinition}\n        editedDefinition={editedDefinition}\n        loadingAlmDefinitions={loadingAlmDefinitions}\n        loadingProjectCount={loadingProjectCount}\n        multipleAlmEnabled={multipleAlmEnabled}\n        onCheck={this.props.onCheck}\n        onCreate={this.handleCreate}\n        onDelete={this.props.onDelete}\n        onEdit={this.handleEdit}\n        onCancel={this.handleCancel}\n        afterSubmit={this.handleAfterSubmit}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport ConfirmModal from '../../../../components/controls/ConfirmModal';\nimport { translate, translateWithParameters } from '../../../../helpers/l10n';\n\nexport interface DeleteModalProps {\n  id: string;\n  projectCount?: number;\n  onDelete: (id: string) => void;\n  onCancel: () => void;\n}\n\nfunction showProjectCountWarning(projectCount?: number) {\n  if (projectCount === undefined) {\n    return <p>{translate('settings.almintegration.delete.no_info')}</p>;\n  }\n\n  return projectCount ? (\n    <p>{translateWithParameters('settings.almintegration.delete.info', projectCount)} </p>\n  ) : null;\n}\n\nexport default function DeleteModal({ id, onDelete, onCancel, projectCount }: DeleteModalProps) {\n  return (\n    <ConfirmModal\n      confirmButtonText={translate('delete')}\n      confirmData={id}\n      header={translate('settings.almintegration.delete.header')}\n      isDestructive={true}\n      onClose={onCancel}\n      onConfirm={onDelete}>\n      <>\n        <p className=\"spacer-bottom\">\n          <FormattedMessage\n            defaultMessage={translate('settings.almintegration.delete.message')}\n            id=\"settings.almintegration.delete.message\"\n            values={{ id: <b>{id}</b> }}\n          />\n        </p>\n        {showProjectCountWarning(projectCount)}\n      </>\n    </ConfirmModal>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport BoxedTabs from '../../../../components/controls/BoxedTabs';\nimport { translate } from '../../../../helpers/l10n';\nimport { getBaseUrl } from '../../../../helpers/system';\nimport {\n  AlmKeys,\n  AlmSettingsBindingDefinitions,\n  AlmSettingsBindingStatus\n} from '../../../../types/alm-settings';\nimport { AlmTabs } from './AlmIntegration';\nimport AlmTab from './AlmTab';\nimport DeleteModal from './DeleteModal';\n\nexport interface AlmIntegrationRendererProps {\n  branchesEnabled: boolean;\n  currentAlmTab: AlmTabs;\n  definitionKeyForDeletion?: string;\n  definitions: AlmSettingsBindingDefinitions;\n  definitionStatus: T.Dict<AlmSettingsBindingStatus>;\n  loadingAlmDefinitions: boolean;\n  loadingProjectCount: boolean;\n  multipleAlmEnabled: boolean;\n  onCancelDelete: () => void;\n  onCheckConfiguration: (definitionKey: string) => void;\n  onConfirmDelete: (definitionKey: string) => void;\n  onDelete: (definitionKey: string) => void;\n  onSelectAlmTab: (alm: AlmTabs) => void;\n  onUpdateDefinitions: () => void;\n  projectCount?: number;\n}\n\nconst tabs = [\n  {\n    key: AlmKeys.GitHub,\n    label: (\n      <>\n        <img\n          alt=\"github\"\n          className=\"spacer-right\"\n          height={16}\n          src={`${getBaseUrl()}/images/alm/github.svg`}\n        />\n        GitHub\n      </>\n    )\n  },\n  {\n    key: AlmKeys.BitbucketServer,\n    label: (\n      <>\n        <img\n          alt=\"bitbucket\"\n          className=\"spacer-right\"\n          height={16}\n          src={`${getBaseUrl()}/images/alm/bitbucket.svg`}\n        />\n        Bitbucket\n      </>\n    )\n  },\n  {\n    key: AlmKeys.Azure,\n    label: (\n      <>\n        <img\n          alt=\"azure\"\n          className=\"spacer-right\"\n          height={16}\n          src={`${getBaseUrl()}/images/alm/azure.svg`}\n        />\n        Azure DevOps\n      </>\n    )\n  },\n  {\n    key: AlmKeys.GitLab,\n    label: (\n      <>\n        <img\n          alt=\"gitlab\"\n          className=\"spacer-right\"\n          height={16}\n          src={`${getBaseUrl()}/images/alm/gitlab.svg`}\n        />\n        GitLab\n      </>\n    )\n  }\n];\n\nexport default function AlmIntegrationRenderer(props: AlmIntegrationRendererProps) {\n  const {\n    definitionKeyForDeletion,\n    definitions,\n    definitionStatus,\n    currentAlmTab,\n    loadingAlmDefinitions,\n    loadingProjectCount,\n    branchesEnabled,\n    multipleAlmEnabled,\n    projectCount\n  } = props;\n\n  const bindingDefinitions = {\n    [AlmKeys.Azure]: definitions.azure,\n    [AlmKeys.GitLab]: definitions.gitlab,\n    [AlmKeys.GitHub]: definitions.github,\n    [AlmKeys.BitbucketServer]: [...definitions.bitbucket, ...definitions.bitbucketcloud]\n  };\n\n  return (\n    <>\n      <header className=\"page-header\">\n        <h1 className=\"page-title\">{translate('settings.almintegration.title')}</h1>\n      </header>\n\n      <div className=\"markdown small spacer-top big-spacer-bottom\">\n        {translate('settings.almintegration.description')}\n      </div>\n\n      <BoxedTabs onSelect={props.onSelectAlmTab} selected={currentAlmTab} tabs={tabs} />\n\n      <AlmTab\n        almTab={currentAlmTab}\n        branchesEnabled={branchesEnabled}\n        definitions={bindingDefinitions[currentAlmTab]}\n        definitionStatus={definitionStatus}\n        loadingAlmDefinitions={loadingAlmDefinitions}\n        loadingProjectCount={loadingProjectCount}\n        multipleAlmEnabled={multipleAlmEnabled}\n        onCheck={props.onCheckConfiguration}\n        onDelete={props.onDelete}\n        onUpdateDefinitions={props.onUpdateDefinitions}\n      />\n\n      {definitionKeyForDeletion && (\n        <DeleteModal\n          id={definitionKeyForDeletion}\n          onCancel={props.onCancelDelete}\n          onDelete={props.onConfirmDelete}\n          projectCount={projectCount}\n        />\n      )}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { WithRouterProps } from 'react-router';\nimport {\n  countBindedProjects,\n  deleteConfiguration,\n  getAlmDefinitions,\n  validateAlmSettings\n} from '../../../../api/alm-settings';\nimport { withAppState } from '../../../../components/hoc/withAppState';\nimport { withRouter } from '../../../../components/hoc/withRouter';\nimport {\n  AlmBindingDefinitionBase,\n  AlmKeys,\n  AlmSettingsBindingDefinitions,\n  AlmSettingsBindingStatus,\n  AlmSettingsBindingStatusType\n} from '../../../../types/alm-settings';\nimport AlmIntegrationRenderer from './AlmIntegrationRenderer';\n\ninterface Props extends Pick<WithRouterProps, 'location' | 'router'> {\n  appState: Pick<T.AppState, 'branchesEnabled' | 'multipleAlmEnabled'>;\n}\n\nexport type AlmTabs = AlmKeys.Azure | AlmKeys.GitHub | AlmKeys.GitLab | AlmKeys.BitbucketServer;\n\ninterface State {\n  currentAlmTab: AlmTabs;\n  definitionKeyForDeletion?: string;\n  definitions: AlmSettingsBindingDefinitions;\n  definitionStatus: T.Dict<AlmSettingsBindingStatus>;\n  loadingAlmDefinitions: boolean;\n  loadingProjectCount: boolean;\n  projectCount?: number;\n}\n\nexport class AlmIntegration extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State;\n\n  constructor(props: Props) {\n    super(props);\n\n    let currentAlmTab = props.location.query.alm || AlmKeys.GitHub;\n    if (currentAlmTab === AlmKeys.BitbucketCloud) {\n      currentAlmTab = AlmKeys.BitbucketServer;\n    }\n\n    this.state = {\n      currentAlmTab,\n      definitions: {\n        [AlmKeys.Azure]: [],\n        [AlmKeys.BitbucketServer]: [],\n        [AlmKeys.BitbucketCloud]: [],\n        [AlmKeys.GitHub]: [],\n        [AlmKeys.GitLab]: []\n      },\n      definitionStatus: {},\n      loadingAlmDefinitions: true,\n      loadingProjectCount: false\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    return this.fetchPullRequestDecorationSetting().then(definitions => {\n      if (definitions) {\n        // Validate all alms on load:\n        [\n          AlmKeys.Azure,\n          AlmKeys.BitbucketCloud,\n          AlmKeys.BitbucketServer,\n          AlmKeys.GitHub,\n          AlmKeys.GitLab\n        ].forEach(alm => {\n          this.state.definitions[alm].forEach((def: AlmBindingDefinitionBase) =>\n            this.handleCheck(def.key, false)\n          );\n        });\n      }\n    });\n  }\n\n  componentDidUpdate() {\n    const { location } = this.props;\n    if (location.query.alm && this.mounted) {\n      this.setState({ currentAlmTab: location.query.alm });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleConfirmDelete = (definitionKey: string) => {\n    return deleteConfiguration(definitionKey)\n      .then(() => {\n        if (this.mounted) {\n          this.setState({ definitionKeyForDeletion: undefined, projectCount: undefined });\n        }\n      })\n      .then(this.fetchPullRequestDecorationSetting);\n  };\n\n  fetchPullRequestDecorationSetting = () => {\n    this.setState({ loadingAlmDefinitions: true });\n    return getAlmDefinitions()\n      .then(definitions => {\n        if (this.mounted) {\n          this.setState({\n            definitions,\n            loadingAlmDefinitions: false\n          });\n          return definitions;\n        }\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loadingAlmDefinitions: false });\n        }\n      });\n  };\n\n  handleSelectAlm = (currentAlmTab: AlmTabs) => {\n    const { location, router } = this.props;\n    location.query.alm = currentAlmTab;\n    location.hash = '';\n    router.push(location);\n    this.setState({ currentAlmTab });\n  };\n\n  handleCancelDelete = () => {\n    this.setState({ definitionKeyForDeletion: undefined, projectCount: undefined });\n  };\n\n  handleDelete = (definitionKey: string) => {\n    this.setState({ loadingProjectCount: true });\n    return countBindedProjects(definitionKey)\n      .then(projectCount => {\n        if (this.mounted) {\n          this.setState({\n            definitionKeyForDeletion: definitionKey,\n            loadingProjectCount: false,\n            projectCount\n          });\n        }\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loadingProjectCount: false });\n        }\n      });\n  };\n\n  handleCheck = async (definitionKey: string, alertSuccess = true) => {\n    this.setState(({ definitionStatus }) => {\n      definitionStatus[definitionKey] = {\n        ...definitionStatus[definitionKey],\n        type: AlmSettingsBindingStatusType.Validating\n      };\n\n      return { definitionStatus: { ...definitionStatus } };\n    });\n\n    let type: AlmSettingsBindingStatusType;\n    let failureMessage = '';\n\n    try {\n      failureMessage = await validateAlmSettings(definitionKey);\n      type = failureMessage\n        ? AlmSettingsBindingStatusType.Failure\n        : AlmSettingsBindingStatusType.Success;\n    } catch (_) {\n      type = AlmSettingsBindingStatusType.Warning;\n    }\n\n    if (this.mounted) {\n      this.setState(({ definitionStatus }) => {\n        definitionStatus[definitionKey] = {\n          alertSuccess,\n          failureMessage,\n          type\n        };\n\n        return { definitionStatus: { ...definitionStatus } };\n      });\n    }\n  };\n\n  render() {\n    const {\n      appState: { branchesEnabled, multipleAlmEnabled }\n    } = this.props;\n    const {\n      currentAlmTab,\n      definitionKeyForDeletion,\n      definitions,\n      definitionStatus,\n      loadingAlmDefinitions,\n      loadingProjectCount,\n      projectCount\n    } = this.state;\n\n    return (\n      <AlmIntegrationRenderer\n        branchesEnabled={Boolean(branchesEnabled)}\n        multipleAlmEnabled={Boolean(multipleAlmEnabled)}\n        onCancelDelete={this.handleCancelDelete}\n        onConfirmDelete={this.handleConfirmDelete}\n        onCheckConfiguration={this.handleCheck}\n        onDelete={this.handleDelete}\n        onSelectAlmTab={this.handleSelectAlm}\n        onUpdateDefinitions={this.fetchPullRequestDecorationSetting}\n        currentAlmTab={currentAlmTab}\n        definitionKeyForDeletion={definitionKeyForDeletion}\n        definitions={definitions}\n        definitionStatus={definitionStatus}\n        loadingAlmDefinitions={loadingAlmDefinitions}\n        loadingProjectCount={loadingProjectCount}\n        projectCount={projectCount}\n      />\n    );\n  }\n}\n\nexport default withRouter(withAppState(AlmIntegration));\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { translate } from '../../../helpers/l10n';\nimport { AdditionalCategoryComponentProps } from './AdditionalCategories';\nimport CategoryDefinitionsList from './CategoryDefinitionsList';\n\nexport function AnalysisScope(props: AdditionalCategoryComponentProps) {\n  const { component, selectedCategory } = props;\n\n  return (\n    <>\n      <p className=\"spacer-bottom\">\n        {translate('settings.analysis_scope.wildcards.introduction')}\n        <Link\n          className=\"spacer-left\"\n          to=\"/documentation/project-administration/narrowing-the-focus/\">\n          {translate('learn_more')}\n        </Link>\n      </p>\n\n      <table className=\"data spacer-bottom\">\n        <tbody>\n          <tr>\n            <td>*</td>\n            <td>{translate('settings.analysis_scope.wildcards.zero_more_char')}</td>\n          </tr>\n          <tr>\n            <td>**</td>\n            <td>{translate('settings.analysis_scope.wildcards.zero_more_dir')}</td>\n          </tr>\n          <tr>\n            <td>?</td>\n            <td>{translate('settings.analysis_scope.wildcards.single_char')}</td>\n          </tr>\n        </tbody>\n      </table>\n\n      <div className=\"settings-sub-category\">\n        <CategoryDefinitionsList category={selectedCategory} component={component} />\n      </div>\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { LANGUAGES_CATEGORY } from './AdditionalCategoryKeys';\n\nconst CATEGORY_OVERRIDES: T.Dict<string> = {\n  abap: LANGUAGES_CATEGORY,\n  apex: LANGUAGES_CATEGORY,\n  'c / c++ / objective-c': LANGUAGES_CATEGORY,\n  'c#': LANGUAGES_CATEGORY,\n  cobol: LANGUAGES_CATEGORY,\n  css: LANGUAGES_CATEGORY,\n  flex: LANGUAGES_CATEGORY,\n  go: LANGUAGES_CATEGORY,\n  html: LANGUAGES_CATEGORY,\n  java: LANGUAGES_CATEGORY,\n  javascript: LANGUAGES_CATEGORY,\n  'javascript / typescript': LANGUAGES_CATEGORY,\n  json: LANGUAGES_CATEGORY,\n  kotlin: LANGUAGES_CATEGORY,\n  php: LANGUAGES_CATEGORY,\n  'pl/i': LANGUAGES_CATEGORY,\n  'pl/sql': LANGUAGES_CATEGORY,\n  python: LANGUAGES_CATEGORY,\n  rpg: LANGUAGES_CATEGORY,\n  ruby: LANGUAGES_CATEGORY,\n  scala: LANGUAGES_CATEGORY,\n  swift: LANGUAGES_CATEGORY,\n  't-sql': LANGUAGES_CATEGORY,\n  typescript: LANGUAGES_CATEGORY,\n  'vb.net': LANGUAGES_CATEGORY,\n  'visual basic': LANGUAGES_CATEGORY,\n  xml: LANGUAGES_CATEGORY,\n  yaml: LANGUAGES_CATEGORY\n};\n\nexport default CATEGORY_OVERRIDES;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport Select from '../../../components/controls/Select';\nimport { Location, Router, withRouter } from '../../../components/hoc/withRouter';\nimport { translate } from '../../../helpers/l10n';\nimport { getSettingsAppAllCategories, Store } from '../../../store/rootReducer';\nimport { getCategoryName } from '../utils';\nimport { AdditionalCategoryComponentProps } from './AdditionalCategories';\nimport { LANGUAGES_CATEGORY } from './AdditionalCategoryKeys';\nimport CategoryDefinitionsList from './CategoryDefinitionsList';\nimport CATEGORY_OVERRIDES from './CategoryOverrides';\n\nexport interface LanguagesProps extends AdditionalCategoryComponentProps {\n  categories: string[];\n  location: Location;\n  router: Router;\n}\n\ninterface SelectOption {\n  label: string;\n  originalValue: string;\n  value: string;\n}\n\nexport function Languages(props: LanguagesProps) {\n  const { categories, component, location, router, selectedCategory } = props;\n  const { availableLanguages, selectedLanguage } = getLanguages(categories, selectedCategory);\n\n  const handleOnChange = (newOption: SelectOption) => {\n    router.push({\n      ...location,\n      query: { ...location.query, category: newOption.originalValue }\n    });\n  };\n\n  return (\n    <>\n      <h2 className=\"settings-sub-category-name\">{translate('property.category.languages')}</h2>\n      <div data-test=\"language-select\">\n        <Select\n          className=\"input-large\"\n          onChange={handleOnChange}\n          options={availableLanguages}\n          placeholder={translate('settings.languages.select_a_language_placeholder')}\n          value={selectedLanguage}\n        />\n      </div>\n      {selectedLanguage && (\n        <div className=\"settings-sub-category\">\n          <CategoryDefinitionsList category={selectedLanguage} component={component} />\n        </div>\n      )}\n    </>\n  );\n}\n\nfunction getLanguages(categories: string[], selectedCategory: string) {\n  const lowerCasedLanguagesCategory = LANGUAGES_CATEGORY.toLowerCase();\n  const lowerCasedSelectedCategory = selectedCategory.toLowerCase();\n\n  const availableLanguages = categories\n    .filter(c => CATEGORY_OVERRIDES[c.toLowerCase()] === lowerCasedLanguagesCategory)\n    .map(c => ({\n      label: getCategoryName(c),\n      value: c.toLowerCase(),\n      originalValue: c\n    }));\n\n  let selectedLanguage = undefined;\n\n  if (\n    lowerCasedSelectedCategory !== lowerCasedLanguagesCategory &&\n    availableLanguages.find(c => c.value === lowerCasedSelectedCategory)\n  ) {\n    selectedLanguage = lowerCasedSelectedCategory;\n  }\n\n  return {\n    availableLanguages,\n    selectedLanguage\n  };\n}\n\nexport default withRouter(\n  connect((state: Store) => ({\n    categories: getSettingsAppAllCategories(state)\n  }))(Languages)\n);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { getNewCodePeriod, setNewCodePeriod } from '../../../api/newCodePeriod';\nimport { ResetButtonLink, SubmitButton } from '../../../components/controls/buttons';\nimport AlertSuccessIcon from '../../../components/icons/AlertSuccessIcon';\nimport DeferredSpinner from '../../../components/ui/DeferredSpinner';\nimport { translate } from '../../../helpers/l10n';\nimport BaselineSettingDays from '../../projectBaseline/components/BaselineSettingDays';\nimport BaselineSettingPreviousVersion from '../../projectBaseline/components/BaselineSettingPreviousVersion';\nimport { validateDays } from '../../projectBaseline/utils';\n\ninterface State {\n  currentSetting?: T.NewCodePeriodSettingType;\n  days: string;\n  loading: boolean;\n  currentSettingValue?: string | number;\n  saving: boolean;\n  selected?: T.NewCodePeriodSettingType;\n  success: boolean;\n}\n\nconst DEFAULT_SETTING = 'PREVIOUS_VERSION';\n\nexport default class NewCodePeriod extends React.PureComponent<{}, State> {\n  mounted = false;\n  state: State = {\n    loading: true,\n    days: '30',\n    saving: false,\n    success: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchNewCodePeriodSetting();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchNewCodePeriodSetting() {\n    getNewCodePeriod()\n      .then(({ type, value }) => {\n        const currentSetting = type || DEFAULT_SETTING;\n\n        this.setState(({ days }) => ({\n          currentSetting,\n          days: currentSetting === 'NUMBER_OF_DAYS' ? String(value) : days,\n          loading: false,\n          currentSettingValue: value,\n          selected: currentSetting\n        }));\n      })\n      .catch(() => {\n        this.setState({ loading: false });\n      });\n  }\n\n  onSelectDays = (days: string) => {\n    this.setState({ days, success: false });\n  };\n\n  onSelectSetting = (selected: T.NewCodePeriodSettingType) => {\n    this.setState({ selected, success: false });\n  };\n\n  onCancel = () => {\n    this.setState(({ currentSetting, currentSettingValue, days }) => ({\n      selected: currentSetting,\n      days: currentSetting === 'NUMBER_OF_DAYS' ? String(currentSettingValue) : days\n    }));\n  };\n\n  onSubmit = (e: React.SyntheticEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    const { days, selected } = this.state;\n\n    const type = selected;\n    const value = type === 'NUMBER_OF_DAYS' ? days : undefined;\n\n    if (type) {\n      this.setState({ saving: true, success: false });\n      setNewCodePeriod({\n        type,\n        value\n      }).then(\n        () => {\n          this.setState({\n            saving: false,\n            currentSetting: type,\n            currentSettingValue: value || undefined,\n            success: true\n          });\n        },\n        () => {\n          this.setState({\n            saving: false\n          });\n        }\n      );\n    }\n  };\n\n  render() {\n    const {\n      currentSetting,\n      days,\n      loading,\n      currentSettingValue,\n      saving,\n      selected,\n      success\n    } = this.state;\n\n    const isChanged =\n      selected !== currentSetting ||\n      (selected === 'NUMBER_OF_DAYS' && String(days) !== currentSettingValue);\n\n    const isValid = selected !== 'NUMBER_OF_DAYS' || validateDays(days);\n\n    return (\n      <ul className=\"settings-sub-categories-list\">\n        <li>\n          <ul className=\"settings-definitions-list\">\n            <li>\n              <div className=\"settings-definition\">\n                <div className=\"settings-definition-left\">\n                  <h3\n                    className=\"settings-definition-name\"\n                    title={translate('settings.new_code_period.title')}>\n                    {translate('settings.new_code_period.title')}\n                  </h3>\n\n                  <div className=\"small big-spacer-top\">\n                    <FormattedMessage\n                      defaultMessage={translate('settings.new_code_period.description')}\n                      id=\"settings.new_code_period.description\"\n                      values={{\n                        link: (\n                          <Link to=\"/documentation/project-administration/new-code-period/\">\n                            {translate('learn_more')}\n                          </Link>\n                        )\n                      }}\n                    />\n                    <p className=\"spacer-top\">\n                      {translate('settings.new_code_period.description2')}\n                    </p>\n                  </div>\n                </div>\n\n                <div className=\"settings-definition-right\">\n                  {loading ? (\n                    <DeferredSpinner />\n                  ) : (\n                    <form onSubmit={this.onSubmit}>\n                      <BaselineSettingPreviousVersion\n                        isDefault={true}\n                        onSelect={this.onSelectSetting}\n                        selected={selected === 'PREVIOUS_VERSION'}\n                      />\n                      <BaselineSettingDays\n                        className=\"spacer-top\"\n                        days={days}\n                        isChanged={isChanged}\n                        isValid={isValid}\n                        onChangeDays={this.onSelectDays}\n                        onSelect={this.onSelectSetting}\n                        selected={selected === 'NUMBER_OF_DAYS'}\n                      />\n                      {isChanged && (\n                        <div className=\"big-spacer-top\">\n                          <p className=\"spacer-bottom\">\n                            {translate('baseline.next_analysis_notice')}\n                          </p>\n                          <DeferredSpinner className=\"spacer-right\" loading={saving} />\n                          <SubmitButton disabled={saving || !isValid}>\n                            {translate('save')}\n                          </SubmitButton>\n                          <ResetButtonLink className=\"spacer-left\" onClick={this.onCancel}>\n                            {translate('cancel')}\n                          </ResetButtonLink>\n                        </div>\n                      )}\n                      {!saving && !loading && success && (\n                        <div className=\"big-spacer-top\">\n                          <span className=\"text-success\">\n                            <AlertSuccessIcon className=\"spacer-right\" />\n                            {translate('settings.state.saved')}\n                          </span>\n                        </div>\n                      )}\n                    </form>\n                  )}\n                </div>\n              </div>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport Toggle from '../../../../components/controls/Toggle';\nimport { Alert } from '../../../../components/ui/Alert';\nimport MandatoryFieldMarker from '../../../../components/ui/MandatoryFieldMarker';\nimport { ALM_DOCUMENTATION_PATHS } from '../../../../helpers/constants';\nimport { translate } from '../../../../helpers/l10n';\nimport { convertGithubApiUrlToLink, stripTrailingSlash } from '../../../../helpers/urls';\nimport {\n  AlmKeys,\n  AlmSettingsInstance,\n  ProjectAlmBindingResponse\n} from '../../../../types/alm-settings';\n\nexport interface AlmSpecificFormProps {\n  alm: AlmKeys;\n  instances: AlmSettingsInstance[];\n  formData: T.Omit<ProjectAlmBindingResponse, 'alm'>;\n  onFieldChange: (id: keyof ProjectAlmBindingResponse, value: string | boolean) => void;\n  monorepoEnabled: boolean;\n}\n\ninterface LabelProps {\n  id: string;\n  optional?: boolean;\n}\n\ninterface CommonFieldProps extends LabelProps {\n  help?: boolean;\n  helpParams?: T.Dict<string | JSX.Element>;\n  helpExample?: JSX.Element;\n  onFieldChange: (id: keyof ProjectAlmBindingResponse, value: string | boolean) => void;\n  propKey: keyof ProjectAlmBindingResponse;\n}\n\nfunction renderFieldWrapper(\n  label: React.ReactNode,\n  input: React.ReactNode,\n  help?: React.ReactNode\n) {\n  return (\n    <div className=\"settings-definition\">\n      <div className=\"settings-definition-left\">\n        {label}\n        {help && <div className=\"markdown small spacer-top\">{help}</div>}\n      </div>\n      <div className=\"settings-definition-right padded-top\">{input}</div>\n    </div>\n  );\n}\n\nfunction renderHelp({ help, helpExample, helpParams, id }: CommonFieldProps) {\n  return (\n    help && (\n      <>\n        <FormattedMessage\n          defaultMessage={translate('settings.pr_decoration.binding.form', id, 'help')}\n          id={`settings.pr_decoration.binding.form.${id}.help`}\n          values={helpParams}\n        />\n        {helpExample && (\n          <div className=\"spacer-top nowrap\">\n            {translate('example')}: <em>{helpExample}</em>\n          </div>\n        )}\n      </>\n    )\n  );\n}\n\nfunction renderLabel(props: LabelProps) {\n  const { optional, id } = props;\n  return (\n    <label className=\"h3\" htmlFor={id}>\n      {translate('settings.pr_decoration.binding.form', id)}\n      {!optional && <MandatoryFieldMarker />}\n    </label>\n  );\n}\n\nfunction renderBooleanField(\n  props: Omit<CommonFieldProps, 'optional'> & {\n    value: boolean;\n    inputExtra?: React.ReactNode;\n  }\n) {\n  const { id, value, onFieldChange, propKey, inputExtra } = props;\n  return renderFieldWrapper(\n    renderLabel({ ...props, optional: true }),\n    <div className=\"display-flex-center big-spacer-top\">\n      <div className=\"display-inline-block text-top\">\n        <Toggle name={id} onChange={v => onFieldChange(propKey, v)} value={value} />\n        {value == null && <span className=\"spacer-left note\">{translate('settings.not_set')}</span>}\n      </div>\n      {inputExtra}\n    </div>,\n    renderHelp(props)\n  );\n}\n\nfunction renderField(\n  props: CommonFieldProps & {\n    value: string;\n  }\n) {\n  const { id, propKey, value, onFieldChange } = props;\n  return renderFieldWrapper(\n    renderLabel(props),\n    <input\n      className=\"input-super-large big-spacer-top\"\n      id={id}\n      maxLength={256}\n      name={id}\n      onChange={e => onFieldChange(propKey, e.currentTarget.value)}\n      type=\"text\"\n      value={value}\n    />,\n    renderHelp(props)\n  );\n}\n\nexport default function AlmSpecificForm(props: AlmSpecificFormProps) {\n  const {\n    alm,\n    instances,\n    formData: { repository, slug, summaryCommentEnabled, monorepo },\n    monorepoEnabled\n  } = props;\n\n  let formFields: JSX.Element;\n  const instance = instances.find(i => i.alm === alm);\n\n  switch (alm) {\n    case AlmKeys.Azure:\n      formFields = (\n        <>\n          {renderField({\n            help: true,\n            helpExample: <strong>My Project</strong>,\n            id: 'azure.project',\n            onFieldChange: props.onFieldChange,\n            propKey: 'slug',\n            value: slug || ''\n          })}\n          {renderField({\n            help: true,\n            helpExample: <strong>My Repository</strong>,\n            id: 'azure.repository',\n            onFieldChange: props.onFieldChange,\n            propKey: 'repository',\n            value: repository || ''\n          })}\n        </>\n      );\n      break;\n    case AlmKeys.BitbucketServer:\n      formFields = (\n        <>\n          {renderField({\n            help: true,\n            helpExample: (\n              <>\n                {instance?.url\n                  ? `${stripTrailingSlash(instance.url)}/projects/`\n                  : 'https://bb.company.com/projects/'}\n                <strong>{'MY_PROJECT_KEY'}</strong>\n                {'/repos/my-repository-slug/browse'}\n              </>\n            ),\n            id: 'bitbucket.repository',\n            onFieldChange: props.onFieldChange,\n            propKey: 'repository',\n            value: repository || ''\n          })}\n          {renderField({\n            help: true,\n            helpExample: (\n              <>\n                {instance?.url\n                  ? `${stripTrailingSlash(instance.url)}/projects/MY_PROJECT_KEY/repos/`\n                  : 'https://bb.company.com/projects/MY_PROJECT_KEY/repos/'}\n                <strong>{'my-repository-slug'}</strong>\n                {'/browse'}\n              </>\n            ),\n            id: 'bitbucket.slug',\n            onFieldChange: props.onFieldChange,\n            propKey: 'slug',\n            value: slug || ''\n          })}\n        </>\n      );\n      break;\n    case AlmKeys.BitbucketCloud:\n      formFields = (\n        <>\n          {renderField({\n            help: true,\n            helpExample: (\n              <>\n                {'https://bitbucket.org/my-workspace/'}\n                <strong>{'my-repository-slug'}</strong>\n              </>\n            ),\n            id: 'bitbucketcloud.repository',\n            onFieldChange: props.onFieldChange,\n            propKey: 'repository',\n            value: repository || ''\n          })}\n        </>\n      );\n      break;\n    case AlmKeys.GitHub:\n      formFields = (\n        <>\n          {renderField({\n            help: true,\n            helpExample: (\n              <>\n                {instance?.url\n                  ? `${stripTrailingSlash(convertGithubApiUrlToLink(instance.url))}/`\n                  : 'https://github.com/'}\n                <strong>{'sonarsource/sonarqube'}</strong>\n              </>\n            ),\n            id: 'github.repository',\n            onFieldChange: props.onFieldChange,\n            propKey: 'repository',\n            value: repository || ''\n          })}\n          {renderBooleanField({\n            help: true,\n            id: 'github.summary_comment_setting',\n            onFieldChange: props.onFieldChange,\n            propKey: 'summaryCommentEnabled',\n            value: summaryCommentEnabled === undefined ? true : summaryCommentEnabled\n          })}\n        </>\n      );\n      break;\n    case AlmKeys.GitLab:\n      formFields = (\n        <>\n          {renderField({\n            help: true,\n            helpExample: <strong>123456</strong>,\n            id: 'gitlab.repository',\n            onFieldChange: props.onFieldChange,\n            propKey: 'repository',\n            value: repository || ''\n          })}\n        </>\n      );\n      break;\n  }\n\n  return (\n    <>\n      {formFields}\n      {monorepoEnabled &&\n        renderBooleanField({\n          help: true,\n          helpParams: {\n            doc_link: (\n              <Link to={ALM_DOCUMENTATION_PATHS[alm]} target=\"_blank\">\n                {translate('learn_more')}\n              </Link>\n            )\n          },\n          id: 'monorepo',\n          onFieldChange: props.onFieldChange,\n          propKey: 'monorepo',\n          value: monorepo,\n          inputExtra: monorepo && (\n            <Alert className=\"no-margin-bottom spacer-left\" variant=\"warning\" display=\"inline\">\n              {translate('settings.pr_decoration.binding.form.monorepo.warning')}\n            </Alert>\n          )\n        })}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { Button, SubmitButton } from '../../../../components/controls/buttons';\nimport Select from '../../../../components/controls/Select';\nimport AlertSuccessIcon from '../../../../components/icons/AlertSuccessIcon';\nimport { Alert } from '../../../../components/ui/Alert';\nimport DeferredSpinner from '../../../../components/ui/DeferredSpinner';\nimport MandatoryFieldMarker from '../../../../components/ui/MandatoryFieldMarker';\nimport MandatoryFieldsExplanation from '../../../../components/ui/MandatoryFieldsExplanation';\nimport { translate } from '../../../../helpers/l10n';\nimport { getGlobalSettingsUrl } from '../../../../helpers/urls';\nimport {\n  AlmSettingsInstance,\n  ProjectAlmBindingConfigurationErrors,\n  ProjectAlmBindingConfigurationErrorScope,\n  ProjectAlmBindingResponse\n} from '../../../../types/alm-settings';\nimport { ALM_INTEGRATION } from '../AdditionalCategoryKeys';\nimport AlmSpecificForm from './AlmSpecificForm';\n\nexport interface PRDecorationBindingRendererProps {\n  formData: T.Omit<ProjectAlmBindingResponse, 'alm'>;\n  instances: AlmSettingsInstance[];\n  isChanged: boolean;\n  isConfigured: boolean;\n  isValid: boolean;\n  loading: boolean;\n  onFieldChange: (id: keyof ProjectAlmBindingResponse, value: string | boolean) => void;\n  onReset: () => void;\n  onSubmit: () => void;\n  updating: boolean;\n  successfullyUpdated: boolean;\n  monorepoEnabled: boolean;\n  onCheckConfiguration: () => void;\n  checkingConfiguration: boolean;\n  configurationErrors?: ProjectAlmBindingConfigurationErrors;\n  isSysAdmin: boolean;\n}\n\nfunction optionRenderer(instance: AlmSettingsInstance) {\n  return instance.url ? (\n    <>\n      <span>{instance.key} — </span>\n      <span className=\"text-muted\">{instance.url}</span>\n    </>\n  ) : (\n    <span>{instance.key}</span>\n  );\n}\n\nexport default function PRDecorationBindingRenderer(props: PRDecorationBindingRendererProps) {\n  const {\n    formData,\n    instances,\n    isChanged,\n    isConfigured,\n    isValid,\n    loading,\n    updating,\n    successfullyUpdated,\n    monorepoEnabled,\n    checkingConfiguration,\n    configurationErrors,\n    isSysAdmin\n  } = props;\n\n  if (loading) {\n    return <DeferredSpinner />;\n  }\n\n  if (instances.length < 1) {\n    return (\n      <div>\n        <Alert className=\"spacer-top huge-spacer-bottom\" variant=\"info\">\n          {isSysAdmin ? (\n            <FormattedMessage\n              defaultMessage={translate('settings.pr_decoration.binding.no_bindings.admin')}\n              id=\"settings.pr_decoration.binding.no_bindings.admin\"\n              values={{\n                link: (\n                  <Link to={getGlobalSettingsUrl(ALM_INTEGRATION)}>\n                    {translate('settings.pr_decoration.binding.no_bindings.link')}\n                  </Link>\n                )\n              }}\n            />\n          ) : (\n            translate('settings.pr_decoration.binding.no_bindings')\n          )}\n        </Alert>\n      </div>\n    );\n  }\n\n  const selected = formData.key && instances.find(i => i.key === formData.key);\n  const alm = selected && selected.alm;\n\n  return (\n    <div>\n      <header className=\"page-header\">\n        <h1 className=\"page-title\">{translate('settings.pr_decoration.binding.title')}</h1>\n      </header>\n\n      <div className=\"markdown small spacer-top big-spacer-bottom\">\n        {translate('settings.pr_decoration.binding.description')}\n      </div>\n\n      <form\n        onSubmit={(event: React.SyntheticEvent<HTMLFormElement>) => {\n          event.preventDefault();\n          props.onSubmit();\n        }}>\n        <MandatoryFieldsExplanation className=\"form-field\" />\n\n        <div className=\"settings-definition big-spacer-bottom\">\n          <div className=\"settings-definition-left\">\n            <label className=\"h3\" htmlFor=\"name\">\n              {translate('settings.pr_decoration.binding.form.name')}\n              <MandatoryFieldMarker className=\"spacer-right\" />\n            </label>\n            <div className=\"markdown small spacer-top\">\n              {translate('settings.pr_decoration.binding.form.name.help')}\n            </div>\n          </div>\n          <div className=\"settings-definition-right\">\n            <Select\n              autosize={true}\n              className=\"abs-width-400 big-spacer-top\"\n              clearable={false}\n              id=\"name\"\n              menuContainerStyle={{\n                maxWidth: '210%' /* Allow double the width of the select */,\n                width: 'auto'\n              }}\n              onChange={(instance: AlmSettingsInstance) => props.onFieldChange('key', instance.key)}\n              optionRenderer={optionRenderer}\n              options={instances}\n              searchable={false}\n              value={formData.key}\n              valueKey=\"key\"\n              valueRenderer={optionRenderer}\n            />\n          </div>\n        </div>\n\n        {alm && (\n          <AlmSpecificForm\n            alm={alm}\n            instances={instances}\n            formData={formData}\n            onFieldChange={props.onFieldChange}\n            monorepoEnabled={monorepoEnabled}\n          />\n        )}\n\n        <div className=\"display-flex-center big-spacer-top action-section\">\n          {isChanged && (\n            <SubmitButton className=\"spacer-right button-success\" disabled={updating || !isValid}>\n              <span data-test=\"project-settings__alm-save\">{translate('save')}</span>\n              <DeferredSpinner className=\"spacer-left\" loading={updating} />\n            </SubmitButton>\n          )}\n          {!updating && successfullyUpdated && (\n            <span className=\"text-success spacer-right\">\n              <AlertSuccessIcon className=\"spacer-right\" />\n              {translate('settings.state.saved')}\n            </span>\n          )}\n          {isConfigured && (\n            <>\n              <Button className=\"spacer-right\" onClick={props.onReset}>\n                <span data-test=\"project-settings__alm-reset\">{translate('reset_verb')}</span>\n              </Button>\n              {!isChanged && (\n                <Button onClick={props.onCheckConfiguration} disabled={checkingConfiguration}>\n                  {translate('settings.pr_decoration.binding.check_configuration')}\n                  <DeferredSpinner className=\"spacer-left\" loading={checkingConfiguration} />\n                </Button>\n              )}\n            </>\n          )}\n        </div>\n        {!checkingConfiguration && configurationErrors?.errors && (\n          <Alert variant=\"error\" display=\"inline\" className=\"big-spacer-top\">\n            <p className=\"spacer-bottom\">\n              {translate('settings.pr_decoration.binding.check_configuration.failure')}\n            </p>\n            <ul className=\"list-styled\">\n              {configurationErrors.errors.map((error, i) => (\n                // eslint-disable-next-line react/no-array-index-key\n                <li key={i}>{error.msg}</li>\n              ))}\n            </ul>\n            {configurationErrors.scope === ProjectAlmBindingConfigurationErrorScope.Global && (\n              <p>\n                {isSysAdmin ? (\n                  <FormattedMessage\n                    id=\"settings.pr_decoration.binding.check_configuration.failure.check_global_settings\"\n                    defaultMessage={translate(\n                      'settings.pr_decoration.binding.check_configuration.failure.check_global_settings'\n                    )}\n                    values={{\n                      link: (\n                        <Link to={getGlobalSettingsUrl(ALM_INTEGRATION, { alm })}>\n                          {translate(\n                            'settings.pr_decoration.binding.check_configuration.failure.check_global_settings.link'\n                          )}\n                        </Link>\n                      )\n                    }}\n                  />\n                ) : (\n                  translate('settings.pr_decoration.binding.check_configuration.contact_admin')\n                )}\n              </p>\n            )}\n          </Alert>\n        )}\n        {isConfigured && !isChanged && !checkingConfiguration && !configurationErrors && (\n          <Alert variant=\"success\" display=\"inline\" className=\"big-spacer-top\">\n            {translate('settings.pr_decoration.binding.check_configuration.success')}\n          </Alert>\n        )}\n      </form>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  deleteProjectAlmBinding,\n  getAlmSettings,\n  getProjectAlmBinding,\n  setProjectAzureBinding,\n  setProjectBitbucketBinding,\n  setProjectBitbucketCloudBinding,\n  setProjectGithubBinding,\n  setProjectGitlabBinding,\n  validateProjectAlmBinding\n} from '../../../../api/alm-settings';\nimport throwGlobalError from '../../../../app/utils/throwGlobalError';\nimport { withCurrentUser } from '../../../../components/hoc/withCurrentUser';\nimport { HttpStatus } from '../../../../helpers/request';\nimport { hasGlobalPermission } from '../../../../helpers/users';\nimport { getAppState, Store } from '../../../../store/rootReducer';\nimport {\n  AlmKeys,\n  AlmSettingsInstance,\n  ProjectAlmBindingConfigurationErrors,\n  ProjectAlmBindingResponse\n} from '../../../../types/alm-settings';\nimport { EditionKey } from '../../../../types/editions';\nimport { Permissions } from '../../../../types/permissions';\nimport PRDecorationBindingRenderer from './PRDecorationBindingRenderer';\n\ntype FormData = T.Omit<ProjectAlmBindingResponse, 'alm'>;\n\ninterface StateProps {\n  monorepoEnabled: boolean;\n}\n\ninterface Props {\n  component: T.Component;\n  currentUser: T.CurrentUser;\n}\n\ninterface State {\n  formData: FormData;\n  instances: AlmSettingsInstance[];\n  isChanged: boolean;\n  isConfigured: boolean;\n  isValid: boolean;\n  loading: boolean;\n  originalData?: FormData;\n  updating: boolean;\n  successfullyUpdated: boolean;\n  checkingConfiguration: boolean;\n  configurationErrors?: ProjectAlmBindingConfigurationErrors;\n}\n\nconst REQUIRED_FIELDS_BY_ALM: {\n  [almKey in AlmKeys]: Array<keyof T.Omit<FormData, 'key'>>;\n} = {\n  [AlmKeys.Azure]: ['repository', 'slug'],\n  [AlmKeys.BitbucketServer]: ['repository', 'slug'],\n  [AlmKeys.BitbucketCloud]: ['repository'],\n  [AlmKeys.GitHub]: ['repository'],\n  [AlmKeys.GitLab]: ['repository']\n};\n\nexport class PRDecorationBinding extends React.PureComponent<Props & StateProps, State> {\n  mounted = false;\n  state: State = {\n    formData: { key: '', monorepo: false },\n    instances: [],\n    isChanged: false,\n    isConfigured: false,\n    isValid: false,\n    loading: true,\n    updating: false,\n    successfullyUpdated: false,\n    checkingConfiguration: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchDefinitions();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchDefinitions = () => {\n    const project = this.props.component.key;\n    return Promise.all([getAlmSettings(project), this.getProjectBinding(project)])\n      .then(([instances, originalData]) => {\n        if (this.mounted) {\n          this.setState(({ formData }) => {\n            const newFormData = originalData || formData;\n            return {\n              formData: newFormData,\n              instances: instances || [],\n              isChanged: false,\n              isConfigured: !!originalData,\n              isValid: this.validateForm(newFormData),\n              loading: false,\n              originalData: newFormData,\n              configurationErrors: undefined\n            };\n          });\n        }\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      })\n      .then(() => this.checkConfiguration());\n  };\n\n  getProjectBinding(project: string): Promise<ProjectAlmBindingResponse | undefined> {\n    return getProjectAlmBinding(project).catch((response: Response) => {\n      if (response && response.status === HttpStatus.NotFound) {\n        return undefined;\n      }\n      return throwGlobalError(response);\n    });\n  }\n\n  catchError = () => {\n    if (this.mounted) {\n      this.setState({ updating: false });\n    }\n  };\n\n  handleReset = () => {\n    const { component } = this.props;\n    this.setState({ updating: true });\n    deleteProjectAlmBinding(component.key)\n      .then(() => {\n        if (this.mounted) {\n          this.setState({\n            formData: {\n              key: '',\n              repository: '',\n              slug: '',\n              monorepo: false\n            },\n            originalData: undefined,\n            isChanged: false,\n            isConfigured: false,\n            updating: false,\n            successfullyUpdated: true,\n            configurationErrors: undefined\n          });\n        }\n      })\n      .catch(this.catchError);\n  };\n\n  submitProjectAlmBinding(\n    alm: AlmKeys,\n    key: string,\n    almSpecificFields?: T.Omit<FormData, 'key'>\n  ): Promise<void> {\n    const almSetting = key;\n    const project = this.props.component.key;\n    const repository = almSpecificFields?.repository;\n    const slug = almSpecificFields?.slug;\n    const monorepo = almSpecificFields?.monorepo ?? false;\n\n    if (!repository) {\n      return Promise.reject();\n    }\n\n    switch (alm) {\n      case AlmKeys.Azure: {\n        if (!slug) {\n          return Promise.reject();\n        }\n        return setProjectAzureBinding({\n          almSetting,\n          project,\n          projectName: slug,\n          repositoryName: repository,\n          monorepo\n        });\n      }\n      case AlmKeys.BitbucketServer: {\n        if (!slug) {\n          return Promise.reject();\n        }\n        return setProjectBitbucketBinding({\n          almSetting,\n          project,\n          repository,\n          slug,\n          monorepo\n        });\n      }\n      case AlmKeys.BitbucketCloud: {\n        return setProjectBitbucketCloudBinding({\n          almSetting,\n          project,\n          repository,\n          monorepo\n        });\n      }\n      case AlmKeys.GitHub: {\n        // By default it must remain true.\n        const summaryCommentEnabled = almSpecificFields?.summaryCommentEnabled ?? true;\n        return setProjectGithubBinding({\n          almSetting,\n          project,\n          repository,\n          summaryCommentEnabled,\n          monorepo\n        });\n      }\n\n      case AlmKeys.GitLab: {\n        return setProjectGitlabBinding({\n          almSetting,\n          project,\n          repository,\n          monorepo\n        });\n      }\n\n      default:\n        return Promise.reject();\n    }\n  }\n\n  checkConfiguration = async () => {\n    const {\n      component: { key: projectKey }\n    } = this.props;\n\n    const { isConfigured } = this.state;\n\n    if (!isConfigured) {\n      return;\n    }\n\n    this.setState({ checkingConfiguration: true, configurationErrors: undefined });\n\n    const configurationErrors = await validateProjectAlmBinding(projectKey).catch(error => error);\n\n    if (this.mounted) {\n      this.setState({ checkingConfiguration: false, configurationErrors });\n    }\n  };\n\n  handleSubmit = () => {\n    this.setState({ updating: true });\n    const {\n      formData: { key, ...additionalFields },\n      instances\n    } = this.state;\n\n    const selected = instances.find(i => i.key === key);\n    if (!key || !selected) {\n      return;\n    }\n\n    this.submitProjectAlmBinding(selected.alm, key, additionalFields)\n      .then(() => {\n        if (this.mounted) {\n          this.setState({\n            updating: false,\n            successfullyUpdated: true\n          });\n        }\n      })\n      .then(this.fetchDefinitions)\n      .catch(this.catchError);\n  };\n\n  isDataSame(\n    { key, repository = '', slug = '', summaryCommentEnabled = false, monorepo = false }: FormData,\n    {\n      key: oKey = '',\n      repository: oRepository = '',\n      slug: oSlug = '',\n      summaryCommentEnabled: osummaryCommentEnabled = false,\n      monorepo: omonorepo = false\n    }: FormData\n  ) {\n    return (\n      key === oKey &&\n      repository === oRepository &&\n      slug === oSlug &&\n      summaryCommentEnabled === osummaryCommentEnabled &&\n      monorepo === omonorepo\n    );\n  }\n\n  handleFieldChange = (id: keyof ProjectAlmBindingResponse, value: string | boolean) => {\n    this.setState(({ formData, originalData }) => {\n      const newFormData = {\n        ...formData,\n        [id]: value\n      };\n\n      return {\n        formData: newFormData,\n        isValid: this.validateForm(newFormData),\n        isChanged: !this.isDataSame(newFormData, originalData || { key: '', monorepo: false }),\n        successfullyUpdated: false\n      };\n    });\n  };\n\n  validateForm = ({ key, ...additionalFields }: State['formData']) => {\n    const { instances } = this.state;\n    const selected = instances.find(i => i.key === key);\n    if (!key || !selected) {\n      return false;\n    }\n    return REQUIRED_FIELDS_BY_ALM[selected.alm].reduce(\n      (result: boolean, field) => result && Boolean(additionalFields[field]),\n      true\n    );\n  };\n\n  handleCheckConfiguration = async () => {\n    await this.checkConfiguration();\n  };\n\n  render() {\n    const { currentUser, monorepoEnabled } = this.props;\n\n    return (\n      <PRDecorationBindingRenderer\n        onFieldChange={this.handleFieldChange}\n        onReset={this.handleReset}\n        onSubmit={this.handleSubmit}\n        onCheckConfiguration={this.handleCheckConfiguration}\n        monorepoEnabled={monorepoEnabled}\n        isSysAdmin={hasGlobalPermission(currentUser, Permissions.Admin)}\n        {...this.state}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  // This feature trigger will be replaced when SONAR-14349 is implemented\n  monorepoEnabled: [EditionKey.enterprise, EditionKey.datacenter].includes(\n    getAppState(state).edition as EditionKey\n  )\n});\n\nexport default connect(mapStateToProps)(withCurrentUser(PRDecorationBinding));\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport {\n  ALM_INTEGRATION,\n  ANALYSIS_SCOPE_CATEGORY,\n  LANGUAGES_CATEGORY,\n  NEW_CODE_PERIOD_CATEGORY,\n  PULL_REQUEST_DECORATION_BINDING_CATEGORY\n} from './AdditionalCategoryKeys';\nimport AlmIntegration from './almIntegration/AlmIntegration';\nimport { AnalysisScope } from './AnalysisScope';\nimport Languages from './Languages';\nimport NewCodePeriod from './NewCodePeriod';\nimport PullRequestDecorationBinding from './pullRequestDecorationBinding/PRDecorationBinding';\n\nexport interface AdditionalCategoryComponentProps {\n  component: T.Component | undefined;\n  selectedCategory: string;\n}\n\nexport interface AdditionalCategory {\n  availableGlobally: boolean;\n  availableForProject: boolean;\n  displayTab: boolean;\n  key: string;\n  name: string;\n  renderComponent: (props: AdditionalCategoryComponentProps) => React.ReactNode;\n  requiresBranchesEnabled?: boolean;\n}\n\nexport const ADDITIONAL_CATEGORIES: AdditionalCategory[] = [\n  {\n    key: LANGUAGES_CATEGORY,\n    name: translate('property.category.languages'),\n    renderComponent: getLanguagesComponent,\n    availableGlobally: true,\n    availableForProject: true,\n    displayTab: true\n  },\n  {\n    key: NEW_CODE_PERIOD_CATEGORY,\n    name: translate('settings.new_code_period.category'),\n    renderComponent: getNewCodePeriodComponent,\n    availableGlobally: true,\n    availableForProject: false,\n    displayTab: true\n  },\n  {\n    key: ANALYSIS_SCOPE_CATEGORY,\n    name: translate('property.category.exclusions'),\n    renderComponent: getAnalysisScopeComponent,\n    availableGlobally: true,\n    availableForProject: true,\n    displayTab: false\n  },\n  {\n    key: ALM_INTEGRATION,\n    name: translate('property.category.almintegration'),\n    renderComponent: getAlmIntegrationComponent,\n    availableGlobally: true,\n    availableForProject: false,\n    displayTab: false\n  },\n  {\n    key: PULL_REQUEST_DECORATION_BINDING_CATEGORY,\n    name: translate('settings.pr_decoration.binding.category'),\n    renderComponent: getPullRequestDecorationBindingComponent,\n    availableGlobally: false,\n    availableForProject: true,\n    displayTab: true,\n    requiresBranchesEnabled: true\n  }\n];\n\nfunction getLanguagesComponent(props: AdditionalCategoryComponentProps) {\n  return <Languages {...props} />;\n}\n\nfunction getNewCodePeriodComponent() {\n  return <NewCodePeriod />;\n}\n\nfunction getAnalysisScopeComponent(props: AdditionalCategoryComponentProps) {\n  return <AnalysisScope {...props} />;\n}\n\nfunction getAlmIntegrationComponent(props: AdditionalCategoryComponentProps) {\n  return <AlmIntegration {...props} />;\n}\n\nfunction getPullRequestDecorationBindingComponent(props: AdditionalCategoryComponentProps) {\n  return props.component && <PullRequestDecorationBinding component={props.component} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { IndexLink } from 'react-router';\nimport { getGlobalSettingsUrl, getProjectSettingsUrl } from '../../../helpers/urls';\nimport { getAppState, getSettingsAppAllCategories, Store } from '../../../store/rootReducer';\nimport { getCategoryName } from '../utils';\nimport { ADDITIONAL_CATEGORIES } from './AdditionalCategories';\nimport CATEGORY_OVERRIDES from './CategoryOverrides';\n\nexport interface CategoriesListProps {\n  branchesEnabled?: boolean;\n  categories: string[];\n  component?: T.Component;\n  defaultCategory: string;\n  selectedCategory: string;\n}\n\nexport function CategoriesList(props: CategoriesListProps) {\n  const { branchesEnabled, categories, component, defaultCategory, selectedCategory } = props;\n\n  const categoriesWithName = categories\n    .filter(key => !CATEGORY_OVERRIDES[key.toLowerCase()])\n    .map(key => ({\n      key,\n      name: getCategoryName(key)\n    }))\n    .concat(\n      ADDITIONAL_CATEGORIES.filter(c => c.displayTab)\n        .filter(c =>\n          component\n            ? // Project settings\n              c.availableForProject\n            : // Global settings\n              c.availableGlobally\n        )\n        .filter(c => branchesEnabled || !c.requiresBranchesEnabled)\n    );\n  const sortedCategories = sortBy(categoriesWithName, category => category.name.toLowerCase());\n\n  return (\n    <ul className=\"side-tabs-menu\">\n      {sortedCategories.map(c => {\n        const category = c.key !== defaultCategory ? c.key.toLowerCase() : undefined;\n        return (\n          <li key={c.key}>\n            <IndexLink\n              className={classNames({\n                active: c.key.toLowerCase() === selectedCategory.toLowerCase()\n              })}\n              title={c.name}\n              to={\n                component\n                  ? getProjectSettingsUrl(component.key, category)\n                  : getGlobalSettingsUrl(category)\n              }>\n              {c.name}\n            </IndexLink>\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\n\nconst mapStateToProps = (state: Store) => ({\n  categories: getSettingsAppAllCategories(state),\n  branchesEnabled: getAppState(state).branchesEnabled\n});\n\nexport default connect(mapStateToProps)(CategoriesList);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { DropdownOverlay } from '../../../components/controls/Dropdown';\nimport OutsideClickHandler from '../../../components/controls/OutsideClickHandler';\nimport SearchBox from '../../../components/controls/SearchBox';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { scrollToElement } from '../../../helpers/scrolling';\nimport { SettingCategoryDefinition } from '../../../types/settings';\nimport { buildSettingLink, isRealSettingKey } from '../utils';\n\nexport interface SettingsSearchRendererProps {\n  className?: string;\n  results?: SettingCategoryDefinition[];\n  searchQuery: string;\n  selectedResult?: string;\n  showResults: boolean;\n  onClickOutside: () => void;\n  onMouseOverResult: (key: string) => void;\n  onSearchInputChange: (query: string) => void;\n  onSearchInputFocus: () => void;\n  onSearchInputKeyDown: (event: React.KeyboardEvent) => void;\n}\n\nexport default function SettingsSearchRenderer(props: SettingsSearchRendererProps) {\n  const { className, results, searchQuery, selectedResult, showResults } = props;\n\n  const scrollableNodeRef = React.useRef(null);\n  const selectedNodeRef = React.useRef<HTMLLIElement>(null);\n\n  React.useEffect(() => {\n    const parent = scrollableNodeRef.current;\n    const selectedNode = selectedNodeRef.current;\n    if (selectedNode && parent) {\n      scrollToElement(selectedNode, { topOffset: 30, bottomOffset: 30, parent });\n    }\n  });\n\n  return (\n    <OutsideClickHandler onClickOutside={props.onClickOutside}>\n      <div className={classNames('dropdown', className)}>\n        <SearchBox\n          onChange={props.onSearchInputChange}\n          onFocus={props.onSearchInputFocus}\n          onKeyDown={props.onSearchInputKeyDown}\n          placeholder={translate('settings.search.placeholder')}\n          value={searchQuery}\n        />\n        {showResults && (\n          <DropdownOverlay noPadding={true}>\n            <ul className=\"settings-search-results menu\" ref={scrollableNodeRef}>\n              {results && results.length > 0 ? (\n                results.map(r => (\n                  <li\n                    key={r.key}\n                    className={classNames('spacer-bottom spacer-top', {\n                      active: selectedResult === r.key\n                    })}\n                    ref={selectedResult === r.key ? selectedNodeRef : undefined}>\n                    <Link\n                      onClick={props.onClickOutside}\n                      onMouseEnter={() => props.onMouseOverResult(r.key)}\n                      to={buildSettingLink(r)}>\n                      <div className=\"settings-search-result-title display-flex-space-between\">\n                        <h3>{r.name || r.subCategory}</h3>\n                      </div>\n                      {isRealSettingKey(r.key) && (\n                        <div className=\"note spacer-top\">\n                          {translateWithParameters('settings.key_x', r.key)}\n                        </div>\n                      )}\n                    </Link>\n                  </li>\n                ))\n              ) : (\n                <div className=\"big-padded\">{translate('no_results')}</div>\n              )}\n            </ul>\n          </DropdownOverlay>\n        )}\n      </div>\n    </OutsideClickHandler>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce, keyBy } from 'lodash';\nimport lunr, { LunrIndex } from 'lunr';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { InjectedRouter } from 'react-router';\nimport { withRouter } from '../../../components/hoc/withRouter';\nimport { KeyCodes } from '../../../helpers/keycodes';\nimport { getSettingsAppAllDefinitions, Store } from '../../../store/rootReducer';\nimport { SettingCategoryDefinition } from '../../../types/settings';\nimport { ADDITIONAL_SETTING_DEFINITIONS, buildSettingLink } from '../utils';\nimport SettingsSearchRenderer from './SettingsSearchRenderer';\n\ninterface Props {\n  className?: string;\n  definitions: SettingCategoryDefinition[];\n  router: InjectedRouter;\n}\n\ninterface State {\n  results?: SettingCategoryDefinition[];\n  searchQuery: string;\n  selectedResult?: string;\n  showResults: boolean;\n}\n\nconst DEBOUNCE_DELAY = 250;\n\nexport class SettingsSearch extends React.Component<Props, State> {\n  definitionsByKey: T.Dict<SettingCategoryDefinition>;\n  index: LunrIndex;\n  state: State = {\n    searchQuery: '',\n    showResults: false\n  };\n\n  constructor(props: Props) {\n    super(props);\n\n    this.doSearch = debounce(this.doSearch, DEBOUNCE_DELAY);\n    this.handleFocus = debounce(this.handleFocus, DEBOUNCE_DELAY);\n\n    const definitions = props.definitions.concat(ADDITIONAL_SETTING_DEFINITIONS);\n    this.index = this.buildSearchIndex(definitions);\n    this.definitionsByKey = keyBy(definitions, 'key');\n  }\n\n  buildSearchIndex(definitions: SettingCategoryDefinition[]) {\n    return lunr(function() {\n      this.ref('key');\n      this.field('key');\n      this.field('name');\n      this.field('description');\n      this.field('splitkey');\n\n      definitions.forEach(definition => {\n        this.add({ ...definition, splitkey: definition.key.replace('.', ' ') });\n      });\n    });\n  }\n\n  doSearch = (query: string) => {\n    const cleanQuery = query.replace(/[\\^\\-+:~*]/g, '');\n\n    if (!cleanQuery) {\n      this.setState({ showResults: false });\n      return;\n    }\n\n    const results = this.index\n      .search(\n        cleanQuery\n          .split(/\\s+/)\n          .map(s => `${s}~1 *${s}*`)\n          .join(' ')\n      )\n      .map(match => this.definitionsByKey[match.ref]);\n\n    this.setState({ showResults: true, results, selectedResult: results[0]?.key });\n  };\n\n  hideResults = () => {\n    this.setState({ showResults: false });\n  };\n\n  handleFocus = () => {\n    const { searchQuery, showResults } = this.state;\n    if (searchQuery && !showResults) {\n      this.setState({ showResults: true });\n    }\n  };\n\n  handleSearchChange = (searchQuery: string) => {\n    this.setState({ searchQuery });\n    this.doSearch(searchQuery);\n  };\n\n  handleMouseOverResult = (key: string) => {\n    this.setState({ selectedResult: key });\n  };\n\n  handleKeyDown = (event: React.KeyboardEvent) => {\n    switch (event.keyCode) {\n      case KeyCodes.Enter:\n        event.preventDefault();\n        this.openSelected();\n        return;\n      case KeyCodes.UpArrow:\n        event.preventDefault();\n        this.selectPrevious();\n        return;\n      case KeyCodes.DownArrow:\n        event.preventDefault();\n        this.selectNext();\n        // keep this return to prevent fall-through in case more cases will be adder later\n        // eslint-disable-next-line no-useless-return\n        return;\n    }\n  };\n\n  selectPrevious = () => {\n    const { results, selectedResult } = this.state;\n\n    if (results && selectedResult) {\n      const index = results.findIndex(r => r.key === selectedResult);\n\n      if (index > 0) {\n        this.setState({ selectedResult: results[index - 1].key });\n      }\n    }\n  };\n\n  selectNext = () => {\n    const { results, selectedResult } = this.state;\n\n    if (results && selectedResult) {\n      const index = results.findIndex(r => r.key === selectedResult);\n\n      if (index < results.length - 1) {\n        this.setState({ selectedResult: results[index + 1].key });\n      }\n    }\n  };\n\n  openSelected = () => {\n    const { router } = this.props;\n    const { selectedResult } = this.state;\n    if (selectedResult) {\n      const definition = this.definitionsByKey[selectedResult];\n      router.push(buildSettingLink(definition));\n      this.setState({ showResults: false });\n    }\n  };\n\n  render() {\n    const { className } = this.props;\n\n    return (\n      <SettingsSearchRenderer\n        className={className}\n        onClickOutside={this.hideResults}\n        onMouseOverResult={this.handleMouseOverResult}\n        onSearchInputChange={this.handleSearchChange}\n        onSearchInputFocus={this.handleFocus}\n        onSearchInputKeyDown={this.handleKeyDown}\n        {...this.state}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store) => ({\n  definitions: getSettingsAppAllDefinitions(state)\n});\n\nexport default withRouter(connect(mapStateToProps)(SettingsSearch));\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport InstanceMessage from '../../../components/common/InstanceMessage';\nimport { translate } from '../../../helpers/l10n';\nimport SettingsSearch from './SettingsSearch';\n\nexport interface PageHeaderProps {\n  component?: T.Component;\n}\n\nexport default function PageHeader({ component }: PageHeaderProps) {\n  const title = component ? translate('project_settings.page') : translate('settings.page');\n\n  const description = component ? (\n    translate('project_settings.page.description')\n  ) : (\n    <InstanceMessage message={translate('settings.page.description')} />\n  );\n\n  return (\n    <header className={classNames('top-bar-outer', { 'with-search': component === undefined })}>\n      <div className=\"top-bar\">\n        <div\n          className={classNames('top-bar-inner bordered-bottom big-padded-top padded-bottom', {\n            'with-search': component === undefined\n          })}>\n          <h1 className=\"page-title\">{title}</h1>\n          <div className=\"page-description spacer-top\">{description}</div>\n          {!component && <SettingsSearch className=\"big-spacer-top\" />}\n        </div>\n      </div>\n    </header>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { find } from 'lodash';\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { connect } from 'react-redux';\nimport { WithRouterProps } from 'react-router';\nimport Suggestions from '../../../app/components/embed-docs-modal/Suggestions';\nimport ScreenPositionHelper from '../../../components/common/ScreenPositionHelper';\nimport { translate } from '../../../helpers/l10n';\nimport {\n  addSideBarClass,\n  addWhitePageClass,\n  removeSideBarClass,\n  removeWhitePageClass\n} from '../../../helpers/pages';\nimport { getSettingsAppDefaultCategory, Store } from '../../../store/rootReducer';\nimport { fetchSettings } from '../store/actions';\nimport '../styles.css';\nimport { ADDITIONAL_CATEGORIES } from './AdditionalCategories';\nimport AllCategoriesList from './AllCategoriesList';\nimport CategoryDefinitionsList from './CategoryDefinitionsList';\nimport CATEGORY_OVERRIDES from './CategoryOverrides';\nimport PageHeader from './PageHeader';\n\ninterface Props {\n  component?: T.Component;\n  defaultCategory: string;\n  fetchSettings(component?: string): Promise<void>;\n}\n\ninterface State {\n  loading: boolean;\n}\n\nexport class SettingsApp extends React.PureComponent<Props & WithRouterProps, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    addSideBarClass();\n    addWhitePageClass();\n    this.fetchSettings();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.component !== this.props.component) {\n      this.fetchSettings();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    removeSideBarClass();\n    removeWhitePageClass();\n  }\n\n  fetchSettings = () => {\n    const { component } = this.props;\n    this.props.fetchSettings(component && component.key).then(this.stopLoading, this.stopLoading);\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  render() {\n    if (this.state.loading) {\n      return null;\n    }\n\n    const { query } = this.props.location;\n    const originalCategory = (query.category as string) || this.props.defaultCategory;\n    const overriddenCategory = CATEGORY_OVERRIDES[originalCategory.toLowerCase()];\n    const selectedCategory = overriddenCategory || originalCategory;\n    const foundAdditionalCategory = find(ADDITIONAL_CATEGORIES, c => c.key === selectedCategory);\n    const isProjectSettings = this.props.component;\n    const shouldRenderAdditionalCategory =\n      foundAdditionalCategory &&\n      ((isProjectSettings && foundAdditionalCategory.availableForProject) ||\n        (!isProjectSettings && foundAdditionalCategory.availableGlobally));\n\n    return (\n      <div id=\"settings-page\">\n        <Suggestions suggestions=\"settings\" />\n        <Helmet defer={false} title={translate('settings.page')} />\n        <PageHeader component={this.props.component} />\n\n        <div className=\"layout-page\">\n          <ScreenPositionHelper className=\"layout-page-side-outer\">\n            {({ top }) => (\n              <div className=\"layout-page-side\" style={{ top }}>\n                <div className=\"layout-page-side-inner\">\n                  <AllCategoriesList\n                    component={this.props.component}\n                    defaultCategory={this.props.defaultCategory}\n                    selectedCategory={selectedCategory}\n                  />\n                </div>\n              </div>\n            )}\n          </ScreenPositionHelper>\n\n          <div className=\"layout-page-main\">\n            <div className=\"layout-page-main-inner\">\n              <div className=\"big-padded\">\n                {foundAdditionalCategory && shouldRenderAdditionalCategory ? (\n                  foundAdditionalCategory.renderComponent({\n                    component: this.props.component,\n                    selectedCategory: originalCategory\n                  })\n                ) : (\n                  <CategoryDefinitionsList\n                    category={selectedCategory}\n                    component={this.props.component}\n                  />\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store) => ({\n  defaultCategory: getSettingsAppDefaultCategory(state)\n});\n\nconst mapDispatchToProps = { fetchSettings: fetchSettings as any };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SettingsApp);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Modal, { ModalProps } from './Modal';\n\nexport interface ChildrenProps {\n  onCloseClick: (event?: React.SyntheticEvent<HTMLElement>) => void;\n  onFormSubmit: (event: React.SyntheticEvent<HTMLFormElement>) => void;\n  onSubmitClick: (event?: React.SyntheticEvent<HTMLElement>) => void;\n  submitting: boolean;\n}\n\ninterface Props extends ModalProps {\n  children: (props: ChildrenProps) => React.ReactNode;\n  header: string;\n  onClose: () => void;\n  onSubmit: () => void | Promise<void | Response>;\n}\n\ninterface State {\n  submitting: boolean;\n}\n\nexport default class SimpleModal extends React.Component<Props, State> {\n  mounted = false;\n  state: State = { submitting: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopSubmitting = () => {\n    if (this.mounted) {\n      this.setState({ submitting: false });\n    }\n  };\n\n  handleCloseClick = (event?: React.SyntheticEvent<HTMLElement>) => {\n    if (event) {\n      event.preventDefault();\n      event.currentTarget.blur();\n    }\n    this.props.onClose();\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.submit();\n  };\n\n  handleSubmitClick = (event?: React.SyntheticEvent<HTMLElement>) => {\n    if (event) {\n      event.preventDefault();\n      event.currentTarget.blur();\n    }\n    this.submit();\n  };\n\n  submit = () => {\n    const result = this.props.onSubmit();\n    if (result) {\n      this.setState({ submitting: true });\n      result.then(this.stopSubmitting, this.stopSubmitting);\n    }\n  };\n\n  render() {\n    const { children, header, onClose, onSubmit, ...modalProps } = this.props;\n    return (\n      <Modal contentLabel={header} onRequestClose={onClose} {...modalProps}>\n        {children({\n          onCloseClick: this.handleCloseClick,\n          onFormSubmit: this.handleFormSubmit,\n          onSubmitClick: this.handleSubmitClick,\n          submitting: this.state.submitting\n        })}\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../helpers/l10n';\nimport DeferredSpinner from '../ui/DeferredSpinner';\nimport { ResetButtonLink, SubmitButton } from './buttons';\nimport ClickEventBoundary from './ClickEventBoundary';\nimport { ModalProps } from './Modal';\nimport SimpleModal, { ChildrenProps } from './SimpleModal';\n\nexport interface ConfirmModalProps<T> extends ModalProps {\n  cancelButtonText?: string;\n  confirmButtonText: string;\n  confirmData?: T;\n  confirmDisable?: boolean;\n  isDestructive?: boolean;\n  onConfirm: (data?: T) => void | Promise<void | Response>;\n}\n\ninterface Props<T> extends ConfirmModalProps<T> {\n  header: string;\n  headerDescription?: React.ReactNode;\n  onClose: () => void;\n}\n\nexport default class ConfirmModal<T = string> extends React.PureComponent<Props<T>> {\n  mounted = false;\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSubmit = () => {\n    const result = this.props.onConfirm(this.props.confirmData);\n    if (result) {\n      return result.then(this.props.onClose, () => {\n        /* noop */\n      });\n    }\n    this.props.onClose();\n    return undefined;\n  };\n\n  renderModalContent = ({ onCloseClick, onFormSubmit, submitting }: ChildrenProps) => {\n    const {\n      children,\n      confirmButtonText,\n      confirmDisable,\n      header,\n      headerDescription,\n      isDestructive,\n      cancelButtonText = translate('cancel')\n    } = this.props;\n    return (\n      <ClickEventBoundary>\n        <form onSubmit={onFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n            {headerDescription}\n          </header>\n          <div className=\"modal-body\">{children}</div>\n          <footer className=\"modal-foot\">\n            <DeferredSpinner className=\"spacer-right\" loading={submitting} />\n            <SubmitButton\n              autoFocus={true}\n              className={isDestructive ? 'button-red' : undefined}\n              disabled={submitting || confirmDisable}>\n              {confirmButtonText}\n            </SubmitButton>\n            <ResetButtonLink disabled={submitting} onClick={onCloseClick}>\n              {cancelButtonText}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </ClickEventBoundary>\n    );\n  };\n\n  render() {\n    const { header, onClose, noBackdrop, size } = this.props;\n    const modalProps = { header, onClose, noBackdrop, size };\n    return (\n      <SimpleModal onSubmit={this.handleSubmit} {...modalProps}>\n        {this.renderModalContent}\n      </SimpleModal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport { sanitize } from 'dompurify';\n\nexport function sanitizeStringRestricted(html: string) {\n  return sanitize(html, {\n    ALLOWED_TAGS: ['b', 'br', 'code', 'i', 'li', 'p', 'strong', 'ul', 'a'],\n    ALLOWED_ATTR: ['target', 'href']\n  });\n}\n\nexport function sanitizeString(html: string) {\n  return sanitize(html, { USE_PROFILES: { html: true } });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { omitBy } from 'lodash';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { isCategoryDefinition } from '../apps/settings/utils';\nimport { getJSON, post, postJSON, RequestData } from '../helpers/request';\nimport { BranchParameters } from '../types/branch-like';\nimport {\n  SettingCategoryDefinition,\n  SettingDefinition,\n  SettingValue,\n  SettingValueResponse\n} from '../types/settings';\n\nexport function getDefinitions(component?: string): Promise<SettingCategoryDefinition[]> {\n  return getJSON('/api/settings/list_definitions', { component }).then(\n    r => r.definitions,\n    throwGlobalError\n  );\n}\n\nexport function getValues(\n  data: { keys: string; component?: string } & BranchParameters\n): Promise<SettingValue[]> {\n  return getJSON('/api/settings/values', data).then((r: SettingValueResponse) => [\n    ...r.settings,\n    ...r.setSecuredSettings.map(key => ({ key }))\n  ]);\n}\n\nexport function setSettingValue(\n  definition: SettingDefinition,\n  value: any,\n  component?: string\n): Promise<void> {\n  const { key } = definition;\n  const data: RequestData = { key, component };\n\n  if (isCategoryDefinition(definition) && definition.multiValues) {\n    data.values = value;\n  } else if (definition.type === 'PROPERTY_SET') {\n    data.fieldValues = value\n      .map((fields: any) => omitBy(fields, value => value == null))\n      .map(JSON.stringify);\n  } else {\n    data.value = value;\n  }\n\n  return post('/api/settings/set', data);\n}\n\nexport function setSimpleSettingValue(\n  data: { component?: string; value: string; key: string } & BranchParameters\n): Promise<void | Response> {\n  return post('/api/settings/set', data).catch(throwGlobalError);\n}\n\nexport function resetSettingValue(\n  data: { keys: string; component?: string } & BranchParameters\n): Promise<void> {\n  return post('/api/settings/reset', data);\n}\n\nexport function sendTestEmail(to: string, subject: string, message: string): Promise<void> {\n  return post('/api/emails/send', { to, subject, message });\n}\n\nexport function checkSecretKey(): Promise<{ secretKeyAvailable: boolean }> {\n  return getJSON('/api/settings/check_secret_key').catch(throwGlobalError);\n}\n\nexport function generateSecretKey(): Promise<{ secretKey: string }> {\n  return postJSON('/api/settings/generate_secret_key').catch(throwGlobalError);\n}\n\nexport function encryptValue(value: string): Promise<{ encryptedValue: string }> {\n  return postJSON('/api/settings/encrypt', { value }).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nconst CLASS_SIDEBAR_PAGE = 'sidebar-page';\nconst CLASS_WHITE_PAGE = 'white-page';\nconst CLASS_NO_FOOTER_PAGE = 'no-footer-page';\n\nexport function addSideBarClass() {\n  toggleBodyClass(CLASS_SIDEBAR_PAGE, true);\n}\n\nexport function addWhitePageClass() {\n  toggleBodyClass(CLASS_WHITE_PAGE, true);\n}\n\nexport function addNoFooterPageClass() {\n  /* eslint-disable-next-line no-console */\n  console.warn('DEPRECATED: addNoFooterPageClass() was deprecated.');\n  toggleBodyClass(CLASS_NO_FOOTER_PAGE, true);\n}\n\nexport function removeSideBarClass() {\n  toggleBodyClass(CLASS_SIDEBAR_PAGE, false);\n}\n\nexport function removeWhitePageClass() {\n  toggleBodyClass(CLASS_WHITE_PAGE, false);\n}\n\nexport function removeNoFooterPageClass() {\n  /* eslint-disable-next-line no-console */\n  console.warn('DEPRECATED: removeNoFooterPageClass() was deprecated.');\n  toggleBodyClass(CLASS_NO_FOOTER_PAGE, false);\n}\n\nfunction toggleBodyClass(className: string, force: boolean) {\n  document.body.classList.toggle(className, force);\n  if (document.documentElement) {\n    document.documentElement.classList.toggle(className, force);\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce } from 'lodash';\nimport * as React from 'react';\n\ninterface Props {\n  className?: string;\n  children: (position: { top: number; left: number }) => React.ReactElement<any>;\n}\n\nexport default class ScreenPositionHelper extends React.PureComponent<Props> {\n  container?: HTMLDivElement;\n  debouncedOnResize: () => void;\n\n  constructor(props: Props) {\n    super(props);\n    this.debouncedOnResize = debounce(() => this.forceUpdate(), 250);\n  }\n\n  componentDidMount() {\n    this.forceUpdate();\n    window.addEventListener('resize', this.debouncedOnResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debouncedOnResize);\n  }\n\n  getPosition = () => {\n    const containerPos = this.container && this.container.getBoundingClientRect();\n    if (!containerPos) {\n      return { top: 0, left: 0 };\n    }\n    return {\n      top: window.pageYOffset + containerPos.top,\n      left: window.pageXOffset + containerPos.left\n    };\n  };\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        ref={container => (this.container = container as HTMLDivElement)}>\n        {this.props.children(this.getPosition())}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport const enum SettingsKey {\n  DaysBeforeDeletingInactiveBranchesAndPRs = 'sonar.dbcleaner.daysBeforeDeletingInactiveBranchesAndPRs',\n  DefaultProjectVisibility = 'projects.default.visibility',\n  ServerBaseUrl = 'sonar.core.serverBaseURL',\n  PluginRiskConsent = 'sonar.plugins.risk.consent',\n  ProjectReportFrequency = 'sonar.governance.report.project.branch.frequency'\n}\n\nexport type Setting = SettingValue & { definition: SettingDefinition; hasValue: boolean };\nexport type SettingWithCategory = Setting & { definition: SettingCategoryDefinition };\n\nexport enum SettingType {\n  STRING = 'STRING',\n  TEXT = 'TEXT',\n  JSON = 'JSON',\n  PASSWORD = 'PASSWORD',\n  BOOLEAN = 'BOOLEAN',\n  FLOAT = 'FLOAT',\n  INTEGER = 'INTEGER',\n  LICENSE = 'LICENSE',\n  LONG = 'LONG',\n  SINGLE_SELECT_LIST = 'SINGLE_SELECT_LIST',\n  PROPERTY_SET = 'PROPERTY_SET'\n}\nexport interface SettingDefinition {\n  description?: string;\n  key: string;\n  multiValues?: boolean;\n  name?: string;\n  options: string[];\n  type?: SettingType;\n}\n\nexport interface SettingFieldDefinition extends SettingDefinition {\n  description: string;\n  name: string;\n}\n\nexport interface SettingCategoryDefinition extends SettingDefinition {\n  category: string;\n  defaultValue?: string;\n  deprecatedKey?: string;\n  fields: SettingFieldDefinition[];\n  multiValues?: boolean;\n  subCategory: string;\n}\n\nexport interface SettingValueResponse {\n  settings: SettingValue[];\n  setSecuredSettings: string[];\n}\n\nexport interface SettingValue {\n  fieldValues?: Array<T.Dict<string>>;\n  inherited?: boolean;\n  key: string;\n  parentFieldValues?: Array<T.Dict<string>>;\n  parentValue?: string;\n  parentValues?: string[];\n  value?: string;\n  values?: string[];\n}\n","var createFind = require('./_createFind'),\n    findIndex = require('./findIndex');\n\n/**\n * Iterates over elements of `collection`, returning the first element\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {*} Returns the matched element, else `undefined`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': true },\n *   { 'user': 'fred',    'age': 40, 'active': false },\n *   { 'user': 'pebbles', 'age': 1,  'active': true }\n * ];\n *\n * _.find(users, function(o) { return o.age < 40; });\n * // => object for 'barney'\n *\n * // The `_.matches` iteratee shorthand.\n * _.find(users, { 'age': 1, 'active': true });\n * // => object for 'pebbles'\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.find(users, ['active', false]);\n * // => object for 'fred'\n *\n * // The `_.property` iteratee shorthand.\n * _.find(users, 'active');\n * // => object for 'barney'\n */\nvar find = createFind(findIndex);\n\nmodule.exports = find;\n","var baseIteratee = require('./_baseIteratee'),\n    isArrayLike = require('./isArrayLike'),\n    keys = require('./keys');\n\n/**\n * Creates a `_.find` or `_.findLast` function.\n *\n * @private\n * @param {Function} findIndexFunc The function to find the collection index.\n * @returns {Function} Returns the new find function.\n */\nfunction createFind(findIndexFunc) {\n  return function(collection, predicate, fromIndex) {\n    var iterable = Object(collection);\n    if (!isArrayLike(collection)) {\n      var iteratee = baseIteratee(predicate, 3);\n      collection = keys(collection);\n      predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n    }\n    var index = findIndexFunc(collection, predicate, fromIndex);\n    return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n  };\n}\n\nmodule.exports = createFind;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee'),\n    toInteger = require('./toInteger');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This method is like `_.find` except that it returns the index of the first\n * element `predicate` returns truthy for instead of the element itself.\n *\n * @static\n * @memberOf _\n * @since 1.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': true }\n * ];\n *\n * _.findIndex(users, function(o) { return o.user == 'barney'; });\n * // => 0\n *\n * // The `_.matches` iteratee shorthand.\n * _.findIndex(users, { 'user': 'fred', 'active': false });\n * // => 1\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findIndex(users, ['active', false]);\n * // => 0\n *\n * // The `_.property` iteratee shorthand.\n * _.findIndex(users, 'active');\n * // => 2\n */\nfunction findIndex(array, predicate, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = fromIndex == null ? 0 : toInteger(fromIndex);\n  if (index < 0) {\n    index = nativeMax(length + index, 0);\n  }\n  return baseFindIndex(array, baseIteratee(predicate, 3), index);\n}\n\nmodule.exports = findIndex;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport styled from '@emotion/styled';\nimport * as React from 'react';\nimport { colors, sizes } from '../../app/theme';\n\nexport interface BoxedTabsProps<K> {\n  className?: string;\n  onSelect: (key: K) => void;\n  selected?: K;\n  tabs: Array<{ key: K; label: React.ReactNode }>;\n}\n\nconst TabContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n`;\n\nconst baseBorder = () => `1px solid ${colors.barBorderColor}`;\n\nconst highlightHoverMixin = () => `\n  &:hover {\n    background-color: ${colors.barBackgroundColorHighlight};\n  }\n`;\n\nconst StyledTab = styled.button<{ active: boolean }>`\n  position: relative;\n  background-color: ${props => (props.active ? 'white' : colors.barBackgroundColor)};\n  border-top: ${baseBorder};\n  border-left: ${baseBorder};\n  border-right: none;\n  border-bottom: none;\n  margin-bottom: -1px;\n  min-width: 128px;\n  min-height: 56px;\n  ${props => !props.active && 'cursor: pointer;'}\n  outline: 0;\n  padding: calc(2 * ${sizes.gridSize});\n\n  ${props => (!props.active ? highlightHoverMixin : null)}\n\n  &:last-child {\n    border-right: ${baseBorder};\n  }\n`;\n\nconst ActiveBorder = styled.div<{ active: boolean }>`\n  display: ${props => (props.active ? 'block' : 'none')};\n  background-color: ${colors.blue};\n  height: 3px;\n  width: 100%;\n  position: absolute;\n  left: 0;\n  top: -1px;\n`;\n\nexport default function BoxedTabs<K>(props: BoxedTabsProps<K>) {\n  const { className, tabs, selected } = props;\n\n  return (\n    <TabContainer className={className}>\n      {tabs.map(({ key, label }, i) => (\n        <StyledTab\n          active={selected === key}\n          // eslint-disable-next-line react/no-array-index-key\n          key={i}\n          onClick={() => selected !== key && props.onSelect(key)}\n          type=\"button\">\n          <ActiveBorder active={selected === key} />\n          {label}\n        </StyledTab>\n      ))}\n    </TabContainer>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function RecommendedIcon({ fill = 'currentColor', ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M15.089 13.199l-1.742-3.736c-0.962 1.401-2.464 2.398-4.203 2.701l1.459 3.128c0.186 0.4 0.764 0.373 0.914-0.040l0.748-2.054 0.154-0.072 2.054 0.748c0.412 0.151 0.804-0.276 0.618-0.675zM8.040 0.384c-3.003 0-5.446 2.443-5.446 5.446s2.443 5.446 5.446 5.446c3.003 0 5.446-2.443 5.446-5.446s-2.443-5.446-5.446-5.446zM10.689 5.429l-0.966 0.941 0.228 1.33c0.070 0.406-0.358 0.711-0.718 0.522l-1.194-0.628-1.194 0.628c-0.363 0.19-0.788-0.118-0.718-0.522l0.228-1.33-0.966-0.941c-0.293-0.286-0.131-0.786 0.274-0.844l1.335-0.194 0.597-1.209c0.181-0.367 0.707-0.368 0.888 0l0.597 1.209 1.335 0.194c0.405 0.059 0.568 0.558 0.274 0.844zM2.732 9.463l-1.742 3.736c-0.187 0.4 0.208 0.825 0.618 0.674l2.054-0.748 0.154 0.072 0.748 2.054c0.15 0.412 0.727 0.441 0.914 0.040l1.459-3.128c-1.739-0.302-3.241-1.3-4.203-2.701z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { translate } from '../../helpers/l10n';\nimport RecommendedIcon from '../icons/RecommendedIcon';\nimport './Radio.css';\nimport './RadioCard.css';\n\nexport interface RadioCardProps {\n  className?: string;\n  disabled?: boolean;\n  onClick?: () => void;\n  selected?: boolean;\n}\n\ninterface Props extends RadioCardProps {\n  children: React.ReactNode;\n  recommended?: string;\n  title: React.ReactNode;\n  titleInfo?: React.ReactNode;\n  vertical?: boolean;\n}\n\nexport default function RadioCard(props: Props) {\n  const {\n    className,\n    disabled,\n    onClick,\n    recommended,\n    selected,\n    titleInfo,\n    vertical = false\n  } = props;\n  const isActionable = Boolean(onClick);\n  return (\n    <div\n      aria-checked={selected}\n      className={classNames(\n        'radio-card',\n        {\n          'radio-card-actionable': isActionable,\n          'radio-card-vertical': vertical,\n          disabled,\n          selected\n        },\n        className\n      )}\n      onClick={isActionable && !disabled ? onClick : undefined}\n      role=\"radio\"\n      tabIndex={0}>\n      <h2 className=\"radio-card-header big-spacer-bottom\">\n        <span className=\"display-flex-center link-radio\">\n          {isActionable && (\n            <i className={classNames('icon-radio', 'spacer-right', { 'is-checked': selected })} />\n          )}\n          {props.title}\n        </span>\n        {titleInfo}\n      </h2>\n      <div className=\"radio-card-body\">{props.children}</div>\n      {recommended && (\n        <div className=\"radio-card-recommended\">\n          <RecommendedIcon className=\"spacer-right\" />\n          <FormattedMessage\n            defaultMessage={recommended}\n            id={recommended}\n            values={{ recommended: <strong>{translate('recommended')}</strong> }}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { Dispatch } from 'redux';\nimport {\n  getDefinitions,\n  getValues,\n  resetSettingValue,\n  setSettingValue\n} from '../../../api/settings';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { parseError } from '../../../helpers/request';\nimport { closeAllGlobalMessages } from '../../../store/globalMessages';\nimport {\n  getSettingsAppChangedValue,\n  getSettingsAppDefinition,\n  Store\n} from '../../../store/rootReducer';\nimport { SettingDefinition } from '../../../types/settings';\nimport { isEmptyValue } from '../utils';\nimport { receiveDefinitions } from './definitions';\nimport {\n  cancelChange,\n  failValidation,\n  passValidation,\n  startLoading,\n  stopLoading\n} from './settingsPage';\nimport { receiveValues } from './values';\n\nfunction isURLKind(definition: SettingDefinition) {\n  return [\n    'sonar.core.serverBaseURL',\n    'sonar.auth.github.apiUrl',\n    'sonar.auth.github.webUrl',\n    'sonar.auth.gitlab.url',\n    'sonar.lf.gravatarServerUrl',\n    'sonar.lf.logoUrl',\n    'sonar.auth.saml.loginUrl'\n  ].includes(definition.key);\n}\n\nexport function fetchSettings(component?: string) {\n  return (dispatch: Dispatch) => {\n    return getDefinitions(component).then(definitions => {\n      const filtered = definitions.filter(definition => definition.type !== 'LICENSE');\n      dispatch(receiveDefinitions(filtered));\n    });\n  };\n}\n\nexport function fetchValues(keys: string[], component?: string) {\n  return (dispatch: Dispatch) =>\n    getValues({ keys: keys.join(), component }).then(settings => {\n      dispatch(receiveValues(keys, settings, component));\n      dispatch(closeAllGlobalMessages());\n    });\n}\n\nexport function checkValue(key: string) {\n  return (dispatch: Dispatch, getState: () => Store) => {\n    const state = getState();\n    const definition = getSettingsAppDefinition(state, key);\n    const value = getSettingsAppChangedValue(state, key);\n\n    if (isEmptyValue(definition, value)) {\n      if (definition.defaultValue === undefined) {\n        dispatch(failValidation(key, translate('settings.state.value_cant_be_empty_no_default')));\n      } else {\n        dispatch(failValidation(key, translate('settings.state.value_cant_be_empty')));\n      }\n      return false;\n    }\n\n    if (isURLKind(definition)) {\n      try {\n        // eslint-disable-next-line no-new\n        new URL(value);\n      } catch (e) {\n        dispatch(\n          failValidation(key, translateWithParameters('settings.state.url_not_valid', value))\n        );\n        return false;\n      }\n    }\n\n    if (definition.type === 'JSON') {\n      try {\n        JSON.parse(value);\n      } catch (e) {\n        dispatch(failValidation(key, e.message));\n\n        return false;\n      }\n    }\n\n    dispatch(passValidation(key));\n    return true;\n  };\n}\n\nexport function saveValue(key: string, component?: string) {\n  return (dispatch: Dispatch, getState: () => Store) => {\n    dispatch(startLoading(key));\n    const state = getState();\n    const definition = getSettingsAppDefinition(state, key);\n    const value = getSettingsAppChangedValue(state, key);\n\n    if (isEmptyValue(definition, value)) {\n      dispatch(failValidation(key, translate('settings.state.value_cant_be_empty')));\n      dispatch(stopLoading(key));\n      return Promise.reject();\n    }\n\n    return setSettingValue(definition, value, component)\n      .then(() => getValues({ keys: key, component }))\n      .then(values => {\n        dispatch(receiveValues([key], values, component));\n        dispatch(cancelChange(key));\n        dispatch(passValidation(key));\n        dispatch(stopLoading(key));\n      })\n      .catch(handleError(key, dispatch));\n  };\n}\n\nexport function resetValue(key: string, component?: string) {\n  return (dispatch: Dispatch) => {\n    dispatch(startLoading(key));\n\n    return resetSettingValue({ keys: key, component })\n      .then(() => getValues({ keys: key, component }))\n      .then(values => {\n        if (values.length > 0) {\n          dispatch(receiveValues([key], values, component));\n        } else {\n          dispatch(receiveValues([key], [], component));\n        }\n        dispatch(passValidation(key));\n        dispatch(stopLoading(key));\n      })\n      .catch(handleError(key, dispatch));\n  };\n}\n\nfunction handleError(key: string, dispatch: Dispatch) {\n  return (response: Response) => {\n    dispatch(stopLoading(key));\n    return parseError(response).then(message => {\n      dispatch(failValidation(key, message));\n      return Promise.reject();\n    });\n  };\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { getJSON, post } from '../helpers/request';\n\nexport function getNewCodePeriod(data?: {\n  project?: string;\n  branch?: string;\n}): Promise<T.Omit<T.NewCodePeriod, 'effectiveValue'>> {\n  return getJSON('/api/new_code_periods/show', data).catch(throwGlobalError);\n}\n\nexport function setNewCodePeriod(data: {\n  project?: string;\n  branch?: string;\n  type: T.NewCodePeriodSettingType;\n  value?: string;\n}): Promise<void> {\n  return post('/api/new_code_periods/set', data).catch(throwGlobalError);\n}\n\nexport function resetNewCodePeriod(data: { project?: string; branch?: string }): Promise<void> {\n  return post('/api/new_code_periods/unset', data).catch(throwGlobalError);\n}\n\nexport function listBranchesNewCodePeriod(data: {\n  project: string;\n}): Promise<{ newCodePeriods: T.NewCodePeriodBranch[] }> {\n  return getJSON('/api/new_code_periods/list', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function validateDays(days: string) {\n  const parsed = parseInt(days, 10);\n\n  return !(days.length < 1 || isNaN(parsed) || parsed < 1 || String(parsed) !== days);\n}\n\nexport function getSettingValue({\n  analysis,\n  days,\n  referenceBranch,\n  type\n}: {\n  analysis?: string;\n  days?: string;\n  referenceBranch?: string;\n  type?: T.NewCodePeriodSettingType;\n}) {\n  switch (type) {\n    case 'NUMBER_OF_DAYS':\n      return days;\n    case 'REFERENCE_BRANCH':\n      return referenceBranch;\n    case 'SPECIFIC_ANALYSIS':\n      return analysis;\n    default:\n      return undefined;\n  }\n}\n\nexport function validateSetting(state: {\n  analysis?: string;\n  currentSetting?: T.NewCodePeriodSettingType;\n  currentSettingValue?: string;\n  days: string;\n  overrideGeneralSetting?: boolean;\n  referenceBranch?: string;\n  selected?: T.NewCodePeriodSettingType;\n}) {\n  const {\n    analysis = '',\n    currentSetting,\n    currentSettingValue,\n    days,\n    overrideGeneralSetting,\n    referenceBranch = '',\n    selected\n  } = state;\n\n  let isChanged;\n  if (!currentSetting && overrideGeneralSetting !== undefined) {\n    isChanged = overrideGeneralSetting;\n  } else {\n    isChanged =\n      overrideGeneralSetting === false ||\n      selected !== currentSetting ||\n      (selected === 'NUMBER_OF_DAYS' && days !== currentSettingValue) ||\n      (selected === 'SPECIFIC_ANALYSIS' && analysis !== currentSettingValue) ||\n      (selected === 'REFERENCE_BRANCH' && referenceBranch !== currentSettingValue);\n  }\n\n  const isValid =\n    overrideGeneralSetting === false ||\n    selected === 'PREVIOUS_VERSION' ||\n    (selected === 'SPECIFIC_ANALYSIS' && analysis.length > 0) ||\n    (selected === 'NUMBER_OF_DAYS' && validateDays(days)) ||\n    (selected === 'REFERENCE_BRANCH' && referenceBranch.length > 0);\n\n  return { isChanged, isValid };\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport RadioCard from '../../../components/controls/RadioCard';\nimport ValidationInput from '../../../components/controls/ValidationInput';\nimport MandatoryFieldsExplanation from '../../../components/ui/MandatoryFieldsExplanation';\nimport { translate } from '../../../helpers/l10n';\n\nexport interface Props {\n  className?: string;\n  days: string;\n  disabled?: boolean;\n  isChanged: boolean;\n  isValid: boolean;\n  onChangeDays: (value: string) => void;\n  onSelect: (selection: T.NewCodePeriodSettingType) => void;\n  selected: boolean;\n}\n\nexport default function BaselineSettingDays(props: Props) {\n  const { className, days, disabled, isChanged, isValid, onChangeDays, onSelect, selected } = props;\n  return (\n    <RadioCard\n      className={className}\n      disabled={disabled}\n      onClick={() => onSelect('NUMBER_OF_DAYS')}\n      selected={selected}\n      title={translate('baseline.number_days')}>\n      <>\n        <p className=\"big-spacer-bottom\">{translate('baseline.number_days.description')}</p>\n        {selected && (\n          <>\n            <MandatoryFieldsExplanation />\n\n            <ValidationInput\n              error={undefined}\n              id=\"baseline_number_of_days\"\n              isInvalid={isChanged && !isValid}\n              isValid={isChanged && isValid}\n              label={translate('baseline.specify_days')}\n              required={true}>\n              <input onChange={e => onChangeDays(e.currentTarget.value)} type=\"text\" value={days} />\n            </ValidationInput>\n          </>\n        )}\n      </>\n    </RadioCard>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport RadioCard from '../../../components/controls/RadioCard';\nimport { translate } from '../../../helpers/l10n';\n\nexport interface Props {\n  disabled?: boolean;\n  isDefault?: boolean;\n  onSelect: (selection: T.NewCodePeriodSettingType) => void;\n  selected: boolean;\n}\n\nexport default function BaselineSettingPreviousVersion(props: Props) {\n  const { disabled, isDefault, onSelect, selected } = props;\n  return (\n    <RadioCard\n      disabled={disabled}\n      onClick={() => onSelect('PREVIOUS_VERSION')}\n      selected={selected}\n      title={\n        translate('baseline.previous_version') + (isDefault ? ` (${translate('default')})` : '')\n      }>\n      <p>{translate('baseline.previous_version.description')}</p>\n    </RadioCard>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from '../../helpers/l10n';\nimport CheckIcon from '../icons/CheckIcon';\nimport { Button } from './buttons';\nimport './Toggle.css';\n\ninterface Props {\n  disabled?: boolean;\n  name?: string;\n  onChange?: (value: boolean) => void;\n  value: boolean | string;\n}\n\nexport default class Toggle extends React.PureComponent<Props> {\n  getValue = () => {\n    const { value } = this.props;\n    return typeof value === 'string' ? value === 'true' : value;\n  };\n\n  handleClick = () => {\n    if (this.props.onChange) {\n      const value = this.getValue();\n      this.props.onChange(!value);\n    }\n  };\n\n  render() {\n    const { disabled, name } = this.props;\n    const value = this.getValue();\n    const className = classNames('boolean-toggle', { 'boolean-toggle-on': value });\n\n    return (\n      <Button className={className} disabled={disabled} name={name} onClick={this.handleClick}>\n        <div aria-label={translate(value ? 'on' : 'off')} className=\"boolean-toggle-handle\">\n          <CheckIcon size={12} />\n        </div>\n      </Button>\n    );\n  }\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./RadioCard.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".radio-card{display:flex;flex-direction:column;width:450px;min-height:210px;background-color:#fff;border:1px solid #e6e6e6;border-radius:3px;box-sizing:border-box;margin-right:16px;transition:all .2s ease}.radio-card.animated{height:0;border-width:0;overflow:hidden}.radio-card.animated.open{height:210px;border-width:1px}.radio-card.highlight{box-shadow:0 6px 12px rgba(0,0,0,.175)}.radio-card:last-child{margin-right:0}.radio-card:focus{outline:none}.radio-card-vertical{width:100%;min-height:auto}.radio-card-actionable{cursor:pointer}.radio-card-actionable:not(.disabled):hover{box-shadow:0 6px 12px rgba(0,0,0,.175);transform:translateY(-2px)}.radio-card-actionable.selected{border-color:#236a97}.radio-card-actionable.radio-card-vertical:not(.disabled):hover{box-shadow:none;transform:none}.radio-card-actionable.radio-card-vertical:not(.selected):not(.disabled):hover{border-color:#cae3f2}.radio-card-actionable.selected .radio-card-recommended{border:1px solid #236a97;border-top:none}.radio-card-actionable.disabled{cursor:not-allowed;background-color:#ebebeb;border-color:#ddd}.radio-card-actionable.disabled h2,.radio-card-actionable.disabled ul{color:#bbb}.radio-card-header{align-items:center;padding:16px 16px 0}.radio-card-body,.radio-card-header{display:flex;justify-content:space-between}.radio-card-body{flex-grow:1;flex-direction:column;padding:0 16px 16px}.radio-card-body .alert{margin-bottom:0}.radio-card-recommended{position:relative;padding:6px 16px;left:-1px;bottom:-1px;width:450px;color:#fff;background-color:#4b9fd5;border-radius:0 0 3px 3px;box-sizing:border-box;font-size:12px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Toggle.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".button.boolean-toggle{display:inline-block;vertical-align:middle;width:48px;height:24px;padding:1px;border:1px solid #cdcdcd;border-radius:24px;box-sizing:border-box;background-color:#fff;cursor:pointer;transition:all .3s ease}.button.boolean-toggle:hover{background-color:#fff}.button.boolean-toggle:focus{border-color:#4b9fd5;background-color:#f6f6f6}.boolean-toggle-handle{display:flex;justify-content:center;align-items:center;width:20px;height:20px;border:1px solid #cdcdcd;border-radius:22px;box-sizing:border-box;background-color:#f6f6f6;transition:transform .3s cubic-bezier(.87,-.41,.19,1.44),border .3s ease}.boolean-toggle-handle>*{opacity:0;transition:opacity .3s ease}.button.boolean-toggle-on{border-color:#236a97;background-color:#236a97;color:#236a97}.button.boolean-toggle-on:focus,.button.boolean-toggle-on:hover{background-color:#236a97}.button.boolean-toggle-on .boolean-toggle-handle{border-color:#f6f6f6;transform:translateX(24px)}.button.boolean-toggle-on .boolean-toggle-handle>*{opacity:1}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function LockIcon({ fill = 'currentColor', ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M5.455 7.364h5.09v-1.91A2.55 2.55 0 0 0 8 2.91a2.55 2.55 0 0 0-2.545 2.546v1.909zm8.272.954v5.727a.955.955 0 0 1-.954.955H3.227a.955.955 0 0 1-.954-.955V8.318c0-.527.427-.954.954-.954h.318v-1.91C3.545 3.01 5.554 1 8 1s4.455 2.009 4.455 4.455v1.909h.318c.527 0 .954.427.954.954z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n"],"sourceRoot":""}