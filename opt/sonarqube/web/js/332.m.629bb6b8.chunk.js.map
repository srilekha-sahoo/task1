{"version":3,"sources":["webpack:///./src/main/js/apps/application-settings/ReportFrequencyForm.tsx","webpack:///./src/main/js/apps/application-settings/ApplicationSettingsApp.tsx","webpack:///./src/main/js/components/controls/Select.tsx","webpack:///./src/main/js/components/controls/Select.css?5002","webpack:///./src/main/js/components/controls/Select.css","webpack:///./src/main/js/helpers/sanitize.ts","webpack:///./src/main/js/api/settings.ts","webpack:///./src/main/js/types/settings.ts"],"names":["ReportFrequencyForm","props","definition","frequency","defaultValue","currentSelection","setCurrentSelection","options","map","option","label","value","description","className","dangerouslySetInnerHTML","__html","sanitize","Select","clearable","name","onChange","onClick","onSave","undefined","mounted","state","loading","fetchInitialData","async","this","setState","Promise","all","fetchDefinition","fetchSetting","component","key","find","d","ProjectReportFrequency","_","setting","keys","pop","handleSubmit","prevProps","DeferredSpinner","ReactSelectLib","ReactSelect","ReactCreatable","then","lib","default","Creatable","Async","renderInput","iconProps","size","innerRef","Boolean","clearRenderer","ref","api","content","__esModule","module","i","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push","sanitizeStringRestricted","html","ALLOWED_TAGS","ALLOWED_ATTR","sanitizeString","USE_PROFILES","getDefinitions","r","definitions","getValues","data","settings","setSecuredSettings","setSettingValue","multiValues","values","type","fieldValues","fields","JSON","stringify","setSimpleSettingValue","catch","resetSettingValue","sendTestEmail","to","subject","message","checkSecretKey","generateSecretKey","encryptValue","SettingsKey","SettingType"],"mappings":"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","file":"js/332.m.629bb6b8.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from '../../components/controls/buttons';\nimport Select from '../../components/controls/Select';\nimport { translate } from '../../helpers/l10n';\nimport { sanitizeStringRestricted } from '../../helpers/sanitize';\nimport { SettingCategoryDefinition } from '../../types/settings';\n\nexport interface ReportFrequencyFormProps {\n  definition: SettingCategoryDefinition;\n  frequency: string;\n  onSave: (value: string) => Promise<void>;\n}\n\nexport default function ReportFrequencyForm(props: ReportFrequencyFormProps) {\n  const { definition, frequency } = props;\n  const { defaultValue } = definition;\n\n  const [currentSelection, setCurrentSelection] = React.useState(frequency);\n\n  const options = props.definition.options.map(option => ({\n    label: option,\n    value: option\n  }));\n\n  const handleReset = () => {\n    if (defaultValue) {\n      setCurrentSelection(defaultValue);\n      props.onSave(defaultValue);\n    }\n  };\n\n  return (\n    <div>\n      <h2>{translate('application_settings.report.frequency')}</h2>\n      {definition.description && (\n        <div\n          className=\"markdown\"\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{\n            __html: sanitizeStringRestricted(definition.description)\n          }}\n        />\n      )}\n\n      <Select\n        className=\"input-medium\"\n        clearable={false}\n        name={definition.name}\n        onChange={({ value }: { value: string }) => setCurrentSelection(value)}\n        options={options}\n        value={currentSelection}\n      />\n\n      <div className=\"display-flex-center big-spacer-top\">\n        {frequency !== currentSelection && (\n          <Button\n            className=\"spacer-right button-success\"\n            onClick={() => props.onSave(currentSelection)}>\n            {translate('save')}\n          </Button>\n        )}\n\n        {defaultValue !== undefined && frequency !== defaultValue && (\n          <Button className=\"spacer-right\" onClick={handleReset}>\n            {translate('reset_verb')}\n          </Button>\n        )}\n\n        {frequency !== currentSelection && (\n          <ResetButtonLink className=\"spacer-right\" onClick={() => setCurrentSelection(frequency)}>\n            {translate('cancel')}\n          </ResetButtonLink>\n        )}\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getDefinitions, getValues, setSimpleSettingValue } from '../../api/settings';\nimport DeferredSpinner from '../../components/ui/DeferredSpinner';\nimport { translate } from '../../helpers/l10n';\nimport { SettingCategoryDefinition, SettingsKey } from '../../types/settings';\nimport ReportFrequencyForm from './ReportFrequencyForm';\n\ninterface Props {\n  component: T.Component;\n}\n\ninterface State {\n  definition?: SettingCategoryDefinition;\n  frequency?: string;\n  loading: boolean;\n}\n\nexport default class ApplicationSettingsApp extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  state: State = {\n    loading: true\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchInitialData();\n  }\n\n  async componentDidUpdate(prevProps: Props) {\n    if (prevProps.component.key !== this.props.component.key) {\n      this.setState({ loading: true });\n      await this.fetchSetting();\n      this.setState({ loading: false });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchInitialData = async () => {\n    this.setState({ loading: true });\n    await Promise.all([this.fetchDefinition(), this.fetchSetting()]);\n    this.setState({ loading: false });\n  };\n\n  fetchDefinition = async () => {\n    const { component } = this.props;\n    try {\n      const definitions = await getDefinitions(component.key);\n      const definition = definitions.find(d => d.key === SettingsKey.ProjectReportFrequency);\n\n      if (this.mounted) {\n        this.setState({ definition });\n      }\n    } catch (_) {\n      /* do nothing */\n    }\n  };\n\n  fetchSetting = async () => {\n    const { component } = this.props;\n    try {\n      const setting = (\n        await getValues({ component: component.key, keys: SettingsKey.ProjectReportFrequency })\n      ).pop();\n\n      if (this.mounted) {\n        this.setState({\n          frequency: setting ? setting.value : undefined\n        });\n      }\n    } catch (_) {\n      /* do nothing */\n    }\n  };\n\n  handleSubmit = async (frequency: string) => {\n    const { component } = this.props;\n\n    try {\n      await setSimpleSettingValue({\n        component: component.key,\n        key: SettingsKey.ProjectReportFrequency,\n        value: frequency\n      });\n\n      this.setState({ frequency });\n    } catch (_) {\n      /* Do nothing */\n    }\n  };\n\n  render() {\n    const { definition, frequency, loading } = this.state;\n\n    return (\n      <div className=\"page page-limited application-settings\">\n        <h1>{translate('application_settings.page')}</h1>\n        <div className=\"boxed-group big-padded big-spacer-top\">\n          <DeferredSpinner loading={loading}>\n            <div>\n              {definition && frequency && (\n                <ReportFrequencyForm\n                  definition={definition}\n                  frequency={frequency}\n                  onSave={this.handleSubmit}\n                />\n              )}\n            </div>\n          </DeferredSpinner>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ReactSelectClass, {\n  ReactAsyncSelectProps,\n  ReactCreatableSelectProps,\n  ReactSelectProps\n} from 'react-select';\nimport { lazyLoadComponent } from '../lazyLoadComponent';\nimport { ClearButton } from './buttons';\nimport './Select.css';\n\nconst ReactSelectLib = import('react-select');\nconst ReactSelect = lazyLoadComponent(() => ReactSelectLib);\nconst ReactCreatable = lazyLoadComponent(() =>\n  ReactSelectLib.then(lib => ({ default: lib.Creatable }))\n);\nconst ReactAsync = lazyLoadComponent(() => ReactSelectLib.then(lib => ({ default: lib.Async })));\n\nfunction renderInput() {\n  return <ClearButton className=\"button-tiny spacer-left text-middle\" iconProps={{ size: 12 }} />;\n}\n\nexport interface WithInnerRef {\n  innerRef?: React.Ref<ReactSelectClass<unknown>>;\n}\n\nexport default function Select({ innerRef, ...props }: WithInnerRef & ReactSelectProps) {\n  // hide the \"x\" icon when select is empty\n  const clearable = props.clearable ? Boolean(props.value) : false;\n  return (\n    <ReactSelect {...props} clearable={clearable} clearRenderer={renderInput} ref={innerRef} />\n  );\n}\n\nexport function Creatable(props: ReactCreatableSelectProps) {\n  return <ReactCreatable {...props} clearRenderer={renderInput} />;\n}\n\nexport function AsyncSelect(props: ReactAsyncSelectProps & WithInnerRef) {\n  return <ReactAsync {...props} />;\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Select.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".Select{position:relative;display:inline-block;vertical-align:middle;font-size:12px;text-align:left}.Select,.Select div,.Select input,.Select span{box-sizing:border-box}.Select.is-disabled>.Select-control{background-color:#ebebeb!important;border-color:#ddd!important}.Select.is-disabled>.Select-control:hover{box-shadow:none!important}.Select.is-disabled .Select-arrow-zone{cursor:not-allowed!important;pointer-events:none!important}.Select.is-disabled .Select-placeholder,.Select.is-disabled .Select-value{color:#bbb!important}.Select-control{position:relative;display:table;width:100%;height:24px;line-height:22px;border:1px solid #cdcdcd;border-collapse:separate;border-radius:2px;background-color:#fff;color:#333;cursor:default;outline:none;overflow:hidden}.is-searchable.is-open>.Select-control{cursor:text}.is-open>.Select-control{border-bottom-right-radius:0;border-bottom-left-radius:0;background:#fff}.is-open>.Select-control>.Select-arrow{border-color:transparent transparent #999;border-width:0 5px 5px}.is-searchable.is-focused:not(.is-open)>.Select-control{cursor:text}.is-focused:not(.is-open)>.Select-control{border-color:#4b9fd5}.Select-placeholder{color:#666}.Select-placeholder,:not(.Select--multi)>.Select-control .Select-value{bottom:0;left:0;line-height:23px;padding-left:8px;padding-right:24px;position:absolute;right:0;top:0;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.Select-value [class^=icon-]{padding-top:5px}.Select-value img,.Select-value svg{padding-top:3px}.Select-option [class^=icon-],.Select-option img,.Select-option svg{padding-top:2px}.has-value.is-pseudo-focused:not(.Select--multi)>.Select-control>.Select-value .Select-value-label,.has-value:not(.Select--multi)>.Select-control>.Select-value .Select-value-label{color:#333}.has-value.is-pseudo-focused:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label,.has-value:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label{cursor:pointer;text-decoration:none}.has-value.is-pseudo-focused:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label:focus,.has-value.is-pseudo-focused:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label:hover,.has-value:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label:focus,.has-value:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label:hover{color:#007eff;outline:none;text-decoration:underline}.Select-input{vertical-align:top;height:22px;padding-left:8px;padding-right:8px;outline:none}.Select-input>input{background:none transparent;border:0;cursor:default;display:inline-block;font-family:inherit;font-size:12px;height:22px;margin:0;outline:none;padding:0;box-shadow:none;-webkit-appearance:none}.is-focused .Select-input>input{cursor:text}.has-value.is-pseudo-focused .Select-input{opacity:0}.Select-control:not(.is-searchable)>.Select-input{outline:none}.Select-loading-zone{cursor:pointer;display:table-cell;position:relative;text-align:center;vertical-align:middle;width:16px}.Select-loading{animation:Select-animation-spin .4s linear infinite;box-sizing:border-box;border-radius:50%;border:2px solid #ccc;border-right-color:#333;display:inline-block}.Select-clear-zone,.Select-loading{width:16px;height:16px;position:relative;vertical-align:middle}.Select-clear-zone{animation:Select-animation-fadeIn .2s;color:#999;cursor:pointer;display:table-cell;text-align:center;padding-right:4px}.Select-clear-zone:hover .Select-clear{background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTQgMTQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxLjQxNCI+PHBhdGggZD0iTTEzLjk2OSAxLjQwNkw4LjM5IDYuOTg0bDUuNTc4IDUuNTc5LTEuNDA2IDEuNDA2TDYuOTg0IDguMzlsLTUuNTc4IDUuNTc4TDAgMTIuNTYzbDUuNTc4LTUuNTc5TDAgMS40MDYgMS40MDYgMGw1LjU3OCA1LjU3OEwxMi41NjMgMGwxLjQwNiAxLjQwNnoiIGZpbGw9IiNlNzE0MzgiIGZpbGwtcnVsZT0ibm9uemVybyIvPjwvc3ZnPg==)}.Select-clear{display:block;width:9px;height:9px;background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTQgMTQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxLjQxNCI+PHBhdGggZD0iTTEzLjk2OSAxLjQwNkw4LjM5IDYuOTg0bDUuNTc4IDUuNTc5LTEuNDA2IDEuNDA2TDYuOTg0IDguMzlsLTUuNTc4IDUuNTc4TDAgMTIuNTYzbDUuNTc4LTUuNTc5TDAgMS40MDYgMS40MDYgMGw1LjU3OCA1LjU3OEwxMi41NjMgMGwxLjQwNiAxLjQwNnoiIGZpbGw9IiM5OTkiIGZpbGwtcnVsZT0ibm9uemVybyIvPjwvc3ZnPg==);background-size:9px 9px;text-indent:-9999px}.Select--multi .Select-clear-zone{width:17px}.Select-arrow-zone{cursor:pointer;display:table-cell;position:relative;text-align:center;vertical-align:middle;width:20px;padding-right:5px}.Select-arrow{border-color:#999 transparent transparent;border-style:solid;border-width:4px 4px 2px;display:inline-block;height:0;width:0}.is-open .Select-arrow,.Select-arrow-zone:hover>.Select-arrow{border-top-color:#666}@keyframes Select-animation-fadeIn{0%{opacity:0}to{opacity:1}}.Select-menu-outer{border-bottom-right-radius:4px;border-bottom-left-radius:4px;background-color:#fff;border:1px solid #ccc;border-top-color:#e6e6e6;box-sizing:border-box;margin-top:-1px;max-height:200px;position:absolute;top:100%;width:100%;z-index:7500;-webkit-overflow-scrolling:touch;box-shadow:0 6px 12px rgba(0,0,0,.175)}.Select-menu{max-height:198px;padding:5px 0;overflow-y:auto}.Select-option{display:block;line-height:20px;padding:0 8px;box-sizing:border-box;color:#333;font-size:12px;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.Select-option:last-child{border-bottom-right-radius:2px;border-bottom-left-radius:2px}.Select-option.is-focused{background-color:#f3f3f3}.Select-option.is-disabled{cursor:default;opacity:.4;font-style:italic}.Select-noresults{box-sizing:border-box;color:#999;cursor:default;display:block;padding:8px 10px}.Select--multi .Select-value{background-color:rgba(0,126,255,.08);border-radius:2px;border:1px solid rgba(0,126,255,.24);color:#333;display:inline-block;font-size:12px;line-height:14px;margin:1px 4px 1px 1px;vertical-align:top}.Select-value-label{font-size:12px}.is-searchable.is-open .Select-value-label{opacity:.5}.Select-big .Select-control{padding-top:4px;padding-bottom:4px}.Select-big .Select-placeholder{margin-top:4px;margin-bottom:4px}.Select-big .Select-value-label{display:inline-block;margin-top:7px;line-height:16px}.Select-big .Select-option{padding:7px 8px;line-height:16px}.Select-big img,.Select-big svg{padding-top:0}.Select--multi .Select-value-icon,.Select--multi .Select-value-label{display:inline-block;vertical-align:middle}.Select--multi .Select-value-label{display:inline-block;max-width:200px;border-bottom-right-radius:2px;border-top-right-radius:2px;cursor:default;padding:2px 5px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.Select--multi a.Select-value-label{color:#007eff;cursor:pointer;text-decoration:none}.Select--multi a.Select-value-label:hover{text-decoration:underline}.Select--multi .Select-value-icon{cursor:pointer;border-bottom-left-radius:2px;border-top-left-radius:2px;border-right:1px solid rgba(0,126,255,.24);padding:1px 5px}.Select--multi .Select-value-icon:focus,.Select--multi .Select-value-icon:hover{background-color:rgba(0,113,230,.08);color:#0071e6}.Select--multi .Select-value-icon:active{background-color:rgba(0,126,255,.24)}.Select--multi.is-disabled .Select-value{background-color:#fcfcfc;border:1px solid #e3e3e3;color:#333}.Select--multi.is-disabled .Select-value-icon{cursor:not-allowed;border-right:1px solid #e3e3e3}.Select--multi.is-disabled .Select-value-icon:active,.Select--multi.is-disabled .Select-value-icon:focus,.Select--multi.is-disabled .Select-value-icon:hover{background-color:#fcfcfc}.Select-aria-only{display:none}@keyframes Select-animation-spin{to{transform:rotate(1turn)}}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport { sanitize } from 'dompurify';\n\nexport function sanitizeStringRestricted(html: string) {\n  return sanitize(html, {\n    ALLOWED_TAGS: ['b', 'br', 'code', 'i', 'li', 'p', 'strong', 'ul', 'a'],\n    ALLOWED_ATTR: ['target', 'href']\n  });\n}\n\nexport function sanitizeString(html: string) {\n  return sanitize(html, { USE_PROFILES: { html: true } });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { omitBy } from 'lodash';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { isCategoryDefinition } from '../apps/settings/utils';\nimport { getJSON, post, postJSON, RequestData } from '../helpers/request';\nimport { BranchParameters } from '../types/branch-like';\nimport {\n  SettingCategoryDefinition,\n  SettingDefinition,\n  SettingValue,\n  SettingValueResponse\n} from '../types/settings';\n\nexport function getDefinitions(component?: string): Promise<SettingCategoryDefinition[]> {\n  return getJSON('/api/settings/list_definitions', { component }).then(\n    r => r.definitions,\n    throwGlobalError\n  );\n}\n\nexport function getValues(\n  data: { keys: string; component?: string } & BranchParameters\n): Promise<SettingValue[]> {\n  return getJSON('/api/settings/values', data).then((r: SettingValueResponse) => [\n    ...r.settings,\n    ...r.setSecuredSettings.map(key => ({ key }))\n  ]);\n}\n\nexport function setSettingValue(\n  definition: SettingDefinition,\n  value: any,\n  component?: string\n): Promise<void> {\n  const { key } = definition;\n  const data: RequestData = { key, component };\n\n  if (isCategoryDefinition(definition) && definition.multiValues) {\n    data.values = value;\n  } else if (definition.type === 'PROPERTY_SET') {\n    data.fieldValues = value\n      .map((fields: any) => omitBy(fields, value => value == null))\n      .map(JSON.stringify);\n  } else {\n    data.value = value;\n  }\n\n  return post('/api/settings/set', data);\n}\n\nexport function setSimpleSettingValue(\n  data: { component?: string; value: string; key: string } & BranchParameters\n): Promise<void | Response> {\n  return post('/api/settings/set', data).catch(throwGlobalError);\n}\n\nexport function resetSettingValue(\n  data: { keys: string; component?: string } & BranchParameters\n): Promise<void> {\n  return post('/api/settings/reset', data);\n}\n\nexport function sendTestEmail(to: string, subject: string, message: string): Promise<void> {\n  return post('/api/emails/send', { to, subject, message });\n}\n\nexport function checkSecretKey(): Promise<{ secretKeyAvailable: boolean }> {\n  return getJSON('/api/settings/check_secret_key').catch(throwGlobalError);\n}\n\nexport function generateSecretKey(): Promise<{ secretKey: string }> {\n  return postJSON('/api/settings/generate_secret_key').catch(throwGlobalError);\n}\n\nexport function encryptValue(value: string): Promise<{ encryptedValue: string }> {\n  return postJSON('/api/settings/encrypt', { value }).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport const enum SettingsKey {\n  DaysBeforeDeletingInactiveBranchesAndPRs = 'sonar.dbcleaner.daysBeforeDeletingInactiveBranchesAndPRs',\n  DefaultProjectVisibility = 'projects.default.visibility',\n  ServerBaseUrl = 'sonar.core.serverBaseURL',\n  PluginRiskConsent = 'sonar.plugins.risk.consent',\n  ProjectReportFrequency = 'sonar.governance.report.project.branch.frequency'\n}\n\nexport type Setting = SettingValue & { definition: SettingDefinition; hasValue: boolean };\nexport type SettingWithCategory = Setting & { definition: SettingCategoryDefinition };\n\nexport enum SettingType {\n  STRING = 'STRING',\n  TEXT = 'TEXT',\n  JSON = 'JSON',\n  PASSWORD = 'PASSWORD',\n  BOOLEAN = 'BOOLEAN',\n  FLOAT = 'FLOAT',\n  INTEGER = 'INTEGER',\n  LICENSE = 'LICENSE',\n  LONG = 'LONG',\n  SINGLE_SELECT_LIST = 'SINGLE_SELECT_LIST',\n  PROPERTY_SET = 'PROPERTY_SET'\n}\nexport interface SettingDefinition {\n  description?: string;\n  key: string;\n  multiValues?: boolean;\n  name?: string;\n  options: string[];\n  type?: SettingType;\n}\n\nexport interface SettingFieldDefinition extends SettingDefinition {\n  description: string;\n  name: string;\n}\n\nexport interface SettingCategoryDefinition extends SettingDefinition {\n  category: string;\n  defaultValue?: string;\n  deprecatedKey?: string;\n  fields: SettingFieldDefinition[];\n  multiValues?: boolean;\n  subCategory: string;\n}\n\nexport interface SettingValueResponse {\n  settings: SettingValue[];\n  setSecuredSettings: string[];\n}\n\nexport interface SettingValue {\n  fieldValues?: Array<T.Dict<string>>;\n  inherited?: boolean;\n  key: string;\n  parentFieldValues?: Array<T.Dict<string>>;\n  parentValue?: string;\n  parentValues?: string[];\n  value?: string;\n  values?: string[];\n}\n"],"sourceRoot":""}