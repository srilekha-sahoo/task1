{"version":3,"sources":["webpack:///./src/main/js/apps/coding-rules/components/ActivationFormModal.tsx","webpack:///./node_modules/lodash/filter.js","webpack:///./node_modules/lodash/_baseFilter.js","webpack:///./src/main/js/apps/coding-rules/components/BulkChangeModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/BulkChange.tsx","webpack:///./src/main/js/apps/coding-rules/components/Facet.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationSeverityFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/AvailableSinceFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/DefaultSeverityFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/InheritanceFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/LanguageFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/ProfileFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/RepositoryFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/StatusFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TagFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TemplateFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TypeFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/FacetsList.tsx","webpack:///./src/main/js/apps/coding-rules/components/PageActions.tsx","webpack:///./src/main/js/helpers/strings.ts","webpack:///./src/main/js/apps/coding-rules/components/CustomRuleFormModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/CustomRuleButton.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsCustomRules.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsIssues.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsParameters.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationButton.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleInheritanceIcon.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsProfiles.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetails.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleListItem.tsx","webpack:///./src/main/js/apps/coding-rules/components/App.tsx","webpack:///./src/main/js/components/controls/Select.tsx","webpack:///./src/main/js/components/controls/SimpleModal.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/components/ui/MandatoryFieldMarker.tsx","webpack:///./src/main/js/components/ui/MandatoryFieldsExplanation.tsx","webpack:///./src/main/js/components/controls/ListFooter.tsx","webpack:///./src/main/js/components/controls/Select.css?5002","webpack:///./src/main/js/components/controls/Select.css","webpack:///./node_modules/lodash/toFinite.js","webpack:///./src/main/js/components/controls/ConfirmModal.tsx","webpack:///./node_modules/lodash/map.js","webpack:///./src/main/js/app/components/a11y/A11ySkipTarget.tsx","webpack:///./src/main/js/components/icons/DetachIcon.tsx","webpack:///./src/main/js/api/quality-profiles.ts","webpack:///./src/main/js/components/controls/ConfirmButton.tsx","webpack:///./src/main/js/components/controls/ModalButton.tsx","webpack:///./src/main/js/components/icons/ChevronDownIcon.tsx","webpack:///./src/main/js/helpers/pages.ts","webpack:///./node_modules/valid-url/index.js","webpack:///./src/main/js/components/icons/OpenCloseIcon.tsx","webpack:///./src/main/js/components/common/ScreenPositionHelper.tsx","webpack:///./src/main/js/components/facet/FacetBox.tsx","webpack:///./src/main/js/components/facet/FacetHeader.tsx","webpack:///./src/main/js/components/facet/FacetItem.tsx","webpack:///./src/main/js/components/facet/FacetItemsList.tsx","webpack:///./src/main/js/helpers/csv.ts","webpack:///./node_modules/date-fns/add_months/index.js","webpack:///./src/main/js/components/facet/ListStyleFacetFooter.tsx","webpack:///./src/main/js/components/facet/ListStyleFacet.tsx","webpack:///./src/main/js/components/common/DocumentationTooltip.tsx","webpack:///./src/main/js/helpers/search.tsx","webpack:///./node_modules/lodash/range.js","webpack:///./node_modules/lodash/_createRange.js","webpack:///./node_modules/lodash/_baseRange.js","webpack:///./src/main/js/components/icons/ChevronLeftIcon.tsx","webpack:///./src/main/js/components/facet/MultipleSelectionHint.tsx","webpack:///./node_modules/date-fns/get_days_in_month/index.js","webpack:///./node_modules/date-fns/set_month/index.js","webpack:///./src/main/js/components/controls/DayPicker.css?d7e1","webpack:///./src/main/js/components/controls/DayPicker.css","webpack:///./src/main/js/components/controls/styles.css?5633","webpack:///./src/main/js/components/controls/styles.css","webpack:///./src/main/js/components/search-navigator.css?9a2e","webpack:///./src/main/js/components/search-navigator.css","webpack:///./src/main/js/apps/quality-profiles/components/BuiltInQualityProfileBadge.tsx","webpack:///./src/main/js/components/icons/CalendarIcon.tsx","webpack:///./src/main/js/components/controls/DateInput.tsx","webpack:///./src/main/js/helpers/security-standard.ts","webpack:///./node_modules/date-fns/set_year/index.js","webpack:///./node_modules/date-fns/sub_months/index.js","webpack:///./src/main/js/components/ui/PageShortcutsTooltip.tsx","webpack:///./src/main/js/apps/coding-rules/components/SimilarRulesFilter.tsx","webpack:///./src/main/js/components/icons/BackIcon.tsx","webpack:///./src/main/js/components/common/FiltersHeader.tsx","webpack:///./src/main/js/apps/coding-rules/styles.css?8cf5","webpack:///./src/main/js/apps/coding-rules/styles.css","webpack:///./src/main/js/apps/issues/sidebar/StandardFacet.tsx","webpack:///./src/main/js/components/facet/MultipleSelectionHint.css?3321","webpack:///./src/main/js/components/facet/MultipleSelectionHint.css","webpack:///./src/main/js/components/common/PageCounter.tsx","webpack:///./src/main/js/components/controls/ReloadButton.tsx","webpack:///./src/main/js/components/shared/TypeHelper.tsx","webpack:///./src/main/js/apps/coding-rules/components/RemoveExtendedDescriptionModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsDescription.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsTagsPopup.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsMeta.tsx"],"names":["ActivationFormModal","props","super","mounted","getParams","activation","rule","this","params","param","key","defaultValue","value","getQualityProfilesWithDepth","profiles","filter","profile","isBuiltIn","actions","edit","language","lang","map","depth","handleFormSubmit","event","preventDefault","setState","submitting","data","state","severity","then","onDone","onClose","handleParameterChange","name","currentTarget","handleProfileChange","handleSeverityChange","renderSeverityOption","profilesWithDepth","length","isCustomRule","templateKey","activeInAllProfiles","isUpdateMode","contentLabel","modalHeader","onRequestClose","size","onSubmit","className","variant","clearable","disabled","onChange","options","label","repeat","optionRenderer","searchable","valueRenderer","title","type","placeholder","rows","undefined","htmlDesc","dangerouslySetInnerHTML","__html","onClick","arrayFilter","baseFilter","baseIteratee","isArray","module","exports","collection","predicate","baseEach","result","index","push","handleProfileSelect","selectedProfiles","option","getAvailableQualityProfiles","query","referencedProfiles","Object","values","languages","includes","processResponse","response","failed","succeeded","results","sendRequests","looper","Promise","resolve","method","action","targetKey","finished","renderResult","profileKey","Alert","renderProfileSelect","languageName","Select","multi","availableProfiles","total","header","Modal","htmlFor","id","modal","getSelectedProfile","closeModal","handleActivateClick","blur","handleActivateInProfileClick","handleDeactivateClick","handleDeactivateInProfileClick","some","Boolean","Tooltip","overlay","canChangeProfile","allowActivateOnProfile","allowDeactivateOnProfile","Dropdown","overlayPlacement","BottomLeft","href","handleItemClick","itemValue","multiple","newValue","singleSelection","property","handleHeaderClick","onToggle","handleClear","getStat","stats","renderItem","active","stat","renderName","defaultRenderName","renderTextName","FacetItem","halfWidth","tooltip","items","keys","toLowerCase","FacetBox","FacetHeader","disabledHelper","onClear","open","children","FacetItemsList","renderFooter","SeverityHelper","availableSince","handlePeriodChange","date","getValues","intl","formatDate","DateInput","getLanguageName","languageKey","installedLanguages","find","l","handleSearch","getAllPossibleOptions","paging","pageIndex","pageSize","renderSearchResult","term","ListStyleFacet","facetHeader","fetching","getFacetItemText","getSearchResultKey","getSearchResultText","minSearchLength","onSearch","renderFacetItem","searchPlaceholder","selected","compareToProfile","activationSeverities","inheritance","handleActiveClick","stopPropagation","handleInactiveClick","getTextValue","getTooltip","base","renderActivation","isCompare","role","tabIndex","DocumentationTooltip","content","links","referencedLanguages","repositoryKey","referencedRepositories","repository","facetProps","status","ps","q","tags","handleSelect","getTagName","tag","renderTag","TagsIcon","fill","gray60","handleChange","changes","template","Array","String","HelpTooltip","IssueTypeIcon","FacetsList","languageDisabled","hideProfileFacet","inheritanceDisabled","selectedProfile","isInherited","activationSeverityDisabled","onFilterChange","onFacetToggle","openFacets","facets","types","repositories","severities","statuses","StandardFacet","cwe","cweOpen","cweStats","fetchingCwe","fetchingOwaspTop10","fetchingSansTop25","fetchingSonarSourceSecurity","standards","owaspTop10","owaspTop10Open","owaspTop10Stats","sansTop25","sansTop25Open","sansTop25Stats","sonarsourceSecurity","sonarsourceSecurityOpen","sonarsourceSecurityStats","PageActions","PageShortcutsTooltip","leftAndRightLabel","upAndDownLabel","DeferredSpinner","loading","ReloadButton","onReload","PageCounter","current","selectedIndex","diacriticsMap","latinize","str","replace","a","letters","forEach","defaultDiacritic","split","letter","prepareRequest","customRule","templateRule","csv","join","ruleData","markdown_description","description","custom_key","prevent_reactivation","reactivating","template_key","newRuleDetails","handleNameChange","keyModifiedByUser","handleKeyChange","handleDescriptionChange","handleTypeChange","handleStatusChange","renderNameField","MandatoryFieldMarker","autoFocus","required","renderKeyField","renderDescriptionField","FormattingTips","renderTypeOption","TypeHelper","renderTypeField","renderSeverityField","renderStatusField","renderParameterField","sanitize","mdDesc","submit","MandatoryFieldsExplanation","handleClick","handleModalClose","handleDone","fetchRules","f","ruleDetails","rules","handleRuleCreate","handleRuleDelete","ruleKey","renderRule","to","canChange","ConfirmButton","confirmButtonText","confirmData","isDestructive","modalBody","onConfirm","prevProps","fetchIssues","resolved","facet","components","projects","item","project","component","val","count","renderTotal","path","totalItem","appState","branchesEnabled","renderProject","colSpan","withAppState","renderParameter","handleButtonClick","handleCloseModal","buttonText","RuleInheritanceIcon","other","red","baseFontColor","height","version","viewBox","width","xmlSpace","xmlnsXlink","d","style","fillRule","handleActivate","onActivate","handleDeactivate","onDeactivate","handleRevert","reset","renderInheritedProfile","parentName","profilePath","inherit","renderSeverity","parentActivation","originalParam","p","originalValue","renderParameters","renderActions","canEdit","hasParent","parentKey","isTemplate","activations","qProfile","x","BuiltInQualityProfileBadge","canActivate","InstanceMessage","message","fetchRuleDetails","actives","handleRuleChange","handleTagsChange","oldTags","catch","handleDelete","onDelete","allowCustomRules","canWrite","hideQualityProfiles","isCustom","isEditable","RuleDetailsMeta","onTagsChange","RuleDetailsDescription","handleNameClick","isLeftClickEvent","button","metaKey","altKey","ctrlKey","shiftKey","onOpen","SeverityIcon","isLoggedIn","canCopy","copy","allTags","sysTags","langName","TagsList","allowUpdate","SimilarRulesFilter","attachShortcuts","selectPreviousRule","selectNextRule","openSelectedRule","handleBack","detachShortcuts","getOpenRule","location","getFacetsToFetch","getFieldsToFetch","fields","getSearchParameters","s","stopLoading","fetchInitialData","all","fetchFirstRules","makeFetchRequest","rawActives","rawFacets","entries","parseActives","rawFacet","rawValue","parseFacets","openRule","usingPermalink","fetchMoreRules","nextPage","fetchFacet","getSelectedIndex","findIndex","getRulePath","pathname","router","closeRule","scrollToSelectedRule","smooth","element","document","querySelector","topOffset","bottomOffset","getRuleActivation","closeFacet","handleRuleOpen","handleReset","handleFilterChange","handleFacetToggle","willOpenProperty","newState","handleReload","pickRuleAround","handleRuleActivate","handleRuleDeactivate","newRule","searchQuery","isFiltered","renderBulkButton","currentUser","canUpdate","OWASP_TOP10","SANS_TOP25","nextProps","prevState","Suggestions","suggestions","defer","ScreenPositionHelper","top","A11ySkipTarget","anchor","weight","FiltersHeader","displayReset","onReset","SearchBox","maxLength","minLength","BackIcon","ListFooter","loadMore","ready","ReactSelectLib","ReactSelect","ReactCreatable","lib","default","Creatable","Async","renderInput","iconProps","innerRef","clearRenderer","ref","SimpleModal","stopSubmitting","handleCloseClick","handleSubmitClick","modalProps","onCloseClick","onFormSubmit","onSubmitClick","Consumer","addSuggestions","removeSuggestions","SuggestionsInner","defaultMessage","star","needReload","hasMore","reload","api","__esModule","i","exported","locals","___CSS_LOADER_API_IMPORT___","toNumber","ConfirmModal","handleSubmit","renderModalContent","confirmDisable","headerDescription","cancelButtonText","noBackdrop","arrayMap","baseMap","iteratee","addA11ySkipLink","removeA11ySkipLink","A11ySkipTargetInner","getLink","DetachIcon","searchQualityProfiles","parameters","getQualityProfile","compareToSonarWay","createQualityProfile","restoreQualityProfile","getProfileProjects","getProfileInheritance","qualityProfile","setDefaultProfile","renameProfile","copyProfile","fromKey","toName","deleteProfile","changeProfileParent","parentProfile","parentQualityProfile","getQualityProfileBackupUrl","queryParams","encodeURIComponent","getQualityProfileExporterUrl","exporterKey","getImporters","r","importers","getExporters","exporters","getProfileChangelog","since","page","compareProfiles","leftKey","rightKey","associateProject","dissociateProject","searchUsers","searchGroups","addUser","removeUser","addGroup","removeGroup","bulkActivateRules","bulkDeactivateRules","activateRule","deactivateRule","renderConfirmModal","modalHeaderDescription","confirmModalProps","ModalButton","ChevronDownIcon","addSideBarClass","toggleBodyClass","addWhitePageClass","removeSideBarClass","removeWhitePageClass","force","body","classList","toggle","documentElement","is_uri","is_iri","is_http_uri","is_http_iri","is_https_uri","is_https_iri","is_web_uri","is_web_iri","isUri","isHttpUri","isHttpsUri","isWebUri","splitUri","uri","match","test","splitted","authority","fragment","scheme","out","allowHttps","port","OpenCloseIcon","getPosition","containerPos","container","getBoundingClientRect","window","pageYOffset","left","pageXOffset","debouncedOnResize","forceUpdate","addEventListener","removeEventListener","helper","showClearButton","renderHelper","renderValueIndicator","renderValue","defaultProps","csvEscape","escaped","parse","getDaysInMonth","dirtyDate","dirtyAmount","amount","Number","desiredMonth","getMonth","dateWithDesiredMonth","Date","setFullYear","getFullYear","setHours","daysInMonth","setMonth","Math","min","getDate","handleShowMoreClick","showMore","handleShowLessClick","showLess","allShown","searching","searchResultsCounts","showFullList","onItemClick","stopSearching","search","loadCountsForSearchResults","maxResults","searchMaxResults","searchResults","searchPaging","searchMore","loadSearchResultCount","resultsToLoad","hideFullList","maxInitialItems","sortedItems","getSortedItems","limitedList","slice","selectedBelowLimit","mightHaveMoreResults","maxItems","formatFacetStat","loadingResults","showList","renderSearch","renderList","renderSearchResults","MultipleSelectionHint","inPlace","rel","target","highlightTerm","pos","indexOf","substring","substr","range","createRange","baseRange","isIterateeCall","toFinite","fromRight","start","end","step","nativeCeil","ceil","nativeMax","max","ChevronLeftIcon","navigator","userAgent","year","monthIndex","lastDayOfMonth","dirtyMonth","month","day","badge","CalendarIcon","Icon","lazyLoadComponent","focus","input","openCalendar","handleResetClick","closeCalendar","currentMonth","lastHovered","handleDayClick","modifiers","handleDayMouseEnter","handleCurrentMonthChange","handleCurrentYearChange","handlePreviousMonthClick","handleNextMonthClick","highlightFrom","highlightTo","minDate","after","maxDate","months","years","selectedDays","lastHoveredOrValue","highlighted","from","weekdaysLong","weekdaysShort","OutsideClickHandler","onClickOutside","InputWrapper","inputClassName","node","onFocus","readOnly","ChevronRightIcon","captionElement","NullComponent","disabledDays","before","firstDayOfWeek","navbarElement","onDayClick","onDayMouseEnter","formattedValue","getStandards","renderCWECategory","category","record","renderOwaspTop10Category","withPrefix","addPrefix","toUpperCase","renderSansTop25Category","renderSonarSourceSecurityCategory","prefix","dirtyYear","addMonths","leftLabel","metaModifierLabel","handleLanguageClick","handleTypeClick","handleSeverityClick","handleTagClick","dataset","loadStandards","handleOwaspTop10HeaderClick","handleSansTop25HeaderClick","handleSonarSourceSecurityHeaderClick","prop","handleOwaspTop10ItemClick","handleSansTop25ItemClick","handleSonarSourceSecurityItemClick","SONARSOURCE","handleCWESearch","loadCWESearchResultCount","categories","statsProp","valuesProp","renderFacetItemsList","renderTooltip","renderHint","renderSonarSourceSecurityList","renderSonarSourceSecurityHint","renderOwaspTop10List","renderOwaspTop10Hint","renderSansTop25List","renderSansTop25Hint","CWE","renderSubFacets","secondFontColor","RemoveExtendedDescriptionModal","onCancel","descriptionForm","removeDescriptionModal","handleCancelClick","handleSaveClick","updateDescription","handleRemoveDescriptionClick","handleCancelRemoving","handleConfirmRemoving","text","markdown_note","handleExtendDescriptionClick","mdNote","renderDescription","htmlNote","renderForm","hasDescription","isExternal","searchResult","onSelect","setTags","onUnselect","availableTags","TagsSelector","listSize","selectedTags","renderType","renderStatus","renderTags","closeOnClick","closeOnClickOutside","renderCreationDate","DateFormatter","createdAt","renderRepository","repo","renderTemplate","renderParentTemplate","renderRemediation","debtRemFnType","debtRemFnOffset","debtRemFnCoeff","effortToFixDescription","renderExternalBadge","engine","RegExp","displayedKey","startsWith","hasTypeData","renderKey","LinkIcon","hideSimilarRulesFilter"],"mappings":"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","file":"js/283.m.d434adbc.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { activateRule, Profile } from '../../../api/quality-profiles';\nimport { ResetButtonLink, SubmitButton } from '../../../components/controls/buttons';\nimport Modal from '../../../components/controls/Modal';\nimport Select from '../../../components/controls/Select';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { Alert } from '../../../components/ui/Alert';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport { translate } from '../../../helpers/l10n';\nimport { sanitizeString } from '../../../helpers/sanitize';\nimport { sortProfiles } from '../../quality-profiles/utils';\n\ninterface Props {\n  activation?: T.RuleActivation;\n  modalHeader: string;\n  onClose: () => void;\n  onDone: (severity: string) => Promise<void>;\n  profiles: Profile[];\n  rule: T.Rule | T.RuleDetails;\n}\n\ninterface State {\n  params: T.Dict<string>;\n  profile: string;\n  severity: string;\n  submitting: boolean;\n}\n\nexport default class ActivationFormModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const profilesWithDepth = this.getQualityProfilesWithDepth(props);\n    this.state = {\n      params: this.getParams(props),\n      profile: profilesWithDepth.length > 0 ? profilesWithDepth[0].key : '',\n      severity: props.activation ? props.activation.severity : props.rule.severity,\n      submitting: false\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  getParams = ({ activation, rule } = this.props) => {\n    const params: T.Dict<string> = {};\n    if (rule && rule.params) {\n      for (const param of rule.params) {\n        params[param.key] = param.defaultValue || '';\n      }\n      if (activation && activation.params) {\n        for (const param of activation.params) {\n          params[param.key] = param.value;\n        }\n      }\n    }\n    return params;\n  };\n\n  // Choose QP which a user can administrate, which are the same language and which are not built-in\n  getQualityProfilesWithDepth = ({ profiles } = this.props) => {\n    return sortProfiles(\n      profiles.filter(\n        profile =>\n          !profile.isBuiltIn &&\n          profile.actions &&\n          profile.actions.edit &&\n          profile.language === this.props.rule.lang\n      )\n    ).map(profile => ({\n      ...profile,\n      // Decrease depth by 1, so the top level starts at 0\n      depth: profile.depth - 1\n    }));\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    const data = {\n      key: this.state.profile,\n      params: this.state.params,\n      rule: this.props.rule.key,\n      severity: this.state.severity\n    };\n    activateRule(data)\n      .then(() => this.props.onDone(data.severity))\n      .then(\n        () => {\n          if (this.mounted) {\n            this.setState({ submitting: false });\n            this.props.onClose();\n          }\n        },\n        () => {\n          if (this.mounted) {\n            this.setState({ submitting: false });\n          }\n        }\n      );\n  };\n\n  handleParameterChange = (event: React.SyntheticEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = event.currentTarget;\n    this.setState((state: State) => ({ params: { ...state.params, [name]: value } }));\n  };\n\n  handleProfileChange = ({ value }: { value: string }) => {\n    this.setState({ profile: value });\n  };\n\n  handleSeverityChange = ({ value }: { value: string }) => {\n    this.setState({ severity: value });\n  };\n\n  renderSeverityOption = ({ value }: { value: string }) => {\n    return <SeverityHelper severity={value} />;\n  };\n\n  render() {\n    const { activation, rule } = this.props;\n    const { profile, severity, submitting } = this.state;\n    const { params = [] } = rule;\n    const profilesWithDepth = this.getQualityProfilesWithDepth();\n    const isCustomRule = !!(rule as T.RuleDetails).templateKey;\n    const activeInAllProfiles = profilesWithDepth.length <= 0;\n    const isUpdateMode = !!activation;\n\n    return (\n      <Modal contentLabel={this.props.modalHeader} onRequestClose={this.props.onClose} size=\"small\">\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-head\">\n            <h2>{this.props.modalHeader}</h2>\n          </div>\n\n          <div className={classNames('modal-body', { 'modal-container': params.length > 0 })}>\n            {!isUpdateMode && activeInAllProfiles && (\n              <Alert variant=\"info\">{translate('coding_rules.active_in_all_profiles')}</Alert>\n            )}\n\n            <div className=\"modal-field\">\n              <label>{translate('coding_rules.quality_profile')}</label>\n              <Select\n                className=\"js-profile\"\n                clearable={false}\n                disabled={submitting || profilesWithDepth.length === 1}\n                onChange={this.handleProfileChange}\n                options={profilesWithDepth.map(profile => ({\n                  label: '   '.repeat(profile.depth) + profile.name,\n                  value: profile.key\n                }))}\n                value={profile}\n              />\n            </div>\n            <div className=\"modal-field\">\n              <label>{translate('severity')}</label>\n              <Select\n                className=\"js-severity\"\n                clearable={false}\n                disabled={submitting}\n                onChange={this.handleSeverityChange}\n                optionRenderer={this.renderSeverityOption}\n                options={SEVERITIES.map(severity => ({\n                  label: translate('severity', severity),\n                  value: severity\n                }))}\n                searchable={false}\n                value={severity}\n                valueRenderer={this.renderSeverityOption}\n              />\n            </div>\n            {isCustomRule ? (\n              <div className=\"modal-field\">\n                <p className=\"note\">{translate('coding_rules.custom_rule.activation_notice')}</p>\n              </div>\n            ) : (\n              params.map(param => (\n                <div className=\"modal-field\" key={param.key}>\n                  <label title={param.key}>{param.key}</label>\n                  {param.type === 'TEXT' ? (\n                    <textarea\n                      disabled={submitting}\n                      name={param.key}\n                      onChange={this.handleParameterChange}\n                      placeholder={param.defaultValue}\n                      rows={3}\n                      value={this.state.params[param.key] || ''}\n                    />\n                  ) : (\n                    <input\n                      disabled={submitting}\n                      name={param.key}\n                      onChange={this.handleParameterChange}\n                      placeholder={param.defaultValue}\n                      type=\"text\"\n                      value={this.state.params[param.key] || ''}\n                    />\n                  )}\n                  {param.htmlDesc !== undefined && (\n                    <div\n                      className=\"note\"\n                      // eslint-disable-next-line react/no-danger\n                      dangerouslySetInnerHTML={{ __html: sanitizeString(param.htmlDesc) }}\n                    />\n                  )}\n                </div>\n              ))\n            )}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={submitting || activeInAllProfiles}>\n              {isUpdateMode ? translate('save') : translate('coding_rules.activate')}\n            </SubmitButton>\n            <ResetButtonLink disabled={submitting} onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","var arrayFilter = require('./_arrayFilter'),\n    baseFilter = require('./_baseFilter'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection`, returning an array of all elements\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * **Note:** Unlike `_.remove`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n * @see _.reject\n * @example\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': true },\n *   { 'user': 'fred',   'age': 40, 'active': false }\n * ];\n *\n * _.filter(users, function(o) { return !o.active; });\n * // => objects for ['fred']\n *\n * // The `_.matches` iteratee shorthand.\n * _.filter(users, { 'age': 36, 'active': true });\n * // => objects for ['barney']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.filter(users, ['active', false]);\n * // => objects for ['fred']\n *\n * // The `_.property` iteratee shorthand.\n * _.filter(users, 'active');\n * // => objects for ['barney']\n *\n * // Combining several predicates using `_.overEvery` or `_.overSome`.\n * _.filter(users, _.overSome([{ 'age': 36 }, ['age', 40]]));\n * // => objects for ['fred', 'barney']\n */\nfunction filter(collection, predicate) {\n  var func = isArray(collection) ? arrayFilter : baseFilter;\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nmodule.exports = filter;\n","var baseEach = require('./_baseEach');\n\n/**\n * The base implementation of `_.filter` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction baseFilter(collection, predicate) {\n  var result = [];\n  baseEach(collection, function(value, index, collection) {\n    if (predicate(value, index, collection)) {\n      result.push(value);\n    }\n  });\n  return result;\n}\n\nmodule.exports = baseFilter;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { bulkActivateRules, bulkDeactivateRules, Profile } from '../../../api/quality-profiles';\nimport { ResetButtonLink, SubmitButton } from '../../../components/controls/buttons';\nimport Modal from '../../../components/controls/Modal';\nimport Select from '../../../components/controls/Select';\nimport { Alert } from '../../../components/ui/Alert';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { Query, serializeQuery } from '../query';\n\ninterface Props {\n  action: string;\n  languages: T.Languages;\n  onClose: () => void;\n  profile?: Profile;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  total: number;\n}\n\ninterface ActivationResult {\n  failed: number;\n  profile: string;\n  succeeded: number;\n}\n\ninterface State {\n  finished: boolean;\n  results: ActivationResult[];\n  selectedProfiles: any[];\n  submitting: boolean;\n}\n\nexport default class BulkChangeModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    // if there is only one possible option for profile, select it immediately\n    const selectedProfiles = [];\n    const availableProfiles = this.getAvailableQualityProfiles(props);\n    if (availableProfiles.length === 1) {\n      selectedProfiles.push(availableProfiles[0].key);\n    }\n\n    this.state = { finished: false, results: [], selectedProfiles, submitting: false };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleProfileSelect = (options: { value: string }[]) => {\n    const selectedProfiles = options.map(option => option.value);\n    this.setState({ selectedProfiles });\n  };\n\n  getAvailableQualityProfiles = ({ query, referencedProfiles } = this.props) => {\n    let profiles = Object.values(referencedProfiles);\n    if (query.languages.length > 0) {\n      profiles = profiles.filter(profile => query.languages.includes(profile.language));\n    }\n    return profiles\n      .filter(profile => profile.actions && profile.actions.edit)\n      .filter(profile => !profile.isBuiltIn);\n  };\n\n  processResponse = (profile: string, response: any) => {\n    if (this.mounted) {\n      const result: ActivationResult = {\n        failed: response.failed || 0,\n        profile,\n        succeeded: response.succeeded || 0\n      };\n      this.setState(state => ({ results: [...state.results, result] }));\n    }\n  };\n\n  sendRequests = () => {\n    let looper = Promise.resolve();\n\n    // serialize the query, but delete the `profile`\n    const data = serializeQuery(this.props.query);\n    delete data.profile;\n\n    const method = this.props.action === 'activate' ? bulkActivateRules : bulkDeactivateRules;\n\n    // if a profile is selected in the facet, pick it\n    // otherwise take all profiles selected in the dropdown\n    const profiles: string[] = this.props.profile\n      ? [this.props.profile.key]\n      : this.state.selectedProfiles;\n\n    for (const profile of profiles) {\n      looper = looper\n        .then(() =>\n          method({\n            ...data,\n            targetKey: profile\n          })\n        )\n        .then(response => this.processResponse(profile, response));\n    }\n    return looper;\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    this.sendRequests().then(\n      () => {\n        if (this.mounted) {\n          this.setState({ finished: true, submitting: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n        }\n      }\n    );\n  };\n\n  renderResult = (result: ActivationResult) => {\n    const { profile: profileKey } = result;\n    const profile = this.props.referencedProfiles[profileKey];\n    if (!profile) {\n      return null;\n    }\n    const { languages } = this.props;\n    const language = languages[profile.language]\n      ? languages[profile.language].name\n      : profile.language;\n    return (\n      <Alert key={result.profile} variant={result.failed === 0 ? 'success' : 'warning'}>\n        {result.failed\n          ? translateWithParameters(\n              'coding_rules.bulk_change.warning',\n              profile.name,\n              language,\n              result.succeeded,\n              result.failed\n            )\n          : translateWithParameters(\n              'coding_rules.bulk_change.success',\n              profile.name,\n              language,\n              result.succeeded\n            )}\n      </Alert>\n    );\n  };\n\n  renderProfileSelect = () => {\n    const profiles = this.getAvailableQualityProfiles();\n    const options = profiles.map(profile => ({\n      label: `${profile.name} - ${profile.languageName}`,\n      value: profile.key\n    }));\n    return (\n      <Select\n        multi={true}\n        onChange={this.handleProfileSelect}\n        options={options}\n        value={this.state.selectedProfiles}\n      />\n    );\n  };\n\n  render() {\n    const { action, profile, total } = this.props;\n    const header =\n      action === 'activate'\n        ? `${translate('coding_rules.activate_in_quality_profile')} (${formatMeasure(\n            total,\n            'INT'\n          )} ${translate('coding_rules._rules')})`\n        : `${translate('coding_rules.deactivate_in_quality_profile')} (${formatMeasure(\n            total,\n            'INT'\n          )} ${translate('coding_rules._rules')})`;\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose} size=\"small\">\n        <form onSubmit={this.handleFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            {this.state.results.map(this.renderResult)}\n\n            {!this.state.finished && !this.state.submitting && (\n              <div className=\"modal-field\">\n                <h3>\n                  <label htmlFor=\"coding-rules-bulk-change-profile\">\n                    {action === 'activate'\n                      ? translate('coding_rules.activate_in')\n                      : translate('coding_rules.deactivate_in')}\n                  </label>\n                </h3>\n                {profile ? (\n                  <span>\n                    {profile.name}\n                    {'  '}\n                    {translate('are_you_sure')}\n                  </span>\n                ) : (\n                  this.renderProfileSelect()\n                )}\n              </div>\n            )}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {this.state.submitting && <i className=\"spinner spacer-right\" />}\n            {!this.state.finished && (\n              <SubmitButton disabled={this.state.submitting} id=\"coding-rules-submit-bulk-change\">\n                {translate('apply')}\n              </SubmitButton>\n            )}\n            <ResetButtonLink onClick={this.props.onClose}>\n              {this.state.finished ? translate('close') : translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Profile } from '../../../api/quality-profiles';\nimport { Button } from '../../../components/controls/buttons';\nimport Dropdown from '../../../components/controls/Dropdown';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { PopupPlacement } from '../../../components/ui/popups';\nimport { translate } from '../../../helpers/l10n';\nimport { Query } from '../query';\nimport BulkChangeModal from './BulkChangeModal';\n\ninterface Props {\n  languages: T.Languages;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  total: number;\n}\n\ninterface State {\n  action?: string;\n  modal: boolean;\n  profile?: Profile;\n}\n\nexport default class BulkChange extends React.PureComponent<Props, State> {\n  state: State = { modal: false };\n\n  getSelectedProfile = () => {\n    const { profile } = this.props.query;\n    return (profile && this.props.referencedProfiles[profile]) || undefined;\n  };\n\n  closeModal = () => this.setState({ action: undefined, modal: false, profile: undefined });\n\n  handleActivateClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'activate', modal: true, profile: undefined });\n  };\n\n  handleActivateInProfileClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'activate', modal: true, profile: this.getSelectedProfile() });\n  };\n\n  handleDeactivateClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'deactivate', modal: true, profile: undefined });\n  };\n\n  handleDeactivateInProfileClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'deactivate', modal: true, profile: this.getSelectedProfile() });\n  };\n\n  render() {\n    // show \"Bulk Change\" button only if user is admin of at least one QP\n    const canBulkChange = Object.values(this.props.referencedProfiles).some(profile =>\n      Boolean(profile.actions && profile.actions.edit)\n    );\n    if (!canBulkChange) {\n      return (\n        <Tooltip overlay={translate('coding_rules.can_not_bulk_change')}>\n          <Button className=\"js-bulk-change\" disabled={true}>\n            {translate('bulk_change')}\n          </Button>\n        </Tooltip>\n      );\n    }\n\n    const { activation } = this.props.query;\n    const profile = this.getSelectedProfile();\n    const canChangeProfile = Boolean(\n      profile && !profile.isBuiltIn && profile.actions && profile.actions.edit\n    );\n    const allowActivateOnProfile = canChangeProfile && activation === false;\n    const allowDeactivateOnProfile = canChangeProfile && activation === true;\n\n    return (\n      <>\n        <Dropdown\n          overlayPlacement={PopupPlacement.BottomLeft}\n          overlay={\n            <ul className=\"menu\">\n              <li>\n                <a href=\"#\" onClick={this.handleActivateClick}>\n                  {translate('coding_rules.activate_in')}\n                </a>\n              </li>\n              {allowActivateOnProfile && profile && (\n                <li>\n                  <a href=\"#\" onClick={this.handleActivateInProfileClick}>\n                    {translate('coding_rules.activate_in')} <strong>{profile.name}</strong>\n                  </a>\n                </li>\n              )}\n              <li>\n                <a href=\"#\" onClick={this.handleDeactivateClick}>\n                  {translate('coding_rules.deactivate_in')}\n                </a>\n              </li>\n              {allowDeactivateOnProfile && profile && (\n                <li>\n                  <a href=\"#\" onClick={this.handleDeactivateInProfileClick}>\n                    {translate('coding_rules.deactivate_in')} <strong>{profile.name}</strong>\n                  </a>\n                </li>\n              )}\n            </ul>\n          }>\n          <Button className=\"js-bulk-change\">{translate('bulk_change')}</Button>\n        </Dropdown>\n        {this.state.modal && this.state.action && (\n          <BulkChangeModal\n            action={this.state.action}\n            languages={this.props.languages}\n            onClose={this.closeModal}\n            profile={this.state.profile}\n            query={this.props.query}\n            referencedProfiles={this.props.referencedProfiles}\n            total={this.props.total}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { orderBy, sortBy, without } from 'lodash';\nimport * as React from 'react';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { translate } from '../../../helpers/l10n';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { FacetKey } from '../query';\n\nexport interface BasicProps {\n  onChange: (changes: T.Dict<string | string[] | undefined>) => void;\n  onToggle: (facet: FacetKey) => void;\n  open: boolean;\n  stats?: T.Dict<number>;\n  values: string[];\n}\n\ninterface Props extends BasicProps {\n  children?: React.ReactNode;\n  disabled?: boolean;\n  disabledHelper?: string;\n  halfWidth?: boolean;\n  options?: string[];\n  property: FacetKey;\n  renderFooter?: () => React.ReactNode;\n  renderName?: (value: string) => React.ReactNode;\n  renderTextName?: (value: string) => string;\n  singleSelection?: boolean;\n}\n\nexport default class Facet extends React.PureComponent<Props> {\n  handleItemClick = (itemValue: string, multiple: boolean) => {\n    const { values } = this.props;\n    let newValue;\n    if (this.props.singleSelection) {\n      const value = values.length ? values[0] : undefined;\n      newValue = itemValue === value ? undefined : itemValue;\n    } else if (multiple) {\n      newValue = orderBy(\n        values.includes(itemValue) ? without(values, itemValue) : [...values, itemValue]\n      );\n    } else {\n      newValue = values.includes(itemValue) && values.length < 2 ? [] : [itemValue];\n    }\n    this.props.onChange({ [this.props.property]: newValue });\n  };\n\n  handleHeaderClick = () => this.props.onToggle(this.props.property);\n\n  handleClear = () => this.props.onChange({ [this.props.property]: [] });\n\n  getStat = (value: string) => this.props.stats && this.props.stats[value];\n\n  renderItem = (value: string) => {\n    const active = this.props.values.includes(value);\n    const stat = this.getStat(value);\n    const { renderName = defaultRenderName, renderTextName = defaultRenderName } = this.props;\n\n    return (\n      <FacetItem\n        active={active}\n        halfWidth={this.props.halfWidth}\n        key={value}\n        name={renderName(value)}\n        onClick={this.handleItemClick}\n        stat={stat && formatMeasure(stat, 'SHORT_INT')}\n        tooltip={renderTextName(value)}\n        value={value}\n      />\n    );\n  };\n\n  render() {\n    const { disabled, renderTextName = defaultRenderName, stats } = this.props;\n    const values = this.props.values.map(renderTextName);\n    const items =\n      this.props.options ||\n      (stats &&\n        sortBy(\n          Object.keys(stats),\n          key => -stats[key],\n          key => renderTextName(key).toLowerCase()\n        ));\n\n    return (\n      <FacetBox\n        className={classNames({ 'search-navigator-facet-box-forbidden': disabled })}\n        property={this.props.property}>\n        <FacetHeader\n          name={\n            <Tooltip overlay={disabled ? this.props.disabledHelper : undefined}>\n              <span>{translate('coding_rules.facet', this.props.property)}</span>\n            </Tooltip>\n          }\n          onClear={this.handleClear}\n          onClick={disabled ? undefined : this.handleHeaderClick}\n          open={this.props.open && !disabled}\n          values={values}>\n          {this.props.children}\n        </FacetHeader>\n\n        {this.props.open && items !== undefined && (\n          <FacetItemsList>{items.map(this.renderItem)}</FacetItemsList>\n        )}\n\n        {this.props.open && this.props.renderFooter !== undefined && this.props.renderFooter()}\n      </FacetBox>\n    );\n  }\n}\n\nfunction defaultRenderName(value: string) {\n  return value;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport { translate } from '../../../helpers/l10n';\nimport Facet, { BasicProps } from './Facet';\n\ninterface Props extends BasicProps {\n  disabled: boolean;\n}\n\nexport default class ActivationSeverityFacet extends React.PureComponent<Props> {\n  renderName = (severity: string) => <SeverityHelper severity={severity} />;\n\n  renderTextName = (severity: string) => translate('severity', severity);\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.active_severity.inactive')}\n        halfWidth={true}\n        options={SEVERITIES}\n        property=\"activationSeverities\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { InjectedIntlProps, injectIntl } from 'react-intl';\nimport DateInput from '../../../components/controls/DateInput';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport { longFormatterOption } from '../../../components/intl/DateFormatter';\nimport { translate } from '../../../helpers/l10n';\nimport { Query } from '../query';\n\ninterface Props {\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: keyof Query) => void;\n  open: boolean;\n  value?: Date;\n}\n\nclass AvailableSinceFacet extends React.PureComponent<Props & InjectedIntlProps> {\n  handleHeaderClick = () => {\n    this.props.onToggle('availableSince');\n  };\n\n  handleClear = () => {\n    this.props.onChange({ availableSince: undefined });\n  };\n\n  handlePeriodChange = (date: Date | undefined) => {\n    this.props.onChange({ availableSince: date });\n  };\n\n  getValues = () =>\n    this.props.value\n      ? [this.props.intl.formatDate(this.props.value, longFormatterOption)]\n      : undefined;\n\n  render() {\n    return (\n      <FacetBox property=\"availableSince\">\n        <FacetHeader\n          name={translate('coding_rules.facet.available_since')}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getValues()}\n        />\n\n        {this.props.open && (\n          <DateInput\n            name=\"available-since\"\n            onChange={this.handlePeriodChange}\n            placeholder={translate('date')}\n            value={this.props.value}\n          />\n        )}\n      </FacetBox>\n    );\n  }\n}\n\nexport default injectIntl(AvailableSinceFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport { translate } from '../../../helpers/l10n';\nimport Facet, { BasicProps } from './Facet';\n\nexport default class DefaultSeverityFacet extends React.PureComponent<BasicProps> {\n  renderName = (severity: string) => <SeverityHelper severity={severity} />;\n\n  renderTextName = (severity: string) => translate('severity', severity);\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        halfWidth={true}\n        options={SEVERITIES}\n        property=\"severities\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport Facet, { BasicProps } from './Facet';\n\ninterface Props extends T.Omit<BasicProps, 'values'> {\n  disabled: boolean;\n  value: T.RuleInheritance | undefined;\n}\n\nexport default class InheritanceFacet extends React.PureComponent<Props> {\n  renderName = (value: T.RuleInheritance) =>\n    translate('coding_rules.filters.inheritance', value.toLowerCase());\n\n  render() {\n    const { value, ...props } = this.props;\n\n    return (\n      <Facet\n        {...props}\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.inheritance.inactive')}\n        options={['NONE', 'INHERITED', 'OVERRIDES']}\n        property=\"inheritance\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n        singleSelection={true}\n        values={value ? [value] : []}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniqBy } from 'lodash';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport ListStyleFacet from '../../../components/facet/ListStyleFacet';\nimport { translate } from '../../../helpers/l10n';\nimport { highlightTerm } from '../../../helpers/search';\nimport { getLanguages, Store } from '../../../store/rootReducer';\nimport { BasicProps } from './Facet';\n\ninterface InstalledLanguage {\n  key: string;\n  name: string;\n}\n\ninterface Props extends BasicProps {\n  disabled?: boolean;\n  installedLanguages: InstalledLanguage[];\n}\n\nclass LanguageFacet extends React.PureComponent<Props> {\n  getLanguageName = (languageKey: string) => {\n    const language = this.props.installedLanguages.find(l => l.key === languageKey);\n    return language ? language.name : languageKey;\n  };\n\n  handleSearch = (query: string) => {\n    const options = this.getAllPossibleOptions();\n    const results = options.filter(language =>\n      language.name.toLowerCase().includes(query.toLowerCase())\n    );\n    const paging = { pageIndex: 1, pageSize: results.length, total: results.length };\n    return Promise.resolve({ paging, results });\n  };\n\n  getAllPossibleOptions = () => {\n    const { installedLanguages, stats = {} } = this.props;\n\n    // add any language that presents in the facet, but might not be installed\n    // for such language we don't know their display name, so let's just use their key\n    // and make sure we reference each language only once\n    return uniqBy(\n      [...installedLanguages, ...Object.keys(stats).map(key => ({ key, name: key }))],\n      language => language.key\n    );\n  };\n\n  renderSearchResult = ({ name }: InstalledLanguage, term: string) => {\n    return highlightTerm(name, term);\n  };\n\n  render() {\n    return (\n      <ListStyleFacet<InstalledLanguage>\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.language.inactive')}\n        facetHeader={translate('coding_rules.facet.languages')}\n        fetching={false}\n        getFacetItemText={this.getLanguageName}\n        getSearchResultKey={language => language.key}\n        getSearchResultText={language => language.name}\n        minSearchLength={1}\n        onChange={this.props.onChange}\n        onSearch={this.handleSearch}\n        onToggle={this.props.onToggle}\n        open={this.props.open}\n        property=\"languages\"\n        renderFacetItem={this.getLanguageName}\n        renderSearchResult={this.renderSearchResult}\n        searchPlaceholder={translate('search.search_for_languages')}\n        stats={this.props.stats}\n        values={this.props.values}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store) => ({\n  installedLanguages: Object.values(getLanguages(state))\n});\n\nexport default connect(mapStateToProps)(LanguageFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Profile } from '../../../api/quality-profiles';\nimport DocumentationTooltip from '../../../components/common/DocumentationTooltip';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { translate } from '../../../helpers/l10n';\nimport { FacetKey, Query } from '../query';\n\ninterface Props {\n  activation: boolean | undefined;\n  compareToProfile: string | undefined;\n  languages: string[];\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (facet: FacetKey) => void;\n  open: boolean;\n  referencedProfiles: T.Dict<Profile>;\n  value: string | undefined;\n}\n\nexport default class ProfileFacet extends React.PureComponent<Props> {\n  handleItemClick = (selected: string) => {\n    const newValue = this.props.value === selected ? '' : selected;\n    this.props.onChange({\n      activation: this.props.activation === undefined ? true : this.props.activation,\n      compareToProfile: undefined,\n      profile: newValue\n    });\n  };\n\n  handleHeaderClick = () => this.props.onToggle('profile');\n\n  handleClear = () =>\n    this.props.onChange({\n      activation: undefined,\n      activationSeverities: [],\n      compareToProfile: undefined,\n      inheritance: undefined,\n      profile: undefined\n    });\n\n  handleActiveClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    this.stopPropagation(event);\n    this.props.onChange({ activation: true, compareToProfile: undefined });\n  };\n\n  handleInactiveClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    this.stopPropagation(event);\n    this.props.onChange({ activation: false, compareToProfile: undefined });\n  };\n\n  stopPropagation = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n  };\n\n  getTextValue = () => {\n    const { referencedProfiles, value } = this.props;\n    if (value) {\n      const profile = referencedProfiles[value];\n      const name = (profile && `${profile.name} ${profile.languageName}`) || value;\n      return [name];\n    } else {\n      return [];\n    }\n  };\n\n  getTooltip = (profile: Profile) => {\n    const base = `${profile.name} ${profile.languageName}`;\n    return profile.isBuiltIn ? `${base} (${translate('quality_profiles.built_in')})` : base;\n  };\n\n  renderName = (profile: Profile) => (\n    <>\n      {profile.name}\n      <span className=\"note little-spacer-left\">\n        {profile.languageName}\n        {profile.isBuiltIn && ` (${translate('quality_profiles.built_in')})`}\n      </span>\n    </>\n  );\n\n  renderActivation = (profile: Profile) => {\n    const isCompare = profile.key === this.props.compareToProfile;\n    const activation = isCompare ? true : this.props.activation;\n    return (\n      <>\n        <span\n          aria-checked={activation}\n          className={classNames('js-active', 'facet-toggle', 'facet-toggle-green', {\n            'facet-toggle-active': activation\n          })}\n          onClick={isCompare ? this.stopPropagation : this.handleActiveClick}\n          role=\"radio\"\n          tabIndex={-1}>\n          active\n        </span>\n        <span\n          aria-checked={!activation}\n          className={classNames('js-inactive', 'facet-toggle', 'facet-toggle-red', {\n            'facet-toggle-active': !activation\n          })}\n          onClick={isCompare ? this.stopPropagation : this.handleInactiveClick}\n          role=\"radio\"\n          tabIndex={-1}>\n          inactive\n        </span>\n      </>\n    );\n  };\n\n  renderItem = (profile: Profile) => {\n    const active = [this.props.value, this.props.compareToProfile].includes(profile.key);\n\n    return (\n      <FacetItem\n        active={active}\n        className={this.props.compareToProfile === profile.key ? 'compare' : undefined}\n        key={profile.key}\n        name={this.renderName(profile)}\n        onClick={this.handleItemClick}\n        stat={this.renderActivation(profile)}\n        tooltip={this.getTooltip(profile)}\n        value={profile.key}\n      />\n    );\n  };\n\n  render() {\n    const { languages, referencedProfiles } = this.props;\n    let profiles = Object.values(referencedProfiles);\n    if (languages.length > 0) {\n      profiles = profiles.filter(profile => languages.includes(profile.language));\n    }\n    profiles = sortBy(\n      profiles,\n      profile => profile.name.toLowerCase(),\n      profile => profile.languageName\n    );\n\n    return (\n      <FacetBox property=\"profile\">\n        <FacetHeader\n          name={translate('coding_rules.facet.qprofile')}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getTextValue()}>\n          <DocumentationTooltip\n            className=\"spacer-left\"\n            content={translate('coding_rules.facet.qprofile.help')}\n            links={[\n              {\n                href: '/documentation/instance-administration/quality-profiles/',\n                label: translate('coding_rules.facet.qprofile.link')\n              }\n            ]}\n          />\n        </FacetHeader>\n\n        {this.props.open && <FacetItemsList>{profiles.map(this.renderItem)}</FacetItemsList>}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { getLanguages, Store } from '../../../store/rootReducer';\nimport Facet, { BasicProps } from './Facet';\n\ninterface StateProps {\n  referencedLanguages: T.Dict<{ key: string; name: string }>;\n}\n\ninterface Props extends BasicProps, StateProps {\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n}\n\nclass RepositoryFacet extends React.PureComponent<Props> {\n  getLanguageName = (languageKey: string) => {\n    const { referencedLanguages } = this.props;\n    const language = referencedLanguages[languageKey];\n    return (language && language.name) || languageKey;\n  };\n\n  renderName = (repositoryKey: string) => {\n    const { referencedRepositories } = this.props;\n    const repository = referencedRepositories[repositoryKey];\n    return repository ? (\n      <>\n        {repository.name}\n        <span className=\"note little-spacer-left\">{this.getLanguageName(repository.language)}</span>\n      </>\n    ) : (\n      repositoryKey\n    );\n  };\n\n  renderTextName = (repositoryKey: string) => {\n    const { referencedRepositories } = this.props;\n    const repository = referencedRepositories[repositoryKey];\n    return (repository && repository.name) || repositoryKey;\n  };\n\n  render() {\n    const { referencedLanguages, referencedRepositories, ...facetProps } = this.props;\n    return (\n      <Facet\n        {...facetProps}\n        property=\"repositories\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  referencedLanguages: getLanguages(state)\n});\n\nexport default connect(mapStateToProps)(RepositoryFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { RULE_STATUSES } from '../../../helpers/constants';\nimport { translate } from '../../../helpers/l10n';\nimport Facet, { BasicProps } from './Facet';\n\nexport default class StatusFacet extends React.PureComponent<BasicProps> {\n  renderName = (status: string) => translate('rules.status', status.toLowerCase());\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        options={RULE_STATUSES}\n        property=\"statuses\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\nimport * as React from 'react';\nimport { getRuleTags } from '../../../api/rules';\nimport { colors } from '../../../app/theme';\nimport ListStyleFacet from '../../../components/facet/ListStyleFacet';\nimport TagsIcon from '../../../components/icons/TagsIcon';\nimport { translate } from '../../../helpers/l10n';\nimport { highlightTerm } from '../../../helpers/search';\nimport { BasicProps } from './Facet';\n\nexport default class TagFacet extends React.PureComponent<BasicProps> {\n  handleSearch = (query: string) => {\n    return getRuleTags({ ps: 50, q: query }).then(tags => ({\n      paging: { pageIndex: 1, pageSize: tags.length, total: tags.length },\n      results: tags\n    }));\n  };\n\n  handleSelect = (option: { value: string }) => {\n    this.props.onChange({ tags: uniq([...this.props.values, option.value]) });\n  };\n\n  getTagName = (tag: string) => {\n    return tag;\n  };\n\n  renderTag = (tag: string) => (\n    <>\n      <TagsIcon className=\"little-spacer-right\" fill={colors.gray60} />\n      {tag}\n    </>\n  );\n\n  renderSearchResult = (tag: string, term: string) => (\n    <>\n      <TagsIcon className=\"little-spacer-right\" fill={colors.gray60} />\n      {highlightTerm(tag, term)}\n    </>\n  );\n\n  render() {\n    return (\n      <ListStyleFacet<string>\n        facetHeader={translate('coding_rules.facet.tags')}\n        fetching={false}\n        getFacetItemText={this.getTagName}\n        getSearchResultKey={tag => tag}\n        getSearchResultText={tag => tag}\n        onChange={this.props.onChange}\n        onSearch={this.handleSearch}\n        onToggle={this.props.onToggle}\n        open={this.props.open}\n        property=\"tags\"\n        renderFacetItem={this.renderTag}\n        renderSearchResult={this.renderSearchResult}\n        searchPlaceholder={translate('search.search_for_tags')}\n        stats={this.props.stats}\n        values={this.props.values}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from '../../../components/controls/HelpTooltip';\nimport { translate } from '../../../helpers/l10n';\nimport Facet, { BasicProps } from './Facet';\n\ninterface Props extends T.Omit<BasicProps, 'onChange' | 'values'> {\n  onChange: (changes: { template: boolean | undefined }) => void;\n  value: boolean | undefined;\n}\n\nexport default class TemplateFacet extends React.PureComponent<Props> {\n  handleChange = (changes: { template: string | any[] }) => {\n    const template =\n      // empty array is returned when a user cleared the facet\n      // otherwise `\"true\"`, `\"false\"` or `undefined` can be returned\n      Array.isArray(changes.template) || changes.template === undefined\n        ? undefined\n        : changes.template === 'true';\n    this.props.onChange({ ...changes, template });\n  };\n\n  renderName = (template: string) =>\n    template === 'true'\n      ? translate('coding_rules.filters.template.is_template')\n      : translate('coding_rules.filters.template.is_not_template');\n\n  render() {\n    const { onChange, value, ...props } = this.props;\n\n    return (\n      <Facet\n        {...props}\n        onChange={this.handleChange}\n        options={['true', 'false']}\n        property=\"template\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n        singleSelection={true}\n        values={value !== undefined ? [String(value)] : []}>\n        <HelpTooltip\n          className=\"spacer-left\"\n          overlay={\n            <div className=\"big-padded-top big-padded-bottom\">\n              {translate('coding_rules.rule_template.help')}\n            </div>\n          }\n        />\n      </Facet>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueTypeIcon from '../../../components/icons/IssueTypeIcon';\nimport { translate } from '../../../helpers/l10n';\nimport Facet, { BasicProps } from './Facet';\n\nexport default class TypeFacet extends React.PureComponent<BasicProps> {\n  renderName = (type: string) => (\n    <>\n      <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n      {translate('issue.type', type)}\n    </>\n  );\n\n  renderTextName = (type: string) => translate('issue.type', type);\n\n  render() {\n    const options = ['BUG', 'VULNERABILITY', 'CODE_SMELL', 'SECURITY_HOTSPOT'];\n\n    return (\n      <Facet\n        {...this.props}\n        options={options}\n        property=\"types\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Profile } from '../../../api/quality-profiles';\nimport StandardFacet from '../../issues/sidebar/StandardFacet';\nimport { Facets, OpenFacets, Query } from '../query';\nimport ActivationSeverityFacet from './ActivationSeverityFacet';\nimport AvailableSinceFacet from './AvailableSinceFacet';\nimport DefaultSeverityFacet from './DefaultSeverityFacet';\nimport InheritanceFacet from './InheritanceFacet';\nimport LanguageFacet from './LanguageFacet';\nimport ProfileFacet from './ProfileFacet';\nimport RepositoryFacet from './RepositoryFacet';\nimport StatusFacet from './StatusFacet';\nimport TagFacet from './TagFacet';\nimport TemplateFacet from './TemplateFacet';\nimport TypeFacet from './TypeFacet';\n\nexport interface FacetsListProps {\n  facets?: Facets;\n  hideProfileFacet?: boolean;\n  onFacetToggle: (facet: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  openFacets: OpenFacets;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  selectedProfile?: Profile;\n}\n\nexport default function FacetsList(props: FacetsListProps) {\n  const languageDisabled = !props.hideProfileFacet && props.query.profile !== undefined;\n\n  const inheritanceDisabled =\n    props.query.compareToProfile !== undefined ||\n    props.selectedProfile === undefined ||\n    !props.selectedProfile.isInherited;\n\n  const activationSeverityDisabled =\n    props.query.compareToProfile !== undefined ||\n    props.selectedProfile === undefined ||\n    !props.query.activation;\n  return (\n    <>\n      <LanguageFacet\n        disabled={languageDisabled}\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.languages}\n        stats={props.facets && props.facets.languages}\n        values={props.query.languages}\n      />\n      <TypeFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.types}\n        stats={props.facets && props.facets.types}\n        values={props.query.types}\n      />\n      <TagFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.tags}\n        stats={props.facets && props.facets.tags}\n        values={props.query.tags}\n      />\n      <RepositoryFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.repositories}\n        referencedRepositories={props.referencedRepositories}\n        stats={props.facets && props.facets.repositories}\n        values={props.query.repositories}\n      />\n      <DefaultSeverityFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.severities}\n        stats={props.facets && props.facets.severities}\n        values={props.query.severities}\n      />\n      <StatusFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.statuses}\n        stats={props.facets && props.facets.statuses}\n        values={props.query.statuses}\n      />\n      <StandardFacet\n        cwe={props.query.cwe}\n        cweOpen={!!props.openFacets.cwe}\n        cweStats={props.facets && props.facets.cwe}\n        fetchingCwe={false}\n        fetchingOwaspTop10={false}\n        fetchingSansTop25={false}\n        fetchingSonarSourceSecurity={false}\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.standards}\n        owaspTop10={props.query.owaspTop10}\n        owaspTop10Open={!!props.openFacets.owaspTop10}\n        owaspTop10Stats={props.facets && props.facets.owaspTop10}\n        query={props.query}\n        sansTop25={props.query.sansTop25}\n        sansTop25Open={!!props.openFacets.sansTop25}\n        sansTop25Stats={props.facets && props.facets.sansTop25}\n        sonarsourceSecurity={props.query.sonarsourceSecurity}\n        sonarsourceSecurityOpen={!!props.openFacets.sonarsourceSecurity}\n        sonarsourceSecurityStats={props.facets && props.facets.sonarsourceSecurity}\n      />\n      <AvailableSinceFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.availableSince}\n        value={props.query.availableSince}\n      />\n      <TemplateFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.template}\n        value={props.query.template}\n      />\n      {!props.hideProfileFacet && (\n        <>\n          <ProfileFacet\n            activation={props.query.activation}\n            compareToProfile={props.query.compareToProfile}\n            languages={props.query.languages}\n            onChange={props.onFilterChange}\n            onToggle={props.onFacetToggle}\n            open={!!props.openFacets.profile}\n            referencedProfiles={props.referencedProfiles}\n            value={props.query.profile}\n          />\n          <InheritanceFacet\n            disabled={inheritanceDisabled}\n            onChange={props.onFilterChange}\n            onToggle={props.onFacetToggle}\n            open={!!props.openFacets.inheritance}\n            value={props.query.inheritance}\n          />\n          <ActivationSeverityFacet\n            disabled={activationSeverityDisabled}\n            onChange={props.onFilterChange}\n            onToggle={props.onFacetToggle}\n            open={!!props.openFacets.activationSeverities}\n            stats={props.facets && props.facets.activationSeverities}\n            values={props.query.activationSeverities}\n          />\n        </>\n      )}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport PageCounter from '../../../components/common/PageCounter';\nimport ReloadButton from '../../../components/controls/ReloadButton';\nimport DeferredSpinner from '../../../components/ui/DeferredSpinner';\nimport PageShortcutsTooltip from '../../../components/ui/PageShortcutsTooltip';\nimport { translate } from '../../../helpers/l10n';\n\nexport interface PageActionsProps {\n  loading: boolean;\n  onReload: () => void;\n  paging?: T.Paging;\n  selectedIndex?: number;\n}\n\nexport default function PageActions(props: PageActionsProps) {\n  return (\n    <div className=\"display-flex-center\">\n      <PageShortcutsTooltip\n        className=\"big-spacer-right\"\n        leftAndRightLabel={translate('issues.to_navigate')}\n        upAndDownLabel={translate('coding_rules.to_select_rules')}\n      />\n\n      <DeferredSpinner loading={props.loading}>\n        <ReloadButton onClick={props.onReload} />\n      </DeferredSpinner>\n\n      {props.paging && (\n        <PageCounter\n          className=\"spacer-left\"\n          current={props.selectedIndex}\n          label={translate('coding_rules._rules')}\n          total={props.paging.total}\n        />\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n/*\n * Latinize string by removing all diacritics\n * From http://stackoverflow.com/questions/990904/javascript-remove-accents-in-strings\n */\nconst defaultDiacriticsRemovalap = [\n  {\n    base: 'A',\n    letters:\n      '\\u0041\\u24B6\\uFF21\\u00C0\\u00C1\\u00C2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\u00C3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\u00C4\\u01DE\\u1EA2\\u00C5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F'\n  },\n  {\n    base: 'AA',\n    letters: '\\uA732'\n  },\n  {\n    base: 'AE',\n    letters: '\\u00C6\\u01FC\\u01E2'\n  },\n  {\n    base: 'AO',\n    letters: '\\uA734'\n  },\n  {\n    base: 'AU',\n    letters: '\\uA736'\n  },\n  {\n    base: 'AV',\n    letters: '\\uA738\\uA73A'\n  },\n  {\n    base: 'AY',\n    letters: '\\uA73C'\n  },\n  {\n    base: 'B',\n    letters: '\\u0042\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181'\n  },\n  {\n    base: 'C',\n    letters: '\\u0043\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\u00C7\\u1E08\\u0187\\u023B\\uA73E'\n  },\n  {\n    base: 'D',\n    letters: '\\u0044\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779'\n  },\n  {\n    base: 'DZ',\n    letters: '\\u01F1\\u01C4'\n  },\n  {\n    base: 'Dz',\n    letters: '\\u01F2\\u01C5'\n  },\n  {\n    base: 'E',\n    letters:\n      '\\u0045\\u24BA\\uFF25\\u00C8\\u00C9\\u00CA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\u00CB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E'\n  },\n  {\n    base: 'F',\n    letters: '\\u0046\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B'\n  },\n  {\n    base: 'G',\n    letters:\n      '\\u0047\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E'\n  },\n  {\n    base: 'H',\n    letters: '\\u0048\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D'\n  },\n  {\n    base: 'I',\n    letters:\n      '\\u0049\\u24BE\\uFF29\\u00CC\\u00CD\\u00CE\\u0128\\u012A\\u012C\\u0130\\u00CF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197'\n  },\n  {\n    base: 'J',\n    letters: '\\u004A\\u24BF\\uFF2A\\u0134\\u0248'\n  },\n  {\n    base: 'K',\n    letters: '\\u004B\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2'\n  },\n  {\n    base: 'L',\n    letters:\n      '\\u004C\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780'\n  },\n  {\n    base: 'LJ',\n    letters: '\\u01C7'\n  },\n  {\n    base: 'Lj',\n    letters: '\\u01C8'\n  },\n  {\n    base: 'M',\n    letters: '\\u004D\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C'\n  },\n  {\n    base: 'N',\n    letters:\n      '\\u004E\\u24C3\\uFF2E\\u01F8\\u0143\\u00D1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4'\n  },\n  {\n    base: 'NJ',\n    letters: '\\u01CA'\n  },\n  {\n    base: 'Nj',\n    letters: '\\u01CB'\n  },\n  {\n    base: 'O',\n    letters:\n      '\\u004F\\u24C4\\uFF2F\\u00D2\\u00D3\\u00D4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\u00D5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\u00D6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\u00D8\\u01FE\\u0186\\u019F\\uA74A\\uA74C'\n  },\n  {\n    base: 'OI',\n    letters: '\\u01A2'\n  },\n  {\n    base: 'OO',\n    letters: '\\uA74E'\n  },\n  {\n    base: 'OU',\n    letters: '\\u0222'\n  },\n  {\n    base: 'OE',\n    letters: '\\u008C\\u0152'\n  },\n  {\n    base: 'oe',\n    letters: '\\u009C\\u0153'\n  },\n  {\n    base: 'P',\n    letters: '\\u0050\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754'\n  },\n  {\n    base: 'Q',\n    letters: '\\u0051\\u24C6\\uFF31\\uA756\\uA758\\u024A'\n  },\n  {\n    base: 'R',\n    letters:\n      '\\u0052\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782'\n  },\n  {\n    base: 'S',\n    letters:\n      '\\u0053\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784'\n  },\n  {\n    base: 'T',\n    letters:\n      '\\u0054\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786'\n  },\n  {\n    base: 'TZ',\n    letters: '\\uA728'\n  },\n  {\n    base: 'U',\n    letters:\n      '\\u0055\\u24CA\\uFF35\\u00D9\\u00DA\\u00DB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\u00DC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244'\n  },\n  {\n    base: 'V',\n    letters: '\\u0056\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245'\n  },\n  {\n    base: 'VY',\n    letters: '\\uA760'\n  },\n  {\n    base: 'W',\n    letters: '\\u0057\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72'\n  },\n  {\n    base: 'X',\n    letters: '\\u0058\\u24CD\\uFF38\\u1E8A\\u1E8C'\n  },\n  {\n    base: 'Y',\n    letters:\n      '\\u0059\\u24CE\\uFF39\\u1EF2\\u00DD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE'\n  },\n  {\n    base: 'Z',\n    letters: '\\u005A\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762'\n  },\n  {\n    base: 'a',\n    letters:\n      '\\u0061\\u24D0\\uFF41\\u1E9A\\u00E0\\u00E1\\u00E2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\u00E3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\u00E4\\u01DF\\u1EA3\\u00E5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250'\n  },\n  {\n    base: 'aa',\n    letters: '\\uA733'\n  },\n  {\n    base: 'ae',\n    letters: '\\u00E6\\u01FD\\u01E3'\n  },\n  {\n    base: 'ao',\n    letters: '\\uA735'\n  },\n  {\n    base: 'au',\n    letters: '\\uA737'\n  },\n  {\n    base: 'av',\n    letters: '\\uA739\\uA73B'\n  },\n  {\n    base: 'ay',\n    letters: '\\uA73D'\n  },\n  {\n    base: 'b',\n    letters: '\\u0062\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253'\n  },\n  {\n    base: 'c',\n    letters: '\\u0063\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\u00E7\\u1E09\\u0188\\u023C\\uA73F\\u2184'\n  },\n  {\n    base: 'd',\n    letters: '\\u0064\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A'\n  },\n  {\n    base: 'dz',\n    letters: '\\u01F3\\u01C6'\n  },\n  {\n    base: 'e',\n    letters:\n      '\\u0065\\u24D4\\uFF45\\u00E8\\u00E9\\u00EA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\u00EB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD'\n  },\n  {\n    base: 'f',\n    letters: '\\u0066\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C'\n  },\n  {\n    base: 'g',\n    letters:\n      '\\u0067\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F'\n  },\n  {\n    base: 'h',\n    letters:\n      '\\u0068\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265'\n  },\n  {\n    base: 'hv',\n    letters: '\\u0195'\n  },\n  {\n    base: 'i',\n    letters:\n      '\\u0069\\u24D8\\uFF49\\u00EC\\u00ED\\u00EE\\u0129\\u012B\\u012D\\u00EF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131'\n  },\n  {\n    base: 'j',\n    letters: '\\u006A\\u24D9\\uFF4A\\u0135\\u01F0\\u0249'\n  },\n  {\n    base: 'k',\n    letters: '\\u006B\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3'\n  },\n  {\n    base: 'l',\n    letters:\n      '\\u006C\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u017F\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747'\n  },\n  {\n    base: 'lj',\n    letters: '\\u01C9'\n  },\n  {\n    base: 'm',\n    letters: '\\u006D\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F'\n  },\n  {\n    base: 'n',\n    letters:\n      '\\u006E\\u24DD\\uFF4E\\u01F9\\u0144\\u00F1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5'\n  },\n  {\n    base: 'nj',\n    letters: '\\u01CC'\n  },\n  {\n    base: 'o',\n    letters:\n      '\\u006F\\u24DE\\uFF4F\\u00F2\\u00F3\\u00F4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\u00F5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\u00F6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\u00F8\\u01FF\\u0254\\uA74B\\uA74D\\u0275'\n  },\n  {\n    base: 'oi',\n    letters: '\\u01A3'\n  },\n  {\n    base: 'ou',\n    letters: '\\u0223'\n  },\n  {\n    base: 'oo',\n    letters: '\\uA74F'\n  },\n  {\n    base: 'p',\n    letters: '\\u0070\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755'\n  },\n  {\n    base: 'q',\n    letters: '\\u0071\\u24E0\\uFF51\\u024B\\uA757\\uA759'\n  },\n  {\n    base: 'r',\n    letters:\n      '\\u0072\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783'\n  },\n  {\n    base: 's',\n    letters:\n      '\\u0073\\u24E2\\uFF53\\u00DF\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B'\n  },\n  {\n    base: 't',\n    letters:\n      '\\u0074\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787'\n  },\n  {\n    base: 'tz',\n    letters: '\\uA729'\n  },\n  {\n    base: 'u',\n    letters:\n      '\\u0075\\u24E4\\uFF55\\u00F9\\u00FA\\u00FB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\u00FC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289'\n  },\n  {\n    base: 'v',\n    letters: '\\u0076\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C'\n  },\n  {\n    base: 'vy',\n    letters: '\\uA761'\n  },\n  {\n    base: 'w',\n    letters: '\\u0077\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73'\n  },\n  {\n    base: 'x',\n    letters: '\\u0078\\u24E7\\uFF58\\u1E8B\\u1E8D'\n  },\n  {\n    base: 'y',\n    letters:\n      '\\u0079\\u24E8\\uFF59\\u1EF3\\u00FD\\u0177\\u1EF9\\u0233\\u1E8F\\u00FF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF'\n  },\n  {\n    base: 'z',\n    letters: '\\u007A\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763'\n  }\n];\n\nconst diacriticsMap: T.Dict<string> = {};\ndefaultDiacriticsRemovalap.forEach(defaultDiacritic =>\n  defaultDiacritic.letters.split('').forEach(letter => {\n    diacriticsMap[letter] = defaultDiacritic.base;\n  })\n);\n\n// \"what?\" version ... http://jsperf.com/diacritics/12\nexport function latinize(str: string): string {\n  // eslint-disable-next-line no-control-regex\n  return str.replace(/[^\\u0000-\\u007E]/g, a => diacriticsMap[a] || a);\n}\n\n// Inspired from https://github.com/SonarSource/sonar-enterprise/blob/master/sonar-core/src/main/java/org/sonar/core/util/Slug.java\nexport function slugify(text: string) {\n  return latinize(text.trim().toLowerCase())\n    .replace(/&/g, '-and-') // Replace & with 'and'\n    .replace(/[^\\w-]+/g, '-') // Replace all non-word chars with dash\n    .replace(/\\s+/g, '-') // Replace whitespaces with dash\n    .replace(/[/_,:;]/g, '-') // Replace special chars with dash\n    .replace(/--+/g, '-') // Replace multiple dash with single dash\n    .replace(/^-+/, '') // Remove heading dash\n    .replace(/-+$/, ''); // Remove trailing dash\n}\n\nexport function decodeJwt(token: string) {\n  const segments = token.split('.');\n  const base64Url = segments.length > 1 ? segments[1] : segments[0];\n  const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n  return JSON.parse(window.atob(base64));\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { createRule, updateRule } from '../../../api/rules';\nimport FormattingTips from '../../../components/common/FormattingTips';\nimport { ResetButtonLink, SubmitButton } from '../../../components/controls/buttons';\nimport Modal from '../../../components/controls/Modal';\nimport Select from '../../../components/controls/Select';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport TypeHelper from '../../../components/shared/TypeHelper';\nimport { Alert } from '../../../components/ui/Alert';\nimport MandatoryFieldMarker from '../../../components/ui/MandatoryFieldMarker';\nimport MandatoryFieldsExplanation from '../../../components/ui/MandatoryFieldsExplanation';\nimport { RULE_STATUSES, RULE_TYPES, SEVERITIES } from '../../../helpers/constants';\nimport { csvEscape } from '../../../helpers/csv';\nimport { translate } from '../../../helpers/l10n';\nimport { sanitizeString } from '../../../helpers/sanitize';\nimport { latinize } from '../../../helpers/strings';\n\ninterface Props {\n  customRule?: T.RuleDetails;\n  onClose: () => void;\n  onDone: (newRuleDetails: T.RuleDetails) => void;\n  templateRule: T.RuleDetails;\n}\n\ninterface State {\n  description: string;\n  key: string;\n  keyModifiedByUser: boolean;\n  name: string;\n  params: T.Dict<string>;\n  reactivating: boolean;\n  severity: string;\n  status: string;\n  submitting: boolean;\n  type: string;\n}\n\nexport default class CustomRuleFormModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const params: T.Dict<string> = {};\n    if (props.customRule && props.customRule.params) {\n      for (const param of props.customRule.params) {\n        params[param.key] = param.defaultValue || '';\n      }\n    }\n    this.state = {\n      description: (props.customRule && props.customRule.mdDesc) || '',\n      key: '',\n      keyModifiedByUser: false,\n      name: (props.customRule && props.customRule.name) || '',\n      params,\n      reactivating: false,\n      severity: (props.customRule && props.customRule.severity) || props.templateRule.severity,\n      status: (props.customRule && props.customRule.status) || props.templateRule.status,\n      submitting: false,\n      type: (props.customRule && props.customRule.type) || props.templateRule.type\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  prepareRequest = () => {\n    const { customRule, templateRule } = this.props;\n    const params = Object.keys(this.state.params)\n      .map(key => `${key}=${csvEscape(this.state.params[key])}`)\n      .join(';');\n    const ruleData = {\n      markdown_description: this.state.description,\n      name: this.state.name,\n      params,\n      severity: this.state.severity,\n      status: this.state.status\n    };\n    return customRule\n      ? updateRule({ ...ruleData, key: customRule.key })\n      : createRule({\n          ...ruleData,\n          custom_key: this.state.key,\n          prevent_reactivation: !this.state.reactivating,\n          template_key: templateRule.key,\n          type: this.state.type\n        });\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    this.prepareRequest().then(\n      newRuleDetails => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n          this.props.onDone(newRuleDetails);\n        }\n      },\n      (response: Response) => {\n        if (this.mounted) {\n          this.setState({ reactivating: response.status === 409, submitting: false });\n        }\n      }\n    );\n  };\n\n  handleNameChange = (event: React.SyntheticEvent<HTMLInputElement>) => {\n    const { value: name } = event.currentTarget;\n    this.setState(state => ({\n      name,\n      key: state.keyModifiedByUser ? state.key : latinize(name).replace(/[^A-Za-z0-9]/g, '_')\n    }));\n  };\n\n  handleKeyChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ key: event.currentTarget.value, keyModifiedByUser: true });\n\n  handleDescriptionChange = (event: React.SyntheticEvent<HTMLTextAreaElement>) =>\n    this.setState({ description: event.currentTarget.value });\n\n  handleTypeChange = ({ value }: { value: string }) => this.setState({ type: value });\n\n  handleSeverityChange = ({ value }: { value: string }) => this.setState({ severity: value });\n\n  handleStatusChange = ({ value }: { value: string }) => this.setState({ status: value });\n\n  handleParameterChange = (event: React.SyntheticEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = event.currentTarget;\n    this.setState((state: State) => ({ params: { ...state.params, [name]: value } }));\n  };\n\n  renderNameField = () => (\n    <div className=\"modal-field\">\n      <label htmlFor=\"coding-rules-custom-rule-creation-name\">\n        {translate('name')} <MandatoryFieldMarker />\n      </label>\n      <input\n        autoFocus={true}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-creation-name\"\n        onChange={this.handleNameChange}\n        required={true}\n        type=\"text\"\n        value={this.state.name}\n      />\n    </div>\n  );\n\n  renderKeyField = () => (\n    <div className=\"modal-field\">\n      <label htmlFor=\"coding-rules-custom-rule-creation-key\">\n        {translate('key')} {!this.props.customRule && <MandatoryFieldMarker />}\n      </label>\n\n      {this.props.customRule ? (\n        <span className=\"coding-rules-detail-custom-rule-key\" title={this.props.customRule.key}>\n          {this.props.customRule.key}\n        </span>\n      ) : (\n        <input\n          disabled={this.state.submitting}\n          id=\"coding-rules-custom-rule-creation-key\"\n          onChange={this.handleKeyChange}\n          required={true}\n          type=\"text\"\n          value={this.state.key}\n        />\n      )}\n    </div>\n  );\n\n  renderDescriptionField = () => (\n    <div className=\"modal-field\">\n      <label htmlFor=\"coding-rules-custom-rule-creation-html-description\">\n        {translate('description')}\n        <MandatoryFieldMarker />\n      </label>\n      <textarea\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-creation-html-description\"\n        onChange={this.handleDescriptionChange}\n        required={true}\n        rows={5}\n        value={this.state.description}\n      />\n      <FormattingTips className=\"modal-field-descriptor text-right\" />\n    </div>\n  );\n\n  renderTypeOption = ({ value }: { value: T.RuleType }) => {\n    return <TypeHelper type={value} />;\n  };\n\n  renderTypeField = () => (\n    <div className=\"modal-field flex-1 spacer-right\">\n      <label htmlFor=\"coding-rules-custom-rule-type\">{translate('type')}</label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-type\"\n        onChange={this.handleTypeChange}\n        optionRenderer={this.renderTypeOption}\n        options={RULE_TYPES.map(type => ({\n          label: translate('issue.type', type),\n          value: type\n        }))}\n        searchable={false}\n        value={this.state.type}\n        valueRenderer={this.renderTypeOption}\n      />\n    </div>\n  );\n\n  renderSeverityOption = ({ value }: { value: string }) => <SeverityHelper severity={value} />;\n\n  renderSeverityField = () => (\n    <div className=\"modal-field flex-1 spacer-right\">\n      <label htmlFor=\"coding-rules-custom-rule-severity\">{translate('severity')}</label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-severity\"\n        onChange={this.handleSeverityChange}\n        optionRenderer={this.renderSeverityOption}\n        options={SEVERITIES.map(severity => ({\n          label: translate('severity', severity),\n          value: severity\n        }))}\n        searchable={false}\n        value={this.state.severity}\n        valueRenderer={this.renderSeverityOption}\n      />\n    </div>\n  );\n\n  renderStatusField = () => (\n    <div className=\"modal-field flex-1\">\n      <label htmlFor=\"coding-rules-custom-rule-status\">\n        {translate('coding_rules.filters.status')}\n      </label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-status\"\n        onChange={this.handleStatusChange}\n        options={RULE_STATUSES.map(status => ({\n          label: translate('rules.status', status),\n          value: status\n        }))}\n        searchable={false}\n        value={this.state.status}\n      />\n    </div>\n  );\n\n  renderParameterField = (param: T.RuleParameter) => (\n    <div className=\"modal-field\" key={param.key}>\n      <label className=\"capitalize\" htmlFor={param.key}>\n        {param.key}\n      </label>\n\n      {param.type === 'TEXT' ? (\n        <textarea\n          disabled={this.state.submitting}\n          id={param.key}\n          name={param.key}\n          onChange={this.handleParameterChange}\n          placeholder={param.defaultValue}\n          rows={3}\n          value={this.state.params[param.key] || ''}\n        />\n      ) : (\n        <input\n          disabled={this.state.submitting}\n          id={param.key}\n          name={param.key}\n          onChange={this.handleParameterChange}\n          placeholder={param.defaultValue}\n          type=\"text\"\n          value={this.state.params[param.key] || ''}\n        />\n      )}\n      {param.htmlDesc !== undefined && (\n        <div\n          className=\"modal-field-description\"\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{ __html: sanitizeString(param.htmlDesc) }}\n        />\n      )}\n    </div>\n  );\n\n  render() {\n    const { customRule, templateRule } = this.props;\n    const { reactivating, submitting } = this.state;\n    const { params = [] } = templateRule;\n    const header = customRule\n      ? translate('coding_rules.update_custom_rule')\n      : translate('coding_rules.create_custom_rule');\n    let submit = this.props.customRule ? translate('save') : translate('create');\n    if (this.state.reactivating) {\n      submit = translate('coding_rules.reactivate');\n    }\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-head\">\n            <h2>{header}</h2>\n          </div>\n\n          <div className=\"modal-body modal-container\">\n            {reactivating && (\n              <Alert variant=\"warning\">{translate('coding_rules.reactivate.help')}</Alert>\n            )}\n\n            <MandatoryFieldsExplanation className=\"spacer-bottom\" />\n\n            {this.renderNameField()}\n            {this.renderKeyField()}\n            <div className=\"display-flex-space-between\">\n              {/* do not allow to change the type of existing rule */}\n              {!customRule && this.renderTypeField()}\n              {this.renderSeverityField()}\n              {this.renderStatusField()}\n            </div>\n            {this.renderDescriptionField()}\n            {params.map(this.renderParameterField)}\n          </div>\n\n          <div className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={this.state.submitting}>{submit}</SubmitButton>\n            <ResetButtonLink\n              disabled={submitting}\n              id=\"coding-rules-custom-rule-creation-cancel\"\n              onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </div>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport CustomRuleFormModal from './CustomRuleFormModal';\n\ninterface Props {\n  children: (props: { onClick: () => void }) => React.ReactNode;\n  customRule?: T.RuleDetails;\n  onDone: (newRuleDetails: T.RuleDetails) => void;\n  templateRule: T.RuleDetails;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class CustomRuleButton extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { modal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleModalClose = () => {\n    if (this.mounted) {\n      this.setState({ modal: false });\n    }\n  };\n\n  handleDone = (newRuleDetails: T.RuleDetails) => {\n    this.handleModalClose();\n    this.props.onDone(newRuleDetails);\n  };\n\n  render() {\n    return (\n      <>\n        {this.props.children({ onClick: this.handleClick })}\n        {this.state.modal && (\n          <CustomRuleFormModal\n            customRule={this.props.customRule}\n            onClose={this.handleModalClose}\n            onDone={this.handleDone}\n            templateRule={this.props.templateRule}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { deleteRule, searchRules } from '../../../api/rules';\nimport { Button } from '../../../components/controls/buttons';\nimport ConfirmButton from '../../../components/controls/ConfirmButton';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport DeferredSpinner from '../../../components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { getRuleUrl } from '../../../helpers/urls';\nimport CustomRuleButton from './CustomRuleButton';\n\ninterface Props {\n  canChange?: boolean;\n  ruleDetails: T.RuleDetails;\n}\n\ninterface State {\n  loading: boolean;\n  rules?: T.Rule[];\n}\n\nexport default class RuleDetailsCustomRules extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchRules();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleDetails.key !== this.props.ruleDetails.key) {\n      this.fetchRules();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchRules = () => {\n    this.setState({ loading: true });\n    searchRules({\n      f: 'name,severity,params',\n      template_key: this.props.ruleDetails.key\n    }).then(\n      ({ rules }) => {\n        if (this.mounted) {\n          this.setState({ rules, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleRuleCreate = (newRuleDetails: T.RuleDetails) => {\n    if (this.mounted) {\n      this.setState(({ rules = [] }: State) => ({\n        rules: [...rules, newRuleDetails]\n      }));\n    }\n  };\n\n  handleRuleDelete = (ruleKey: string) => {\n    return deleteRule({ key: ruleKey }).then(() => {\n      if (this.mounted) {\n        this.setState(({ rules = [] }) => ({\n          rules: rules.filter(rule => rule.key !== ruleKey)\n        }));\n      }\n    });\n  };\n\n  renderRule = (rule: T.Rule) => (\n    <tr data-rule={rule.key} key={rule.key}>\n      <td className=\"coding-rules-detail-list-name\">\n        <Link to={getRuleUrl(rule.key)}>{rule.name}</Link>\n      </td>\n\n      <td className=\"coding-rules-detail-list-severity\">\n        <SeverityHelper className=\"display-flex-center\" severity={rule.severity} />\n      </td>\n\n      <td className=\"coding-rules-detail-list-parameters\">\n        {rule.params &&\n          rule.params\n            .filter(param => param.defaultValue)\n            .map(param => (\n              <div className=\"coding-rules-detail-list-parameter\" key={param.key}>\n                <span className=\"key\">{param.key}</span>\n                <span className=\"sep\">:&nbsp;</span>\n                <span className=\"value\" title={param.defaultValue}>\n                  {param.defaultValue}\n                </span>\n              </div>\n            ))}\n      </td>\n\n      {this.props.canChange && (\n        <td className=\"coding-rules-detail-list-actions\">\n          <ConfirmButton\n            confirmButtonText={translate('delete')}\n            confirmData={rule.key}\n            isDestructive={true}\n            modalBody={translateWithParameters('coding_rules.delete.custom.confirm', rule.name)}\n            modalHeader={translate('coding_rules.delete_rule')}\n            onConfirm={this.handleRuleDelete}>\n            {({ onClick }) => (\n              <Button className=\"button-red js-delete-custom-rule\" onClick={onClick}>\n                {translate('delete')}\n              </Button>\n            )}\n          </ConfirmButton>\n        </td>\n      )}\n    </tr>\n  );\n\n  render() {\n    const { loading, rules = [] } = this.state;\n\n    return (\n      <div className=\"js-rule-custom-rules coding-rule-section\">\n        <div className=\"coding-rules-detail-custom-rules-section\">\n          <div className=\"coding-rule-section-separator\" />\n\n          <h3 className=\"coding-rules-detail-title\">{translate('coding_rules.custom_rules')}</h3>\n\n          {this.props.canChange && (\n            <CustomRuleButton onDone={this.handleRuleCreate} templateRule={this.props.ruleDetails}>\n              {({ onClick }) => (\n                <Button className=\"js-create-custom-rule spacer-left\" onClick={onClick}>\n                  {translate('coding_rules.create')}\n                </Button>\n              )}\n            </CustomRuleButton>\n          )}\n\n          <DeferredSpinner className=\"spacer-left\" loading={loading}>\n            {rules.length > 0 && (\n              <table className=\"coding-rules-detail-list\" id=\"coding-rules-detail-custom-rules\">\n                <tbody>{sortBy(rules, rule => rule.name).map(this.renderRule)}</tbody>\n              </table>\n            )}\n          </DeferredSpinner>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { getFacet } from '../../../api/issues';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { withAppState } from '../../../components/hoc/withAppState';\nimport DeferredSpinner from '../../../components/ui/DeferredSpinner';\nimport { translate } from '../../../helpers/l10n';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { getIssuesUrl } from '../../../helpers/urls';\n\ninterface Props {\n  appState: Pick<T.AppState, 'branchesEnabled'>;\n  ruleDetails: Pick<T.RuleDetails, 'key' | 'type'>;\n}\n\ninterface Project {\n  count: number;\n  key: string;\n  name: string;\n}\n\ninterface State {\n  loading: boolean;\n  projects?: Project[];\n  total?: number;\n}\n\nexport class RuleDetailsIssues extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchIssues();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleDetails !== this.props.ruleDetails) {\n      this.fetchIssues();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchIssues = () => {\n    const {\n      ruleDetails: { key }\n    } = this.props;\n\n    this.setState({ loading: true });\n    getFacet(\n      {\n        resolved: 'false',\n        rules: key\n      },\n      'projects'\n    ).then(\n      ({ facet, response }) => {\n        if (this.mounted) {\n          const { components = [], paging } = response;\n          const projects = [];\n          for (const item of facet) {\n            const project = components.find(component => component.key === item.val);\n            if (project) {\n              projects.push({ count: item.count, key: project.key, name: project.name });\n            }\n          }\n          this.setState({ projects, loading: false, total: paging.total });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  renderTotal = () => {\n    const {\n      ruleDetails: { key }\n    } = this.props;\n\n    const { total } = this.state;\n    if (total === undefined) {\n      return null;\n    }\n    const path = getIssuesUrl({ resolved: 'false', rules: key });\n\n    const totalItem = (\n      <span className=\"little-spacer-left\">\n        {'('}\n        <Link to={path}>{total}</Link>\n        {')'}\n      </span>\n    );\n\n    if (!this.props.appState.branchesEnabled) {\n      return totalItem;\n    }\n\n    return (\n      <Tooltip overlay={translate('coding_rules.issues.only_main_branches')}>{totalItem}</Tooltip>\n    );\n  };\n\n  renderProject = (project: Project) => {\n    const {\n      ruleDetails: { key }\n    } = this.props;\n\n    const path = getIssuesUrl({ resolved: 'false', rules: key, projects: project.key });\n    return (\n      <tr key={project.key}>\n        <td className=\"coding-rules-detail-list-name\">{project.name}</td>\n        <td className=\"coding-rules-detail-list-parameters\">\n          <Link to={path}>{formatMeasure(project.count, 'INT')}</Link>\n        </td>\n      </tr>\n    );\n  };\n\n  render() {\n    const { loading, projects = [] } = this.state;\n\n    return (\n      <div className=\"js-rule-issues coding-rule-section\">\n        <div className=\"coding-rule-section-separator\" />\n\n        <DeferredSpinner loading={loading}>\n          <h3 className=\"coding-rules-detail-title\">\n            {translate('coding_rules.issues')}\n            {this.renderTotal()}\n          </h3>\n\n          {projects.length > 0 && (\n            <table className=\"coding-rules-detail-list coding-rules-most-violated-projects\">\n              <tbody>\n                <tr>\n                  <td className=\"coding-rules-detail-list-name\" colSpan={2}>\n                    {translate('coding_rules.most_violating_projects')}\n                  </td>\n                </tr>\n                {projects.map(this.renderProject)}\n              </tbody>\n            </table>\n          )}\n        </DeferredSpinner>\n      </div>\n    );\n  }\n}\n\nexport default withAppState(RuleDetailsIssues);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport { sanitizeString } from '../../../helpers/sanitize';\n\ninterface Props {\n  params: T.RuleParameter[];\n}\n\nexport default class RuleDetailsParameters extends React.PureComponent<Props> {\n  renderParameter = (param: T.RuleParameter) => (\n    <tr className=\"coding-rules-detail-parameter\" key={param.key}>\n      <td className=\"coding-rules-detail-parameter-name\">{param.key}</td>\n      <td className=\"coding-rules-detail-parameter-description\">\n        {param.htmlDesc !== undefined && (\n          <p\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{ __html: sanitizeString(param.htmlDesc) }}\n          />\n        )}\n        {param.defaultValue !== undefined && (\n          <div className=\"note spacer-top\">\n            {translate('coding_rules.parameters.default_value')}\n            <br />\n            <span className=\"coding-rules-detail-parameter-value\">{param.defaultValue}</span>\n          </div>\n        )}\n      </td>\n    </tr>\n  );\n\n  render() {\n    return (\n      <div className=\"js-rule-parameters\">\n        <h3 className=\"coding-rules-detail-title\">{translate('coding_rules.parameters')}</h3>\n        <table className=\"coding-rules-detail-parameters\">\n          <tbody>{this.props.params.map(this.renderParameter)}</tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Profile as BaseProfile } from '../../../api/quality-profiles';\nimport { Button } from '../../../components/controls/buttons';\nimport ActivationFormModal from './ActivationFormModal';\n\ninterface Props {\n  activation?: T.RuleActivation;\n  buttonText: string;\n  className?: string;\n  modalHeader: string;\n  onDone: (severity: string) => Promise<void>;\n  profiles: BaseProfile[];\n  rule: T.Rule | T.RuleDetails;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class ActivationButton extends React.PureComponent<Props, State> {\n  state: State = { modal: false };\n\n  handleButtonClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleCloseModal = () => {\n    this.setState({ modal: false });\n  };\n\n  render() {\n    return (\n      <>\n        <Button\n          className={this.props.className}\n          id=\"coding-rules-quality-profile-activate\"\n          onClick={this.handleButtonClick}>\n          {this.props.buttonText}\n        </Button>\n\n        {this.state.modal && (\n          <ActivationFormModal\n            activation={this.props.activation}\n            modalHeader={this.props.modalHeader}\n            onClose={this.handleCloseModal}\n            onDone={this.props.onDone}\n            profiles={this.props.profiles}\n            rule={this.props.rule}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { colors } from '../../../app/theme';\n\ninterface Props {\n  className?: string;\n  inheritance: T.RuleInheritance;\n}\n\nexport default function RuleInheritanceIcon({ className, inheritance, ...other }: Props) {\n  const fill = inheritance === 'OVERRIDES' ? colors.red : colors.baseFontColor;\n\n  return (\n    <svg\n      className={className}\n      height={16}\n      version=\"1.1\"\n      viewBox=\"0 0 16 16\"\n      width={16}\n      xmlSpace=\"preserve\"\n      xmlnsXlink=\"https://www.w3.org/1999/xlink\"\n      {...other}>\n      <path\n        d=\"M6.25 12.5a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0zm0-9a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0zm5 1a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0zm.75 0a1.5 1.5 0 0 1-.75 1.297c-.023 2.82-2.023 3.445-3.352 3.867-1.242.39-1.648.578-1.648 1.336v.203A1.5 1.5 0 1 1 4 12.5a1.5 1.5 0 0 1 .75-1.297V4.797A1.5 1.5 0 1 1 7 3.5a1.5 1.5 0 0 1-.75 1.297V8.68c.398-.196.82-.328 1.203-.446 1.453-.46 2.281-.804 2.297-2.437A1.5 1.5 0 1 1 12 4.5z\"\n        style={{ fill, fillRule: 'nonzero' }}\n      />\n    </svg>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { filter } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { activateRule, deactivateRule, Profile } from '../../../api/quality-profiles';\nimport InstanceMessage from '../../../components/common/InstanceMessage';\nimport { Button } from '../../../components/controls/buttons';\nimport ConfirmButton from '../../../components/controls/ConfirmButton';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { getQualityProfileUrl } from '../../../helpers/urls';\nimport BuiltInQualityProfileBadge from '../../quality-profiles/components/BuiltInQualityProfileBadge';\nimport ActivationButton from './ActivationButton';\nimport RuleInheritanceIcon from './RuleInheritanceIcon';\n\ninterface Props {\n  activations: T.RuleActivation[] | undefined;\n  canWrite: boolean | undefined;\n  onActivate: () => Promise<void>;\n  onDeactivate: () => Promise<void>;\n  referencedProfiles: T.Dict<Profile>;\n  ruleDetails: T.RuleDetails;\n}\n\nexport default class RuleDetailsProfiles extends React.PureComponent<Props> {\n  handleActivate = () => this.props.onActivate();\n\n  handleDeactivate = (key?: string) => {\n    if (key) {\n      deactivateRule({\n        key,\n        rule: this.props.ruleDetails.key\n      }).then(this.props.onDeactivate, () => {});\n    }\n  };\n\n  handleRevert = (key?: string) => {\n    if (key) {\n      activateRule({\n        key,\n        rule: this.props.ruleDetails.key,\n        reset: true\n      }).then(this.props.onActivate, () => {});\n    }\n  };\n\n  renderInheritedProfile = (activation: T.RuleActivation, profile: Profile) => {\n    if (!profile.parentName) {\n      return null;\n    }\n    const profilePath = getQualityProfileUrl(profile.parentName, profile.language);\n    return (\n      <div className=\"coding-rules-detail-quality-profile-inheritance\">\n        {(activation.inherit === 'OVERRIDES' || activation.inherit === 'INHERITED') && (\n          <>\n            <RuleInheritanceIcon className=\"text-middle\" inheritance={activation.inherit} />\n            <Link className=\"link-base-color little-spacer-left text-middle\" to={profilePath}>\n              {profile.parentName}\n            </Link>\n          </>\n        )}\n      </div>\n    );\n  };\n\n  renderSeverity = (activation: T.RuleActivation, parentActivation?: T.RuleActivation) => (\n    <td className=\"coding-rules-detail-quality-profile-severity\">\n      <Tooltip overlay={translate('coding_rules.activation_severity')}>\n        <span>\n          <SeverityHelper className=\"display-inline-flex-center\" severity={activation.severity} />\n        </span>\n      </Tooltip>\n      {parentActivation !== undefined && activation.severity !== parentActivation.severity && (\n        <div className=\"coding-rules-detail-quality-profile-inheritance\">\n          {translate('coding_rules.original')} {translate('severity', parentActivation.severity)}\n        </div>\n      )}\n    </td>\n  );\n\n  renderParameter = (\n    param: { key: string; value: string },\n    parentActivation?: T.RuleActivation\n  ) => {\n    const originalParam =\n      parentActivation && parentActivation.params.find(p => p.key === param.key);\n    const originalValue = originalParam && originalParam.value;\n\n    return (\n      <div className=\"coding-rules-detail-quality-profile-parameter\" key={param.key}>\n        <span className=\"key\">{param.key}</span>\n        <span className=\"sep\">: </span>\n        <span className=\"value\" title={param.value}>\n          {param.value}\n        </span>\n        {parentActivation && param.value !== originalValue && (\n          <div className=\"coding-rules-detail-quality-profile-inheritance\">\n            {translate('coding_rules.original')} <span className=\"value\">{originalValue}</span>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  renderParameters = (activation: T.RuleActivation, parentActivation?: T.RuleActivation) => (\n    <td className=\"coding-rules-detail-quality-profile-parameters\">\n      {activation.params.map(param => this.renderParameter(param, parentActivation))}\n    </td>\n  );\n\n  renderActions = (activation: T.RuleActivation, profile: Profile) => {\n    const canEdit = profile.actions && profile.actions.edit && !profile.isBuiltIn;\n    const { ruleDetails } = this.props;\n    const hasParent = activation.inherit !== 'NONE' && profile.parentKey;\n    return (\n      <td className=\"coding-rules-detail-quality-profile-actions\">\n        {canEdit && (\n          <>\n            {!ruleDetails.isTemplate && (\n              <ActivationButton\n                activation={activation}\n                buttonText={translate('change_verb')}\n                className=\"coding-rules-detail-quality-profile-change\"\n                modalHeader={translate('coding_rules.change_details')}\n                onDone={this.handleActivate}\n                profiles={[profile]}\n                rule={ruleDetails}\n              />\n            )}\n            {hasParent ? (\n              activation.inherit === 'OVERRIDES' &&\n              profile.parentName && (\n                <ConfirmButton\n                  confirmButtonText={translate('yes')}\n                  confirmData={profile.key}\n                  modalBody={translateWithParameters(\n                    'coding_rules.revert_to_parent_definition.confirm',\n                    profile.parentName\n                  )}\n                  modalHeader={translate('coding_rules.revert_to_parent_definition')}\n                  onConfirm={this.handleRevert}>\n                  {({ onClick }) => (\n                    <Button\n                      className=\"coding-rules-detail-quality-profile-revert button-red spacer-left\"\n                      onClick={onClick}>\n                      {translate('coding_rules.revert_to_parent_definition')}\n                    </Button>\n                  )}\n                </ConfirmButton>\n              )\n            ) : (\n              <ConfirmButton\n                confirmButtonText={translate('yes')}\n                confirmData={profile.key}\n                modalBody={translate('coding_rules.deactivate.confirm')}\n                modalHeader={translate('coding_rules.deactivate')}\n                onConfirm={this.handleDeactivate}>\n                {({ onClick }) => (\n                  <Button\n                    className=\"coding-rules-detail-quality-profile-deactivate button-red spacer-left\"\n                    onClick={onClick}>\n                    {translate('coding_rules.deactivate')}\n                  </Button>\n                )}\n              </ConfirmButton>\n            )}\n          </>\n        )}\n      </td>\n    );\n  };\n\n  renderActivation = (activation: T.RuleActivation) => {\n    const { activations = [], ruleDetails } = this.props;\n    const profile = this.props.referencedProfiles[activation.qProfile];\n    if (!profile) {\n      return null;\n    }\n\n    const parentActivation = activations.find(x => x.qProfile === profile.parentKey);\n\n    return (\n      <tr data-profile={profile.key} key={profile.key}>\n        <td className=\"coding-rules-detail-quality-profile-name\">\n          <Link to={getQualityProfileUrl(profile.name, profile.language)}>{profile.name}</Link>\n          {profile.isBuiltIn && <BuiltInQualityProfileBadge className=\"spacer-left\" />}\n          {this.renderInheritedProfile(activation, profile)}\n        </td>\n\n        {this.renderSeverity(activation, parentActivation)}\n        {!ruleDetails.templateKey && this.renderParameters(activation, parentActivation)}\n        {this.renderActions(activation, profile)}\n      </tr>\n    );\n  };\n\n  render() {\n    const { activations = [], referencedProfiles, ruleDetails } = this.props;\n    const canActivate = Object.values(referencedProfiles).some(profile =>\n      Boolean(profile.actions && profile.actions.edit && profile.language === ruleDetails.lang)\n    );\n\n    return (\n      <div className=\"js-rule-profiles coding-rule-section\">\n        <div className=\"coding-rules-detail-quality-profiles-section\">\n          <div className=\"coding-rule-section-separator\" />\n\n          <h3 className=\"coding-rules-detail-title\">\n            <InstanceMessage message={translate('coding_rules.quality_profiles')} />\n          </h3>\n\n          {canActivate && (\n            <ActivationButton\n              buttonText={translate('coding_rules.activate')}\n              className=\"coding-rules-quality-profile-activate spacer-left\"\n              modalHeader={translate('coding_rules.activate_in_quality_profile')}\n              onDone={this.handleActivate}\n              profiles={filter(\n                this.props.referencedProfiles,\n                profile => !activations.find(activation => activation.qProfile === profile.key)\n              )}\n              rule={ruleDetails}\n            />\n          )}\n\n          {activations.length > 0 && (\n            <table\n              className=\"coding-rules-detail-quality-profiles width-100\"\n              id=\"coding-rules-detail-quality-profiles\">\n              <tbody>{activations.map(this.renderActivation)}</tbody>\n            </table>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Profile } from '../../../api/quality-profiles';\nimport { deleteRule, getRuleDetails, updateRule } from '../../../api/rules';\nimport { Button } from '../../../components/controls/buttons';\nimport ConfirmButton from '../../../components/controls/ConfirmButton';\nimport HelpTooltip from '../../../components/controls/HelpTooltip';\nimport DeferredSpinner from '../../../components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { Activation, Query } from '../query';\nimport CustomRuleButton from './CustomRuleButton';\nimport RuleDetailsCustomRules from './RuleDetailsCustomRules';\nimport RuleDetailsDescription from './RuleDetailsDescription';\nimport RuleDetailsIssues from './RuleDetailsIssues';\nimport RuleDetailsMeta from './RuleDetailsMeta';\nimport RuleDetailsParameters from './RuleDetailsParameters';\nimport RuleDetailsProfiles from './RuleDetailsProfiles';\n\ninterface Props {\n  allowCustomRules?: boolean;\n  canWrite?: boolean;\n  hideQualityProfiles?: boolean;\n  onActivate: (profile: string, rule: string, activation: Activation) => void;\n  onDeactivate: (profile: string, rule: string) => void;\n  onDelete: (rule: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  referencedProfiles: T.Dict<Profile>;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  ruleKey: string;\n  selectedProfile?: Profile;\n}\n\ninterface State {\n  actives?: T.RuleActivation[];\n  loading: boolean;\n  ruleDetails?: T.RuleDetails;\n}\n\nexport default class RuleDetails extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.setState({ loading: true });\n    this.fetchRuleDetails();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleKey !== this.props.ruleKey) {\n      this.setState({ loading: true });\n      this.fetchRuleDetails();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchRuleDetails = () => {\n    return getRuleDetails({\n      actives: true,\n      key: this.props.ruleKey\n    }).then(\n      ({ actives, rule }) => {\n        if (this.mounted) {\n          this.setState({ actives, loading: false, ruleDetails: rule });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleRuleChange = (ruleDetails: T.RuleDetails) => {\n    if (this.mounted) {\n      this.setState({ ruleDetails });\n    }\n  };\n\n  handleTagsChange = (tags: string[]) => {\n    // optimistic update\n    const oldTags = this.state.ruleDetails && this.state.ruleDetails.tags;\n    this.setState(state =>\n      state.ruleDetails ? { ruleDetails: { ...state.ruleDetails, tags } } : null\n    );\n    updateRule({\n      key: this.props.ruleKey,\n      tags: tags.join()\n    }).catch(() => {\n      if (this.mounted) {\n        this.setState(state =>\n          state.ruleDetails ? { ruleDetails: { ...state.ruleDetails, tags: oldTags } } : null\n        );\n      }\n    });\n  };\n\n  handleActivate = () => {\n    return this.fetchRuleDetails().then(() => {\n      const { ruleKey, selectedProfile } = this.props;\n      if (selectedProfile && this.state.actives) {\n        const active = this.state.actives.find(active => active.qProfile === selectedProfile.key);\n        if (active) {\n          this.props.onActivate(selectedProfile.key, ruleKey, active);\n        }\n      }\n    });\n  };\n\n  handleDeactivate = () => {\n    return this.fetchRuleDetails().then(() => {\n      const { ruleKey, selectedProfile } = this.props;\n      if (\n        selectedProfile &&\n        this.state.actives &&\n        !this.state.actives.find(active => active.qProfile === selectedProfile.key)\n      ) {\n        this.props.onDeactivate(selectedProfile.key, ruleKey);\n      }\n    });\n  };\n\n  handleDelete = () => {\n    return deleteRule({ key: this.props.ruleKey }).then(() =>\n      this.props.onDelete(this.props.ruleKey)\n    );\n  };\n\n  render() {\n    const { ruleDetails } = this.state;\n\n    if (!ruleDetails) {\n      return <div className=\"coding-rule-details\" />;\n    }\n\n    const { allowCustomRules, canWrite, hideQualityProfiles, referencedProfiles } = this.props;\n    const { params = [] } = ruleDetails;\n\n    const isCustom = !!ruleDetails.templateKey;\n    const isEditable = canWrite && !!this.props.allowCustomRules && isCustom;\n\n    return (\n      <div className=\"coding-rule-details\">\n        <DeferredSpinner loading={this.state.loading}>\n          <RuleDetailsMeta\n            canWrite={canWrite}\n            onFilterChange={this.props.onFilterChange}\n            onTagsChange={this.handleTagsChange}\n            referencedRepositories={this.props.referencedRepositories}\n            ruleDetails={ruleDetails}\n          />\n\n          <RuleDetailsDescription\n            canWrite={canWrite}\n            onChange={this.handleRuleChange}\n            ruleDetails={ruleDetails}\n          />\n\n          {params.length > 0 && <RuleDetailsParameters params={params} />}\n\n          {isEditable && (\n            <div className=\"coding-rules-detail-description display-flex-center\">\n              {/* `templateRule` is used to get rule meta data, `customRule` is used to get parameter values */}\n              {/* it's expected to pass the same rule to both parameters */}\n              <CustomRuleButton\n                customRule={ruleDetails}\n                onDone={this.handleRuleChange}\n                templateRule={ruleDetails}>\n                {({ onClick }) => (\n                  <Button\n                    className=\"js-edit-custom\"\n                    id=\"coding-rules-detail-custom-rule-change\"\n                    onClick={onClick}>\n                    {translate('edit')}\n                  </Button>\n                )}\n              </CustomRuleButton>\n              <ConfirmButton\n                confirmButtonText={translate('delete')}\n                isDestructive={true}\n                modalBody={translateWithParameters(\n                  'coding_rules.delete.custom.confirm',\n                  ruleDetails.name\n                )}\n                modalHeader={translate('coding_rules.delete_rule')}\n                onConfirm={this.handleDelete}>\n                {({ onClick }) => (\n                  <>\n                    <Button\n                      className=\"button-red spacer-left js-delete\"\n                      id=\"coding-rules-detail-rule-delete\"\n                      onClick={onClick}>\n                      {translate('delete')}\n                    </Button>\n                    <HelpTooltip\n                      className=\"spacer-left\"\n                      overlay={\n                        <div className=\"big-padded-top big-padded-bottom\">\n                          {translate('coding_rules.custom_rule.removal')}\n                        </div>\n                      }\n                    />\n                  </>\n                )}\n              </ConfirmButton>\n            </div>\n          )}\n\n          {ruleDetails.isTemplate && (\n            <RuleDetailsCustomRules\n              canChange={allowCustomRules && canWrite}\n              ruleDetails={ruleDetails}\n            />\n          )}\n\n          {!ruleDetails.isTemplate && !hideQualityProfiles && (\n            <RuleDetailsProfiles\n              activations={this.state.actives}\n              canWrite={canWrite}\n              onActivate={this.handleActivate}\n              onDeactivate={this.handleDeactivate}\n              referencedProfiles={referencedProfiles}\n              ruleDetails={ruleDetails}\n            />\n          )}\n\n          {!ruleDetails.isTemplate && ruleDetails.type !== 'SECURITY_HOTSPOT' && (\n            <RuleDetailsIssues ruleDetails={ruleDetails} />\n          )}\n        </DeferredSpinner>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { deactivateRule, Profile } from '../../../api/quality-profiles';\nimport { Button } from '../../../components/controls/buttons';\nimport ConfirmButton from '../../../components/controls/ConfirmButton';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport IssueTypeIcon from '../../../components/icons/IssueTypeIcon';\nimport SeverityIcon from '../../../components/icons/SeverityIcon';\nimport TagsList from '../../../components/tags/TagsList';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { getRuleUrl } from '../../../helpers/urls';\nimport { Activation, Query } from '../query';\nimport ActivationButton from './ActivationButton';\nimport RuleInheritanceIcon from './RuleInheritanceIcon';\nimport SimilarRulesFilter from './SimilarRulesFilter';\n\ninterface Props {\n  activation?: Activation;\n  canWrite?: boolean;\n  isLoggedIn: boolean;\n  onActivate: (profile: string, rule: string, activation: Activation) => void;\n  onDeactivate: (profile: string, rule: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  onOpen: (ruleKey: string) => void;\n  rule: T.Rule;\n  selected: boolean;\n  selectedProfile?: Profile;\n}\n\nexport default class RuleListItem extends React.PureComponent<Props> {\n  handleDeactivate = () => {\n    if (this.props.selectedProfile) {\n      const data = {\n        key: this.props.selectedProfile.key,\n        rule: this.props.rule.key\n      };\n      deactivateRule(data).then(\n        () => this.props.onDeactivate(data.key, data.rule),\n        () => {}\n      );\n    }\n  };\n\n  handleActivate = (severity: string) => {\n    if (this.props.selectedProfile) {\n      this.props.onActivate(this.props.selectedProfile.key, this.props.rule.key, {\n        severity,\n        inherit: 'NONE'\n      });\n    }\n    return Promise.resolve();\n  };\n\n  handleNameClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    // cmd(ctrl) + click should open a rule permalink in a new tab\n    const isLeftClickEvent = event.button === 0;\n    const isModifiedEvent = !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n    if (isModifiedEvent || !isLeftClickEvent) {\n      return;\n    }\n\n    event.preventDefault();\n    this.props.onOpen(this.props.rule.key);\n  };\n\n  renderActivation = () => {\n    const { activation, selectedProfile } = this.props;\n    if (!activation) {\n      return null;\n    }\n\n    return (\n      <td className=\"coding-rule-table-meta-cell coding-rule-activation\">\n        <SeverityIcon severity={activation.severity} />\n        {selectedProfile && selectedProfile.parentName && (\n          <>\n            {activation.inherit === 'OVERRIDES' && (\n              <Tooltip\n                overlay={translateWithParameters(\n                  'coding_rules.overrides',\n                  selectedProfile.name,\n                  selectedProfile.parentName\n                )}>\n                <RuleInheritanceIcon\n                  className=\"little-spacer-left\"\n                  inheritance={activation.inherit}\n                />\n              </Tooltip>\n            )}\n            {activation.inherit === 'INHERITED' && (\n              <Tooltip\n                overlay={translateWithParameters(\n                  'coding_rules.inherits',\n                  selectedProfile.name,\n                  selectedProfile.parentName\n                )}>\n                <RuleInheritanceIcon\n                  className=\"little-spacer-left\"\n                  inheritance={activation.inherit}\n                />\n              </Tooltip>\n            )}\n          </>\n        )}\n      </td>\n    );\n  };\n\n  renderActions = () => {\n    const { activation, isLoggedIn, rule, selectedProfile } = this.props;\n    if (!selectedProfile || !isLoggedIn) {\n      return null;\n    }\n\n    const canCopy = selectedProfile.actions && selectedProfile.actions.copy;\n    if (selectedProfile.isBuiltIn && canCopy) {\n      return (\n        <td className=\"coding-rule-table-meta-cell coding-rule-activation-actions\">\n          <Tooltip overlay={translate('coding_rules.need_extend_or_copy')}>\n            <Button className=\"coding-rules-detail-quality-profile-deactivate button-red disabled\">\n              {translate('coding_rules', activation ? 'deactivate' : 'activate')}\n            </Button>\n          </Tooltip>\n        </td>\n      );\n    }\n\n    const canEdit = selectedProfile.actions && selectedProfile.actions.edit;\n    if (!canEdit) {\n      return null;\n    }\n\n    if (activation) {\n      return (\n        <td className=\"coding-rule-table-meta-cell coding-rule-activation-actions\">\n          {activation.inherit === 'NONE' ? (\n            <ConfirmButton\n              confirmButtonText={translate('yes')}\n              modalBody={translate('coding_rules.deactivate.confirm')}\n              modalHeader={translate('coding_rules.deactivate')}\n              onConfirm={this.handleDeactivate}>\n              {({ onClick }) => (\n                <Button\n                  className=\"coding-rules-detail-quality-profile-deactivate button-red\"\n                  onClick={onClick}>\n                  {translate('coding_rules.deactivate')}\n                </Button>\n              )}\n            </ConfirmButton>\n          ) : (\n            <Tooltip overlay={translate('coding_rules.can_not_deactivate')}>\n              <Button className=\"coding-rules-detail-quality-profile-deactivate button-red disabled\">\n                {translate('coding_rules.deactivate')}\n              </Button>\n            </Tooltip>\n          )}\n        </td>\n      );\n    }\n\n    return (\n      <td className=\"coding-rule-table-meta-cell coding-rule-activation-actions\">\n        {!rule.isTemplate && (\n          <ActivationButton\n            buttonText={translate('coding_rules.activate')}\n            className=\"coding-rules-detail-quality-profile-activate\"\n            modalHeader={translate('coding_rules.activate_in_quality_profile')}\n            onDone={this.handleActivate}\n            profiles={[selectedProfile]}\n            rule={rule}\n          />\n        )}\n      </td>\n    );\n  };\n\n  render() {\n    const { rule, selected } = this.props;\n    const allTags = [...(rule.tags || []), ...(rule.sysTags || [])];\n    return (\n      <div className={classNames('coding-rule', { selected })} data-rule={rule.key}>\n        <table className=\"coding-rule-table\">\n          <tbody>\n            <tr>\n              {this.renderActivation()}\n\n              <td>\n                <div className=\"coding-rule-title\">\n                  <Link\n                    className=\"link-no-underline\"\n                    onClick={this.handleNameClick}\n                    to={getRuleUrl(rule.key)}>\n                    {rule.name}\n                  </Link>\n                  {rule.isTemplate && (\n                    <Tooltip overlay={translate('coding_rules.rule_template.title')}>\n                      <span className=\"badge spacer-left\">\n                        {translate('coding_rules.rule_template')}\n                      </span>\n                    </Tooltip>\n                  )}\n                </div>\n              </td>\n\n              <td className=\"coding-rule-table-meta-cell\">\n                <div className=\"display-flex-center coding-rule-meta\">\n                  {rule.status !== 'READY' && (\n                    <span className=\"spacer-left badge badge-error\">\n                      {translate('rules.status', rule.status)}\n                    </span>\n                  )}\n                  <span className=\"display-inline-flex-center spacer-left note\">\n                    {rule.langName}\n                  </span>\n                  <Tooltip overlay={translate('coding_rules.type.tooltip', rule.type)}>\n                    <span className=\"display-inline-flex-center spacer-left note\">\n                      <IssueTypeIcon query={rule.type} />\n                      <span className=\"little-spacer-left text-middle\">\n                        {translate('issue.type', rule.type)}\n                      </span>\n                    </span>\n                  </Tooltip>\n                  {allTags.length > 0 && (\n                    <TagsList\n                      allowUpdate={false}\n                      className=\"display-inline-flex-center note spacer-left\"\n                      tags={allTags}\n                    />\n                  )}\n                  <SimilarRulesFilter onFilterChange={this.props.onFilterChange} rule={rule} />\n                </div>\n              </td>\n\n              {this.renderActions()}\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport { keyBy } from 'lodash';\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { connect } from 'react-redux';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport { Profile, searchQualityProfiles } from '../../../api/quality-profiles';\nimport { getRulesApp, searchRules } from '../../../api/rules';\nimport A11ySkipTarget from '../../../app/components/a11y/A11ySkipTarget';\nimport Suggestions from '../../../app/components/embed-docs-modal/Suggestions';\nimport FiltersHeader from '../../../components/common/FiltersHeader';\nimport ScreenPositionHelper from '../../../components/common/ScreenPositionHelper';\nimport ListFooter from '../../../components/controls/ListFooter';\nimport SearchBox from '../../../components/controls/SearchBox';\nimport BackIcon from '../../../components/icons/BackIcon';\nimport '../../../components/search-navigator.css';\nimport { translate } from '../../../helpers/l10n';\nimport {\n  addSideBarClass,\n  addWhitePageClass,\n  removeSideBarClass,\n  removeWhitePageClass\n} from '../../../helpers/pages';\nimport { scrollToElement } from '../../../helpers/scrolling';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { getCurrentUser, getLanguages, Store } from '../../../store/rootReducer';\nimport { SecurityStandard } from '../../../types/security';\nimport {\n  shouldOpenSonarSourceSecurityFacet,\n  shouldOpenStandardsChildFacet,\n  shouldOpenStandardsFacet,\n  STANDARDS\n} from '../../issues/utils';\nimport {\n  Activation,\n  Actives,\n  areQueriesEqual,\n  FacetKey,\n  Facets,\n  getAppFacet,\n  getOpen,\n  getServerFacet,\n  hasRuleKey,\n  OpenFacets,\n  parseQuery,\n  Query,\n  serializeQuery,\n  shouldRequestFacet\n} from '../query';\nimport '../styles.css';\nimport BulkChange from './BulkChange';\nimport FacetsList from './FacetsList';\nimport PageActions from './PageActions';\nimport RuleDetails from './RuleDetails';\nimport RuleListItem from './RuleListItem';\n\nconst PAGE_SIZE = 100;\nconst MAX_SEARCH_LENGTH = 200;\nconst LIMIT_BEFORE_LOAD_MORE = 5;\n\ninterface Props extends WithRouterProps {\n  currentUser: T.CurrentUser;\n  languages: T.Languages;\n}\n\ninterface State {\n  actives?: Actives;\n  canWrite?: boolean;\n  facets?: Facets;\n  loading: boolean;\n  openFacets: OpenFacets;\n  openRule?: T.Rule;\n  paging?: T.Paging;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  rules: T.Rule[];\n  selected?: string;\n  usingPermalink?: boolean;\n}\n\nexport class App extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const query = parseQuery(props.location.query);\n    this.state = {\n      loading: true,\n      openFacets: {\n        languages: true,\n        owaspTop10: shouldOpenStandardsChildFacet({}, query, SecurityStandard.OWASP_TOP10),\n        sansTop25: shouldOpenStandardsChildFacet({}, query, SecurityStandard.SANS_TOP25),\n        sonarsourceSecurity: shouldOpenSonarSourceSecurityFacet({}, query),\n        standards: shouldOpenStandardsFacet({}, query),\n        types: true\n      },\n      query,\n      referencedProfiles: {},\n      referencedRepositories: {},\n      rules: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    addWhitePageClass();\n    addSideBarClass();\n    this.attachShortcuts();\n    this.fetchInitialData();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    this.setState(({ rules, selected }) => {\n      const openRule = this.getOpenRule(nextProps, rules);\n      return {\n        openRule,\n        usingPermalink: hasRuleKey(nextProps.location.query),\n        query: parseQuery(nextProps.location.query),\n        selected: openRule ? openRule.key : selected\n      };\n    });\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    if (!areQueriesEqual(prevProps.location.query, this.props.location.query)) {\n      this.fetchFirstRules();\n    }\n    if (\n      !this.state.openRule &&\n      (prevState.selected !== this.state.selected || prevState.openRule)\n    ) {\n      // if user simply selected another issue\n      // or if user went from the source code back to the list of issues\n      this.scrollToSelectedRule();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    removeWhitePageClass();\n    removeSideBarClass();\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    key.setScope('coding-rules');\n    key('up', 'coding-rules', () => {\n      this.selectPreviousRule();\n      return false;\n    });\n    key('down', 'coding-rules', () => {\n      this.selectNextRule();\n      return false;\n    });\n    key('right', 'coding-rules', () => {\n      this.openSelectedRule();\n      return false;\n    });\n    key('left', 'coding-rules', () => {\n      this.handleBack();\n      return false;\n    });\n  };\n\n  detachShortcuts = () => key.deleteScope('coding-rules');\n\n  getOpenRule = (props: Props, rules: T.Rule[]) => {\n    const open = getOpen(props.location.query);\n    return open && rules.find(rule => rule.key === open);\n  };\n\n  getFacetsToFetch = () => {\n    const { openFacets } = this.state;\n    return Object.keys(openFacets)\n      .filter((facet: FacetKey) => openFacets[facet])\n      .filter((facet: FacetKey) => shouldRequestFacet(facet))\n      .map((facet: FacetKey) => getServerFacet(facet));\n  };\n\n  getFieldsToFetch = () => {\n    const fields = [\n      'isTemplate',\n      'name',\n      'lang',\n      'langName',\n      'severity',\n      'status',\n      'sysTags',\n      'tags',\n      'templateKey'\n    ];\n    if (this.state.query.profile) {\n      fields.push('actives', 'params');\n    }\n    return fields;\n  };\n\n  getSearchParameters = () => ({\n    f: this.getFieldsToFetch().join(),\n    facets: this.getFacetsToFetch().join(),\n    ps: PAGE_SIZE,\n    s: 'name',\n    ...serializeQuery(this.state.query)\n  });\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  fetchInitialData = () => {\n    this.setState({ loading: true });\n    Promise.all([getRulesApp(), searchQualityProfiles()]).then(\n      ([{ canWrite, repositories }, { profiles }]) => {\n        this.setState({\n          canWrite,\n          referencedProfiles: keyBy(profiles, 'key'),\n          referencedRepositories: keyBy(repositories, 'key')\n        });\n        this.fetchFirstRules();\n      },\n      this.stopLoading\n    );\n  };\n\n  makeFetchRequest = (query?: T.RawQuery) =>\n    searchRules({ ...this.getSearchParameters(), ...query }).then(\n      ({ actives: rawActives, facets: rawFacets, p, ps, rules, total }) => {\n        const actives = rawActives && parseActives(rawActives);\n        const facets = rawFacets && parseFacets(rawFacets);\n        const paging = { pageIndex: p, pageSize: ps, total };\n        return { actives, facets, paging, rules };\n      }\n    );\n\n  fetchFirstRules = (query?: T.RawQuery) => {\n    this.setState({ loading: true });\n    this.makeFetchRequest(query).then(({ actives, facets, paging, rules }) => {\n      if (this.mounted) {\n        const openRule = this.getOpenRule(this.props, rules);\n        const usingPermalink = hasRuleKey(this.props.location.query);\n        const selected = rules.length > 0 ? (openRule && openRule.key) || rules[0].key : undefined;\n        this.setState({\n          actives,\n          facets,\n          loading: false,\n          openRule,\n          paging,\n          rules,\n          selected,\n          usingPermalink\n        });\n      }\n    }, this.stopLoading);\n  };\n\n  fetchMoreRules = () => {\n    const { paging } = this.state;\n    if (paging) {\n      this.setState({ loading: true });\n      const nextPage = paging.pageIndex + 1;\n      this.makeFetchRequest({ p: nextPage, facets: undefined }).then(\n        ({ actives, paging, rules }) => {\n          if (this.mounted) {\n            this.setState((state: State) => ({\n              actives: { ...state.actives, ...actives },\n              loading: false,\n              paging,\n              rules: [...state.rules, ...rules]\n            }));\n          }\n        },\n        this.stopLoading\n      );\n    }\n  };\n\n  fetchFacet = (facet: FacetKey) => {\n    this.makeFetchRequest({ ps: 1, facets: getServerFacet(facet) }).then(({ facets }) => {\n      if (this.mounted) {\n        this.setState(state => ({ facets: { ...state.facets, ...facets }, loading: false }));\n      }\n    }, this.stopLoading);\n  };\n\n  getSelectedIndex = ({ selected, rules } = this.state) => {\n    const index = rules.findIndex(rule => rule.key === selected);\n    return index !== -1 ? index : undefined;\n  };\n\n  selectNextRule = () => {\n    const { rules, loading, paging } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    if (selectedIndex !== undefined) {\n      if (\n        selectedIndex > rules.length - LIMIT_BEFORE_LOAD_MORE &&\n        !loading &&\n        paging &&\n        rules.length < paging.total\n      ) {\n        this.fetchMoreRules();\n      }\n      if (rules && selectedIndex < rules.length - 1) {\n        if (this.state.openRule) {\n          this.openRule(rules[selectedIndex + 1].key);\n        } else {\n          this.setState({ selected: rules[selectedIndex + 1].key });\n        }\n      }\n    }\n  };\n\n  selectPreviousRule = () => {\n    const { rules } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    if (rules && selectedIndex !== undefined && selectedIndex > 0) {\n      if (this.state.openRule) {\n        this.openRule(rules[selectedIndex - 1].key);\n      } else {\n        this.setState({ selected: rules[selectedIndex - 1].key });\n      }\n    }\n  };\n\n  getRulePath = (rule: string) => ({\n    pathname: this.props.location.pathname,\n    query: { ...serializeQuery(this.state.query), open: rule }\n  });\n\n  openRule = (rule: string) => {\n    const path = this.getRulePath(rule);\n    if (this.state.openRule) {\n      this.props.router.replace(path);\n    } else {\n      this.props.router.push(path);\n    }\n  };\n\n  openSelectedRule = () => {\n    const { selected } = this.state;\n    if (selected) {\n      this.openRule(selected);\n    }\n  };\n\n  closeRule = () => {\n    this.props.router.push({\n      pathname: this.props.location.pathname,\n      query: {\n        ...serializeQuery(this.state.query),\n        open: undefined\n      }\n    });\n    this.scrollToSelectedRule(false);\n  };\n\n  scrollToSelectedRule = (smooth = true) => {\n    const { selected } = this.state;\n    if (selected) {\n      const element = document.querySelector(`[data-rule=\"${selected}\"]`);\n      if (element) {\n        scrollToElement(element, { topOffset: 150, bottomOffset: 100, smooth });\n      }\n    }\n  };\n\n  getRuleActivation = (rule: string) => {\n    const { actives, query } = this.state;\n    if (actives && actives[rule] && query.profile) {\n      return actives[rule][query.profile];\n    } else {\n      return undefined;\n    }\n  };\n\n  getSelectedProfile = () => {\n    const { query, referencedProfiles } = this.state;\n    if (query.profile) {\n      return referencedProfiles[query.profile];\n    } else {\n      return undefined;\n    }\n  };\n\n  closeFacet = (facet: string) =>\n    this.setState(state => ({\n      openFacets: { ...state.openFacets, [facet]: false }\n    }));\n\n  handleRuleOpen = (ruleKey: string) => {\n    this.props.router.push(this.getRulePath(ruleKey));\n  };\n\n  handleBack = (event?: React.SyntheticEvent<HTMLAnchorElement>) => {\n    const { usingPermalink } = this.state;\n\n    if (event) {\n      event.preventDefault();\n      event.currentTarget.blur();\n    }\n\n    if (usingPermalink) {\n      this.handleReset();\n    } else {\n      this.closeRule();\n    }\n  };\n\n  handleFilterChange = (changes: Partial<Query>) => {\n    this.props.router.push({\n      pathname: this.props.location.pathname,\n      query: serializeQuery({ ...this.state.query, ...changes })\n    });\n\n    this.setState(({ openFacets }) => ({\n      openFacets: {\n        ...openFacets,\n        sonarsourceSecurity: shouldOpenSonarSourceSecurityFacet(openFacets, changes),\n        standards: shouldOpenStandardsFacet(openFacets, changes)\n      }\n    }));\n  };\n\n  handleFacetToggle = (property: string) => {\n    this.setState(state => {\n      const willOpenProperty = !state.openFacets[property];\n      const newState = {\n        loading: state.loading,\n        openFacets: { ...state.openFacets, [property]: willOpenProperty }\n      };\n\n      // Try to open sonarsource security \"subfacet\" by default if the standard facet is open\n      if (willOpenProperty && property === STANDARDS) {\n        newState.openFacets.sonarsourceSecurity = shouldOpenSonarSourceSecurityFacet(\n          newState.openFacets,\n          state.query\n        );\n        // Force loading of sonarsource security facet data\n        property = newState.openFacets.sonarsourceSecurity ? 'sonarsourceSecurity' : property;\n      }\n\n      if (shouldRequestFacet(property) && (!state.facets || !state.facets[property])) {\n        newState.loading = true;\n        this.fetchFacet(property);\n      }\n\n      return newState;\n    });\n  };\n\n  handleReload = () => this.fetchFirstRules();\n\n  handleReset = () => this.props.router.push({ pathname: this.props.location.pathname });\n\n  /** Tries to take rule by index, or takes the last one  */\n  pickRuleAround = (rules: T.Rule[], selectedIndex: number | undefined) => {\n    if (selectedIndex === undefined || rules.length === 0) {\n      return undefined;\n    }\n    if (selectedIndex >= 0 && selectedIndex < rules.length) {\n      return rules[selectedIndex].key;\n    }\n    return rules[rules.length - 1].key;\n  };\n\n  handleRuleDelete = (ruleKey: string) => {\n    if (this.state.query.ruleKey === ruleKey) {\n      this.handleReset();\n    } else {\n      this.setState(state => {\n        const rules = state.rules.filter(rule => rule.key !== ruleKey);\n        const selectedIndex = this.getSelectedIndex(state);\n        const selected = this.pickRuleAround(rules, selectedIndex);\n        return { rules, selected };\n      });\n      this.closeRule();\n    }\n  };\n\n  handleRuleActivate = (profile: string, rule: string, activation: Activation) =>\n    this.setState((state: State) => {\n      const { actives = {} } = state;\n      if (!actives[rule]) {\n        return { actives: { ...actives, [rule]: { [profile]: activation } } };\n      }\n\n      return { actives: { ...actives, [rule]: { ...actives[rule], [profile]: activation } } };\n    });\n\n  handleRuleDeactivate = (profile: string, rule: string) =>\n    this.setState(state => {\n      const { actives } = state;\n      if (actives && actives[rule]) {\n        const newRule = { ...actives[rule] };\n        delete newRule[profile];\n        return { actives: { ...actives, [rule]: newRule } };\n      }\n      return null;\n    });\n\n  handleSearch = (searchQuery: string) => this.handleFilterChange({ searchQuery });\n\n  isFiltered = () => Object.keys(serializeQuery(this.state.query)).length > 0;\n\n  renderBulkButton = () => {\n    const { currentUser, languages } = this.props;\n    const { canWrite, paging, query, referencedProfiles } = this.state;\n    const canUpdate = canWrite || Object.values(referencedProfiles).some(p => p.actions?.edit);\n\n    if (!isLoggedIn(currentUser) || !canUpdate) {\n      return <div />;\n    }\n\n    return (\n      paging && (\n        <BulkChange\n          languages={languages}\n          query={query}\n          referencedProfiles={referencedProfiles}\n          total={paging.total}\n        />\n      )\n    );\n  };\n\n  render() {\n    const { paging, rules } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n\n    return (\n      <>\n        <Suggestions suggestions=\"coding_rules\" />\n        <Helmet defer={false} title={translate('coding_rules.page')}>\n          <meta content=\"noindex\" name=\"robots\" />\n        </Helmet>\n        <div className=\"layout-page\" id=\"coding-rules-page\">\n          <ScreenPositionHelper className=\"layout-page-side-outer\">\n            {({ top }) => (\n              <div className=\"layout-page-side\" style={{ top }}>\n                <div className=\"layout-page-side-inner\">\n                  <div className=\"layout-page-filters\">\n                    <A11ySkipTarget\n                      anchor=\"rules_filters\"\n                      label={translate('coding_rules.skip_to_filters')}\n                      weight={10}\n                    />\n                    <FiltersHeader displayReset={this.isFiltered()} onReset={this.handleReset} />\n                    <SearchBox\n                      className=\"spacer-bottom\"\n                      id=\"coding-rules-search\"\n                      maxLength={MAX_SEARCH_LENGTH}\n                      minLength={2}\n                      onChange={this.handleSearch}\n                      placeholder={translate('search.search_for_rules')}\n                      value={this.state.query.searchQuery || ''}\n                    />\n                    <FacetsList\n                      facets={this.state.facets}\n                      onFacetToggle={this.handleFacetToggle}\n                      onFilterChange={this.handleFilterChange}\n                      openFacets={this.state.openFacets}\n                      query={this.state.query}\n                      referencedProfiles={this.state.referencedProfiles}\n                      referencedRepositories={this.state.referencedRepositories}\n                      selectedProfile={this.getSelectedProfile()}\n                    />\n                  </div>\n                </div>\n              </div>\n            )}\n          </ScreenPositionHelper>\n\n          <div className=\"layout-page-main\">\n            <div className=\"layout-page-header-panel layout-page-main-header\">\n              <div className=\"layout-page-header-panel-inner layout-page-main-header-inner\">\n                <div className=\"layout-page-main-inner\">\n                  <A11ySkipTarget anchor=\"rules_main\" />\n                  <div className=\"display-flex-space-between\">\n                    {this.state.openRule ? (\n                      <a\n                        className=\"js-back display-inline-flex-center link-no-underline\"\n                        href=\"#\"\n                        onClick={this.handleBack}>\n                        <BackIcon className=\"spacer-right\" />\n                        {this.state.usingPermalink\n                          ? translate('coding_rules.see_all')\n                          : translate('coding_rules.return_to_list')}\n                      </a>\n                    ) : (\n                      this.renderBulkButton()\n                    )}\n                    {!this.state.usingPermalink && (\n                      <PageActions\n                        loading={this.state.loading}\n                        onReload={this.handleReload}\n                        paging={paging}\n                        selectedIndex={selectedIndex}\n                      />\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"layout-page-main-inner\">\n              {this.state.openRule ? (\n                <RuleDetails\n                  allowCustomRules={true}\n                  canWrite={this.state.canWrite}\n                  onActivate={this.handleRuleActivate}\n                  onDeactivate={this.handleRuleDeactivate}\n                  onDelete={this.handleRuleDelete}\n                  onFilterChange={this.handleFilterChange}\n                  referencedProfiles={this.state.referencedProfiles}\n                  referencedRepositories={this.state.referencedRepositories}\n                  ruleKey={this.state.openRule.key}\n                  selectedProfile={this.getSelectedProfile()}\n                />\n              ) : (\n                <>\n                  {rules.map(rule => (\n                    <RuleListItem\n                      activation={this.getRuleActivation(rule.key)}\n                      canWrite={this.state.canWrite}\n                      isLoggedIn={isLoggedIn(this.props.currentUser)}\n                      key={rule.key}\n                      onActivate={this.handleRuleActivate}\n                      onDeactivate={this.handleRuleDeactivate}\n                      onFilterChange={this.handleFilterChange}\n                      onOpen={this.handleRuleOpen}\n                      rule={rule}\n                      selected={rule.key === this.state.selected}\n                      selectedProfile={this.getSelectedProfile()}\n                    />\n                  ))}\n                  {paging !== undefined && (\n                    <ListFooter\n                      count={rules.length}\n                      loadMore={this.fetchMoreRules}\n                      ready={!this.state.loading}\n                      total={paging.total}\n                    />\n                  )}\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nfunction parseActives(rawActives: T.Dict<T.RuleActivation[]>) {\n  const actives: Actives = {};\n  for (const [rule, activations] of Object.entries(rawActives)) {\n    actives[rule] = {};\n    for (const { inherit, qProfile, severity } of activations) {\n      actives[rule][qProfile] = { inherit, severity };\n    }\n  }\n  return actives;\n}\n\nfunction parseFacets(rawFacets: { property: string; values: { count: number; val: string }[] }[]) {\n  const facets: Facets = {};\n  for (const rawFacet of rawFacets) {\n    const values: T.Dict<number> = {};\n    for (const rawValue of rawFacet.values) {\n      values[rawValue.val] = rawValue.count;\n    }\n    facets[getAppFacet(rawFacet.property)] = values;\n  }\n  return facets;\n}\n\nconst mapStateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state),\n  languages: getLanguages(state)\n});\n\nexport default withRouter(connect(mapStateToProps)(App));\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ReactSelectClass, {\n  ReactAsyncSelectProps,\n  ReactCreatableSelectProps,\n  ReactSelectProps\n} from 'react-select';\nimport { lazyLoadComponent } from '../lazyLoadComponent';\nimport { ClearButton } from './buttons';\nimport './Select.css';\n\nconst ReactSelectLib = import('react-select');\nconst ReactSelect = lazyLoadComponent(() => ReactSelectLib);\nconst ReactCreatable = lazyLoadComponent(() =>\n  ReactSelectLib.then(lib => ({ default: lib.Creatable }))\n);\nconst ReactAsync = lazyLoadComponent(() => ReactSelectLib.then(lib => ({ default: lib.Async })));\n\nfunction renderInput() {\n  return <ClearButton className=\"button-tiny spacer-left text-middle\" iconProps={{ size: 12 }} />;\n}\n\nexport interface WithInnerRef {\n  innerRef?: React.Ref<ReactSelectClass<unknown>>;\n}\n\nexport default function Select({ innerRef, ...props }: WithInnerRef & ReactSelectProps) {\n  // hide the \"x\" icon when select is empty\n  const clearable = props.clearable ? Boolean(props.value) : false;\n  return (\n    <ReactSelect {...props} clearable={clearable} clearRenderer={renderInput} ref={innerRef} />\n  );\n}\n\nexport function Creatable(props: ReactCreatableSelectProps) {\n  return <ReactCreatable {...props} clearRenderer={renderInput} />;\n}\n\nexport function AsyncSelect(props: ReactAsyncSelectProps & WithInnerRef) {\n  return <ReactAsync {...props} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Modal, { ModalProps } from './Modal';\n\nexport interface ChildrenProps {\n  onCloseClick: (event?: React.SyntheticEvent<HTMLElement>) => void;\n  onFormSubmit: (event: React.SyntheticEvent<HTMLFormElement>) => void;\n  onSubmitClick: (event?: React.SyntheticEvent<HTMLElement>) => void;\n  submitting: boolean;\n}\n\ninterface Props extends ModalProps {\n  children: (props: ChildrenProps) => React.ReactNode;\n  header: string;\n  onClose: () => void;\n  onSubmit: () => void | Promise<void | Response>;\n}\n\ninterface State {\n  submitting: boolean;\n}\n\nexport default class SimpleModal extends React.Component<Props, State> {\n  mounted = false;\n  state: State = { submitting: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopSubmitting = () => {\n    if (this.mounted) {\n      this.setState({ submitting: false });\n    }\n  };\n\n  handleCloseClick = (event?: React.SyntheticEvent<HTMLElement>) => {\n    if (event) {\n      event.preventDefault();\n      event.currentTarget.blur();\n    }\n    this.props.onClose();\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.submit();\n  };\n\n  handleSubmitClick = (event?: React.SyntheticEvent<HTMLElement>) => {\n    if (event) {\n      event.preventDefault();\n      event.currentTarget.blur();\n    }\n    this.submit();\n  };\n\n  submit = () => {\n    const result = this.props.onSubmit();\n    if (result) {\n      this.setState({ submitting: true });\n      result.then(this.stopSubmitting, this.stopSubmitting);\n    }\n  };\n\n  render() {\n    const { children, header, onClose, onSubmit, ...modalProps } = this.props;\n    return (\n      <Modal contentLabel={header} onRequestClose={onClose} {...modalProps}>\n        {children({\n          onCloseClick: this.handleCloseClick,\n          onFormSubmit: this.handleFormSubmit,\n          onSubmitClick: this.handleSubmitClick,\n          submitting: this.state.submitting\n        })}\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from '../../helpers/l10n';\n\nexport interface MandatoryFieldMarkerProps {\n  className?: string;\n}\n\nexport default function MandatoryFieldMarker({ className }: MandatoryFieldMarkerProps) {\n  return (\n    <em\n      aria-label={translate('field_required')}\n      className={classNames('mandatory little-spacer-left', className)}>\n      *\n    </em>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { translate } from '../../helpers/l10n';\n\nexport interface MandatoryFieldsExplanationProps {\n  className?: string;\n}\n\nexport default function MandatoryFieldsExplanation({ className }: MandatoryFieldsExplanationProps) {\n  return (\n    <div aria-hidden={true} className={classNames('text-muted', className)}>\n      <FormattedMessage\n        id=\"fields_marked_with_x_required\"\n        defaultMessage={translate('fields_marked_with_x_required')}\n        values={{ star: <em className=\"mandatory\">*</em> }}\n      />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\nimport { formatMeasure } from '../../helpers/measures';\nimport DeferredSpinner from '../ui/DeferredSpinner';\nimport { Button } from './buttons';\n\nexport interface ListFooterProps {\n  count: number;\n  className?: string;\n  loading?: boolean;\n  loadMore?: () => void;\n  needReload?: boolean;\n  reload?: () => void;\n  ready?: boolean;\n  total?: number;\n}\n\nexport default function ListFooter(props: ListFooterProps) {\n  const { className, count, loading, needReload, total, ready = true } = props;\n  const hasMore = total && total > count;\n\n  let button;\n  if (needReload && props.reload) {\n    button = (\n      <Button className=\"spacer-left\" data-test=\"reload\" disabled={loading} onClick={props.reload}>\n        {translate('reload')}\n      </Button>\n    );\n  } else if (hasMore && props.loadMore) {\n    button = (\n      <Button\n        className=\"spacer-left\"\n        disabled={loading}\n        data-test=\"show-more\"\n        onClick={props.loadMore}>\n        {translate('show_more')}\n      </Button>\n    );\n  }\n\n  return (\n    <footer\n      className={classNames('spacer-top note text-center', { 'new-loading': !ready }, className)}>\n      {translateWithParameters(\n        'x_of_y_shown',\n        formatMeasure(count, 'INT', null),\n        formatMeasure(total, 'INT', null)\n      )}\n      {button}\n      {loading && <DeferredSpinner className=\"text-bottom spacer-left position-absolute\" />}\n    </footer>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Select.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".Select{position:relative;display:inline-block;vertical-align:middle;font-size:12px;text-align:left}.Select,.Select div,.Select input,.Select span{box-sizing:border-box}.Select.is-disabled>.Select-control{background-color:#ebebeb!important;border-color:#ddd!important}.Select.is-disabled>.Select-control:hover{box-shadow:none!important}.Select.is-disabled .Select-arrow-zone{cursor:not-allowed!important;pointer-events:none!important}.Select.is-disabled .Select-placeholder,.Select.is-disabled .Select-value{color:#bbb!important}.Select-control{position:relative;display:table;width:100%;height:24px;line-height:22px;border:1px solid #cdcdcd;border-collapse:separate;border-radius:2px;background-color:#fff;color:#333;cursor:default;outline:none;overflow:hidden}.is-searchable.is-open>.Select-control{cursor:text}.is-open>.Select-control{border-bottom-right-radius:0;border-bottom-left-radius:0;background:#fff}.is-open>.Select-control>.Select-arrow{border-color:transparent transparent #999;border-width:0 5px 5px}.is-searchable.is-focused:not(.is-open)>.Select-control{cursor:text}.is-focused:not(.is-open)>.Select-control{border-color:#4b9fd5}.Select-placeholder{color:#666}.Select-placeholder,:not(.Select--multi)>.Select-control .Select-value{bottom:0;left:0;line-height:23px;padding-left:8px;padding-right:24px;position:absolute;right:0;top:0;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.Select-value [class^=icon-]{padding-top:5px}.Select-value img,.Select-value svg{padding-top:3px}.Select-option [class^=icon-],.Select-option img,.Select-option svg{padding-top:2px}.has-value.is-pseudo-focused:not(.Select--multi)>.Select-control>.Select-value .Select-value-label,.has-value:not(.Select--multi)>.Select-control>.Select-value .Select-value-label{color:#333}.has-value.is-pseudo-focused:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label,.has-value:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label{cursor:pointer;text-decoration:none}.has-value.is-pseudo-focused:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label:focus,.has-value.is-pseudo-focused:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label:hover,.has-value:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label:focus,.has-value:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label:hover{color:#007eff;outline:none;text-decoration:underline}.Select-input{vertical-align:top;height:22px;padding-left:8px;padding-right:8px;outline:none}.Select-input>input{background:none transparent;border:0;cursor:default;display:inline-block;font-family:inherit;font-size:12px;height:22px;margin:0;outline:none;padding:0;box-shadow:none;-webkit-appearance:none}.is-focused .Select-input>input{cursor:text}.has-value.is-pseudo-focused .Select-input{opacity:0}.Select-control:not(.is-searchable)>.Select-input{outline:none}.Select-loading-zone{cursor:pointer;display:table-cell;position:relative;text-align:center;vertical-align:middle;width:16px}.Select-loading{animation:Select-animation-spin .4s linear infinite;box-sizing:border-box;border-radius:50%;border:2px solid #ccc;border-right-color:#333;display:inline-block}.Select-clear-zone,.Select-loading{width:16px;height:16px;position:relative;vertical-align:middle}.Select-clear-zone{animation:Select-animation-fadeIn .2s;color:#999;cursor:pointer;display:table-cell;text-align:center;padding-right:4px}.Select-clear-zone:hover .Select-clear{background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTQgMTQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxLjQxNCI+PHBhdGggZD0iTTEzLjk2OSAxLjQwNkw4LjM5IDYuOTg0bDUuNTc4IDUuNTc5LTEuNDA2IDEuNDA2TDYuOTg0IDguMzlsLTUuNTc4IDUuNTc4TDAgMTIuNTYzbDUuNTc4LTUuNTc5TDAgMS40MDYgMS40MDYgMGw1LjU3OCA1LjU3OEwxMi41NjMgMGwxLjQwNiAxLjQwNnoiIGZpbGw9IiNlNzE0MzgiIGZpbGwtcnVsZT0ibm9uemVybyIvPjwvc3ZnPg==)}.Select-clear{display:block;width:9px;height:9px;background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTQgMTQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxLjQxNCI+PHBhdGggZD0iTTEzLjk2OSAxLjQwNkw4LjM5IDYuOTg0bDUuNTc4IDUuNTc5LTEuNDA2IDEuNDA2TDYuOTg0IDguMzlsLTUuNTc4IDUuNTc4TDAgMTIuNTYzbDUuNTc4LTUuNTc5TDAgMS40MDYgMS40MDYgMGw1LjU3OCA1LjU3OEwxMi41NjMgMGwxLjQwNiAxLjQwNnoiIGZpbGw9IiM5OTkiIGZpbGwtcnVsZT0ibm9uemVybyIvPjwvc3ZnPg==);background-size:9px 9px;text-indent:-9999px}.Select--multi .Select-clear-zone{width:17px}.Select-arrow-zone{cursor:pointer;display:table-cell;position:relative;text-align:center;vertical-align:middle;width:20px;padding-right:5px}.Select-arrow{border-color:#999 transparent transparent;border-style:solid;border-width:4px 4px 2px;display:inline-block;height:0;width:0}.is-open .Select-arrow,.Select-arrow-zone:hover>.Select-arrow{border-top-color:#666}@keyframes Select-animation-fadeIn{0%{opacity:0}to{opacity:1}}.Select-menu-outer{border-bottom-right-radius:4px;border-bottom-left-radius:4px;background-color:#fff;border:1px solid #ccc;border-top-color:#e6e6e6;box-sizing:border-box;margin-top:-1px;max-height:200px;position:absolute;top:100%;width:100%;z-index:7500;-webkit-overflow-scrolling:touch;box-shadow:0 6px 12px rgba(0,0,0,.175)}.Select-menu{max-height:198px;padding:5px 0;overflow-y:auto}.Select-option{display:block;line-height:20px;padding:0 8px;box-sizing:border-box;color:#333;font-size:12px;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.Select-option:last-child{border-bottom-right-radius:2px;border-bottom-left-radius:2px}.Select-option.is-focused{background-color:#f3f3f3}.Select-option.is-disabled{cursor:default;opacity:.4;font-style:italic}.Select-noresults{box-sizing:border-box;color:#999;cursor:default;display:block;padding:8px 10px}.Select--multi .Select-value{background-color:rgba(0,126,255,.08);border-radius:2px;border:1px solid rgba(0,126,255,.24);color:#333;display:inline-block;font-size:12px;line-height:14px;margin:1px 4px 1px 1px;vertical-align:top}.Select-value-label{font-size:12px}.is-searchable.is-open .Select-value-label{opacity:.5}.Select-big .Select-control{padding-top:4px;padding-bottom:4px}.Select-big .Select-placeholder{margin-top:4px;margin-bottom:4px}.Select-big .Select-value-label{display:inline-block;margin-top:7px;line-height:16px}.Select-big .Select-option{padding:7px 8px;line-height:16px}.Select-big img,.Select-big svg{padding-top:0}.Select--multi .Select-value-icon,.Select--multi .Select-value-label{display:inline-block;vertical-align:middle}.Select--multi .Select-value-label{display:inline-block;max-width:200px;border-bottom-right-radius:2px;border-top-right-radius:2px;cursor:default;padding:2px 5px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.Select--multi a.Select-value-label{color:#007eff;cursor:pointer;text-decoration:none}.Select--multi a.Select-value-label:hover{text-decoration:underline}.Select--multi .Select-value-icon{cursor:pointer;border-bottom-left-radius:2px;border-top-left-radius:2px;border-right:1px solid rgba(0,126,255,.24);padding:1px 5px}.Select--multi .Select-value-icon:focus,.Select--multi .Select-value-icon:hover{background-color:rgba(0,113,230,.08);color:#0071e6}.Select--multi .Select-value-icon:active{background-color:rgba(0,126,255,.24)}.Select--multi.is-disabled .Select-value{background-color:#fcfcfc;border:1px solid #e3e3e3;color:#333}.Select--multi.is-disabled .Select-value-icon{cursor:not-allowed;border-right:1px solid #e3e3e3}.Select--multi.is-disabled .Select-value-icon:active,.Select--multi.is-disabled .Select-value-icon:focus,.Select--multi.is-disabled .Select-value-icon:hover{background-color:#fcfcfc}.Select-aria-only{display:none}@keyframes Select-animation-spin{to{transform:rotate(1turn)}}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../helpers/l10n';\nimport DeferredSpinner from '../ui/DeferredSpinner';\nimport { ResetButtonLink, SubmitButton } from './buttons';\nimport ClickEventBoundary from './ClickEventBoundary';\nimport { ModalProps } from './Modal';\nimport SimpleModal, { ChildrenProps } from './SimpleModal';\n\nexport interface ConfirmModalProps<T> extends ModalProps {\n  cancelButtonText?: string;\n  confirmButtonText: string;\n  confirmData?: T;\n  confirmDisable?: boolean;\n  isDestructive?: boolean;\n  onConfirm: (data?: T) => void | Promise<void | Response>;\n}\n\ninterface Props<T> extends ConfirmModalProps<T> {\n  header: string;\n  headerDescription?: React.ReactNode;\n  onClose: () => void;\n}\n\nexport default class ConfirmModal<T = string> extends React.PureComponent<Props<T>> {\n  mounted = false;\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSubmit = () => {\n    const result = this.props.onConfirm(this.props.confirmData);\n    if (result) {\n      return result.then(this.props.onClose, () => {\n        /* noop */\n      });\n    }\n    this.props.onClose();\n    return undefined;\n  };\n\n  renderModalContent = ({ onCloseClick, onFormSubmit, submitting }: ChildrenProps) => {\n    const {\n      children,\n      confirmButtonText,\n      confirmDisable,\n      header,\n      headerDescription,\n      isDestructive,\n      cancelButtonText = translate('cancel')\n    } = this.props;\n    return (\n      <ClickEventBoundary>\n        <form onSubmit={onFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n            {headerDescription}\n          </header>\n          <div className=\"modal-body\">{children}</div>\n          <footer className=\"modal-foot\">\n            <DeferredSpinner className=\"spacer-right\" loading={submitting} />\n            <SubmitButton\n              autoFocus={true}\n              className={isDestructive ? 'button-red' : undefined}\n              disabled={submitting || confirmDisable}>\n              {confirmButtonText}\n            </SubmitButton>\n            <ResetButtonLink disabled={submitting} onClick={onCloseClick}>\n              {cancelButtonText}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </ClickEventBoundary>\n    );\n  };\n\n  render() {\n    const { header, onClose, noBackdrop, size } = this.props;\n    const modalProps = { header, onClose, noBackdrop, size };\n    return (\n      <SimpleModal onSubmit={this.handleSubmit} {...modalProps}>\n        {this.renderModalContent}\n      </SimpleModal>\n    );\n  }\n}\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport { A11yContext } from './A11yContext';\n\ninterface Props {\n  anchor: string;\n  label?: string;\n  weight?: number;\n}\n\nexport default function A11ySkipTarget(props: Props) {\n  return (\n    <A11yContext.Consumer>\n      {({ addA11ySkipLink, removeA11ySkipLink }) => (\n        <A11ySkipTargetInner\n          addA11ySkipLink={addA11ySkipLink}\n          removeA11ySkipLink={removeA11ySkipLink}\n          {...props}\n        />\n      )}\n    </A11yContext.Consumer>\n  );\n}\n\ninterface InnerProps {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n}\n\nexport class A11ySkipTargetInner extends React.PureComponent<Props & InnerProps> {\n  componentDidMount() {\n    this.props.addA11ySkipLink(this.getLink());\n  }\n\n  componentWillUnmount() {\n    this.props.removeA11ySkipLink(this.getLink());\n  }\n\n  getLink = (): T.A11ySkipLink => {\n    const { anchor: key, label = translate('skip_to_content'), weight } = this.props;\n    return { key, label, weight };\n  };\n\n  render() {\n    const { anchor } = this.props;\n    return <span id={`a11y_target__${anchor}`} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function DetachIcon({ fill = 'currentColor', ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M12 9.25v2.5A2.25 2.25 0 0 1 9.75 14h-6.5A2.25 2.25 0 0 1 1 11.75v-6.5A2.25 2.25 0 0 1 3.25 3h5.5c.14 0 .25.11.25.25v.5c0 .14-.11.25-.25.25h-5.5C2.562 4 2 4.563 2 5.25v6.5c0 .688.563 1.25 1.25 1.25h6.5c.688 0 1.25-.563 1.25-1.25v-2.5c0-.14.11-.25.25-.25h.5c.14 0 .25.11.25.25zm3-6.75v4c0 .273-.227.5-.5.5a.497.497 0 0 1-.352-.148l-1.375-1.375L7.68 10.57a.27.27 0 0 1-.18.078.27.27 0 0 1-.18-.078l-.89-.89a.27.27 0 0 1-.078-.18.27.27 0 0 1 .078-.18l5.093-5.093-1.375-1.375A.497.497 0 0 1 10 2.5c0-.273.227-.5.5-.5h4c.273 0 .5.227.5.5z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { Exporter, ProfileChangelogEvent } from '../apps/quality-profiles/types';\nimport { csvEscape } from '../helpers/csv';\nimport { getJSON, post, postJSON, RequestData } from '../helpers/request';\n\nexport interface ProfileActions {\n  associateProjects?: boolean;\n  copy?: boolean;\n  delete?: boolean;\n  edit?: boolean;\n  setAsDefault?: boolean;\n}\n\nexport interface Actions {\n  create?: boolean;\n}\n\nexport interface Profile {\n  actions?: ProfileActions;\n  key: string;\n  name: string;\n  language: string;\n  languageName: string;\n  isInherited?: boolean;\n  parentKey?: string;\n  parentName?: string;\n  isDefault?: boolean;\n  activeRuleCount: number;\n  activeDeprecatedRuleCount: number;\n  rulesUpdatedAt?: string;\n  lastUsed?: string;\n  userUpdatedAt?: string;\n  isBuiltIn?: boolean;\n  projectCount?: number;\n}\n\nexport interface SearchQualityProfilesParameters {\n  defaults?: boolean;\n  language?: string;\n  project?: string;\n  qualityProfile?: string;\n}\n\nexport interface SearchQualityProfilesResponse {\n  actions?: Actions;\n  profiles: Profile[];\n}\n\nexport function searchQualityProfiles(\n  parameters?: SearchQualityProfilesParameters\n): Promise<SearchQualityProfilesResponse> {\n  return getJSON('/api/qualityprofiles/search', parameters).catch(throwGlobalError);\n}\n\nexport function getQualityProfile({\n  compareToSonarWay,\n  profile: { key }\n}: {\n  compareToSonarWay?: boolean;\n  profile: Profile;\n}): Promise<any> {\n  return getJSON('/api/qualityprofiles/show', { compareToSonarWay, key });\n}\n\nexport function createQualityProfile(data: RequestData): Promise<any> {\n  return postJSON('/api/qualityprofiles/create', data).catch(throwGlobalError);\n}\n\nexport function restoreQualityProfile(data: RequestData): Promise<any> {\n  return postJSON('/api/qualityprofiles/restore', data).catch(throwGlobalError);\n}\n\nexport interface ProfileProject {\n  key: string;\n  name: string;\n  selected: boolean;\n}\n\nexport function getProfileProjects(\n  data: RequestData\n): Promise<{ more: boolean; paging: T.Paging; results: ProfileProject[] }> {\n  return getJSON('/api/qualityprofiles/projects', data).catch(throwGlobalError);\n}\n\nexport function getProfileInheritance({\n  language,\n  name: qualityProfile\n}: Profile): Promise<{\n  ancestors: T.ProfileInheritanceDetails[];\n  children: T.ProfileInheritanceDetails[];\n  profile: T.ProfileInheritanceDetails;\n}> {\n  return getJSON('/api/qualityprofiles/inheritance', {\n    language,\n    qualityProfile\n  }).catch(throwGlobalError);\n}\n\nexport function setDefaultProfile({ language, name: qualityProfile }: Profile) {\n  return post('/api/qualityprofiles/set_default', {\n    language,\n    qualityProfile\n  });\n}\n\nexport function renameProfile(key: string, name: string) {\n  return post('/api/qualityprofiles/rename', { key, name }).catch(throwGlobalError);\n}\n\nexport function copyProfile(fromKey: string, toName: string): Promise<any> {\n  return postJSON('/api/qualityprofiles/copy', { fromKey, toName }).catch(throwGlobalError);\n}\n\nexport function deleteProfile({ language, name: qualityProfile }: Profile) {\n  return post('/api/qualityprofiles/delete', { language, qualityProfile }).catch(throwGlobalError);\n}\n\nexport function changeProfileParent(\n  { language, name: qualityProfile }: Profile,\n  parentProfile?: Profile\n) {\n  return post('/api/qualityprofiles/change_parent', {\n    language,\n    qualityProfile,\n    parentQualityProfile: parentProfile ? parentProfile.name : undefined\n  }).catch(throwGlobalError);\n}\n\nexport function getQualityProfileBackupUrl({ language, name: qualityProfile }: Profile) {\n  const queryParams = Object.entries({ language, qualityProfile })\n    .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n    .join('&');\n  return `/api/qualityprofiles/backup?${queryParams}`;\n}\n\nexport function getQualityProfileExporterUrl(\n  { key: exporterKey }: Exporter,\n  { language, name: qualityProfile }: Profile\n) {\n  const queryParams = Object.entries({ exporterKey, language, qualityProfile })\n    .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n    .join('&');\n  return `/api/qualityprofiles/export?${queryParams}`;\n}\n\nexport function getImporters(): Promise<\n  Array<{ key: string; languages: Array<string>; name: string }>\n> {\n  return getJSON('/api/qualityprofiles/importers').then(r => r.importers, throwGlobalError);\n}\n\nexport function getExporters(): Promise<any> {\n  return getJSON('/api/qualityprofiles/exporters').then(r => r.exporters);\n}\n\nexport function getProfileChangelog(\n  since: any,\n  to: any,\n  { language, name: qualityProfile }: Profile,\n  page?: number\n): Promise<{\n  events: ProfileChangelogEvent[];\n  p: number;\n  ps: number;\n  total: number;\n}> {\n  return getJSON('/api/qualityprofiles/changelog', {\n    since,\n    to,\n    language,\n    qualityProfile,\n    p: page\n  });\n}\n\nexport interface CompareResponse {\n  left: { name: string };\n  right: { name: string };\n  inLeft: Array<{ key: string; name: string; severity: string }>;\n  inRight: Array<{ key: string; name: string; severity: string }>;\n  modified: Array<{\n    key: string;\n    name: string;\n    left: { params: T.Dict<string>; severity: string };\n    right: { params: T.Dict<string>; severity: string };\n  }>;\n}\n\nexport function compareProfiles(leftKey: string, rightKey: string): Promise<CompareResponse> {\n  return getJSON('/api/qualityprofiles/compare', { leftKey, rightKey });\n}\n\nexport function associateProject({ language, name: qualityProfile }: Profile, project: string) {\n  return post('/api/qualityprofiles/add_project', {\n    language,\n    qualityProfile,\n    project\n  }).catch(throwGlobalError);\n}\n\nexport function dissociateProject({ language, name: qualityProfile }: Profile, project: string) {\n  return post('/api/qualityprofiles/remove_project', {\n    language,\n    qualityProfile,\n    project\n  }).catch(throwGlobalError);\n}\n\nexport interface SearchUsersGroupsParameters {\n  language: string;\n  qualityProfile: string;\n  q?: string;\n  selected?: 'all' | 'selected' | 'deselected';\n}\n\ninterface SearchUsersResponse {\n  users: T.UserSelected[];\n  paging: T.Paging;\n}\n\nexport function searchUsers(parameters: SearchUsersGroupsParameters): Promise<SearchUsersResponse> {\n  return getJSON('/api/qualityprofiles/search_users', parameters).catch(throwGlobalError);\n}\n\nexport interface SearchGroupsResponse {\n  groups: Array<{ name: string }>;\n  paging: T.Paging;\n}\n\nexport function searchGroups(\n  parameters: SearchUsersGroupsParameters\n): Promise<SearchGroupsResponse> {\n  return getJSON('/api/qualityprofiles/search_groups', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveUserParameters {\n  language: string;\n  login: string;\n  qualityProfile: string;\n}\n\nexport function addUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_user', parameters).catch(throwGlobalError);\n}\n\nexport function removeUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_user', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveGroupParameters {\n  group: string;\n  language: string;\n  qualityProfile: string;\n}\n\nexport function addGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_group', parameters).catch(throwGlobalError);\n}\n\nexport function removeGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_group', parameters).catch(throwGlobalError);\n}\n\nexport interface BulkActivateParameters {\n  activation?: boolean;\n  active_severities?: string;\n  asc?: boolean;\n  available_since?: string;\n  compareToProfile?: string;\n  inheritance?: string;\n  is_template?: string;\n  languages?: string;\n  q?: string;\n  qprofile?: string;\n  repositories?: string;\n  rule_key?: string;\n  s?: string;\n  severities?: string;\n  statuses?: string;\n  tags?: string;\n  targetKey: string;\n  targetSeverity?: string;\n  template_key?: string;\n  types?: string;\n}\n\nexport function bulkActivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/activate_rules', data);\n}\n\nexport function bulkDeactivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/deactivate_rules', data);\n}\n\nexport function activateRule(data: {\n  key: string;\n  params?: T.Dict<string>;\n  reset?: boolean;\n  rule: string;\n  severity?: string;\n}) {\n  const params =\n    data.params && map(data.params, (value, key) => `${key}=${csvEscape(value)}`).join(';');\n  return post('/api/qualityprofiles/activate_rule', { ...data, params }).catch(throwGlobalError);\n}\n\nexport function deactivateRule(data: { key: string; rule: string }) {\n  return post('/api/qualityprofiles/deactivate_rule', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ConfirmModal, { ConfirmModalProps } from './ConfirmModal';\nimport ModalButton, { ChildrenProps, ModalProps } from './ModalButton';\n\ninterface Props<T> extends ConfirmModalProps<T> {\n  children: (props: ChildrenProps) => React.ReactNode;\n  modalBody: React.ReactNode;\n  modalHeader: string;\n  modalHeaderDescription?: React.ReactNode;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class ConfirmButton<T> extends React.PureComponent<Props<T>, State> {\n  renderConfirmModal = ({ onClose }: ModalProps) => {\n    const {\n      children,\n      modalBody,\n      modalHeader,\n      modalHeaderDescription,\n      ...confirmModalProps\n    } = this.props;\n    return (\n      <ConfirmModal\n        header={modalHeader}\n        headerDescription={modalHeaderDescription}\n        onClose={onClose}\n        {...confirmModalProps}>\n        {modalBody}\n      </ConfirmModal>\n    );\n  };\n\n  render() {\n    return <ModalButton modal={this.renderConfirmModal}>{this.props.children}</ModalButton>;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\nexport interface ChildrenProps {\n  onClick: () => void;\n  onFormSubmit: (event: React.FormEvent<HTMLFormElement>) => void;\n}\n\nexport interface ModalProps {\n  onClose: () => void;\n}\n\nexport interface Props {\n  children: (props: ChildrenProps) => React.ReactNode;\n  modal: (props: ModalProps) => React.ReactNode;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class ModalButton extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { modal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleButtonClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleFormSubmit = (event?: React.FormEvent<HTMLFormElement>) => {\n    if (event) {\n      event.preventDefault();\n    }\n    this.setState({ modal: true });\n  };\n\n  handleCloseModal = () => {\n    if (this.mounted) {\n      this.setState({ modal: false });\n    }\n  };\n\n  render() {\n    return (\n      <>\n        {this.props.children({\n          onClick: this.handleButtonClick,\n          onFormSubmit: this.handleFormSubmit\n        })}\n        {this.state.modal && this.props.modal({ onClose: this.handleCloseModal })}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function ChevronDownIcon({ fill = 'currentColor', ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M7.72 11.596L3.119 6.992A.382.382 0 0 1 3 6.713c0-.108.04-.2.118-.279l1.03-1.03a.382.382 0 0 1 .278-.117c.108 0 .201.04.28.117L8 8.7l3.294-3.295a.382.382 0 0 1 .28-.117c.108 0 .2.04.279.117l1.03 1.03a.382.382 0 0 1 .117.28c0 .107-.04.2-.118.278L8.28 11.596a.382.382 0 0 1-.279.117.382.382 0 0 1-.28-.117z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nconst CLASS_SIDEBAR_PAGE = 'sidebar-page';\nconst CLASS_WHITE_PAGE = 'white-page';\nconst CLASS_NO_FOOTER_PAGE = 'no-footer-page';\n\nexport function addSideBarClass() {\n  toggleBodyClass(CLASS_SIDEBAR_PAGE, true);\n}\n\nexport function addWhitePageClass() {\n  toggleBodyClass(CLASS_WHITE_PAGE, true);\n}\n\nexport function addNoFooterPageClass() {\n  /* eslint-disable-next-line no-console */\n  console.warn('DEPRECATED: addNoFooterPageClass() was deprecated.');\n  toggleBodyClass(CLASS_NO_FOOTER_PAGE, true);\n}\n\nexport function removeSideBarClass() {\n  toggleBodyClass(CLASS_SIDEBAR_PAGE, false);\n}\n\nexport function removeWhitePageClass() {\n  toggleBodyClass(CLASS_WHITE_PAGE, false);\n}\n\nexport function removeNoFooterPageClass() {\n  /* eslint-disable-next-line no-console */\n  console.warn('DEPRECATED: removeNoFooterPageClass() was deprecated.');\n  toggleBodyClass(CLASS_NO_FOOTER_PAGE, false);\n}\n\nfunction toggleBodyClass(className: string, force: boolean) {\n  document.body.classList.toggle(className, force);\n  if (document.documentElement) {\n    document.documentElement.classList.toggle(className, force);\n  }\n}\n","(function(module) {\n    'use strict';\n\n    module.exports.is_uri = is_iri;\n    module.exports.is_http_uri = is_http_iri;\n    module.exports.is_https_uri = is_https_iri;\n    module.exports.is_web_uri = is_web_iri;\n    // Create aliases\n    module.exports.isUri = is_iri;\n    module.exports.isHttpUri = is_http_iri;\n    module.exports.isHttpsUri = is_https_iri;\n    module.exports.isWebUri = is_web_iri;\n\n\n    // private function\n    // internal URI spitter method - direct from RFC 3986\n    var splitUri = function(uri) {\n        var splitted = uri.match(/(?:([^:\\/?#]+):)?(?:\\/\\/([^\\/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?/);\n        return splitted;\n    };\n\n    function is_iri(value) {\n        if (!value) {\n            return;\n        }\n\n        // check for illegal characters\n        if (/[^a-z0-9\\:\\/\\?\\#\\[\\]\\@\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=\\.\\-\\_\\~\\%]/i.test(value)) return;\n\n        // check for hex escapes that aren't complete\n        if (/%[^0-9a-f]/i.test(value)) return;\n        if (/%[0-9a-f](:?[^0-9a-f]|$)/i.test(value)) return;\n\n        var splitted = [];\n        var scheme = '';\n        var authority = '';\n        var path = '';\n        var query = '';\n        var fragment = '';\n        var out = '';\n\n        // from RFC 3986\n        splitted = splitUri(value);\n        scheme = splitted[1]; \n        authority = splitted[2];\n        path = splitted[3];\n        query = splitted[4];\n        fragment = splitted[5];\n\n        // scheme and path are required, though the path can be empty\n        if (!(scheme && scheme.length && path.length >= 0)) return;\n\n        // if authority is present, the path must be empty or begin with a /\n        if (authority && authority.length) {\n            if (!(path.length === 0 || /^\\//.test(path))) return;\n        } else {\n            // if authority is not present, the path must not start with //\n            if (/^\\/\\//.test(path)) return;\n        }\n\n        // scheme must begin with a letter, then consist of letters, digits, +, ., or -\n        if (!/^[a-z][a-z0-9\\+\\-\\.]*$/.test(scheme.toLowerCase()))  return;\n\n        // re-assemble the URL per section 5.3 in RFC 3986\n        out += scheme + ':';\n        if (authority && authority.length) {\n            out += '//' + authority;\n        }\n\n        out += path;\n\n        if (query && query.length) {\n            out += '?' + query;\n        }\n\n        if (fragment && fragment.length) {\n            out += '#' + fragment;\n        }\n\n        return out;\n    }\n\n    function is_http_iri(value, allowHttps) {\n        if (!is_iri(value)) {\n            return;\n        }\n\n        var splitted = [];\n        var scheme = '';\n        var authority = '';\n        var path = '';\n        var port = '';\n        var query = '';\n        var fragment = '';\n        var out = '';\n\n        // from RFC 3986\n        splitted = splitUri(value);\n        scheme = splitted[1]; \n        authority = splitted[2];\n        path = splitted[3];\n        query = splitted[4];\n        fragment = splitted[5];\n\n        if (!scheme)  return;\n\n        if(allowHttps) {\n            if (scheme.toLowerCase() != 'https') return;\n        } else {\n            if (scheme.toLowerCase() != 'http') return;\n        }\n\n        // fully-qualified URIs must have an authority section that is\n        // a valid host\n        if (!authority) {\n            return;\n        }\n\n        // enable port component\n        if (/:(\\d+)$/.test(authority)) {\n            port = authority.match(/:(\\d+)$/)[0];\n            authority = authority.replace(/:\\d+$/, '');\n        }\n\n        out += scheme + ':';\n        out += '//' + authority;\n        \n        if (port) {\n            out += port;\n        }\n        \n        out += path;\n        \n        if(query && query.length){\n            out += '?' + query;\n        }\n\n        if(fragment && fragment.length){\n            out += '#' + fragment;\n        }\n        \n        return out;\n    }\n\n    function is_https_iri(value) {\n        return is_http_iri(value, true);\n    }\n\n    function is_web_iri(value) {\n        return (is_http_iri(value) || is_https_iri(value));\n    }\n\n})(module);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ChevronDownIcon from './ChevronDownIcon';\nimport ChevronRightIcon from './ChevronRightIcon';\nimport { IconProps } from './Icon';\n\ninterface Props extends IconProps {\n  open: boolean;\n}\n\nexport default function OpenCloseIcon({ open, ...iconProps }: Props) {\n  return open ? <ChevronDownIcon {...iconProps} /> : <ChevronRightIcon {...iconProps} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce } from 'lodash';\nimport * as React from 'react';\n\ninterface Props {\n  className?: string;\n  children: (position: { top: number; left: number }) => React.ReactElement<any>;\n}\n\nexport default class ScreenPositionHelper extends React.PureComponent<Props> {\n  container?: HTMLDivElement;\n  debouncedOnResize: () => void;\n\n  constructor(props: Props) {\n    super(props);\n    this.debouncedOnResize = debounce(() => this.forceUpdate(), 250);\n  }\n\n  componentDidMount() {\n    this.forceUpdate();\n    window.addEventListener('resize', this.debouncedOnResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debouncedOnResize);\n  }\n\n  getPosition = () => {\n    const containerPos = this.container && this.container.getBoundingClientRect();\n    if (!containerPos) {\n      return { top: 0, left: 0 };\n    }\n    return {\n      top: window.pageYOffset + containerPos.top,\n      left: window.pageXOffset + containerPos.left\n    };\n  };\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        ref={container => (this.container = container as HTMLDivElement)}>\n        {this.props.children(this.getPosition())}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\n\ninterface Props {\n  className?: string;\n  children: React.ReactNode;\n  property: string;\n}\n\nexport default function FacetBox(props: Props) {\n  return (\n    <div\n      className={classNames('search-navigator-facet-box', props.className)}\n      data-property={props.property}>\n      {props.children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from '../../components/controls/buttons';\nimport HelpTooltip from '../../components/controls/HelpTooltip';\nimport OpenCloseIcon from '../../components/icons/OpenCloseIcon';\nimport DeferredSpinner from '../../components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\n\ninterface Props {\n  children?: React.ReactNode;\n  fetching?: boolean;\n  helper?: string;\n  name: React.ReactNode;\n  onClear?: () => void;\n  onClick?: () => void;\n  open: boolean;\n  values?: string[];\n}\n\nexport default class FacetHeader extends React.PureComponent<Props> {\n  handleClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.onClick) {\n      this.props.onClick();\n    }\n  };\n\n  renderHelper() {\n    if (!this.props.helper) {\n      return null;\n    }\n    return <HelpTooltip className=\"spacer-left\" overlay={this.props.helper} />;\n  }\n\n  renderValueIndicator() {\n    const { values } = this.props;\n    if (!values || !values.length) {\n      return null;\n    }\n    const value =\n      values.length === 1 ? values[0] : translateWithParameters('x_selected', values.length);\n    return (\n      <span className=\"badge text-ellipsis\" title={value}>\n        {value}\n      </span>\n    );\n  }\n\n  render() {\n    const showClearButton =\n      this.props.values != null && this.props.values.length > 0 && this.props.onClear != null;\n\n    return (\n      <div className=\"search-navigator-facet-header-wrapper display-flex-center\">\n        {this.props.onClick ? (\n          <span className=\"search-navigator-facet-header display-flex-center\">\n            <a href=\"#\" onClick={this.handleClick}>\n              <OpenCloseIcon className=\"little-spacer-right\" open={this.props.open} />\n              {this.props.name}\n            </a>\n            {this.renderHelper()}\n          </span>\n        ) : (\n          <span className=\"search-navigator-facet-header display-flex-center\">\n            {this.props.name}\n            {this.renderHelper()}\n          </span>\n        )}\n\n        {this.props.children}\n\n        <span className=\"search-navigator-facet-header-value spacer-left spacer-right \">\n          {this.renderValueIndicator()}\n        </span>\n\n        {this.props.fetching && (\n          <span className=\"little-spacer-right\">\n            <DeferredSpinner />\n          </span>\n        )}\n\n        {showClearButton && (\n          <Button\n            className=\"search-navigator-facet-header-button button-small button-red\"\n            onClick={this.props.onClear}>\n            {translate('clear')}\n          </Button>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\n\nexport interface Props {\n  active?: boolean;\n  className?: string;\n  disabled?: boolean;\n  halfWidth?: boolean;\n  name: React.ReactNode;\n  onClick: (x: string, multiple?: boolean) => void;\n  stat?: React.ReactNode;\n  /** Textual version of `name` */\n  tooltip?: string;\n  value: string;\n}\n\nexport default class FacetItem extends React.PureComponent<Props> {\n  static defaultProps = {\n    disabled: false,\n    halfWidth: false,\n    loading: false\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onClick(this.props.value, event.ctrlKey || event.metaKey);\n  };\n\n  renderValue() {\n    if (this.props.stat == null) {\n      return null;\n    }\n\n    return <span className=\"facet-stat\">{this.props.stat}</span>;\n  }\n\n  render() {\n    const { name } = this.props;\n    const className = classNames('search-navigator-facet', this.props.className, {\n      active: this.props.active,\n      'search-navigator-facet-half': this.props.halfWidth\n    });\n\n    return this.props.disabled ? (\n      <span className={className} data-facet={this.props.value} title={this.props.tooltip}>\n        <span className=\"facet-name\">{name}</span>\n        {this.renderValue()}\n      </span>\n    ) : (\n      <a\n        className={className}\n        data-facet={this.props.value}\n        href=\"#\"\n        onClick={this.handleClick}\n        title={this.props.tooltip}>\n        <span className=\"facet-name\">{name}</span>\n        {this.renderValue()}\n      </a>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\ninterface Props {\n  children?: React.ReactNode;\n  title?: string;\n}\n\nexport default function FacetItemsList({ children, title }: Props) {\n  return (\n    <div className=\"search-navigator-facet-list\">\n      {title && <div className=\"search-navigator-facet-list-title\">{title}</div>}\n      {children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function csvEscape(value: string): string {\n  const escaped = value.replace(/\"/g, '\\\\\"');\n  return `\"${escaped}\"`;\n}\n","var parse = require('../parse/index.js')\nvar getDaysInMonth = require('../get_days_in_month/index.js')\n\n/**\n * @category Month Helpers\n * @summary Add the specified number of months to the given date.\n *\n * @description\n * Add the specified number of months to the given date.\n *\n * @param {Date|String|Number} date - the date to be changed\n * @param {Number} amount - the amount of months to be added\n * @returns {Date} the new date with the months added\n *\n * @example\n * // Add 5 months to 1 September 2014:\n * var result = addMonths(new Date(2014, 8, 1), 5)\n * //=> Sun Feb 01 2015 00:00:00\n */\nfunction addMonths (dirtyDate, dirtyAmount) {\n  var date = parse(dirtyDate)\n  var amount = Number(dirtyAmount)\n  var desiredMonth = date.getMonth() + amount\n  var dateWithDesiredMonth = new Date(0)\n  dateWithDesiredMonth.setFullYear(date.getFullYear(), desiredMonth, 1)\n  dateWithDesiredMonth.setHours(0, 0, 0, 0)\n  var daysInMonth = getDaysInMonth(dateWithDesiredMonth)\n  // Set the last day of the new month\n  // if the original date was the last day of the longer month\n  date.setMonth(desiredMonth, Math.min(daysInMonth, date.getDate()))\n  return date\n}\n\nmodule.exports = addMonths\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\nimport { formatMeasure } from '../../helpers/measures';\n\ninterface Props {\n  className?: string;\n  count: number;\n  showMore: () => void;\n  showLess: (() => void) | undefined;\n  total: number;\n}\n\nexport default class ListStyleFacetFooter extends React.PureComponent<Props> {\n  handleShowMoreClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.showMore();\n  };\n\n  handleShowLessClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.showLess) {\n      this.props.showLess();\n    }\n  };\n\n  render() {\n    const { count, total } = this.props;\n    const hasMore = total > count;\n    const allShown = Boolean(total && total === count);\n\n    return (\n      <footer className=\"note spacer-top spacer-bottom text-center\">\n        {translateWithParameters('x_show', formatMeasure(count, 'INT', null))}\n\n        {hasMore && (\n          <a className=\"spacer-left text-muted\" href=\"#\" onClick={this.handleShowMoreClick}>\n            {translate('show_more')}\n          </a>\n        )}\n\n        {this.props.showLess && allShown && (\n          <a className=\"spacer-left text-muted\" href=\"#\" onClick={this.handleShowLessClick}>\n            {translate('show_less')}\n          </a>\n        )}\n      </footer>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { sortBy, without } from 'lodash';\nimport * as React from 'react';\nimport ListFooter from '../../components/controls/ListFooter';\nimport SearchBox from '../../components/controls/SearchBox';\nimport Tooltip from '../../components/controls/Tooltip';\nimport { Alert } from '../../components/ui/Alert';\nimport { translate } from '../../helpers/l10n';\nimport { formatMeasure } from '../../helpers/measures';\nimport { queriesEqual } from '../../helpers/query';\nimport FacetBox from './FacetBox';\nimport FacetHeader from './FacetHeader';\nimport FacetItem from './FacetItem';\nimport FacetItemsList from './FacetItemsList';\nimport ListStyleFacetFooter from './ListStyleFacetFooter';\nimport MultipleSelectionHint from './MultipleSelectionHint';\n\ninterface SearchResponse<S> {\n  maxResults?: boolean;\n  results: S[];\n  paging?: T.Paging;\n}\n\nexport interface Props<S> {\n  className?: string;\n  disabled?: boolean;\n  disabledHelper?: string;\n  facetHeader: string;\n  fetching: boolean;\n  getFacetItemText: (item: string) => string;\n  getSearchResultKey: (result: S) => string;\n  getSearchResultText: (result: S) => string;\n  loadSearchResultCount?: (result: S[]) => Promise<T.Dict<number>>;\n  maxInitialItems: number;\n  maxItems: number;\n  minSearchLength: number;\n  onChange: (changes: T.Dict<string | string[]>) => void;\n  onClear?: () => void;\n  onItemClick?: (itemValue: string, multiple: boolean) => void;\n  onSearch: (query: string, page?: number) => Promise<SearchResponse<S>>;\n  onToggle: (property: string) => void;\n  open: boolean;\n  property: string;\n  query?: T.RawQuery;\n  renderFacetItem: (item: string) => React.ReactNode;\n  renderSearchResult: (result: S, query: string) => React.ReactNode;\n  searchPlaceholder: string;\n  getSortedItems?: () => string[];\n  stats: T.Dict<number> | undefined;\n  values: string[];\n}\n\ninterface State<S> {\n  autoFocus: boolean;\n  query: string;\n  searching: boolean;\n  searchMaxResults?: boolean;\n  searchPaging?: T.Paging;\n  searchResults?: S[];\n  searchResultsCounts: T.Dict<number>;\n  showFullList: boolean;\n}\n\nexport default class ListStyleFacet<S> extends React.Component<Props<S>, State<S>> {\n  mounted = false;\n\n  static defaultProps = {\n    maxInitialItems: 15,\n    maxItems: 100,\n    minSearchLength: 2\n  };\n\n  state: State<S> = {\n    autoFocus: false,\n    query: '',\n    searching: false,\n    searchResultsCounts: {},\n    showFullList: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentDidUpdate(prevProps: Props<S>) {\n    if (!prevProps.open && this.props.open) {\n      // focus search field *only* if it was manually open\n      this.setState({ autoFocus: true });\n    } else if (\n      (prevProps.open && !this.props.open) ||\n      !queriesEqual(prevProps.query || {}, this.props.query || {})\n    ) {\n      // reset state when closing the facet, or when query changes\n      this.setState({\n        query: '',\n        searchMaxResults: undefined,\n        searchResults: undefined,\n        searching: false,\n        searchResultsCounts: {},\n        showFullList: false\n      });\n    } else if (\n      prevProps.stats !== this.props.stats &&\n      Object.keys(this.props.stats || {}).length < this.props.maxInitialItems\n    ) {\n      // show limited list if `stats` changed and there are less than 15 items\n      this.setState({ showFullList: false });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleItemClick = (itemValue: string, multiple: boolean) => {\n    if (this.props.onItemClick) {\n      this.props.onItemClick(itemValue, multiple);\n    } else {\n      const { values } = this.props;\n      if (multiple) {\n        const newValue = sortBy(\n          values.includes(itemValue) ? without(values, itemValue) : [...values, itemValue]\n        );\n        this.props.onChange({ [this.props.property]: newValue });\n      } else {\n        this.props.onChange({\n          [this.props.property]: values.includes(itemValue) && values.length < 2 ? [] : [itemValue]\n        });\n      }\n    }\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.props.property);\n  };\n\n  handleClear = () => {\n    if (this.props.onClear) {\n      this.props.onClear();\n    } else {\n      this.props.onChange({ [this.props.property]: [] });\n    }\n  };\n\n  stopSearching = () => {\n    if (this.mounted) {\n      this.setState({ searching: false });\n    }\n  };\n\n  search = (query: string) => {\n    if (query.length >= this.props.minSearchLength) {\n      this.setState({ query, searching: true });\n      this.props\n        .onSearch(query)\n        .then(this.loadCountsForSearchResults)\n        .then(({ maxResults, paging, results, stats }) => {\n          if (this.mounted) {\n            this.setState(state => ({\n              searching: false,\n              searchMaxResults: maxResults,\n              searchResults: results,\n              searchPaging: paging,\n              searchResultsCounts: { ...state.searchResultsCounts, ...stats }\n            }));\n          }\n        })\n        .catch(this.stopSearching);\n    } else {\n      this.setState({ query, searching: false, searchResults: [] });\n    }\n  };\n\n  searchMore = () => {\n    const { query, searchPaging, searchResults } = this.state;\n    if (query && searchResults && searchPaging) {\n      this.setState({ searching: true });\n      this.props\n        .onSearch(query, searchPaging.pageIndex + 1)\n        .then(this.loadCountsForSearchResults)\n        .then(({ paging, results, stats }) => {\n          if (this.mounted) {\n            this.setState(state => ({\n              searching: false,\n              searchResults: [...searchResults, ...results],\n              searchPaging: paging,\n              searchResultsCounts: { ...state.searchResultsCounts, ...stats }\n            }));\n          }\n        })\n        .catch(this.stopSearching);\n    }\n  };\n\n  loadCountsForSearchResults = (response: SearchResponse<S>) => {\n    const { loadSearchResultCount = () => Promise.resolve({}) } = this.props;\n    const resultsToLoad = response.results.filter(result => {\n      const key = this.props.getSearchResultKey(result);\n      return this.getStat(key) === undefined && this.state.searchResultsCounts[key] === undefined;\n    });\n    if (resultsToLoad.length > 0) {\n      return loadSearchResultCount(resultsToLoad).then(stats => ({ ...response, stats }));\n    } else {\n      return { ...response, stats: {} };\n    }\n  };\n\n  getStat(item: string) {\n    const { stats } = this.props;\n    return stats && stats[item] !== undefined ? stats && stats[item] : undefined;\n  }\n\n  showFullList = () => {\n    this.setState({ showFullList: true });\n  };\n\n  hideFullList = () => {\n    this.setState({ showFullList: false });\n  };\n\n  renderList() {\n    const { stats } = this.props;\n\n    if (!stats) {\n      return null;\n    }\n\n    const sortedItems = this.props.getSortedItems\n      ? this.props.getSortedItems()\n      : sortBy(\n          Object.keys(stats),\n          key => -stats[key],\n          key => this.props.getFacetItemText(key)\n        );\n\n    const limitedList = this.state.showFullList\n      ? sortedItems\n      : sortedItems.slice(0, this.props.maxInitialItems);\n\n    // make sure all selected items are displayed\n    const selectedBelowLimit = this.state.showFullList\n      ? []\n      : sortedItems\n          .slice(this.props.maxInitialItems)\n          .filter(item => this.props.values.includes(item));\n\n    const mightHaveMoreResults = sortedItems.length >= this.props.maxItems;\n\n    return (\n      <>\n        <FacetItemsList>\n          {limitedList.map(item => (\n            <FacetItem\n              active={this.props.values.includes(item)}\n              key={item}\n              name={this.props.renderFacetItem(item)}\n              onClick={this.handleItemClick}\n              stat={formatFacetStat(this.getStat(item))}\n              tooltip={this.props.getFacetItemText(item)}\n              value={item}\n            />\n          ))}\n        </FacetItemsList>\n        {selectedBelowLimit.length > 0 && (\n          <>\n            <div className=\"note spacer-bottom text-center\"></div>\n            <FacetItemsList>\n              {selectedBelowLimit.map(item => (\n                <FacetItem\n                  active={true}\n                  key={item}\n                  name={this.props.renderFacetItem(item)}\n                  onClick={this.handleItemClick}\n                  stat={formatFacetStat(this.getStat(item))}\n                  tooltip={this.props.getFacetItemText(item)}\n                  value={item}\n                />\n              ))}\n            </FacetItemsList>\n          </>\n        )}\n        <ListStyleFacetFooter\n          count={limitedList.length + selectedBelowLimit.length}\n          showLess={this.state.showFullList ? this.hideFullList : undefined}\n          showMore={this.showFullList}\n          total={sortedItems.length}\n        />\n        {mightHaveMoreResults && this.state.showFullList && (\n          <Alert className=\"spacer-top\" variant=\"warning\">\n            {translate('facet_might_have_more_results')}\n          </Alert>\n        )}\n      </>\n    );\n  }\n\n  renderSearch() {\n    return (\n      <SearchBox\n        autoFocus={this.state.autoFocus}\n        className=\"little-spacer-top spacer-bottom\"\n        loading={this.state.searching}\n        minLength={this.props.minSearchLength}\n        onChange={this.search}\n        placeholder={this.props.searchPlaceholder}\n        value={this.state.query}\n      />\n    );\n  }\n\n  renderSearchResults() {\n    const { searching, searchMaxResults, searchResults, searchPaging } = this.state;\n\n    if (!searching && (!searchResults || !searchResults.length)) {\n      return <div className=\"note spacer-bottom\">{translate('no_results')}</div>;\n    }\n\n    if (!searchResults) {\n      // initial search\n      return null;\n    }\n\n    return (\n      <>\n        <FacetItemsList>\n          {searchResults.map(result => this.renderSearchResult(result))}\n        </FacetItemsList>\n        {searchMaxResults && (\n          <Alert className=\"spacer-top\" variant=\"warning\">\n            {translate('facet_might_have_more_results')}\n          </Alert>\n        )}\n        {searchPaging && (\n          <ListFooter\n            className=\"spacer-bottom\"\n            count={searchResults.length}\n            loadMore={this.searchMore}\n            ready={!searching}\n            total={searchPaging.total}\n          />\n        )}\n      </>\n    );\n  }\n\n  renderSearchResult(result: S) {\n    const key = this.props.getSearchResultKey(result);\n    const active = this.props.values.includes(key);\n    const stat = this.getStat(key) || this.state.searchResultsCounts[key];\n    return (\n      <FacetItem\n        active={active}\n        key={key}\n        name={this.props.renderSearchResult(result, this.state.query)}\n        onClick={this.handleItemClick}\n        stat={formatFacetStat(stat)}\n        tooltip={this.props.getSearchResultText(result)}\n        value={key}\n      />\n    );\n  }\n\n  render() {\n    const { disabled, stats = {} } = this.props;\n    const { query, searching, searchResults } = this.state;\n    const values = this.props.values.map(item => this.props.getFacetItemText(item));\n    const loadingResults =\n      query !== '' && searching && (searchResults === undefined || searchResults.length === 0);\n    const showList = !query || loadingResults;\n    return (\n      <FacetBox\n        className={classNames(this.props.className, {\n          'search-navigator-facet-box-forbidden': disabled\n        })}\n        property={this.props.property}>\n        <FacetHeader\n          fetching={this.props.fetching}\n          name={\n            <Tooltip overlay={disabled ? this.props.disabledHelper : undefined}>\n              <span>{this.props.facetHeader}</span>\n            </Tooltip>\n          }\n          onClear={this.handleClear}\n          onClick={disabled ? undefined : this.handleHeaderClick}\n          open={this.props.open && !disabled}\n          values={values}\n        />\n\n        {this.props.open && !disabled && (\n          <>\n            {this.renderSearch()}\n            {showList ? this.renderList() : this.renderSearchResults()}\n            <MultipleSelectionHint options={Object.keys(stats).length} values={values.length} />\n          </>\n        )}\n      </FacetBox>\n    );\n  }\n}\n\nfunction formatFacetStat(stat: number | undefined) {\n  return stat && formatMeasure(stat, 'SHORT_INT');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { isWebUri } from 'valid-url';\nimport HelpTooltip from '../../components/controls/HelpTooltip';\nimport DetachIcon from '../../components/icons/DetachIcon';\n\nexport interface DocumentationTooltipProps {\n  children?: React.ReactNode;\n  className?: string;\n  content?: React.ReactNode;\n  links?: Array<{ href: string; label: string; inPlace?: boolean }>;\n  title?: string;\n}\n\nexport default function DocumentationTooltip(props: DocumentationTooltipProps) {\n  const { className, content, links, title } = props;\n\n  return (\n    <HelpTooltip\n      className={className}\n      overlay={\n        <div className=\"big-padded-top big-padded-bottom\">\n          {title && (\n            <div className=\"spacer-bottom\">\n              <strong>{title}</strong>\n            </div>\n          )}\n\n          {content && <p>{content}</p>}\n\n          {links && (\n            <>\n              <hr className=\"big-spacer-top big-spacer-bottom\" />\n\n              {links.map(({ href, label, inPlace }) => (\n                <div className=\"little-spacer-bottom\" key={label}>\n                  {inPlace ? (\n                    <Link to={href}>\n                      <span>{label}</span>\n                    </Link>\n                  ) : (\n                    <a\n                      className=\"display-inline-flex-center link-with-icon\"\n                      href={href}\n                      rel=\"noopener noreferrer\"\n                      target=\"_blank\">\n                      {isWebUri(href) && <DetachIcon size={14} className=\"spacer-right\" />}\n                      <span>{label}</span>\n                    </a>\n                  )}\n                </div>\n              ))}\n            </>\n          )}\n        </div>\n      }>\n      {props.children}\n    </HelpTooltip>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\nexport function highlightTerm(str: string, term: string) {\n  const pos = str.toLowerCase().indexOf(term.toLowerCase());\n  return pos !== -1 ? (\n    <>\n      {pos > 0 && str.substring(0, pos)}\n      <mark>{str.substr(pos, term.length)}</mark>\n      {pos + term.length < str.length && str.substring(pos + term.length)}\n    </>\n  ) : (\n    str\n  );\n}\n","var createRange = require('./_createRange');\n\n/**\n * Creates an array of numbers (positive and/or negative) progressing from\n * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n * `start` is specified without an `end` or `step`. If `end` is not specified,\n * it's set to `start` with `start` then set to `0`.\n *\n * **Note:** JavaScript follows the IEEE-754 standard for resolving\n * floating-point values which can produce unexpected results.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {number} [start=0] The start of the range.\n * @param {number} end The end of the range.\n * @param {number} [step=1] The value to increment or decrement by.\n * @returns {Array} Returns the range of numbers.\n * @see _.inRange, _.rangeRight\n * @example\n *\n * _.range(4);\n * // => [0, 1, 2, 3]\n *\n * _.range(-4);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 5);\n * // => [1, 2, 3, 4]\n *\n * _.range(0, 20, 5);\n * // => [0, 5, 10, 15]\n *\n * _.range(0, -4, -1);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 4, 0);\n * // => [1, 1, 1]\n *\n * _.range(0);\n * // => []\n */\nvar range = createRange();\n\nmodule.exports = range;\n","var baseRange = require('./_baseRange'),\n    isIterateeCall = require('./_isIterateeCall'),\n    toFinite = require('./toFinite');\n\n/**\n * Creates a `_.range` or `_.rangeRight` function.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new range function.\n */\nfunction createRange(fromRight) {\n  return function(start, end, step) {\n    if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n      end = step = undefined;\n    }\n    // Ensure the sign of `-0` is preserved.\n    start = toFinite(start);\n    if (end === undefined) {\n      end = start;\n      start = 0;\n    } else {\n      end = toFinite(end);\n    }\n    step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);\n    return baseRange(start, end, step, fromRight);\n  };\n}\n\nmodule.exports = createRange;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeMax = Math.max;\n\n/**\n * The base implementation of `_.range` and `_.rangeRight` which doesn't\n * coerce arguments.\n *\n * @private\n * @param {number} start The start of the range.\n * @param {number} end The end of the range.\n * @param {number} step The value to increment or decrement by.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Array} Returns the range of numbers.\n */\nfunction baseRange(start, end, step, fromRight) {\n  var index = -1,\n      length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n      result = Array(length);\n\n  while (length--) {\n    result[fromRight ? length : ++index] = start;\n    start += step;\n  }\n  return result;\n}\n\nmodule.exports = baseRange;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function ChevronLeftIcon({ fill = 'currentColor', ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M4.404 8.28l4.604 4.602a.382.382 0 0 0 .279.118c.108 0 .2-.04.279-.118l1.03-1.03a.382.382 0 0 0 .117-.278.382.382 0 0 0-.117-.28L7.3 8l3.295-3.294a.382.382 0 0 0 .117-.28.382.382 0 0 0-.117-.279l-1.03-1.03A.382.382 0 0 0 9.286 3a.382.382 0 0 0-.278.118L4.404 7.72A.382.382 0 0 0 4.287 8c0 .108.04.201.117.28z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../helpers/l10n';\nimport './MultipleSelectionHint.css';\n\ninterface Props {\n  options: number;\n  values: number;\n}\n\nexport default function MultipleSelectionHint({ options, values }: Props) {\n  // do not render if nothing is selected or there are less than 2 possible options\n  if (values === 0 || options < 2) {\n    return null;\n  }\n\n  return (\n    <div className=\"multiple-selection-hint\">\n      <div className=\"multiple-selection-hint-inner\">\n        {translate(\n          isOnMac()\n            ? 'shortcuts.section.global.facets.multiselection.mac'\n            : 'shortcuts.section.global.facets.multiselection'\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction isOnMac() {\n  return navigator.userAgent.indexOf('Mac OS X') !== -1;\n}\n","var parse = require('../parse/index.js')\n\n/**\n * @category Month Helpers\n * @summary Get the number of days in a month of the given date.\n *\n * @description\n * Get the number of days in a month of the given date.\n *\n * @param {Date|String|Number} date - the given date\n * @returns {Number} the number of days in a month\n *\n * @example\n * // How many days are in February 2000?\n * var result = getDaysInMonth(new Date(2000, 1))\n * //=> 29\n */\nfunction getDaysInMonth (dirtyDate) {\n  var date = parse(dirtyDate)\n  var year = date.getFullYear()\n  var monthIndex = date.getMonth()\n  var lastDayOfMonth = new Date(0)\n  lastDayOfMonth.setFullYear(year, monthIndex + 1, 0)\n  lastDayOfMonth.setHours(0, 0, 0, 0)\n  return lastDayOfMonth.getDate()\n}\n\nmodule.exports = getDaysInMonth\n","var parse = require('../parse/index.js')\nvar getDaysInMonth = require('../get_days_in_month/index.js')\n\n/**\n * @category Month Helpers\n * @summary Set the month to the given date.\n *\n * @description\n * Set the month to the given date.\n *\n * @param {Date|String|Number} date - the date to be changed\n * @param {Number} month - the month of the new date\n * @returns {Date} the new date with the month setted\n *\n * @example\n * // Set February to 1 September 2014:\n * var result = setMonth(new Date(2014, 8, 1), 1)\n * //=> Sat Feb 01 2014 00:00:00\n */\nfunction setMonth (dirtyDate, dirtyMonth) {\n  var date = parse(dirtyDate)\n  var month = Number(dirtyMonth)\n  var year = date.getFullYear()\n  var day = date.getDate()\n\n  var dateWithDesiredMonth = new Date(0)\n  dateWithDesiredMonth.setFullYear(year, month, 15)\n  dateWithDesiredMonth.setHours(0, 0, 0, 0)\n  var daysInMonth = getDaysInMonth(dateWithDesiredMonth)\n  // Set the last day of the new month\n  // if the original date was the last day of the longer month\n  date.setMonth(month, Math.min(day, daysInMonth))\n  return date\n}\n\nmodule.exports = setMonth\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./DayPicker.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".DayPicker{display:inline-block}.DayPicker-wrapper{position:relative;-webkit-user-select:none;-ms-user-select:none;user-select:none;padding-bottom:8px;flex-direction:row}.DayPicker-Months{display:flex;flex-wrap:wrap;justify-content:center}.DayPicker-Month{display:table;border-collapse:collapse;border-spacing:0;-webkit-user-select:none;-ms-user-select:none;user-select:none;margin:8px 8px 0}.DayPicker-Weekdays{display:table-header-group}.DayPicker-WeekdaysRow{display:table-row}.DayPicker-Weekday{display:table-cell;padding:8px;font-size:12px;text-align:center;color:#999}.DayPicker-Weekday abbr[title]{border-bottom:none;text-decoration:none}.DayPicker-Body{display:table-row-group}.DayPicker-Week{display:table-row}.DayPicker-Day{display:table-cell;line-height:15px;padding:8px;text-align:center;cursor:pointer;vertical-align:top;outline:none}.DayPicker--interactionDisabled .DayPicker-Day{cursor:default}.DayPicker-Footer{padding-top:8px}.DayPicker-Day--today{font-weight:700}.DayPicker-Day--outside{cursor:default;color:#8b9898}.DayPicker-Day--disabled{color:#cdcdcd;cursor:not-allowed}.DayPicker-Day--sunday{background-color:#f7f8f8}.DayPicker-Day--sunday:not(.DayPicker-Day--today){color:#dce0e0}.DayPicker-Day--selected:not(.DayPicker-Day--disabled):not(.DayPicker-Day--outside){background-color:#4b9fd5;color:#fff}.DayPicker:not(.DayPicker--interactionDisabled) .DayPicker-Day:not(.DayPicker-Day--disabled):not(.DayPicker-Day--selected):not(.DayPicker-Day--highlighted):not(.DayPicker-Day--outside):hover{background-color:#f3f3f3}.DayPicker-Day--highlighted:not(.DayPicker-Day--disabled):not(.DayPicker-Day--selected):not(.DayPicker-Day--outside){background-color:#cae3f2}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".date-input-control{position:relative;display:inline-block;cursor:pointer}.date-input-control-input{width:130px;padding-left:24px!important;cursor:pointer}.date-input-control-input.is-filled{padding-right:16px!important}.date-input-control-icon{position:absolute;top:4px;left:4px}.date-input-control-icon path{fill:#cdcdcd;transition:fill .3s ease}.date-input-control-input:focus+.date-input-control-icon path{fill:#4b9fd5}.date-input-control-reset{position:absolute;top:4px;right:4px;border:none}.date-input-calendar{position:absolute;z-index:7500;top:100%;left:0;border:1px solid #e6e6e6;background-color:#fff;box-shadow:0 6px 12px rgba(0,0,0,.175)}.date-input-calendar-nav{display:flex;justify-content:space-between;align-items:center;padding-top:8px;padding-left:8px;padding-right:8px}.date-input-calender-month-select{width:70px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../node_modules/postcss-loader/src/index.js??postcss!./search-navigator.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".search-navigator.sticky .search-navigator-workspace-header{position:fixed;z-index:50;top:0;left:300px;right:0}.search-navigator.sticky .search-navigator-workspace-details,.search-navigator.sticky .search-navigator-workspace-list{padding-top:43px}.search-navigator-facet-box{background-color:#f3f3f3;font-size:13px}.search-navigator-facet-box.leak-facet-box{background-color:#fbf3d5;border:1px solid #f1e8cb}.search-navigator-facet-box.is-inner{margin-left:8px;padding-left:12px;border-left:1px solid #e6e6e6}.search-navigator-facet-box.is-inner .search-navigator-facet-header{padding-top:6px;padding-bottom:6px}.leak-facet-box:not(.hidden)+.leak-facet-box{border-top:none}.search-navigator-facet-box-forbidden{background-color:transparent;opacity:.5}.search-navigator-facet-box-forbidden .search-navigator-facet-container,.search-navigator-facet-box-forbidden .search-navigator-facet-empty,.search-navigator-facet-box-forbidden .search-navigator-facet-list{display:none}.search-navigator-facet-box-forbidden .search-navigator-facet-header{color:#666}.search-navigator-facet-box-forbidden .search-navigator-facet-header:hover{color:#4b9fd5}.search-navigator-facet-box-forbidden .search-navigator-facet-header{cursor:default}.search-navigator-facet-box-forbidden .search-navigator-facet-header:hover{color:#666}.search-navigator-facet{position:relative;display:inline-flex;justify-content:space-between;align-items:center;width:100%;height:24px;margin:0 0 1px;padding:0 6px;border:1px solid transparent;border-radius:2px;box-sizing:border-box;white-space:normal;opacity:.3;cursor:not-allowed;transition:none}a.search-navigator-facet{opacity:1;cursor:pointer}a.search-navigator-facet .facet-name{color:#333}.search-navigator-facet.active,a.search-navigator-facet:focus,a.search-navigator-facet:hover{border-color:#4b9fd5}.search-navigator-facet.facet-category{opacity:1;cursor:default}.search-navigator-facet.facet-category .facet-name{color:#666}.search-navigator-facet .facet-name{flex:1 1 auto;min-width:0;line-height:16px;padding:1px 0;color:#666;font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.search-navigator-facet .facet-stat{display:flex;align-items:center;margin-left:8px;color:#666;font-size:12px}.search-navigator-facet .facet-toggle{display:none;float:left;height:16px;line-height:16px;margin-top:-1px;padding:0 5px;border-radius:2px;font-size:11px;text-transform:lowercase}.search-navigator-facet .facet-toggle:hover{color:#333}.search-navigator-facet .facet-toggle-active.facet-toggle-green{background-color:#0a0;color:#fff}.search-navigator-facet .facet-toggle-active.facet-toggle-red{background-color:#d4333f;color:#fff}.leak-facet-box .search-navigator-facet .facet-name,.leak-facet-box .search-navigator-facet .facet-stat{background-color:#fbf3d5}.leak-facet-box .search-navigator-facet .facet-stat:before{background-image:linear-gradient(90deg,rgba(251,243,213,0),#fbf3d5 75%)}.search-navigator-facet.active{background-color:#cae3f2;text-decoration:none}.search-navigator-facet.active .facet-toggle{display:inline}.search-navigator-facet.compare .facet-toggle{cursor:not-allowed;opacity:.5}.search-navigator-facet.compare .facet-toggle.facet-toggle-green{background-color:#0a0;color:#fff}.search-navigator-facet.compare .facet-toggle.facet-toggle-red{background-color:transparent;color:#666}.search-navigator-facet-half{width:45%}.search-navigator-facet-half:nth-child(odd){margin-right:10%}.search-navigator-facet-highlight-under-container{margin-bottom:1px}.search-navigator-facet-highlight-under-container .search-navigator-facet{margin-bottom:0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover{border-bottom:none;padding-bottom:1px;border-radius:2px 2px 0 0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet{border-top:none;border-bottom:none;border-left-color:#4b9fd5;border-right-color:#4b9fd5;border-radius:0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:last-of-type,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet:last-of-type{border-bottom:1px solid #4b9fd5;border-radius:0 0 2px 2px}.search-navigator-facet-highlight-under-container .search-navigator-facet.active:last-of-type,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover:last-of-type{border-bottom:1px solid #4b9fd5;border-radius:2px}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet{background-color:#cae3f2;text-decoration:none}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet .facet-toggle{display:inline}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet.active{border-top:1px solid #4b9fd5}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover,.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover~.search-navigator-facet{background-color:#a1cde8;text-decoration:none}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover .facet-toggle,.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover~.search-navigator-facet .facet-toggle{display:inline}.search-navigator-facet-header{display:block;flex-shrink:0;padding:8px 0;color:#333;font-weight:600;overflow:hidden;white-space:nowrap}.search-navigator-facet-header>a{border-bottom:none;color:#333}.search-navigator-facet-header>a:focus,.search-navigator-facet-header>a:hover{color:#4b9fd5}.search-navigator-facet-header>.note{font-weight:400}.search-navigator-facet-header>h3,.search-navigator-facet-header>h4{line-height:inherit;display:inline}.search-navigator-facet-header-value{display:block;overflow:hidden}.search-navigator-facet-header-value>.badge{display:block}.search-navigator-facet-header-button{flex-shrink:0;margin-left:auto}.search-navigator-facet-header-wrapper{display:flex;align-items:center}.search-navigator-facet-list{padding-bottom:8px;font-size:0}.search-navigator-facet-list-title{margin:0 8px 4px;font-size:12px;font-weight:700}.search-navigator-facet-list+.search-navigator-facet-list>.search-navigator-facet-list-title{border-top:1px solid #e6e6e6;padding-top:8px}.search-navigator-facet-empty{margin:0;padding:0 10px 10px;color:#333;font-size:12px;white-space:nowrap}.search-navigator-facet-footer{display:block;padding-bottom:8px;border-bottom:none}.search-navigator-facet-container{margin-top:6px;padding:0 10px 16px}.search-navigator-date-facet-selection{position:relative;padding-left:8px;font-size:12px}.search-navigator-date-facet-selection:after,.search-navigator-date-facet-selection:before{display:table;content:\\\"\\\";line-height:0}.search-navigator-date-facet-selection:after{clear:both}.search-navigator-date-facet-selection .date-input-control-input{width:115px!important}.search-navigator-date-facet-selection-dropdown-left{float:left;border-bottom:none}.search-navigator-date-facet-selection-dropdown-right{float:right;border-bottom:none}.search-navigator-date-facet-selection-input-left{position:absolute;left:0;width:100px;visibility:hidden}.search-navigator-date-facet-selection-input-right{position:absolute;right:0;width:100px;visibility:hidden}.search-navigator-date-facet-selection .date-input-control:not(:first-of-type) .date-input-calendar{left:auto;right:0}.search-navigator-filters{position:relative;padding:5px 10px;background-color:#f3f3f3}.search-navigator-filters:after,.search-navigator-filters:before{display:table;content:\\\"\\\";line-height:0}.search-navigator-filters:after{clear:both}.search-navigator-filters-header{margin-bottom:12px;padding-bottom:11px;border-bottom:1px solid #e6e6e6}.search-navigator-intro{width:500px;margin:0 auto;padding-top:100px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  tooltip?: boolean;\n}\n\nexport default function BuiltInQualityProfileBadge({ className, tooltip = true }: Props) {\n  const badge = (\n    <div className={classNames('badge badge-info', className)}>\n      {translate('quality_profiles.built_in')}\n    </div>\n  );\n\n  if (tooltip) {\n    return <Tooltip overlay={translate('quality_profiles.built_in.description')}>{badge}</Tooltip>;\n  }\n\n  return badge;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function CalendarIcon({ fill = 'currentColor', ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M2 14h2.25v-2.25H2V14zm2.75 0h2.5v-2.25h-2.5V14zM2 11.25h2.25v-2.5H2v2.5zm2.75 0h2.5v-2.5h-2.5v2.5zM2 8.25h2.25V6H2v2.25zM7.75 14h2.5v-2.25h-2.5V14zm-3-5.75h2.5V6h-2.5v2.25zm6 5.75H13v-2.25h-2.25V14zm-3-2.75h2.5v-2.5h-2.5v2.5zM5 4.5V2.25a.24.24 0 0 0-.074-.176A.24.24 0 0 0 4.75 2h-.5a.24.24 0 0 0-.176.074A.24.24 0 0 0 4 2.25V4.5a.24.24 0 0 0 .074.176.24.24 0 0 0 .176.074h.5a.24.24 0 0 0 .176-.074A.24.24 0 0 0 5 4.5zm5.75 6.75H13v-2.5h-2.25v2.5zm-3-3h2.5V6h-2.5v2.25zm3 0H13V6h-2.25v2.25zM11 4.5V2.25a.24.24 0 0 0-.074-.176A.24.24 0 0 0 10.75 2h-.5a.24.24 0 0 0-.176.074.24.24 0 0 0-.074.176V4.5a.24.24 0 0 0 .074.176.24.24 0 0 0 .176.074h.5a.24.24 0 0 0 .176-.074A.24.24 0 0 0 11 4.5zm3-.5v10c0 .27-.099.505-.297.703A.961.961 0 0 1 13 15H2a.961.961 0 0 1-.703-.297A.961.961 0 0 1 1 14V4c0-.27.099-.505.297-.703A.961.961 0 0 1 2 3h1v-.75c0-.344.122-.638.367-.883S3.907 1 4.25 1h.5c.344 0 .638.122.883.367S6 1.907 6 2.25V3h3v-.75c0-.344.122-.638.367-.883S9.907 1 10.25 1h.5c.344 0 .638.122.883.367s.367.54.367.883V3h1c.27 0 .505.099.703.297A.961.961 0 0 1 14 4z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as addMonths from 'date-fns/add_months';\nimport * as setMonth from 'date-fns/set_month';\nimport * as setYear from 'date-fns/set_year';\nimport * as subMonths from 'date-fns/sub_months';\nimport { range } from 'lodash';\nimport * as React from 'react';\nimport { DayModifiers, Modifier, Modifiers } from 'react-day-picker';\nimport { InjectedIntlProps, injectIntl } from 'react-intl';\nimport { ButtonIcon, ClearButton } from '../../components/controls/buttons';\nimport OutsideClickHandler from '../../components/controls/OutsideClickHandler';\nimport Select from '../../components/controls/Select';\nimport CalendarIcon from '../../components/icons/CalendarIcon';\nimport ChevronLeftIcon from '../../components/icons/ChevronLeftIcon';\nimport ChevronRightIcon from '../../components/icons/ChevronRightIcon';\nimport { getShortMonthName, getShortWeekDayName, getWeekDayName } from '../../helpers/l10n';\nimport { lazyLoadComponent } from '../lazyLoadComponent';\nimport './DayPicker.css';\nimport './styles.css';\n\nconst DayPicker = lazyLoadComponent(() => import('react-day-picker'), 'DayPicker');\n\ninterface Props {\n  className?: string;\n  currentMonth?: Date;\n  highlightFrom?: Date;\n  highlightTo?: Date;\n  inputClassName?: string;\n  maxDate?: Date;\n  minDate?: Date;\n  name?: string;\n  onChange: (date: Date | undefined) => void;\n  placeholder: string;\n  value?: Date;\n}\n\ninterface State {\n  currentMonth: Date;\n  open: boolean;\n  lastHovered?: Date;\n}\n\ntype Week = [string, string, string, string, string, string, string];\n\nexport default class DateInput extends React.PureComponent<Props, State> {\n  input?: HTMLInputElement | null;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = { currentMonth: props.value || props.currentMonth || new Date(), open: false };\n  }\n\n  focus = () => {\n    if (this.input) {\n      this.input.focus();\n    }\n    this.openCalendar();\n  };\n\n  handleResetClick = () => {\n    this.closeCalendar();\n    this.props.onChange(undefined);\n  };\n\n  openCalendar = () => {\n    this.setState({\n      currentMonth: this.props.value || this.props.currentMonth || new Date(),\n      lastHovered: undefined,\n      open: true\n    });\n  };\n\n  closeCalendar = () => {\n    this.setState({ open: false });\n  };\n\n  handleDayClick = (day: Date, modifiers: DayModifiers) => {\n    if (!modifiers.disabled) {\n      this.closeCalendar();\n      this.props.onChange(day);\n    }\n  };\n\n  handleDayMouseEnter = (day: Date, modifiers: DayModifiers) => {\n    this.setState({ lastHovered: modifiers.disabled ? undefined : day });\n  };\n\n  handleCurrentMonthChange = ({ value }: { value: number }) => {\n    this.setState((state: State) => ({ currentMonth: setMonth(state.currentMonth, value) }));\n  };\n\n  handleCurrentYearChange = ({ value }: { value: number }) => {\n    this.setState(state => ({ currentMonth: setYear(state.currentMonth, value) }));\n  };\n\n  handlePreviousMonthClick = () => {\n    this.setState(state => ({ currentMonth: subMonths(state.currentMonth, 1) }));\n  };\n\n  handleNextMonthClick = () => {\n    this.setState(state => ({ currentMonth: addMonths(state.currentMonth, 1) }));\n  };\n\n  render() {\n    const { highlightFrom, highlightTo, minDate, value } = this.props;\n    const { lastHovered } = this.state;\n\n    const after = this.props.maxDate || new Date();\n\n    const months = range(12);\n    const years = range(new Date().getFullYear() - 10, new Date().getFullYear() + 1);\n\n    const selectedDays: Modifier[] = value ? [value] : [];\n    let modifiers: Partial<Modifiers> | undefined;\n    const lastHoveredOrValue = lastHovered || value;\n\n    if (highlightFrom && lastHoveredOrValue) {\n      modifiers = { highlighted: { from: highlightFrom, to: lastHoveredOrValue } };\n      selectedDays.push(highlightFrom);\n    }\n    if (highlightTo && lastHoveredOrValue) {\n      modifiers = { highlighted: { from: lastHoveredOrValue, to: highlightTo } };\n      selectedDays.push(highlightTo);\n    }\n\n    const weekdaysLong = range(7).map(getWeekDayName) as Week;\n    const weekdaysShort = range(7).map(getShortWeekDayName) as Week;\n\n    return (\n      <OutsideClickHandler onClickOutside={this.closeCalendar}>\n        <span className={classNames('date-input-control', this.props.className)}>\n          <InputWrapper\n            className={classNames('date-input-control-input', this.props.inputClassName, {\n              'is-filled': this.props.value !== undefined\n            })}\n            innerRef={node => (this.input = node)}\n            name={this.props.name}\n            onFocus={this.openCalendar}\n            placeholder={this.props.placeholder}\n            readOnly={true}\n            type=\"text\"\n            value={value}\n          />\n          <CalendarIcon className=\"date-input-control-icon\" fill=\"\" />\n          {this.props.value !== undefined && (\n            <ClearButton\n              className=\"button-tiny date-input-control-reset\"\n              iconProps={{ size: 12 }}\n              onClick={this.handleResetClick}\n            />\n          )}\n          {this.state.open && (\n            <div className=\"date-input-calendar\">\n              <nav className=\"date-input-calendar-nav\">\n                <ButtonIcon className=\"button-small\" onClick={this.handlePreviousMonthClick}>\n                  <ChevronLeftIcon />\n                </ButtonIcon>\n                <div className=\"date-input-calender-month\">\n                  <Select\n                    className=\"date-input-calender-month-select\"\n                    onChange={this.handleCurrentMonthChange}\n                    options={months.map(month => ({\n                      label: getShortMonthName(month),\n                      value: month\n                    }))}\n                    value={this.state.currentMonth.getMonth()}\n                  />\n                  <Select\n                    className=\"date-input-calender-month-select spacer-left\"\n                    onChange={this.handleCurrentYearChange}\n                    options={years.map(year => ({ label: String(year), value: year }))}\n                    value={this.state.currentMonth.getFullYear()}\n                  />\n                </div>\n                <ButtonIcon className=\"button-small\" onClick={this.handleNextMonthClick}>\n                  <ChevronRightIcon />\n                </ButtonIcon>\n              </nav>\n              <DayPicker\n                captionElement={<NullComponent />}\n                disabledDays={{ after, before: minDate }}\n                firstDayOfWeek={1}\n                modifiers={modifiers}\n                month={this.state.currentMonth}\n                navbarElement={<NullComponent />}\n                onDayClick={this.handleDayClick}\n                onDayMouseEnter={this.handleDayMouseEnter}\n                selectedDays={selectedDays}\n                weekdaysLong={weekdaysLong}\n                weekdaysShort={weekdaysShort}\n              />\n            </div>\n          )}\n        </span>\n      </OutsideClickHandler>\n    );\n  }\n}\n\nfunction NullComponent() {\n  return null;\n}\n\ntype InputWrapperProps = T.Omit<React.InputHTMLAttributes<HTMLInputElement>, 'value'> &\n  InjectedIntlProps & {\n    innerRef: React.Ref<HTMLInputElement>;\n    value: Date | undefined;\n  };\n\nconst InputWrapper = injectIntl(({ innerRef, intl, value, ...other }: InputWrapperProps) => {\n  const formattedValue =\n    value && intl.formatDate(value, { year: 'numeric', month: 'short', day: 'numeric' });\n  return <input {...other} ref={innerRef} value={formattedValue || ''} />;\n});\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { Standards } from '../types/security';\n\nexport function getStandards(): Promise<Standards> {\n  return import('./standards.json').then(x => x.default);\n}\n\nexport function renderCWECategory(standards: Standards, category: string): string {\n  const record = standards.cwe[category];\n  if (!record) {\n    return `CWE-${category}`;\n  } else if (category === 'unknown') {\n    return record.title;\n  } else {\n    return `CWE-${category} - ${record.title}`;\n  }\n}\n\nexport function renderOwaspTop10Category(\n  standards: Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.owaspTop10[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'OWASP', withPrefix);\n  } else {\n    return addPrefix(`${category.toUpperCase()} - ${record.title}`, 'OWASP', withPrefix);\n  }\n}\n\nexport function renderSansTop25Category(\n  standards: Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sansTop25[category];\n  return addPrefix(record ? record.title : category, 'SANS', withPrefix);\n}\n\nexport function renderSonarSourceSecurityCategory(\n  standards: Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sonarsourceSecurity[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'SONAR', withPrefix);\n  } else if (category === 'others') {\n    return record.title;\n  } else {\n    return addPrefix(record.title, 'SONAR', withPrefix);\n  }\n}\n\nfunction addPrefix(title: string, prefix: string, withPrefix: boolean) {\n  return withPrefix ? `${prefix} ${title}` : title;\n}\n","var parse = require('../parse/index.js')\n\n/**\n * @category Year Helpers\n * @summary Set the year to the given date.\n *\n * @description\n * Set the year to the given date.\n *\n * @param {Date|String|Number} date - the date to be changed\n * @param {Number} year - the year of the new date\n * @returns {Date} the new date with the year setted\n *\n * @example\n * // Set year 2013 to 1 September 2014:\n * var result = setYear(new Date(2014, 8, 1), 2013)\n * //=> Sun Sep 01 2013 00:00:00\n */\nfunction setYear (dirtyDate, dirtyYear) {\n  var date = parse(dirtyDate)\n  var year = Number(dirtyYear)\n  date.setFullYear(year)\n  return date\n}\n\nmodule.exports = setYear\n","var addMonths = require('../add_months/index.js')\n\n/**\n * @category Month Helpers\n * @summary Subtract the specified number of months from the given date.\n *\n * @description\n * Subtract the specified number of months from the given date.\n *\n * @param {Date|String|Number} date - the date to be changed\n * @param {Number} amount - the amount of months to be subtracted\n * @returns {Date} the new date with the months subtracted\n *\n * @example\n * // Subtract 5 months from 1 February 2015:\n * var result = subMonths(new Date(2015, 1, 1), 5)\n * //=> Mon Sep 01 2014 00:00:00\n */\nfunction subMonths (dirtyDate, dirtyAmount) {\n  var amount = Number(dirtyAmount)\n  return addMonths(dirtyDate, -amount)\n}\n\nmodule.exports = subMonths\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from '../../components/controls/Tooltip';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\n\nexport interface PageShortcutsTooltipProps {\n  className?: string;\n  leftAndRightLabel?: string;\n  leftLabel?: string;\n  upAndDownLabel?: string;\n  metaModifierLabel?: string;\n}\n\nexport default function PageShortcutsTooltip(props: PageShortcutsTooltipProps) {\n  const { className, leftAndRightLabel, leftLabel, upAndDownLabel, metaModifierLabel } = props;\n  return (\n    <Tooltip\n      overlay={\n        <div className=\"small nowrap\">\n          <div>\n            {upAndDownLabel && (\n              <span>\n                <span className=\"shortcut-button little-spacer-right\"></span>\n                <span className=\"shortcut-button spacer-right\"></span>\n                {upAndDownLabel}\n              </span>\n            )}\n            {leftAndRightLabel && (\n              <span className={classNames({ 'big-spacer-left': upAndDownLabel })}>\n                <span className=\"shortcut-button little-spacer-right\"></span>\n                <span className=\"shortcut-button spacer-right\"></span>\n                {leftAndRightLabel}\n              </span>\n            )}\n            {leftLabel && (\n              <span className={classNames({ 'big-spacer-left': upAndDownLabel })}>\n                <span className=\"shortcut-button spacer-right\"></span>\n                {leftLabel}\n              </span>\n            )}\n          </div>\n          {metaModifierLabel && (\n            <div className=\"big-spacer-top big-padded-top bordered-top\">\n              <span className=\"shortcut-button little-spacer-right\">alt</span>\n              <span className=\"little-spacer-right\">+</span>\n              <span className=\"shortcut-button little-spacer-right\"></span>\n              <span className=\"shortcut-button spacer-right\"></span>\n              <span className=\"shortcut-button little-spacer-right\"></span>\n              <span className=\"shortcut-button spacer-right\"></span>\n              {metaModifierLabel}\n            </div>\n          )}\n        </div>\n      }>\n      <div\n        aria-label={`\n        ${translate('shortcuts.on_page.intro')}\n        ${\n          upAndDownLabel\n            ? translateWithParameters('shortcuts.on_page.up_down_x', upAndDownLabel)\n            : ''\n        }\n        ${\n          leftAndRightLabel\n            ? translateWithParameters('shortcuts.on_page.left_right_x', leftAndRightLabel)\n            : ''\n        }\n        ${leftLabel ? translateWithParameters('shortcuts.on_page.left_x', leftLabel) : ''}\n        ${\n          metaModifierLabel\n            ? translateWithParameters('shortcuts.on_page.meta_x', metaModifierLabel)\n            : ''\n        }\n      `}\n        className={classNames(\n          className,\n          'page-shortcuts-tooltip note text-center display-inline-block'\n        )}>\n        <div>\n          <span className=\"shortcut-button shortcut-button-tiny\"></span>\n        </div>\n        <div>\n          <span className=\"shortcut-button shortcut-button-tiny\"></span>\n          <span className=\"shortcut-button shortcut-button-tiny\"></span>\n          <span className=\"shortcut-button shortcut-button-tiny\"></span>\n        </div>\n      </div>\n    </Tooltip>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Dropdown from '../../../components/controls/Dropdown';\nimport DropdownIcon from '../../../components/icons/DropdownIcon';\nimport FilterIcon from '../../../components/icons/FilterIcon';\nimport IssueTypeIcon from '../../../components/icons/IssueTypeIcon';\nimport TagsIcon from '../../../components/icons/TagsIcon';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { translate } from '../../../helpers/l10n';\nimport { Query } from '../query';\n\ninterface Props {\n  onFilterChange: (changes: Partial<Query>) => void;\n  rule: T.Rule;\n}\n\nexport default class SimilarRulesFilter extends React.PureComponent<Props> {\n  handleLanguageClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.rule.lang) {\n      this.props.onFilterChange({ languages: [this.props.rule.lang] });\n    }\n  };\n\n  handleTypeClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onFilterChange({ types: [this.props.rule.type] });\n  };\n\n  handleSeverityClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.rule.severity) {\n      this.props.onFilterChange({ severities: [this.props.rule.severity] });\n    }\n  };\n\n  handleTagClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    const { tag } = event.currentTarget.dataset;\n    if (tag) {\n      this.props.onFilterChange({ tags: [tag] });\n    }\n  };\n\n  render() {\n    const { rule } = this.props;\n    const { tags = [], sysTags = [], severity } = rule;\n    const allTags = [...tags, ...sysTags];\n\n    return (\n      <Dropdown\n        className=\"display-inline-block\"\n        overlay={\n          <>\n            <ul className=\"menu\">\n              <li className=\"menu-header\">{translate('coding_rules.filter_similar_rules')}</li>\n              <li>\n                <a\n                  data-test=\"coding-rules__similar-language\"\n                  href=\"#\"\n                  onClick={this.handleLanguageClick}>\n                  {rule.langName}\n                </a>\n              </li>\n\n              <li>\n                <a\n                  className=\"display-flex-center\"\n                  data-test=\"coding-rules__similar-type\"\n                  href=\"#\"\n                  onClick={this.handleTypeClick}>\n                  <IssueTypeIcon query={rule.type} />\n                  <span className=\"little-spacer-left\">{translate('issue.type', rule.type)}</span>\n                </a>\n              </li>\n\n              {severity && (\n                <li>\n                  <a\n                    data-test=\"coding-rules__similar-severity\"\n                    href=\"#\"\n                    onClick={this.handleSeverityClick}>\n                    <SeverityHelper className=\"display-flex-center\" severity={rule.severity} />\n                  </a>\n                </li>\n              )}\n\n              {allTags.length > 0 && <li className=\"divider\" />}\n              {allTags.map(tag => (\n                <li key={tag}>\n                  <a\n                    data-tag={tag}\n                    data-test=\"coding-rules__similar-tag\"\n                    href=\"#\"\n                    onClick={this.handleTagClick}>\n                    <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                    <span className=\"text-middle\">{tag}</span>\n                  </a>\n                </li>\n              ))}\n            </ul>\n          </>\n        }>\n        <a\n          className=\"js-rule-filter link-no-underline spacer-left dropdown-toggle\"\n          href=\"#\"\n          title={translate('coding_rules.filter_similar_rules')}>\n          <FilterIcon className=\"icon-half-transparent\" />\n          <DropdownIcon className=\"icon-half-transparent\" />\n        </a>\n      </Dropdown>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function BackIcon({ fill = 'currentColor', ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M3.6 8.69l4.07 4.13.04.04a.7.7 0 01.12.7.69.69 0 01-.86.4.73.73 0 01-.26-.16L1 8l5.71-5.8.04-.03A.73.73 0 017.13 2l.1-.01c.1.01.2.04.3.09a.7.7 0 01.3.82c-.03.1-.09.19-.16.27L3.61 7.3c3.59-.03 7.18-.14 10.77.01.05 0 .06 0 .1.02a.68.68 0 01.52.61.7.7 0 01-.57.74h-.1z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from '../../components/controls/buttons';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  displayReset: boolean;\n  onReset: () => void;\n}\n\nexport default function FiltersHeader({ displayReset, onReset }: Props) {\n  return (\n    <div className=\"search-navigator-filters-header\">\n      {displayReset && (\n        <div className=\"pull-right\">\n          <Button className=\"button-red\" id=\"coding-rules-clear-all-filters\" onClick={onReset}>\n            {translate('clear_all_filters')}\n          </Button>\n        </div>\n      )}\n\n      <h2 className=\"h3\">{translate('filters')}</h2>\n    </div>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".coding-rules-extended-view .coding-rules-list{display:none}.coding-rules-extended-view .coding-rules-details{display:block}.coding-rules-detail-title{position:relative;display:inline-block;margin:16px 0;font-size:16px;font-weight:400}.coding-rules-detail-quality-profile-parameter{display:block;height:100%;padding-top:0;padding-right:10px}.coding-rules-detail-quality-profile-parameter .key,.coding-rules-detail-quality-profile-parameter .sep,.coding-rules-detail-quality-profile-parameter .value{display:inline;vertical-align:top}.coding-rules-detail-quality-profile-parameter .value{display:inline-block;vertical-align:top;line-height:23px;max-width:300px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Consolas,Ubuntu Mono,Liberation Mono,Menlo,Courier,monospace}.coding-rules-detail-quality-profile-parameter+.coding-rules-detail-quality-profile-parameter{margin-top:0}.coding-rules-detail-properties{display:flex;flex-wrap:wrap;align-items:center;margin-top:8px}.coding-rules-detail-properties+.coding-rules-detail-properties{margin-top:-10px}.coding-rules-detail-property{display:flex;align-items:center;margin-right:16px;margin-bottom:8px;font-size:12px}.coding-rules-detail-tag+.coding-rules-detail-tag{margin-left:10px}.coding-rules-detail-tags-change{cursor:pointer}.coding-rules-detail-tags-change:hover span{text-decoration:underline}.coding-rules-detail-tag-edit{line-height:1}.coding-rules-details-tag-edit-cancel{vertical-align:middle}.coding-rules-detail-description{margin:20px 0}.coding-rules-detail-description-extra{margin-top:-10px}.coding-rules-detail-extend-description-form{margin:10px 0}.coding-rules-detail-parameters{width:100%;margin:10px 0 20px}.coding-rules-detail-parameter-name{width:1px;vertical-align:top;padding:5px 10px 5px 0;font-weight:700}.coding-rules-detail-parameter-description{vertical-align:top;padding:5px}.coding-rules-detail-parameter-value{font-family:Consolas,Ubuntu Mono,Liberation Mono,Menlo,Courier,monospace;word-break:break-all}.coding-rules-detail-list,.coding-rules-detail-quality-profiles{width:100%;line-height:22px}.coding-rules-detail-list td,.coding-rules-detail-quality-profiles td{border-top:1px solid #e6e6e6}.coding-rules-detail-list tr:first-child td,.coding-rules-detail-quality-profiles tr:first-child td{border-top:none}.coding-rules-detail-list-name,.coding-rules-detail-quality-profile-name{vertical-align:top;width:1px;padding:8px 5px 8px 0;font-weight:600;white-space:nowrap}.coding-rules-detail-list-severity,.coding-rules-detail-quality-profile-severity{vertical-align:top;width:1px;padding:8px 5px;white-space:nowrap}.coding-rules-detail-quality-profile-severity i{margin-top:2px}.coding-rules-detail-list-parameters,.coding-rules-detail-quality-profile-parameters{vertical-align:top;padding:8px 5px}.coding-rules-detail-list-actions,.coding-rules-detail-quality-profile-actions{vertical-align:top;width:1px;padding:8px 0 8px 5px;text-align:right;white-space:nowrap}.coding-rules-detail-quality-profile-inheritance{font-size:12px;font-weight:400}.coding-rules-detail-quality-profiles-activation{margin-top:-3px;margin-left:10px}.coding-rules-most-violated-projects td{border-top-color:transparent}.coding-rules-most-violated-projects tr:first-child+tr td{border-top-color:#e6e6e6}.coding-rules-most-violated-projects .coding-rules-detail-list-name{font-weight:400}.coding-rule{padding:8px 10px 8px 8px;border:1px solid transparent;background-color:#fff}.coding-rule.selected{border-color:#4b9fd5!important}.coding-rule+.coding-rule{border-top-color:#e6e6e6}.coding-rule.selected+.coding-rule{border-top-color:transparent}.coding-rule-table{width:100%}.coding-rule-table td{vertical-align:top}.coding-rule-table+.coding-rule-table{margin-top:5px}.coding-rule-table-meta-cell{width:1px;white-space:nowrap}@media (max-width:1320px){.coding-rule-table .tags-list span{max-width:100px}}.coding-rule-title{line-height:20px;font-size:13px}.coding-rule-meta{padding:2px 2px 2px 30px;font-size:12px}.coding-rule-activation{width:40px;line-height:19.5px}.coding-rule-activation-actions{padding-left:20px}.coding-rule-section-separator{height:0;margin:10px 0;border-top:1px solid #e6e6e6}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { omit, sortBy, without } from 'lodash';\nimport * as React from 'react';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport ListStyleFacet from '../../../components/facet/ListStyleFacet';\nimport MultipleSelectionHint from '../../../components/facet/MultipleSelectionHint';\nimport { translate } from '../../../helpers/l10n';\nimport { highlightTerm } from '../../../helpers/search';\nimport {\n  getStandards,\n  renderCWECategory,\n  renderOwaspTop10Category,\n  renderSansTop25Category,\n  renderSonarSourceSecurityCategory\n} from '../../../helpers/security-standard';\nimport { Facet } from '../../../types/issues';\nimport { SecurityStandard, Standards, StandardType } from '../../../types/security';\nimport { formatFacetStat, Query, STANDARDS } from '../utils';\n\ninterface Props {\n  cwe: string[];\n  cweOpen: boolean;\n  cweStats: T.Dict<number> | undefined;\n  fetchingCwe: boolean;\n  fetchingOwaspTop10: boolean;\n  fetchingSansTop25: boolean;\n  fetchingSonarSourceSecurity: boolean;\n  loadSearchResultCount?: (property: string, changes: Partial<Query>) => Promise<Facet>;\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  owaspTop10: string[];\n  owaspTop10Open: boolean;\n  owaspTop10Stats: T.Dict<number> | undefined;\n  query: Partial<Query>;\n  sansTop25: string[];\n  sansTop25Open: boolean;\n  sansTop25Stats: T.Dict<number> | undefined;\n  sonarsourceSecurity: string[];\n  sonarsourceSecurityOpen: boolean;\n  sonarsourceSecurityStats: T.Dict<number> | undefined;\n}\n\ninterface State {\n  standards: Standards;\n}\n\ntype StatsProp = 'owaspTop10Stats' | 'cweStats' | 'sansTop25Stats' | 'sonarsourceSecurityStats';\ntype ValuesProp = StandardType;\n\nexport default class StandardFacet extends React.PureComponent<Props, State> {\n  mounted = false;\n  property = STANDARDS;\n  state: State = {\n    standards: { owaspTop10: {}, sansTop25: {}, cwe: {}, sonarsourceSecurity: {} }\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n\n    // load standards.json only if the facet is open, or there is a selected value\n    if (\n      this.props.open ||\n      this.props.owaspTop10.length > 0 ||\n      this.props.cwe.length > 0 ||\n      this.props.sansTop25.length > 0 ||\n      this.props.sonarsourceSecurity.length > 0\n    ) {\n      this.loadStandards();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.open && this.props.open) {\n      this.loadStandards();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadStandards = () => {\n    getStandards().then(\n      ({ owaspTop10, sansTop25, cwe, sonarsourceSecurity }: Standards) => {\n        if (this.mounted) {\n          this.setState({ standards: { owaspTop10, sansTop25, cwe, sonarsourceSecurity } });\n        }\n      },\n      () => {}\n    );\n  };\n\n  getValues = () => {\n    return [\n      ...this.props.sonarsourceSecurity.map(item =>\n        renderSonarSourceSecurityCategory(this.state.standards, item, true)\n      ),\n      ...this.props.owaspTop10.map(item =>\n        renderOwaspTop10Category(this.state.standards, item, true)\n      ),\n      ...this.props.sansTop25.map(item =>\n        renderSansTop25Category(this.state.standards, item, true)\n      ),\n      ...this.props.cwe.map(item => renderCWECategory(this.state.standards, item))\n    ];\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleOwaspTop10HeaderClick = () => {\n    this.props.onToggle('owaspTop10');\n  };\n\n  handleSansTop25HeaderClick = () => {\n    this.props.onToggle('sansTop25');\n  };\n\n  handleSonarSourceSecurityHeaderClick = () => {\n    this.props.onToggle('sonarsourceSecurity');\n  };\n\n  handleClear = () => {\n    this.props.onChange({\n      [this.property]: [],\n      owaspTop10: [],\n      sansTop25: [],\n      cwe: [],\n      sonarsourceSecurity: []\n    });\n  };\n\n  handleItemClick = (prop: ValuesProp, itemValue: string, multiple: boolean) => {\n    const items = this.props[prop];\n    if (multiple) {\n      const newValue = sortBy(\n        items.includes(itemValue) ? without(items, itemValue) : [...items, itemValue]\n      );\n      this.props.onChange({ [prop]: newValue });\n    } else {\n      this.props.onChange({\n        [prop]: items.includes(itemValue) && items.length < 2 ? [] : [itemValue]\n      });\n    }\n  };\n\n  handleOwaspTop10ItemClick = (itemValue: string, multiple: boolean) => {\n    this.handleItemClick(SecurityStandard.OWASP_TOP10, itemValue, multiple);\n  };\n\n  handleSansTop25ItemClick = (itemValue: string, multiple: boolean) => {\n    this.handleItemClick(SecurityStandard.SANS_TOP25, itemValue, multiple);\n  };\n\n  handleSonarSourceSecurityItemClick = (itemValue: string, multiple: boolean) => {\n    this.handleItemClick(SecurityStandard.SONARSOURCE, itemValue, multiple);\n  };\n\n  handleCWESearch = (query: string) => {\n    return Promise.resolve({\n      results: Object.keys(this.state.standards.cwe).filter(cwe =>\n        renderCWECategory(this.state.standards, cwe)\n          .toLowerCase()\n          .includes(query.toLowerCase())\n      )\n    });\n  };\n\n  loadCWESearchResultCount = (categories: string[]) => {\n    const { loadSearchResultCount } = this.props;\n    return loadSearchResultCount\n      ? loadSearchResultCount('cwe', { cwe: categories })\n      : Promise.resolve({});\n  };\n\n  renderList = (\n    statsProp: StatsProp,\n    valuesProp: ValuesProp,\n    renderName: (standards: Standards, category: string) => string,\n    onClick: (x: string, multiple?: boolean) => void\n  ) => {\n    const stats = this.props[statsProp];\n    const values = this.props[valuesProp];\n    if (!stats) {\n      return null;\n    }\n    const categories = sortBy(Object.keys(stats), key => -stats[key]);\n    return this.renderFacetItemsList(stats, values, categories, renderName, renderName, onClick);\n  };\n\n  // eslint-disable-next-line max-params\n  renderFacetItemsList = (\n    stats: any,\n    values: string[],\n    categories: string[],\n    renderName: (standards: Standards, category: string) => React.ReactNode,\n    renderTooltip: (standards: Standards, category: string) => string,\n    onClick: (x: string, multiple?: boolean) => void\n  ) => {\n    if (!categories.length) {\n      return (\n        <div className=\"search-navigator-facet-empty little-spacer-top\">\n          {translate('no_results')}\n        </div>\n      );\n    }\n\n    const getStat = (category: string) => {\n      return stats ? stats[category] : undefined;\n    };\n\n    return (\n      <FacetItemsList>\n        {categories.map(category => (\n          <FacetItem\n            active={values.includes(category)}\n            key={category}\n            name={renderName(this.state.standards, category)}\n            onClick={onClick}\n            stat={formatFacetStat(getStat(category))}\n            tooltip={renderTooltip(this.state.standards, category)}\n            value={category}\n          />\n        ))}\n      </FacetItemsList>\n    );\n  };\n\n  renderHint = (statsProp: StatsProp, valuesProp: ValuesProp) => {\n    const stats = this.props[statsProp] || {};\n    const values = this.props[valuesProp];\n    return <MultipleSelectionHint options={Object.keys(stats).length} values={values.length} />;\n  };\n\n  renderOwaspTop10List() {\n    return this.renderList(\n      'owaspTop10Stats',\n      SecurityStandard.OWASP_TOP10,\n      renderOwaspTop10Category,\n      this.handleOwaspTop10ItemClick\n    );\n  }\n\n  renderOwaspTop10Hint() {\n    return this.renderHint('owaspTop10Stats', SecurityStandard.OWASP_TOP10);\n  }\n\n  renderSansTop25List() {\n    return this.renderList(\n      'sansTop25Stats',\n      SecurityStandard.SANS_TOP25,\n      renderSansTop25Category,\n      this.handleSansTop25ItemClick\n    );\n  }\n\n  renderSansTop25Hint() {\n    return this.renderHint('sansTop25Stats', SecurityStandard.SANS_TOP25);\n  }\n\n  renderSonarSourceSecurityList() {\n    return this.renderList(\n      'sonarsourceSecurityStats',\n      SecurityStandard.SONARSOURCE,\n      renderSonarSourceSecurityCategory,\n      this.handleSonarSourceSecurityItemClick\n    );\n  }\n\n  renderSonarSourceSecurityHint() {\n    return this.renderHint('sonarsourceSecurityStats', SecurityStandard.SONARSOURCE);\n  }\n\n  renderSubFacets() {\n    return (\n      <>\n        <FacetBox className=\"is-inner\" property={SecurityStandard.SONARSOURCE}>\n          <FacetHeader\n            fetching={this.props.fetchingSonarSourceSecurity}\n            name={translate('issues.facet.sonarsourceSecurity')}\n            onClick={this.handleSonarSourceSecurityHeaderClick}\n            open={this.props.sonarsourceSecurityOpen}\n            values={this.props.sonarsourceSecurity.map(item =>\n              renderSonarSourceSecurityCategory(this.state.standards, item)\n            )}\n          />\n          {this.props.sonarsourceSecurityOpen && (\n            <>\n              {this.renderSonarSourceSecurityList()}\n              {this.renderSonarSourceSecurityHint()}\n            </>\n          )}\n        </FacetBox>\n        <FacetBox className=\"is-inner\" property={SecurityStandard.OWASP_TOP10}>\n          <FacetHeader\n            fetching={this.props.fetchingOwaspTop10}\n            name={translate('issues.facet.owaspTop10')}\n            onClick={this.handleOwaspTop10HeaderClick}\n            open={this.props.owaspTop10Open}\n            values={this.props.owaspTop10.map(item =>\n              renderOwaspTop10Category(this.state.standards, item)\n            )}\n          />\n          {this.props.owaspTop10Open && (\n            <>\n              {this.renderOwaspTop10List()}\n              {this.renderOwaspTop10Hint()}\n            </>\n          )}\n        </FacetBox>\n        <FacetBox className=\"is-inner\" property={SecurityStandard.SANS_TOP25}>\n          <FacetHeader\n            fetching={this.props.fetchingSansTop25}\n            name={translate('issues.facet.sansTop25')}\n            onClick={this.handleSansTop25HeaderClick}\n            open={this.props.sansTop25Open}\n            values={this.props.sansTop25.map(item =>\n              renderSansTop25Category(this.state.standards, item)\n            )}\n          />\n          {this.props.sansTop25Open && (\n            <>\n              {this.renderSansTop25List()}\n              {this.renderSansTop25Hint()}\n            </>\n          )}\n        </FacetBox>\n        <ListStyleFacet<string>\n          className=\"is-inner\"\n          facetHeader={translate('issues.facet.cwe')}\n          fetching={this.props.fetchingCwe}\n          getFacetItemText={item => renderCWECategory(this.state.standards, item)}\n          getSearchResultKey={item => item}\n          getSearchResultText={item => renderCWECategory(this.state.standards, item)}\n          loadSearchResultCount={this.loadCWESearchResultCount}\n          onChange={this.props.onChange}\n          onSearch={this.handleCWESearch}\n          onToggle={this.props.onToggle}\n          open={this.props.cweOpen}\n          property={SecurityStandard.CWE}\n          query={omit(this.props.query, 'cwe')}\n          renderFacetItem={item => renderCWECategory(this.state.standards, item)}\n          renderSearchResult={(item, query) =>\n            highlightTerm(renderCWECategory(this.state.standards, item), query)\n          }\n          searchPlaceholder={translate('search.search_for_cwe')}\n          stats={this.props.cweStats}\n          values={this.props.cwe}\n        />\n      </>\n    );\n  }\n\n  render() {\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getValues()}\n        />\n\n        {this.props.open && this.renderSubFacets()}\n      </FacetBox>\n    );\n  }\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./MultipleSelectionHint.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".multiple-selection-hint{margin-top:8px;margin-bottom:8px;text-align:center}.multiple-selection-hint-inner{display:inline-block;height:24px;line-height:24px;border-radius:24px;background-color:#e6e6e6;text-align:center;padding:0 8px;font-size:12px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { formatMeasure } from '../../helpers/measures';\n\nexport interface PageCounterProps {\n  className?: string;\n  current?: number;\n  label: string;\n  total: number;\n}\n\nexport default function PageCounter({ className, current, label, total }: PageCounterProps) {\n  return (\n    <div className={classNames('display-inline-block', className)}>\n      <strong className=\"little-spacer-right\">\n        {current !== undefined && formatMeasure(current + 1, 'INT') + ' / '}\n        <span className=\"it__page-counter-total\">{formatMeasure(total, 'INT')}</span>\n      </strong>\n      {label}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { colors } from '../../app/theme';\nimport { translate } from '../../helpers/l10n';\nimport Tooltip from './Tooltip';\n\ninterface Props {\n  className?: string;\n  tooltip?: string;\n  onClick: () => void;\n}\n\nexport default class ReloadButton extends React.PureComponent<Props> {\n  handleClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onClick();\n  };\n\n  render() {\n    const { tooltip = translate('reload') } = this.props;\n    return (\n      <Tooltip overlay={tooltip}>\n        <a\n          className={classNames('link-no-underline', this.props.className)}\n          href=\"#\"\n          onClick={this.handleClick}>\n          {\n            <svg height=\"24\" viewBox=\"0 0 18 24\" width=\"18\">\n              <path\n                d=\"M16.6454 8.1084c-.3-.5-.9-.7-1.4-.4-.5.3-.7.9-.4 1.4.9 1.6 1.1 3.4.6 5.1-.5 1.7-1.7 3.2-3.2 4-3.3 1.8-7.4.6-9.1-2.7-1.8-3.1-.8-6.9 2.1-8.8v3.3h2v-7h-7v2h3.9c-3.7 2.5-5 7.5-2.8 11.4 1.6 3 4.6 4.6 7.7 4.6 1.4 0 2.8-.3 4.2-1.1 2-1.1 3.5-3 4.2-5.2.6-2.2.3-4.6-.8-6.6z\"\n                fill={colors.secondFontColor}\n              />\n            </svg>\n          }\n        </a>\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueTypeIcon from '../../components/icons/IssueTypeIcon';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  type: T.IssueType | T.RuleType;\n}\n\nexport default function TypeHelper(props: Props) {\n  return (\n    <span className={props.className}>\n      <IssueTypeIcon className=\"little-spacer-right\" query={props.type} />\n      {translate('issue.type', props.type)}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from '../../../components/controls/buttons';\nimport SimpleModal from '../../../components/controls/SimpleModal';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  onCancel: () => void;\n  onSubmit: () => void;\n}\n\nexport default function RemoveExtendedDescriptionModal({ onCancel, onSubmit }: Props) {\n  const header = translate('coding_rules.remove_extended_description');\n  return (\n    <SimpleModal header={header} onClose={onCancel} onSubmit={onSubmit}>\n      {({ onCloseClick, onFormSubmit, submitting }) => (\n        <form onSubmit={onFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            {translate('coding_rules.remove_extended_description.confirm')}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton className=\"button-red\" disabled={submitting}>\n              {translate('remove')}\n            </SubmitButton>\n            <ResetButtonLink onClick={onCloseClick}>{translate('cancel')}</ResetButtonLink>\n          </footer>\n        </form>\n      )}\n    </SimpleModal>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { updateRule } from '../../../api/rules';\nimport FormattingTips from '../../../components/common/FormattingTips';\nimport { Button, ResetButtonLink } from '../../../components/controls/buttons';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { sanitizeString } from '../../../helpers/sanitize';\nimport RemoveExtendedDescriptionModal from './RemoveExtendedDescriptionModal';\n\ninterface Props {\n  canWrite: boolean | undefined;\n  onChange: (newRuleDetails: T.RuleDetails) => void;\n  ruleDetails: T.RuleDetails;\n}\n\ninterface State {\n  description: string;\n  descriptionForm: boolean;\n  removeDescriptionModal: boolean;\n  submitting: boolean;\n}\n\nexport default class RuleDetailsDescription extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    description: '',\n    descriptionForm: false,\n    submitting: false,\n    removeDescriptionModal: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDescriptionChange = (event: React.SyntheticEvent<HTMLTextAreaElement>) =>\n    this.setState({ description: event.currentTarget.value });\n\n  handleCancelClick = () => {\n    this.setState({ descriptionForm: false });\n  };\n\n  handleSaveClick = () => {\n    this.updateDescription(this.state.description);\n  };\n\n  handleRemoveDescriptionClick = () => {\n    this.setState({ removeDescriptionModal: true });\n  };\n\n  handleCancelRemoving = () => this.setState({ removeDescriptionModal: false });\n\n  handleConfirmRemoving = () => {\n    this.setState({ removeDescriptionModal: false });\n    this.updateDescription('');\n  };\n\n  updateDescription = (text: string) => {\n    this.setState({ submitting: true });\n\n    updateRule({\n      key: this.props.ruleDetails.key,\n      markdown_note: text\n    }).then(\n      ruleDetails => {\n        this.props.onChange(ruleDetails);\n        if (this.mounted) {\n          this.setState({ submitting: false, descriptionForm: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n        }\n      }\n    );\n  };\n\n  handleExtendDescriptionClick = () => {\n    this.setState({\n      // set description` to the current `mdNote` each time the form is open\n      description: this.props.ruleDetails.mdNote || '',\n      descriptionForm: true\n    });\n  };\n\n  renderDescription = () => (\n    <div id=\"coding-rules-detail-description-extra\">\n      {this.props.ruleDetails.htmlNote !== undefined && (\n        <div\n          className=\"rule-desc spacer-bottom markdown\"\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{ __html: sanitizeString(this.props.ruleDetails.htmlNote) }}\n        />\n      )}\n      {this.props.canWrite && (\n        <Button\n          id=\"coding-rules-detail-extend-description\"\n          onClick={this.handleExtendDescriptionClick}>\n          {translate('coding_rules.extend_description')}\n        </Button>\n      )}\n    </div>\n  );\n\n  renderForm = () => (\n    <div className=\"coding-rules-detail-extend-description-form\">\n      <table className=\"width-100\">\n        <tbody>\n          <tr>\n            <td colSpan={2}>\n              <textarea\n                autoFocus={true}\n                className=\"width-100 little-spacer-bottom\"\n                id=\"coding-rules-detail-extend-description-text\"\n                onChange={this.handleDescriptionChange}\n                rows={4}\n                value={this.state.description}\n              />\n            </td>\n          </tr>\n          <tr>\n            <td>\n              <Button\n                disabled={this.state.submitting}\n                id=\"coding-rules-detail-extend-description-submit\"\n                onClick={this.handleSaveClick}>\n                {translate('save')}\n              </Button>\n              {this.props.ruleDetails.mdNote !== undefined && (\n                <>\n                  <Button\n                    className=\"button-red spacer-left\"\n                    disabled={this.state.submitting}\n                    id=\"coding-rules-detail-extend-description-remove\"\n                    onClick={this.handleRemoveDescriptionClick}>\n                    {translate('remove')}\n                  </Button>\n                  {this.state.removeDescriptionModal && (\n                    <RemoveExtendedDescriptionModal\n                      onCancel={this.handleCancelRemoving}\n                      onSubmit={this.handleConfirmRemoving}\n                    />\n                  )}\n                </>\n              )}\n              <ResetButtonLink\n                className=\"spacer-left\"\n                disabled={this.state.submitting}\n                id=\"coding-rules-detail-extend-description-cancel\"\n                onClick={this.handleCancelClick}>\n                {translate('cancel')}\n              </ResetButtonLink>\n              {this.state.submitting && <i className=\"spinner spacer-left\" />}\n            </td>\n            <td className=\"text-right\">\n              <FormattingTips />\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n\n  render() {\n    const { ruleDetails } = this.props;\n    const hasDescription = !ruleDetails.isExternal || ruleDetails.type !== 'UNKNOWN';\n\n    return (\n      <div className=\"js-rule-description\">\n        {hasDescription && ruleDetails.htmlDesc !== undefined ? (\n          <div\n            className=\"coding-rules-detail-description rule-desc markdown\"\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{ __html: sanitizeString(ruleDetails.htmlDesc) }}\n          />\n        ) : (\n          <div className=\"coding-rules-detail-description rule-desc markdown\">\n            {translateWithParameters('issue.external_issue_description', ruleDetails.name)}\n          </div>\n        )}\n\n        {!ruleDetails.templateKey && (\n          <div className=\"coding-rules-detail-description coding-rules-detail-description-extra\">\n            {!this.state.descriptionForm && this.renderDescription()}\n            {this.state.descriptionForm && this.props.canWrite && this.renderForm()}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { difference, uniq, without } from 'lodash';\nimport * as React from 'react';\nimport { getRuleTags } from '../../../api/rules';\nimport TagsSelector from '../../../components/tags/TagsSelector';\n\nexport interface Props {\n  setTags: (tags: string[]) => void;\n  sysTags: string[];\n  tags: string[];\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class RuleDetailsTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return getRuleTags({\n      q: query,\n      ps: Math.min(this.props.tags.length + LIST_SIZE, 100)\n    }).then(\n      tags => {\n        if (this.mounted) {\n          // systems tags can not be unset, don't display them in the results\n          this.setState({ searchResult: without(tags, ...this.props.sysTags) });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags(uniq([...this.props.tags, tag]));\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.tags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.tags);\n    return (\n      <TagsSelector\n        listSize={LIST_SIZE}\n        onSearch={this.onSearch}\n        onSelect={this.onSelect}\n        onUnselect={this.onUnselect}\n        selectedTags={this.props.tags}\n        tags={availableTags}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ButtonLink } from '../../../components/controls/buttons';\nimport Dropdown from '../../../components/controls/Dropdown';\nimport HelpTooltip from '../../../components/controls/HelpTooltip';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport IssueTypeIcon from '../../../components/icons/IssueTypeIcon';\nimport LinkIcon from '../../../components/icons/LinkIcon';\nimport DateFormatter from '../../../components/intl/DateFormatter';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport TagsList from '../../../components/tags/TagsList';\nimport { PopupPlacement } from '../../../components/ui/popups';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { getRuleUrl } from '../../../helpers/urls';\nimport { Query } from '../query';\nimport RuleDetailsTagsPopup from './RuleDetailsTagsPopup';\nimport SimilarRulesFilter from './SimilarRulesFilter';\n\ninterface Props {\n  canWrite: boolean | undefined;\n  hideSimilarRulesFilter?: boolean;\n  onFilterChange: (changes: Partial<Query>) => void;\n  onTagsChange: (tags: string[]) => void;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  ruleDetails: T.RuleDetails;\n}\n\nconst EXTERNAL_RULE_REPO_PREFIX = 'external_';\n\nexport default class RuleDetailsMeta extends React.PureComponent<Props> {\n  renderType = () => {\n    const { ruleDetails } = this.props;\n    return (\n      <Tooltip overlay={translate('coding_rules.type.tooltip', ruleDetails.type)}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"type\">\n          <IssueTypeIcon className=\"little-spacer-right\" query={ruleDetails.type} />\n          {translate('issue.type', ruleDetails.type)}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderSeverity = () => (\n    <Tooltip overlay={translate('default_severity')}>\n      <li className=\"coding-rules-detail-property\" data-meta=\"severity\">\n        <SeverityHelper\n          className=\"display-inline-flex-center\"\n          severity={this.props.ruleDetails.severity}\n        />\n      </li>\n    </Tooltip>\n  );\n\n  renderStatus = () => {\n    const { ruleDetails } = this.props;\n    if (ruleDetails.status === 'READY') {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('status')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"status\">\n          <span className=\"badge badge-error\">{translate('rules.status', ruleDetails.status)}</span>\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderTags = () => {\n    const { canWrite, ruleDetails } = this.props;\n    const { sysTags = [], tags = [] } = ruleDetails;\n    const allTags = [...sysTags, ...tags];\n\n    return (\n      <li className=\"coding-rules-detail-property\" data-meta=\"tags\">\n        {this.props.canWrite ? (\n          <Dropdown\n            closeOnClick={false}\n            closeOnClickOutside={true}\n            overlay={\n              <RuleDetailsTagsPopup\n                setTags={this.props.onTagsChange}\n                sysTags={sysTags}\n                tags={tags}\n              />\n            }\n            overlayPlacement={PopupPlacement.BottomLeft}>\n            <ButtonLink>\n              <TagsList\n                allowUpdate={canWrite}\n                tags={allTags.length > 0 ? allTags : [translate('coding_rules.no_tags')]}\n              />\n            </ButtonLink>\n          </Dropdown>\n        ) : (\n          <TagsList\n            allowUpdate={canWrite}\n            className=\"display-flex-center\"\n            tags={allTags.length > 0 ? allTags : [translate('coding_rules.no_tags')]}\n          />\n        )}\n      </li>\n    );\n  };\n\n  renderCreationDate = () => (\n    <li className=\"coding-rules-detail-property\" data-meta=\"available-since\">\n      <span className=\"little-spacer-right\">{translate('coding_rules.available_since')}</span>\n      <DateFormatter date={this.props.ruleDetails.createdAt} />\n    </li>\n  );\n\n  renderRepository = () => {\n    const { referencedRepositories, ruleDetails } = this.props;\n    const repository = referencedRepositories[ruleDetails.repo];\n    if (!repository) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.repository_language')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"repository\">\n          {repository.name} ({ruleDetails.langName})\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderTemplate = () => {\n    if (!this.props.ruleDetails.isTemplate) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.rule_template.title')}>\n        <li className=\"coding-rules-detail-property\">{translate('coding_rules.rule_template')}</li>\n      </Tooltip>\n    );\n  };\n\n  renderParentTemplate = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.templateKey) {\n      return null;\n    }\n    return (\n      <li className=\"coding-rules-detail-property\">\n        {translate('coding_rules.custom_rule')}\n        {' ('}\n        <Link to={getRuleUrl(ruleDetails.templateKey)}>\n          {translate('coding_rules.show_template')}\n        </Link>\n        {')'}\n        <HelpTooltip\n          className=\"little-spacer-left\"\n          overlay={translate('coding_rules.custom_rule.help')}\n        />\n      </li>\n    );\n  };\n\n  renderRemediation = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.debtRemFnType) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.remediation_function')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"remediation-function\">\n          {translate('coding_rules.remediation_function', ruleDetails.debtRemFnType)}\n          {':'}\n          {ruleDetails.debtRemFnOffset !== undefined && ` ${ruleDetails.debtRemFnOffset}`}\n          {ruleDetails.debtRemFnCoeff !== undefined && ` +${ruleDetails.debtRemFnCoeff}`}\n          {ruleDetails.effortToFixDescription !== undefined &&\n            ` ${ruleDetails.effortToFixDescription}`}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderExternalBadge = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.repo) {\n      return null;\n    }\n    const engine = ruleDetails.repo.replace(new RegExp(`^${EXTERNAL_RULE_REPO_PREFIX}`), '');\n    if (!engine) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translateWithParameters('coding_rules.external_rule.engine', engine)}>\n        <li className=\"coding-rules-detail-property\">\n          <div className=\"badge spacer-left text-text-top\">{engine}</div>\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderKey() {\n    const EXTERNAL_PREFIX = 'external_';\n    const { ruleDetails } = this.props;\n    const displayedKey = ruleDetails.key.startsWith(EXTERNAL_PREFIX)\n      ? ruleDetails.key.substr(EXTERNAL_PREFIX.length)\n      : ruleDetails.key;\n    return <span className=\"note text-middle\">{displayedKey}</span>;\n  }\n\n  render() {\n    const { ruleDetails } = this.props;\n    const hasTypeData = !ruleDetails.isExternal || ruleDetails.type !== 'UNKNOWN';\n    return (\n      <div className=\"js-rule-meta\">\n        <header className=\"page-header\">\n          <div className=\"pull-right\">\n            {this.renderKey()}\n            {!ruleDetails.isExternal && (\n              <Link\n                className=\"coding-rules-detail-permalink link-no-underline spacer-left text-middle\"\n                title={translate('permalink')}\n                to={getRuleUrl(ruleDetails.key)}>\n                <LinkIcon />\n              </Link>\n            )}\n            {!this.props.hideSimilarRulesFilter && (\n              <SimilarRulesFilter onFilterChange={this.props.onFilterChange} rule={ruleDetails} />\n            )}\n          </div>\n          <h3 className=\"page-title coding-rules-detail-header\">\n            <big>{ruleDetails.name}</big>\n          </h3>\n        </header>\n\n        {hasTypeData && (\n          <ul className=\"coding-rules-detail-properties\">\n            {this.renderType()}\n            {this.renderSeverity()}\n            {!ruleDetails.isExternal && this.renderStatus()}\n            {this.renderTags()}\n            {!ruleDetails.isExternal && this.renderCreationDate()}\n            {this.renderRepository()}\n            {!ruleDetails.isExternal && (\n              <>\n                {this.renderTemplate()}\n                {this.renderParentTemplate()}\n                {this.renderRemediation()}\n              </>\n            )}\n            {ruleDetails.isExternal && this.renderExternalBadge()}\n          </ul>\n        )}\n      </div>\n    );\n  }\n}\n"],"sourceRoot":""}