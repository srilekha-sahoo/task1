{"version":3,"sources":["webpack:///./src/main/js/components/SourceViewer/styles.css?8096","webpack:///./src/main/js/components/SourceViewer/styles.css","webpack:///./src/main/js/components/icons/CopyIcon.tsx","webpack:///./src/main/js/components/controls/clipboard.tsx","webpack:///./src/main/js/components/intl/DateTimeFormatter.tsx","webpack:///./node_modules/lodash/toFinite.js","webpack:///./src/main/js/components/intl/DateFromNow.tsx","webpack:///./node_modules/lodash/map.js","webpack:///./src/main/js/components/icons/DetachIcon.tsx","webpack:///./src/main/js/components/ui/Level.tsx","webpack:///./src/main/js/components/icons/SettingsIcon.tsx","webpack:///./src/main/js/components/controls/ActionsDropdown.tsx","webpack:///./src/main/js/components/ui/Rating.tsx","webpack:///./src/main/js/components/ui/Level.css?03ac","webpack:///./src/main/js/components/ui/Level.css","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./node_modules/valid-url/index.js","webpack:///./src/main/js/components/ui/Rating.css?4296","webpack:///./src/main/js/components/ui/Rating.css","webpack:///./src/main/js/components/common/DocumentationTooltip.tsx","webpack:///./src/main/js/components/ui/CoverageRating.tsx","webpack:///./node_modules/lodash/inRange.js","webpack:///./src/main/js/components/common/LocationIndex.tsx","webpack:///./node_modules/lodash/_baseInRange.js","webpack:///./src/main/js/components/icons/StatusIcon.tsx","webpack:///./src/main/js/components/shared/StatusHelper.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/indexing.ts","webpack:///./src/main/js/components/SourceViewer/helpers/highlight.ts","webpack:///./src/main/js/components/SourceViewer/helpers/issueLocations.ts","webpack:///./src/main/js/components/SourceViewer/SourceViewerContext.tsx","webpack:///./src/main/js/components/ui/DuplicationsRating.tsx","webpack:///./src/main/js/components/icons/ExpandSnippetIcon.tsx","webpack:///./src/main/js/components/ui/DuplicationsRating.css?6014","webpack:///./src/main/js/components/ui/DuplicationsRating.css","webpack:///./src/main/js/components/issue/actions.ts","webpack:///./src/main/js/components/common/SelectListItem.tsx","webpack:///./src/main/js/components/common/SelectList.tsx","webpack:///./src/main/js/components/issue/popups/SetAssigneePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueAssign.tsx","webpack:///./src/main/js/components/issue/popups/CommentPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentAction.tsx","webpack:///./src/main/js/components/issue/popups/SetSeverityPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueSeverity.tsx","webpack:///./src/main/js/components/issue/popups/SetIssueTagsPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTags.tsx","webpack:///./src/main/js/components/issue/popups/SetTransitionPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTransition.tsx","webpack:///./src/main/js/components/issue/popups/SetTypePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueType.tsx","webpack:///./src/main/js/components/issue/components/IssueActionsBar.tsx","webpack:///./src/main/js/components/issue/popups/CommentDeletePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentLine.tsx","webpack:///./src/main/js/types/rules.ts","webpack:///./src/main/js/components/issue/popups/ChangelogPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueChangelog.tsx","webpack:///./src/main/js/components/issue/components/IssueMessage.tsx","webpack:///./src/main/js/components/issue/popups/SimilarIssuesPopup.tsx","webpack:///./src/main/js/components/issue/components/SimilarIssuesFilter.tsx","webpack:///./src/main/js/components/issue/components/IssueTitleBar.tsx","webpack:///./src/main/js/components/issue/IssueView.tsx","webpack:///./src/main/js/components/issue/Issue.tsx","webpack:///./src/main/js/components/issue/components/IssueChangelogDiff.tsx","webpack:///./src/main/js/components/common/LocationMessage.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.css?94e1","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.css","webpack:///./src/main/js/components/SourceViewer/components/Line.css?69c4","webpack:///./src/main/js/components/SourceViewer/components/Line.css","webpack:///./src/main/js/components/common/LocationIndex.css?e012","webpack:///./src/main/js/components/common/LocationIndex.css","webpack:///./src/main/js/components/common/LocationMessage.css?8760","webpack:///./src/main/js/components/common/LocationMessage.css","webpack:///./src/main/js/components/issue/Issue.css?a142","webpack:///./src/main/js/components/issue/Issue.css","webpack:///./src/main/js/components/SourceViewer/helpers/lines.ts","webpack:///./src/main/js/components/icons/ListIcon.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesList.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineCode.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineCoverage.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineDuplicationBlock.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesIndicator.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineOptionsPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineNumber.tsx","webpack:///./src/main/js/components/SourceViewer/components/SCMPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineSCM.tsx","webpack:///./src/main/js/components/SourceViewer/components/Line.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/loadIssues.ts","webpack:///./src/main/js/components/SourceViewer/SourceViewerCode.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlayMeasure.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlay.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeader.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerBase.tsx","webpack:///./src/main/js/components/SourceViewer/components/DuplicationPopup.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/duplications.ts"],"names":["api","content","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push","CopyIcon","fill","iconProps","Icon","fillRule","d","mounted","state","copySuccess","setCopyButton","node","this","copyButton","handleSuccessCopy","setState","setTimeout","clipboard","on","destroy","props","children","ClipboardButton","className","copyValue","Tooltip","overlay","visible","innerRef","ClipboardIconButton","tooltip","tooltipProps","undefined","formatterOption","year","month","day","hour","minute","DateTimeFormatter","date","value","toNumber","DateFromNow","originalChildren","f","hourPrecision","Date","now","parsedDate","formattedDate","title","arrayMap","baseIteratee","baseMap","isArray","collection","iteratee","DetachIcon","style","Level","formatted","level","small","muted","SettingsIcon","size","viewBox","transform","ActionsDropdown","overlayPlacement","toggleClassName","Dropdown","onOpen","DropdownIcon","handleClick","event","preventDefault","currentTarget","blur","onClick","destructive","download","to","href","id","ref","ActionsDropdownDivider","Rating","ariaAttrs","KNOWN_RATINGS","enhanceMeasure","measure","metrics","metric","leak","getLeakValue","period","getRatingTooltip","metricKey","finalMetricKey","substr","includes","Measure","decimals","metricType","formattedValue","omitExtraDecimalZeros","Number","rating","is_uri","is_iri","is_http_uri","is_http_iri","is_https_uri","is_https_iri","is_web_uri","is_web_iri","isUri","isHttpUri","isHttpsUri","isWebUri","splitUri","uri","match","test","splitted","authority","path","query","fragment","scheme","out","length","toLowerCase","allowHttps","port","replace","DocumentationTooltip","links","map","label","inPlace","key","rel","target","DonutChart","SIZE_TO_WIDTH_MAPPING","normal","big","huge","SIZE_TO_THICKNESS_MAPPING","CoverageRating","data","padAngle","numberValue","gray71","green","barBackgroundColor","lineCoverageRed","width","thickness","height","baseInRange","toFinite","number","start","end","LocationIndex","leading","selected","other","clickAttributes","role","tabIndex","nativeMax","Math","max","nativeMin","min","statusIcons","open","OpenStatusIcon","confirmed","ConfirmedStatusIcon","reopened","blue","resolved","ResolvedStatusIcon","closed","baseFontColor","to_review","in_review","reviewed","StatusIcon","status","DesiredStatusIcon","StatusHelper","resolution","issuesByLine","issues","index","forEach","issue","line","textRange","endLine","issuesByComponentAndLine","reduce","mapping","component","locationsByLine","location","duplicationsByLine","duplications","blocks","duplicationIndex","block","_ref","from","symbolsByLine","sources","tokens","code","symbols","token","keys","filter","splitByTokens","rootClassName","container","document","createElement","innerHTML","call","childNodes","nodeType","fullClassName","innerTokens","concat","nodeValue","markers","text","highlightSymbol","symbol","symbolRegExp","RegExp","part","str","acc","highlightIssueLocations","issueLocations","nextTokens","markerAdded","startLine","x","s1","e1","s2","e2","p1","p2","p3","newClassName","indexOf","slice","getLinearLocations","locations","startOffset","endOffset","getSecondaryIssueLocationsForLine","highlightedLocations","l","msg","SourceViewerContext","branchLike","file","DuplicationsRating","isNaN","ExpandSnippetIcon","stroke","strokeWidth","updateIssue","onChange","resultPromise","oldIssue","newIssue","optimisticUpdate","then","response","components","users","rules","param","throwGlobalError","handleSelect","onSelect","item","handleHover","onHover","active","onFocus","onMouseOver","placement","renderLink","super","attachShortcuts","previousKeyScope","previousFilter","currentKeyScope","tagName","srcElement","isInput","keyCode","selectNextElement","selectPreviousElement","detachShortcuts","idx","items","renderChild","child","type","currentItem","prevProps","hasChildren","count","searchUsers","q","ps","handleSearchResult","activeUsers","currentUser","login","handleSearchChange","defaultUsersArray","name","noPadding","SearchBox","autoFocus","minLength","placeholder","user","Avatar","hash","avatar","marginLeft","withCurrentUser","toggleAssign","togglePopup","handleClose","assigneeName","assignee","assigneeAvatar","assigneeActive","canAssign","isOpen","Toggler","closeOnEscape","onRequestClose","onAssign","renderAssignee","handleCommentChange","textComment","handleCommentClick","trim","onComment","handleCancelClick","toggleComment","handleKeyboard","metaKey","ctrlKey","stopPropagation","comment","markdown","autoTriggered","onKeyDown","rows","disabled","FormattingTips","addComment","issueKey","closeOnClickOutside","currentPopup","commentAutoTriggered","commentPlaceholder","SEVERITY","SetSeverityPopup","severity","SeverityIcon","toggleSetSeverity","setSeverity","setIssueProperty","canSetSeverity","SeverityHelper","searchResult","onSearch","selectedTags","tags","tag","setTags","onUnselect","availableTags","BottomRight","TagsSelector","listSize","toggleSetTags","join","canSetTags","TagsList","allowUpdate","SetTransitionPopup","fromHotspot","transitions","isManualVulnerability","transition","description","defaultMessage","values","community_plug_link","translateTransition","setTransition","toggleSetTransition","hasTransitions","TYPES","SetTypePopup","IssueTypeIcon","toggleSetType","setType","canSetType","property","popup","apiCall","handleTransition","actions","canComment","isSecurityHotspot","effort","CommentDeletePopup","onDelete","openPopup","handleEdit","onEdit","toggleEditPopup","handleDelete","toggleDeletePopup","popupName","force","prevState","closePopups","author","authorName","displayName","authorActive","authorAvatar","dangerouslySetInnerHTML","__html","sanitize","htmlText","createdAt","updatable","RuleStatus","changelog","loadChangelog","creationDate","userName","isUserActive","diffs","diff","IssueChangelogDiff","toggleChangelog","IssueMessage","engine","engineName","manualVulnerability","message","ruleKey","ruleStatus","ruleEngine","onOpenRule","Deprecated","Removed","onFilter","subProject","ruleName","TagsIcon","QualifierIcon","qualifier","projectName","subProjectName","componentQualifier","componentLongName","handleFilter","FilterIcon","IssueTitleBar","hasSimilarIssuesFilter","locationsCount","secondaryLocations","flows","sum","locationsBadge","displayLocations","displayLocationsCount","issueUrl","project","types","Consumer","externalRulesRepoNames","openRule","externalRuleEngine","rule","displayLocationsLink","LinkIcon","handleCheck","onCheck","isClickable","toUpperCase","parentElement","editComment","deleteComment","hasCheckbox","issueClass","hotspot","comments","Checkbox","checked","onPopupToggle","handleAssignement","bindShortcuts","nextProps","unbindShortcuts","defaultProps","oldValue","newValue","LocationMessage","SourceViewerHeaderSlim","expandable","displayProjectName","linkToProject","loading","onExpand","sourceViewerFile","measures","projectNameLabel","Project","SubProject","files","optimizeHighlightedSymbols","symbolsForLine","highlightedSymbols","optimizeLocationMessage","highlightedLocationMessage","optimizedSecondaryIssueLocations","some","optimizeSelectedIssue","selectedIssue","issuesForLine","find","ListIcon","LineIssuesList","issuePopup","Issue","displayIssueLocationsCount","displayIssueLocationsLink","onIssueChange","onIssueClick","onIssuePopupToggle","handleSymbolClick","onSymbolClick","attachEvents","activeMarkerNode","scroll","detachEvents","codeNode","querySelectorAll","addEventListener","onLocationSelect","onIssueSelect","padding","secondaryIssueLocations","showIssues","highlight","renderedTokens","leadingMarker","displayLocationMarkers","marker","loc","renderMarker","paddingBottom","filteredSelectedIssues","scrollToUncoveredLine","coverageMarker","current","coverageStatus","conditions","coveredConditions","getStatusTooltip","blocksLoaded","duplicated","dropdownOpen","setDropdownOpen","RightTop","renderDuplicationPopup","issuesOpen","hasIssues","mostImportantIssue","tooltipContent","e","IssueIcon","firstLineNumber","codeLocation","codeUrl","isAtTop","BottomLeft","TopLeft","displayOptions","setOpen","lineNumber","hasAuthor","scmAuthor","hasDate","scmDate","DateFormatter","scmRevision","previousLine","hasPopup","cell","s","p","changed","isSCMChanged","ariaLabel","handleIssuesIndicatorClick","openIssues","onIssuesClose","onIssueUnselect","onIssuesOpen","displayAllIssues","displayCoverage","displayDuplications","displayLineNumberOptions","displayIssues","displaySCM","duplicationsCount","highlighted","last","verticalBuffer","isNew","bottomPadding","Boolean","loadDuplications","loadPageAndNext","toLine","page","pageSize","r","loadPage","lastIssue","nextIssues","_fromLine","additionalFields","componentKeys","buildQuery","Promise","resolve","EMPTY_ARRAY","ZERO_LINE","firstUncoveredLineFound","getDuplicationsForLine","getIssuesForLine","getIssueLocationsForLine","issueLocationsByLine","renderLine","new_uncovered_lines","uncovered_lines","Line","highlightedLine","hasSourcesAfter","openIssuesByLine","hasFileIssues","hasSourcesBefore","loadingSourcesBefore","loadSourcesBefore","loadingSourcesAfter","loadSourcesAfter","MeasuresOverlayMeasure","bugs","vulnerabilities","code_smells","showAllMeasures","fetchData","all","fetchMeasures","fetchIssues","facets","metricKeys","withMetrics","severitiesFacet","tagsFacet","typesFacet","handleAllMeasuresClick","renderMeasure","renderLines","lines","ncloc","comment_lines","comment_lines_density","cognitive_complexity","complexity","function_complexity","renderBigMeasure","renderIssues","violations","sqale_index","val","renderCoverage","coverage","lines_to_cover","uncovered_conditions","conditions_to_cover","renderDuplications","duplicated_lines_density","duplicated_blocks","duplicated_lines","renderTests","tests","test_success_density","test_failures","test_errors","skipped_tests","test_execution_time","renderDomain","domain","renderAllMeasures","domains","Object","domainKeys","odd","_","even","header","Modal","contentLabel","onClose","measuresOverlay","handleShowMeasuresClick","handleMeasuresOverlayClose","openInWorkspace","openComponent","renderIssueMeasures","componentMeasures","params","m","showMeasures","unitTestsOrLines","TestFile","rawSourcesLink","duplicationDensity","loadSources","reject","aroundLine","LINES","propsLoadSources","firstSourceLine","loadIssues","computeCoverageStatus","lastSourceLine","fromLine","duplicatedFiles","handleIssuePopupToggle","samePopup","handleIssueSelect","handleIssueUnselect","handleOpenIssues","handleCloseIssues","handleIssueChange","newIssues","candidate","DuplicationPopup","inRemovedComponent","notAccessible","notExist","sourceRemoved","fetchComponent","isLineOutsideOfRange","fetchSources","reloadIssues","loadComponent","defaultLoadComponent","defaultLoadSources","getCoverageStatus","firstLine","lastList","finalSources","onLoaded","onFailLoadSources","componentKey","slimHeader","Alert","variant","Provider","renderHeader","renderCode","sourceViewerComponent","leakPeriodDate","isDifferentComponent","a","b","handleFileClick","dataset","shouldLink","groupedBlocks","fileRef","duplication","renderDuplication","filterDuplicationBlocksByLine","foundOne","outOfBounds","shouldDisplay","isOk","getDuplicationBlocksForIndex","isDuplicationBlockInRemovedComponent"],"mappings":"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","file":"js/285.m.6e4ab033.chunk.js","sourcesContent":["var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".source-viewer{width:100%;min-height:200px;border:1px solid #cdcdcd;box-sizing:border-box;background-color:#fff;overflow:hidden}.source-table{width:100%;border:none;border-collapse:collapse}.source-viewer-header{position:relative;padding:2px 10px 4px;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3}.source-viewer-header-measure{vertical-align:middle;font-size:13px}.source-viewer-header-measure .rating{font-size:18px}.source-viewer-header-measure-separator{margin:0 24px;height:30px;border-right:1px solid #cdcdcd}.source-viewer-header-measure+.source-viewer-header-measure{margin-left:24px}.source-viewer-header-measure-label{display:block;line-height:12px;color:#666;font-size:12px}.source-viewer-header-measure-value{display:block;margin-top:2px;line-height:18px;color:#333;font-size:16px}.source-viewer-header-actions{display:block;margin-left:24px;padding:8px 4px}.source-viewer-header-actions svg{margin-top:2px}.source-viewer-header-more-actions{position:absolute;z-index:7500;right:0;top:100%;padding:10px;border:1px solid #e6e6e6;border-right:none;background-color:#fff;line-height:1.8}.source-viewer-code{overflow-x:auto}.source-viewer-more-code{padding:40px 0;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3;text-align:center}.source-viewer-more-code .spinner{top:-1px}.source-table+.source-viewer-more-code{border-bottom:none;border-top:1px solid #e6e6e6}.issue-location.highlighted{border-color:#e1e1f2;background-color:#e1e1f2}.issue-location.selected{border-color:#f4b1b0;background-color:#f4b1b0}.measures-viewer{display:flex;margin:0 -8px}.measures-viewer+.measures-viewer{margin-top:8px}.measures-viewer-header{font-size:12px}.measures-viewer-secondary .measures-viewer-card{background-color:#f3f3f3}.measures-viewer-section{flex:1}.measures-viewer-section-limited{max-width:25%}.measures-viewer-card{margin:16px 8px;padding:8px;border:1px solid #e6e6e6;background-color:#fff}.measures+.measures{margin-top:16px;padding-top:16px;border-top:1px solid #e6e6e6}.measures-chart{display:inline-block;vertical-align:middle;width:80px;margin-right:24px;text-align:center}.measure{line-height:1.34}.measure-one-line{display:flex;justify-content:space-between}.measure-one-line .measure-name{display:inline}.measure-name{display:block;font-size:13px}.measure-value{color:#236a97;font-size:16px;font-weight:400}.measure-big{display:inline-block;vertical-align:middle}.measure-big .measure-name{margin-top:4px;margin-bottom:8px;font-size:16px}.measure-big .measure-value,.measure-big .rating{font-size:24px}.measure-big+.measure-big{margin-left:24px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function CopyIcon({ fill = 'currentColor', ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <g fill={fill} fillRule=\"nonzero\">\n        <path d=\"M2.931 15.005V3H2v13h9v-.995z\" />\n        <path d=\"M10 4.015h3V14H4V1h6v3.015zM9 8V6H8v2H6v1h2v2h1V9h2V8H9z\" />\n        <path d=\"M11 1v2h2a2.151 2.151 0 0 0-2-2z\" />\n      </g>\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as Clipboard from 'clipboard';\nimport * as React from 'react';\nimport { translate } from '../../helpers/l10n';\nimport CopyIcon from '../icons/CopyIcon';\nimport { Button, ButtonIcon } from './buttons';\nimport Tooltip from './Tooltip';\n\nexport interface State {\n  copySuccess: boolean;\n}\n\ninterface RenderProps {\n  setCopyButton: (node: HTMLElement | null) => void;\n  copySuccess: boolean;\n}\n\ninterface BaseProps {\n  children: (props: RenderProps) => React.ReactNode;\n}\n\nexport class ClipboardBase extends React.PureComponent<BaseProps, State> {\n  private clipboard?: Clipboard;\n  private copyButton?: HTMLElement | null;\n  mounted = false;\n  state: State = { copySuccess: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    if (this.copyButton) {\n      this.clipboard = new Clipboard(this.copyButton);\n      this.clipboard.on('success', this.handleSuccessCopy);\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.clipboard) {\n      this.clipboard.destroy();\n    }\n    if (this.copyButton) {\n      this.clipboard = new Clipboard(this.copyButton);\n      this.clipboard.on('success', this.handleSuccessCopy);\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.clipboard) {\n      this.clipboard.destroy();\n    }\n  }\n\n  setCopyButton = (node: HTMLElement | null) => {\n    this.copyButton = node;\n  };\n\n  handleSuccessCopy = () => {\n    if (this.mounted) {\n      this.setState({ copySuccess: true });\n      setTimeout(() => {\n        if (this.mounted) {\n          this.setState({ copySuccess: false });\n        }\n      }, 1000);\n    }\n  };\n\n  render() {\n    return this.props.children({\n      setCopyButton: this.setCopyButton,\n      copySuccess: this.state.copySuccess\n    });\n  }\n}\n\ninterface ButtonProps {\n  className?: string;\n  copyValue: string;\n  children?: React.ReactNode;\n}\n\nexport function ClipboardButton({ className, children, copyValue }: ButtonProps) {\n  return (\n    <ClipboardBase>\n      {({ setCopyButton, copySuccess }) => (\n        <Tooltip overlay={translate('copied_action')} visible={copySuccess}>\n          <Button\n            className={classNames('no-select', className)}\n            data-clipboard-text={copyValue}\n            innerRef={setCopyButton}>\n            {children || (\n              <>\n                <CopyIcon className=\"little-spacer-right\" />\n                {translate('copy')}\n              </>\n            )}\n          </Button>\n        </Tooltip>\n      )}\n    </ClipboardBase>\n  );\n}\n\ninterface IconButtonProps {\n  'aria-label'?: string;\n  className?: string;\n  copyValue: string;\n}\n\nexport function ClipboardIconButton(props: IconButtonProps) {\n  const { className, copyValue } = props;\n  return (\n    <ClipboardBase>\n      {({ setCopyButton, copySuccess }) => {\n        return (\n          <ButtonIcon\n            aria-label={props['aria-label'] ?? translate('copy_to_clipboard')}\n            className={classNames('no-select', className)}\n            data-clipboard-text={copyValue}\n            innerRef={setCopyButton}\n            tooltip={translate(copySuccess ? 'copied_action' : 'copy_to_clipboard')}\n            tooltipProps={copySuccess ? { visible: copySuccess } : undefined}>\n            <CopyIcon />\n          </ButtonIcon>\n        );\n      }}\n    </ClipboardBase>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport const formatterOption = {\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric'\n};\n\nexport default function DateTimeFormatter({ children, date }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...formatterOption}>\n      {children}\n    </FormattedDate>\n  );\n}\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { differenceInHours } from 'date-fns';\nimport * as React from 'react';\nimport { DateSource, FormattedRelative } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\nimport { translate } from '../../helpers/l10n';\nimport DateTimeFormatter from './DateTimeFormatter';\n\nexport interface DateFromNowProps {\n  children?: (formattedDate: string) => React.ReactNode;\n  date?: DateSource;\n  hourPrecision?: boolean;\n}\n\nexport default function DateFromNow(props: DateFromNowProps) {\n  const { children: originalChildren = (f: string) => f, date, hourPrecision } = props;\n  let children = originalChildren;\n\n  if (!date) {\n    /*\n     * We return a JSX.Element to bypass typescript issue with functional components return type\n     * (https://github.com/DefinitelyTyped/DefinitelyTyped/issues/20544)\n     */\n    // eslint-disable-next-line react/jsx-no-useless-fragment\n    return <>{originalChildren(translate('never'))}</>;\n  }\n\n  if (date && hourPrecision && differenceInHours(Date.now(), date) < 1) {\n    children = () => originalChildren(translate('less_than_1_hour_ago'));\n  }\n\n  const parsedDate = parseDate(date);\n\n  return (\n    <DateTimeFormatter date={parsedDate}>\n      {formattedDate => (\n        <span title={formattedDate}>\n          <FormattedRelative value={parsedDate}>{children}</FormattedRelative>\n        </span>\n      )}\n    </DateTimeFormatter>\n  );\n}\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function DetachIcon({ fill = 'currentColor', ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M12 9.25v2.5A2.25 2.25 0 0 1 9.75 14h-6.5A2.25 2.25 0 0 1 1 11.75v-6.5A2.25 2.25 0 0 1 3.25 3h5.5c.14 0 .25.11.25.25v.5c0 .14-.11.25-.25.25h-5.5C2.562 4 2 4.563 2 5.25v6.5c0 .688.563 1.25 1.25 1.25h6.5c.688 0 1.25-.563 1.25-1.25v-2.5c0-.14.11-.25.25-.25h.5c.14 0 .25.11.25.25zm3-6.75v4c0 .273-.227.5-.5.5a.497.497 0 0 1-.352-.148l-1.375-1.375L7.68 10.57a.27.27 0 0 1-.18.078.27.27 0 0 1-.18-.078l-.89-.89a.27.27 0 0 1-.078-.18.27.27 0 0 1 .078-.18l5.093-5.093-1.375-1.375A.497.497 0 0 1 10 2.5c0-.273.227-.5.5-.5h4c.273 0 .5.227.5.5z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { formatMeasure } from '../../helpers/measures';\nimport './Level.css';\n\nexport interface LevelProps {\n  'aria-label'?: string;\n  'aria-labelledby'?: string;\n  className?: string;\n  level: string;\n  small?: boolean;\n  muted?: boolean;\n}\n\nexport default function Level(props: LevelProps) {\n  const formatted = formatMeasure(props.level, 'LEVEL');\n  const className = classNames(props.className, 'level', 'level-' + props.level, {\n    'level-small': props.small,\n    'level-muted': props.muted\n  });\n\n  return (\n    <span\n      aria-label={props['aria-label']}\n      aria-labelledby={props['aria-labelledby']}\n      className={className}>\n      {formatted}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function SettingsIcon({\n  fill = 'currentColor',\n  size = 14,\n  ...iconProps\n}: IconProps) {\n  return (\n    <Icon size={size} viewBox=\"0 0 14 14\" {...iconProps}>\n      <g transform=\"matrix(0.0364583,0,0,0.0364583,0,-1.16667)\">\n        <path\n          d=\"M256,224C256,206.333 249.75,191.25 237.25,178.75C224.75,166.25 209.667,160 192,160C174.333,160 159.25,166.25 146.75,178.75C134.25,191.25 128,206.333 128,224C128,241.667 134.25,256.75 146.75,269.25C159.25,281.75 174.333,288 192,288C209.667,288 224.75,281.75 237.25,269.25C249.75,256.75 256,241.667 256,224ZM384,196.75L384,252.25C384,254.25 383.333,256.167 382,258C380.667,259.833 379,260.917 377,261.25L330.75,268.25C327.583,277.25 324.333,284.833 321,291C326.833,299.333 335.75,310.833 347.75,325.5C349.417,327.5 350.25,329.583 350.25,331.75C350.25,333.917 349.5,335.833 348,337.5C343.5,343.667 335.25,352.667 323.25,364.5C311.25,376.333 303.417,382.25 299.75,382.25C297.75,382.25 295.583,381.5 293.25,380L258.75,353C251.417,356.833 243.833,360 236,362.5C233.333,385.167 230.917,400.667 228.75,409C227.583,413.667 224.583,416 219.75,416L164.25,416C161.917,416 159.875,415.292 158.125,413.875C156.375,412.458 155.417,410.667 155.25,408.5L148.25,362.5C140.083,359.833 132.583,356.75 125.75,353.25L90.5,380C88.833,381.5 86.75,382.25 84.25,382.25C81.917,382.25 79.833,381.333 78,379.5C57,360.5 43.25,346.5 36.75,337.5C35.583,335.833 35,333.917 35,331.75C35,329.75 35.667,327.833 37,326C39.5,322.5 43.75,316.958 49.75,309.375C55.75,301.792 60.25,295.917 63.25,291.75C58.75,283.417 55.333,275.167 53,267L7.25,260.25C5.083,259.917 3.333,258.875 2,257.125C0.667,255.375 0,253.417 0,251.25L0,195.75C0,193.75 0.667,191.833 2,190C3.333,188.167 4.917,187.083 6.75,186.75L53.25,179.75C55.583,172.083 58.833,164.417 63,156.75C56.333,147.25 47.417,135.75 36.25,122.25C34.583,120.25 33.75,118.25 33.75,116.25C33.75,114.583 34.5,112.667 36,110.5C40.333,104.5 48.542,95.542 60.625,83.625C72.708,71.708 80.583,65.75 84.25,65.75C86.417,65.75 88.583,66.583 90.75,68.25L125.25,95C132.583,91.167 140.167,88 148,85.5C150.667,62.833 153.083,47.333 155.25,39C156.417,34.333 159.417,32 164.25,32L219.75,32C222.083,32 224.125,32.708 225.875,34.125C227.625,35.542 228.583,37.333 228.75,39.5L235.75,85.5C243.917,88.167 251.417,91.25 258.25,94.75L293.75,68C295.25,66.5 297.25,65.75 299.75,65.75C301.917,65.75 304,66.583 306,68.25C327.5,88.083 341.25,102.25 347.25,110.75C348.417,112.083 349,113.917 349,116.25C349,118.25 348.333,120.167 347,122C344.5,125.5 340.25,131.042 334.25,138.625C328.25,146.208 323.75,152.083 320.75,156.25C325.083,164.583 328.5,172.75 331,180.75L376.75,187.75C378.917,188.083 380.667,189.125 382,190.875C383.333,192.625 384,194.583 384,196.75Z\"\n          style={{ fill }}\n        />\n      </g>\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { LocationDescriptor } from 'history';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { translate } from '../../helpers/l10n';\nimport DropdownIcon from '../icons/DropdownIcon';\nimport SettingsIcon from '../icons/SettingsIcon';\nimport { PopupPlacement } from '../ui/popups';\nimport { Button } from './buttons';\nimport { ClipboardBase } from './clipboard';\nimport Dropdown from './Dropdown';\nimport Tooltip from './Tooltip';\n\nexport interface ActionsDropdownProps {\n  className?: string;\n  children: React.ReactNode;\n  onOpen?: () => void;\n  overlayPlacement?: PopupPlacement;\n  small?: boolean;\n  toggleClassName?: string;\n}\n\nexport default function ActionsDropdown(props: ActionsDropdownProps) {\n  const { children, className, overlayPlacement, small, toggleClassName } = props;\n  return (\n    <Dropdown\n      className={className}\n      onOpen={props.onOpen}\n      overlay={<ul className=\"menu\">{children}</ul>}\n      overlayPlacement={overlayPlacement}>\n      <Button\n        className={classNames('dropdown-toggle', toggleClassName, {\n          'button-small': small\n        })}>\n        <SettingsIcon size={small ? 12 : 14} />\n        <DropdownIcon className=\"little-spacer-left\" />\n      </Button>\n    </Dropdown>\n  );\n}\n\ninterface ItemProps {\n  className?: string;\n  children: React.ReactNode;\n  /** used to pass a string to copy to clipboard */\n  copyValue?: string;\n  destructive?: boolean;\n  /** used to pass a name of downloaded file */\n  download?: string;\n  id?: string;\n  onClick?: () => void;\n  to?: LocationDescriptor;\n}\n\nexport class ActionsDropdownItem extends React.PureComponent<ItemProps> {\n  handleClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.onClick) {\n      this.props.onClick();\n    }\n  };\n\n  render() {\n    const className = classNames(this.props.className, { 'text-danger': this.props.destructive });\n\n    if (this.props.download && typeof this.props.to === 'string') {\n      return (\n        <li>\n          <a\n            className={className}\n            download={this.props.download}\n            href={this.props.to}\n            id={this.props.id}>\n            {this.props.children}\n          </a>\n        </li>\n      );\n    }\n\n    if (this.props.to) {\n      return (\n        <li>\n          <Link className={className} id={this.props.id} to={this.props.to}>\n            {this.props.children}\n          </Link>\n        </li>\n      );\n    }\n\n    if (this.props.copyValue) {\n      return (\n        <ClipboardBase>\n          {({ setCopyButton, copySuccess }) => (\n            <Tooltip overlay={translate('copied_action')} visible={copySuccess}>\n              <li data-clipboard-text={this.props.copyValue} ref={setCopyButton}>\n                <a className={className} href=\"#\" id={this.props.id} onClick={this.handleClick}>\n                  {this.props.children}\n                </a>\n              </li>\n            </Tooltip>\n          )}\n        </ClipboardBase>\n      );\n    }\n\n    return (\n      <li>\n        <a className={className} href=\"#\" id={this.props.id} onClick={this.handleClick}>\n          {this.props.children}\n        </a>\n      </li>\n    );\n  }\n}\n\nexport function ActionsDropdownDivider() {\n  return <li className=\"divider\" />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\nimport { formatMeasure } from '../../helpers/measures';\nimport './Rating.css';\n\ninterface Props extends React.AriaAttributes {\n  className?: string;\n  muted?: boolean;\n  small?: boolean;\n  value: string | number | undefined;\n}\n\nexport default function Rating({\n  className,\n  muted = false,\n  small = false,\n  value,\n  ...ariaAttrs\n}: Props) {\n  if (value === undefined) {\n    return (\n      <span aria-label={translate('metric.no_rating')} {...ariaAttrs}>\n        \n      </span>\n    );\n  }\n  const formatted = formatMeasure(value, 'RATING');\n  return (\n    <span\n      aria-label={translateWithParameters('metric.has_rating_X', formatted)}\n      className={classNames(\n        'rating',\n        `rating-${formatted}`,\n        { 'rating-small': small, 'rating-muted': muted },\n        className\n      )}\n      {...ariaAttrs}>\n      {formatted}\n    </span>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Level.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".level{display:inline-block;min-width:80px;height:24px;line-height:24px;border-radius:24px;box-sizing:border-box;color:#fff;letter-spacing:.02em;font-size:13px;font-weight:400;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.level,.level-small{width:auto;padding-left:9px;padding-right:9px}.level-small{min-width:64px;margin-top:-1px;margin-bottom:-1px;height:20px;line-height:20px;font-size:12px}.level-muted{background-color:#bdbdbd!important}a>.level{margin-bottom:-1px;border-bottom:1px solid;transition:all .2s ease}a>.level:hover{opacity:.8}.level-OK{background-color:#0a0}.level-WARN{background-color:#ed7d20}.level-ERROR{background-color:#d4333f}.level-NONE{background-color:#b4b4b4}.level-NOT_COMPUTED{background-color:#404040}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\n\nconst KNOWN_RATINGS = [\n  'sqale_rating',\n  'maintainability_rating', // Needed to provide the label for \"new_maintainability_rating\"\n  'reliability_rating',\n  'security_rating',\n  'security_review_rating'\n];\n\nexport function enhanceMeasure(measure: T.Measure, metrics: T.Dict<T.Metric>): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.MeasureIntern | undefined): string | undefined {\n  return measure?.period?.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from '../../components/controls/Tooltip';\nimport Level from '../../components/ui/Level';\nimport Rating from '../../components/ui/Rating';\nimport { formatMeasure } from '../../helpers/measures';\nimport { getRatingTooltip } from './utils';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span className={className}></span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, {\n      decimals,\n      omitExtraDecimalZeros: metricType === 'PERCENT'\n    });\n    return <span className={className}>{formattedValue != null ? formattedValue : ''}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","(function(module) {\n    'use strict';\n\n    module.exports.is_uri = is_iri;\n    module.exports.is_http_uri = is_http_iri;\n    module.exports.is_https_uri = is_https_iri;\n    module.exports.is_web_uri = is_web_iri;\n    // Create aliases\n    module.exports.isUri = is_iri;\n    module.exports.isHttpUri = is_http_iri;\n    module.exports.isHttpsUri = is_https_iri;\n    module.exports.isWebUri = is_web_iri;\n\n\n    // private function\n    // internal URI spitter method - direct from RFC 3986\n    var splitUri = function(uri) {\n        var splitted = uri.match(/(?:([^:\\/?#]+):)?(?:\\/\\/([^\\/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?/);\n        return splitted;\n    };\n\n    function is_iri(value) {\n        if (!value) {\n            return;\n        }\n\n        // check for illegal characters\n        if (/[^a-z0-9\\:\\/\\?\\#\\[\\]\\@\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=\\.\\-\\_\\~\\%]/i.test(value)) return;\n\n        // check for hex escapes that aren't complete\n        if (/%[^0-9a-f]/i.test(value)) return;\n        if (/%[0-9a-f](:?[^0-9a-f]|$)/i.test(value)) return;\n\n        var splitted = [];\n        var scheme = '';\n        var authority = '';\n        var path = '';\n        var query = '';\n        var fragment = '';\n        var out = '';\n\n        // from RFC 3986\n        splitted = splitUri(value);\n        scheme = splitted[1]; \n        authority = splitted[2];\n        path = splitted[3];\n        query = splitted[4];\n        fragment = splitted[5];\n\n        // scheme and path are required, though the path can be empty\n        if (!(scheme && scheme.length && path.length >= 0)) return;\n\n        // if authority is present, the path must be empty or begin with a /\n        if (authority && authority.length) {\n            if (!(path.length === 0 || /^\\//.test(path))) return;\n        } else {\n            // if authority is not present, the path must not start with //\n            if (/^\\/\\//.test(path)) return;\n        }\n\n        // scheme must begin with a letter, then consist of letters, digits, +, ., or -\n        if (!/^[a-z][a-z0-9\\+\\-\\.]*$/.test(scheme.toLowerCase()))  return;\n\n        // re-assemble the URL per section 5.3 in RFC 3986\n        out += scheme + ':';\n        if (authority && authority.length) {\n            out += '//' + authority;\n        }\n\n        out += path;\n\n        if (query && query.length) {\n            out += '?' + query;\n        }\n\n        if (fragment && fragment.length) {\n            out += '#' + fragment;\n        }\n\n        return out;\n    }\n\n    function is_http_iri(value, allowHttps) {\n        if (!is_iri(value)) {\n            return;\n        }\n\n        var splitted = [];\n        var scheme = '';\n        var authority = '';\n        var path = '';\n        var port = '';\n        var query = '';\n        var fragment = '';\n        var out = '';\n\n        // from RFC 3986\n        splitted = splitUri(value);\n        scheme = splitted[1]; \n        authority = splitted[2];\n        path = splitted[3];\n        query = splitted[4];\n        fragment = splitted[5];\n\n        if (!scheme)  return;\n\n        if(allowHttps) {\n            if (scheme.toLowerCase() != 'https') return;\n        } else {\n            if (scheme.toLowerCase() != 'http') return;\n        }\n\n        // fully-qualified URIs must have an authority section that is\n        // a valid host\n        if (!authority) {\n            return;\n        }\n\n        // enable port component\n        if (/:(\\d+)$/.test(authority)) {\n            port = authority.match(/:(\\d+)$/)[0];\n            authority = authority.replace(/:\\d+$/, '');\n        }\n\n        out += scheme + ':';\n        out += '//' + authority;\n        \n        if (port) {\n            out += port;\n        }\n        \n        out += path;\n        \n        if(query && query.length){\n            out += '?' + query;\n        }\n\n        if(fragment && fragment.length){\n            out += '#' + fragment;\n        }\n        \n        return out;\n    }\n\n    function is_https_iri(value) {\n        return is_http_iri(value, true);\n    }\n\n    function is_web_iri(value) {\n        return (is_http_iri(value) || is_https_iri(value));\n    }\n\n})(module);\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Rating.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".rating{display:inline-block;width:24px;height:24px;line-height:24px;border-radius:24px;box-sizing:border-box;color:#fff;font-size:16px;font-weight:400;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.rating-muted{background-color:#bdbdbd!important;color:#fff!important;text-shadow:0 0 1px rgba(0,0,0,.35)!important}a>.rating{margin-bottom:-1px;border-bottom:1px solid;transition:all .2s ease}a>.rating:hover{opacity:.8}.rating-A{line-height:23px;background-color:#0a0}a>.rating-A{border-bottom-color:#0a0}.rating-B{background-color:#b0d513}a .rating-B{border-bottom-color:#b0d513}.rating-C{background-color:#eabe06}a .rating-C{border-bottom-color:#eabe06}.rating-D{background-color:#ed7d20}a .rating-D{border-bottom-color:#ed7d20}.rating-E{background-color:#d4333f}a .rating-E{border-bottom-color:#d4333f}.rating-small{width:18px;height:18px;line-height:18px;margin-top:-1px;margin-bottom:-1px;font-size:12px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { isWebUri } from 'valid-url';\nimport HelpTooltip from '../../components/controls/HelpTooltip';\nimport DetachIcon from '../../components/icons/DetachIcon';\n\nexport interface DocumentationTooltipProps {\n  children?: React.ReactNode;\n  className?: string;\n  content?: React.ReactNode;\n  links?: Array<{ href: string; label: string; inPlace?: boolean }>;\n  title?: string;\n}\n\nexport default function DocumentationTooltip(props: DocumentationTooltipProps) {\n  const { className, content, links, title } = props;\n\n  return (\n    <HelpTooltip\n      className={className}\n      overlay={\n        <div className=\"big-padded-top big-padded-bottom\">\n          {title && (\n            <div className=\"spacer-bottom\">\n              <strong>{title}</strong>\n            </div>\n          )}\n\n          {content && <p>{content}</p>}\n\n          {links && (\n            <>\n              <hr className=\"big-spacer-top big-spacer-bottom\" />\n\n              {links.map(({ href, label, inPlace }) => (\n                <div className=\"little-spacer-bottom\" key={label}>\n                  {inPlace ? (\n                    <Link to={href}>\n                      <span>{label}</span>\n                    </Link>\n                  ) : (\n                    <a\n                      className=\"display-inline-flex-center link-with-icon\"\n                      href={href}\n                      rel=\"noopener noreferrer\"\n                      target=\"_blank\">\n                      {isWebUri(href) && <DetachIcon size={14} className=\"spacer-right\" />}\n                      <span>{label}</span>\n                    </a>\n                  )}\n                </div>\n              ))}\n            </>\n          )}\n        </div>\n      }>\n      {props.children}\n    </HelpTooltip>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { colors } from '../../app/theme';\nimport { lazyLoadComponent } from '../lazyLoadComponent';\n\nconst DonutChart = lazyLoadComponent(\n  () => import('../../components/charts/DonutChart'),\n  'DonutChart'\n);\n\nconst SIZE_TO_WIDTH_MAPPING = { small: 16, normal: 24, big: 40, huge: 60 };\n\nconst SIZE_TO_THICKNESS_MAPPING = { small: 2, normal: 3, big: 3, huge: 4 };\n\nexport interface CoverageRatingProps {\n  muted?: boolean;\n  size?: 'small' | 'normal' | 'big' | 'huge';\n  value: number | string | null | undefined;\n}\n\nexport default function CoverageRating({\n  muted = false,\n  size = 'normal',\n  value\n}: CoverageRatingProps) {\n  let data = [{ value: 100, fill: '#ccc ' }];\n  let padAngle = 0;\n\n  if (value != null) {\n    const numberValue = Number(value);\n    data = [\n      { value: numberValue, fill: muted ? colors.gray71 : colors.green },\n      { value: 100 - numberValue, fill: muted ? colors.barBackgroundColor : colors.lineCoverageRed }\n    ];\n    if (numberValue !== 0 && numberValue < 100) {\n      padAngle = 0.1; // Same for all sizes, because it scales automatically\n    }\n  }\n\n  const width = SIZE_TO_WIDTH_MAPPING[size];\n  const thickness = SIZE_TO_THICKNESS_MAPPING[size];\n\n  return (\n    <DonutChart\n      data={data}\n      height={width}\n      padAngle={padAngle}\n      thickness={thickness}\n      width={width}\n    />\n  );\n}\n","var baseInRange = require('./_baseInRange'),\n    toFinite = require('./toFinite'),\n    toNumber = require('./toNumber');\n\n/**\n * Checks if `n` is between `start` and up to, but not including, `end`. If\n * `end` is not specified, it's set to `start` with `start` then set to `0`.\n * If `start` is greater than `end` the params are swapped to support\n * negative ranges.\n *\n * @static\n * @memberOf _\n * @since 3.3.0\n * @category Number\n * @param {number} number The number to check.\n * @param {number} [start=0] The start of the range.\n * @param {number} end The end of the range.\n * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n * @see _.range, _.rangeRight\n * @example\n *\n * _.inRange(3, 2, 4);\n * // => true\n *\n * _.inRange(4, 8);\n * // => true\n *\n * _.inRange(4, 2);\n * // => false\n *\n * _.inRange(2, 2);\n * // => false\n *\n * _.inRange(1.2, 2);\n * // => true\n *\n * _.inRange(5.2, 4);\n * // => false\n *\n * _.inRange(-3, -2, -6);\n * // => true\n */\nfunction inRange(number, start, end) {\n  start = toFinite(start);\n  if (end === undefined) {\n    end = start;\n    start = 0;\n  } else {\n    end = toFinite(end);\n  }\n  number = toNumber(number);\n  return baseInRange(number, start, end);\n}\n\nmodule.exports = inRange;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationIndex.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  leading?: boolean;\n  onClick?: () => void;\n  selected?: boolean;\n  [x: string]: any;\n}\n\nexport default function LocationIndex(props: Props) {\n  const { children, leading, onClick, selected, ...other } = props;\n  const clickAttributes = onClick ? { onClick, role: 'button', tabIndex: 0 } : {};\n  // put {...others} because Tooltip sets some event handlers\n  return (\n    <div\n      className={classNames('location-index', {\n        'is-leading': leading,\n        selected\n      })}\n      {...clickAttributes}\n      {...other}>\n      {children}\n    </div>\n  );\n}\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * The base implementation of `_.inRange` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to check.\n * @param {number} start The start of the range.\n * @param {number} end The end of the range.\n * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n */\nfunction baseInRange(number, start, end) {\n  return number >= nativeMin(start, end) && number < nativeMax(start, end);\n}\n\nmodule.exports = baseInRange;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { colors } from '../../app/theme';\nimport Icon, { IconProps } from './Icon';\n\ninterface Props extends IconProps {\n  status: string;\n}\n\nconst statusIcons: T.Dict<(props: IconProps) => React.ReactElement> = {\n  open: OpenStatusIcon,\n  confirmed: ConfirmedStatusIcon,\n  reopened: ReopenedStatusIcon,\n  resolved: ResolvedStatusIcon,\n  closed: ClosedStatusIcon,\n  to_review: OpenStatusIcon,\n  in_review: ConfirmedStatusIcon,\n  reviewed: ResolvedStatusIcon\n};\n\nexport default function StatusIcon({ status, ...iconProps }: Props) {\n  const DesiredStatusIcon = statusIcons[status.toLowerCase()];\n  return DesiredStatusIcon ? <DesiredStatusIcon {...iconProps} /> : null;\n}\n\nfunction OpenStatusIcon(iconProps: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M8 3.75c-.77 0-1.482.19-2.133.57A4.25 4.25 0 0 0 4.32 5.867c-.38.65-.57 1.362-.57 2.133 0 .77.19 1.482.57 2.133.38.65.896 1.167 1.547 1.547.65.38 1.362.57 2.133.57.77 0 1.482-.19 2.133-.57a4.242 4.242 0 0 0 1.547-1.547c.38-.65.57-1.362.57-2.133 0-.77-.19-1.482-.57-2.133a4.25 4.25 0 0 0-1.547-1.547A4.153 4.153 0 0 0 8 3.75zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: colors.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction ConfirmedStatusIcon(iconProps: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M10 8c0 .552-.195 1.023-.586 1.414-.39.39-.862.586-1.414.586a1.926 1.926 0 0 1-1.414-.586A1.928 1.928 0 0 1 6 8c0-.552.195-1.023.586-1.414C6.976 6.196 7.448 6 8 6c.552 0 1.023.195 1.414.586.39.39.586.862.586 1.414zM8 3.75c-.77 0-1.482.19-2.133.57A4.25 4.25 0 0 0 4.32 5.867c-.38.65-.57 1.362-.57 2.133 0 .77.19 1.482.57 2.133.38.65.896 1.167 1.547 1.547.65.38 1.362.57 2.133.57.77 0 1.482-.19 2.133-.57a4.242 4.242 0 0 0 1.547-1.547c.38-.65.57-1.362.57-2.133 0-.77-.19-1.482-.57-2.133a4.25 4.25 0 0 0-1.547-1.547A4.153 4.153 0 0 0 8 3.75zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: colors.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction ReopenedStatusIcon(iconProps: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M8 12.25v-8.5c-.77 0-1.482.19-2.133.57A4.25 4.25 0 0 0 4.32 5.867c-.38.65-.57 1.362-.57 2.133 0 .77.19 1.482.57 2.133.38.65.896 1.167 1.547 1.547.65.38 1.362.57 2.133.57zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: colors.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction ResolvedStatusIcon(iconProps: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M12.03 6.734a.49.49 0 0 0-.14-.36l-.71-.702a.48.48 0 0 0-.352-.15.474.474 0 0 0-.35.15l-3.19 3.18-1.765-1.766a.479.479 0 0 0-.35-.15.479.479 0 0 0-.353.15l-.71.703a.482.482 0 0 0-.14.358c0 .14.046.258.14.352l2.828 2.828c.098.1.216.15.35.15.142 0 .26-.05.36-.15l4.243-4.242a.475.475 0 0 0 .14-.352l-.001.001zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: colors.baseFontColor }}\n      />\n    </Icon>\n  );\n}\n\nfunction ClosedStatusIcon(iconProps: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: colors.baseFontColor }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport StatusIcon from '../../components/icons/StatusIcon';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  resolution: string | undefined;\n  status: string;\n}\n\nexport default function StatusHelper(props: Props) {\n  const resolution = props.resolution && ` (${translate('issue.resolution', props.resolution)})`;\n  return (\n    <span className={props.className}>\n      <StatusIcon className=\"little-spacer-right\" status={props.status} />\n      {translate('issue.status', props.status)}\n      {resolution}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { flatten } from 'lodash';\nimport { splitByTokens } from './highlight';\nimport { getLinearLocations } from './issueLocations';\n\nexport function issuesByLine(issues: T.Issue[]) {\n  const index: { [line: number]: T.Issue[] } = {};\n  issues.forEach(issue => {\n    const line = issue.textRange ? issue.textRange.endLine : 0;\n    if (!(line in index)) {\n      index[line] = [];\n    }\n    index[line].push(issue);\n  });\n  return index;\n}\n\nexport function issuesByComponentAndLine(\n  issues: T.Issue[] = []\n): { [component: string]: { [line: number]: T.Issue[] } } {\n  return issues.reduce((mapping: { [component: string]: { [line: number]: T.Issue[] } }, issue) => {\n    mapping[issue.component] = mapping[issue.component] || {};\n    const line = issue.textRange ? issue.textRange.endLine : 0;\n    mapping[issue.component][line] = mapping[issue.component][line] || [];\n    mapping[issue.component][line].push(issue);\n    return mapping;\n  }, {});\n}\n\nexport function locationsByLine(issues: Pick<T.Issue, 'textRange'>[]) {\n  const index: { [line: number]: T.LinearIssueLocation[] } = {};\n  issues.forEach(issue => {\n    getLinearLocations(issue.textRange).forEach(location => {\n      if (!(location.line in index)) {\n        index[location.line] = [];\n      }\n      index[location.line].push(location);\n    });\n  });\n  return index;\n}\n\nexport function duplicationsByLine(duplications: T.Duplication[] | undefined) {\n  if (duplications == null) {\n    return {};\n  }\n\n  const duplicationsByLine: { [line: number]: number[] } = {};\n\n  duplications.forEach(({ blocks }, duplicationIndex) => {\n    blocks.forEach(block => {\n      // eslint-disable-next-line no-underscore-dangle\n      if (block._ref === '1') {\n        for (let line = block.from; line < block.from + block.size; line++) {\n          if (!(line in duplicationsByLine)) {\n            duplicationsByLine[line] = [];\n          }\n          duplicationsByLine[line].push(duplicationIndex);\n        }\n      }\n    });\n  });\n\n  return duplicationsByLine;\n}\n\nexport function symbolsByLine(sources: T.SourceLine[]) {\n  const index: { [line: number]: string[] } = {};\n  sources.forEach(line => {\n    const tokens = splitByTokens(line.code || '');\n    const symbols = flatten(\n      tokens.map(token => {\n        const keys = token.className.match(/sym-\\d+/g);\n        return keys != null ? keys : [];\n      })\n    );\n    index[line.line] = symbols.filter(key => key);\n  });\n  return index;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\n\nexport interface Token {\n  className: string;\n  markers: number[];\n  text: string;\n}\n\nconst ISSUE_LOCATION_CLASS = 'source-line-code-issue';\n\nexport function splitByTokens(code: string, rootClassName = ''): Token[] {\n  const container = document.createElement('div');\n  let tokens: Token[] = [];\n  container.innerHTML = code;\n  [].forEach.call(container.childNodes, (node: Element) => {\n    if (node.nodeType === 1) {\n      // ELEMENT NODE\n      const fullClassName = rootClassName ? rootClassName + ' ' + node.className : node.className;\n      const innerTokens = splitByTokens(node.innerHTML, fullClassName);\n      tokens = tokens.concat(innerTokens);\n    }\n    if (node.nodeType === 3 && node.nodeValue) {\n      // TEXT NODE\n      tokens.push({ className: rootClassName, markers: [], text: node.nodeValue });\n    }\n  });\n  return tokens;\n}\n\nexport function highlightSymbol(tokens: Token[], symbol: string): Token[] {\n  const symbolRegExp = new RegExp(`\\\\b${symbol}\\\\b`);\n  return tokens.map(token =>\n    symbolRegExp.test(token.className)\n      ? { ...token, className: `${token.className} highlighted` }\n      : token\n  );\n}\n\n/**\n * Intersect two ranges\n * @param s1 Start position of the first range\n * @param e1 End position of the first range\n * @param s2 Start position of the second range\n * @param e2 End position of the second range\n */\nfunction intersect(s1: number, e1: number, s2: number, e2: number) {\n  return { from: Math.max(s1, s2), to: Math.min(e1, e2) };\n}\n\n/**\n * Get the substring of a string\n * @param str A string\n * @param from \"From\" offset\n * @param to \"To\" offset\n * @param acc Global offset to eliminate\n */\nfunction part(str: string, from: number, to: number, acc: number): string {\n  // we do not want negative number as the first argument of `substr`\n  return from >= acc ? str.substr(from - acc, to - from) : str.substr(0, to - from);\n}\n\n/**\n * Highlight issue locations in the list of tokens\n */\nexport function highlightIssueLocations(\n  tokens: Token[],\n  issueLocations: T.LinearIssueLocation[],\n  rootClassName: string = ISSUE_LOCATION_CLASS\n): Token[] {\n  issueLocations.forEach(location => {\n    const nextTokens: Token[] = [];\n    let acc = 0;\n    let markerAdded = location.line !== location.startLine;\n    tokens.forEach(token => {\n      const x = intersect(acc, acc + token.text.length, location.from, location.to);\n      const p1 = part(token.text, acc, x.from, acc);\n      const p2 = part(token.text, x.from, x.to, acc);\n      const p3 = part(token.text, x.to, acc + token.text.length, acc);\n      if (p1.length) {\n        nextTokens.push({ ...token, text: p1 });\n      }\n      if (p2.length) {\n        const newClassName =\n          token.className.indexOf(rootClassName) === -1\n            ? `${token.className} ${rootClassName}`\n            : token.className;\n        nextTokens.push({\n          className: newClassName,\n          markers:\n            !markerAdded && location.index != null\n              ? uniq([...token.markers, location.index])\n              : token.markers,\n          text: p2\n        });\n        markerAdded = true;\n      }\n      if (p3.length) {\n        nextTokens.push({ ...token, text: p3 });\n      }\n      acc += token.text.length;\n    });\n    tokens = nextTokens.slice();\n  });\n  return tokens;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getLinearLocations(textRange: T.TextRange | undefined): T.LinearIssueLocation[] {\n  if (!textRange) {\n    return [];\n  }\n  const locations = [];\n\n  // go through all lines of the `textRange`\n  for (let line = textRange.startLine; line <= textRange.endLine; line++) {\n    // TODO fix 999999\n    const from = line === textRange.startLine ? textRange.startOffset : 0;\n    const to = line === textRange.endLine ? textRange.endOffset : 999999;\n    locations.push({ line, from, to });\n  }\n  return locations;\n}\n\nexport function getSecondaryIssueLocationsForLine(\n  line: T.SourceLine,\n  highlightedLocations: (T.FlowLocation | undefined)[] | undefined\n): T.LinearIssueLocation[] {\n  if (!highlightedLocations) {\n    return [];\n  }\n  return highlightedLocations.reduce((locations, location) => {\n    const linearLocations: T.LinearIssueLocation[] = location\n      ? getLinearLocations(location.textRange)\n          .filter(l => l.line === line.line)\n          .map(l => ({\n            ...l,\n            startLine: location.textRange.startLine,\n            index: location.index,\n            text: location.msg\n          }))\n      : [];\n    return [...locations, ...linearLocations];\n  }, []);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../types/branch-like';\n\ninterface SourceViewerContextShape {\n  branchLike?: BranchLike;\n  file: T.SourceViewerFile;\n}\n\nexport const SourceViewerContext = React.createContext<SourceViewerContextShape>({\n  branchLike: {} as BranchLike,\n  file: {} as T.SourceViewerFile\n});\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { inRange } from 'lodash';\nimport * as React from 'react';\nimport './DuplicationsRating.css';\n\ninterface Props {\n  muted?: boolean;\n  size?: 'small' | 'normal' | 'big' | 'huge';\n  value: number | null | undefined;\n}\n\nexport default function DuplicationsRating({ muted = false, size = 'normal', value }: Props) {\n  const className = classNames('duplications-rating', {\n    'duplications-rating-small': size === 'small',\n    'duplications-rating-big': size === 'big',\n    'duplications-rating-huge': size === 'huge',\n    'duplications-rating-muted': muted || value == null || isNaN(value),\n    'duplications-rating-A': inRange(value || 0, 0, 3),\n    'duplications-rating-B': inRange(value || 0, 3, 5),\n    'duplications-rating-C': inRange(value || 0, 5, 10),\n    'duplications-rating-D': inRange(value || 0, 10, 20),\n    'duplications-rating-E': (value || 0) >= 20\n  });\n\n  return <div className={className} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function ExpandSnippetIcon({ fill = 'currentColor', ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <g fill=\"none\" fillRule=\"evenodd\">\n        <path\n          d=\"M8 1v4H4\"\n          stroke={fill}\n          strokeWidth=\"2\"\n          transform=\"scale(-.83333 -.84583) rotate(45 7.66 -19.75)\"\n        />\n        <path d=\"M3 5.78h10v1.7H3z\" fill={fill} />\n        <path d=\"M7.17 2.4h1.66v5.07H7.17z\" fill={fill} />\n        <g>\n          <path\n            d=\"M8.16 1.81V6.1H3.9\"\n            stroke={fill}\n            strokeWidth=\"2\"\n            transform=\"scale(.83333 .84583) rotate(45 -4.2 13.2)\"\n          />\n          <path d=\"M13 10.01H3v-1.7h10z\" fill={fill} />\n          <path d=\"M8.83 13.4H7.17V9.15h1.66z\" fill={fill} />\n        </g>\n      </g>\n    </Icon>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./DuplicationsRating.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".duplications-rating{position:relative;display:inline-flex;vertical-align:top;justify-content:center;align-items:center;width:24px;height:24px;border:3px solid #ed7d20;border-radius:24px;box-sizing:border-box}.duplications-rating-small{width:16px;height:16px;border-width:2px}.duplications-rating-big{width:40px;height:40px;border-width:3px}.duplications-rating-huge{width:60px;height:60px;border-width:4px;border-radius:30px}.duplications-rating-muted{border-color:#bdbdbd!important}.duplications-rating-muted:after{background-color:#bdbdbd!important}.duplications-rating:after{border-radius:24px;content:\\\"\\\"}.duplications-rating-A{border-color:#0a0}.duplications-rating-A:after{display:none}.duplications-rating-B{border-color:#b0d513}.duplications-rating-B:after{width:6px;height:6px;background-color:#b0d513}.duplications-rating-small.duplications-rating-B:after{width:2px;height:2px}.duplications-rating-big.duplications-rating-B:after{width:12px;height:12px}.duplications-rating-huge.duplications-rating-B:after{width:18px;height:18px}.duplications-rating-C{border-color:#eabe06}.duplications-rating-C:after{width:8px;height:8px;background-color:#eabe06}.duplications-rating-small.duplications-rating-C:after{width:6px;height:6px}.duplications-rating-big.duplications-rating-C:after{width:16px;height:16px}.duplications-rating-huge.duplications-rating-C:after{width:24px;height:24px}.duplications-rating-D{border-color:#ed7d20}.duplications-rating-D:after{width:12px;height:12px;background-color:#ed7d20}.duplications-rating-small.duplications-rating-D:after{width:8px;height:8px}.duplications-rating-big.duplications-rating-D:after{width:24px;height:24px}.duplications-rating-huge.duplications-rating-D:after{width:36px;height:36px}.duplications-rating-E{border-color:#d4333f}.duplications-rating-E:after{width:14px;height:14px;background-color:#d4333f}.duplications-rating-small.duplications-rating-E:after{width:10px;height:10px}.duplications-rating-big.duplications-rating-E:after{width:28px;height:28px}.duplications-rating-huge.duplications-rating-E:after{width:42px;height:42px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport throwGlobalError from '../../app/utils/throwGlobalError';\nimport { parseIssueFromResponse } from '../../helpers/issues';\nimport { IssueResponse } from '../../types/issues';\n\nexport const updateIssue = (\n  onChange: (issue: T.Issue) => void,\n  resultPromise: Promise<IssueResponse>,\n  oldIssue?: T.Issue,\n  newIssue?: T.Issue\n) => {\n  const optimisticUpdate = oldIssue !== undefined && newIssue !== undefined;\n  if (optimisticUpdate) {\n    onChange(newIssue!);\n  }\n\n  resultPromise.then(\n    response => {\n      if (!optimisticUpdate) {\n        const issue = parseIssueFromResponse(\n          response.issue,\n          response.components,\n          response.users,\n          response.rules\n        );\n        onChange(issue);\n      }\n    },\n    param => {\n      if (optimisticUpdate) {\n        onChange(oldIssue!);\n      }\n      throwGlobalError(param);\n    }\n  );\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from '../../components/controls/Tooltip';\n\ninterface Props {\n  active?: string;\n  className?: string;\n  item: string;\n  onHover?: (item: string) => void;\n  onSelect?: (item: string) => void;\n  title?: React.ReactNode;\n}\n\nexport default class SelectListItem extends React.PureComponent<Props> {\n  handleSelect = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    if (this.props.onSelect) {\n      this.props.onSelect(this.props.item);\n    }\n  };\n\n  handleHover = () => {\n    if (this.props.onHover) {\n      this.props.onHover(this.props.item);\n    }\n  };\n\n  renderLink() {\n    const children = this.props.children || this.props.item;\n    return (\n      <li>\n        <a\n          className={classNames(\n            { active: this.props.active === this.props.item },\n            this.props.className\n          )}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          {children}\n        </a>\n      </li>\n    );\n  }\n\n  render() {\n    return (\n      <Tooltip overlay={this.props.title || undefined} placement=\"right\">\n        {this.renderLink()}\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as key from 'keymaster';\nimport { uniqueId } from 'lodash';\nimport * as React from 'react';\nimport SelectListItem from './SelectListItem';\n\ninterface Props {\n  className?: string;\n  items: string[];\n  currentItem: string;\n  onSelect: (item: string) => void;\n}\n\ninterface State {\n  active: string;\n}\n\nexport default class SelectList extends React.PureComponent<Props, State> {\n  currentKeyScope?: string;\n  previousFilter?: (event: any) => void;\n  previousKeyScope?: string;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      active: props.currentItem\n    };\n  }\n\n  componentDidMount() {\n    this.attachShortcuts();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.currentItem !== this.props.currentItem &&\n      !this.props.items.includes(this.state.active)\n    ) {\n      this.setState({ active: this.props.currentItem });\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    this.previousKeyScope = key.getScope();\n    this.previousFilter = key.filter;\n    this.currentKeyScope = uniqueId('key-scope');\n    key.setScope(this.currentKeyScope);\n\n    // sometimes there is a *focused* search field next to the SelectList component\n    // we need to allow shortcuts in this case, but only for the used keys\n    (key as any).filter = (event: KeyboardEvent & { target: HTMLElement }) => {\n      const { tagName } = event.target || event.srcElement;\n      const isInput = tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';\n      return [13, 38, 40].includes(event.keyCode) || !isInput;\n    };\n\n    key('down', this.currentKeyScope, () => {\n      this.setState(this.selectNextElement);\n      return false;\n    });\n\n    key('up', this.currentKeyScope, () => {\n      this.setState(this.selectPreviousElement);\n      return false;\n    });\n\n    key('return', this.currentKeyScope, () => {\n      if (this.state.active != null) {\n        this.handleSelect(this.state.active);\n      }\n      return false;\n    });\n  };\n\n  detachShortcuts = () => {\n    if (this.previousKeyScope) {\n      key.setScope(this.previousKeyScope);\n    }\n    if (this.currentKeyScope) {\n      key.deleteScope(this.currentKeyScope);\n    }\n    (key as any).filter = this.previousFilter;\n  };\n\n  handleSelect = (item: string) => {\n    this.props.onSelect(item);\n  };\n\n  handleHover = (item: string) => {\n    this.setState({ active: item });\n  };\n\n  selectNextElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx < 0) {\n      return { active: props.items[0] };\n    }\n    return { active: props.items[(idx + 1) % props.items.length] };\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx <= 0) {\n      return { active: props.items[props.items.length - 1] };\n    }\n    return { active: props.items[idx - 1] };\n  };\n\n  renderChild = (child: any) => {\n    if (child == null) {\n      return null;\n    }\n    // do not pass extra props to children like `<li className=\"divider\" />`\n    if (child.type !== SelectListItem) {\n      return child;\n    }\n    return React.cloneElement(child, {\n      active: this.state.active,\n      onHover: this.handleHover,\n      onSelect: this.handleSelect\n    });\n  };\n\n  render() {\n    const { children } = this.props;\n    const hasChildren = React.Children.count(children) > 0;\n    return (\n      <ul className={classNames('menu', this.props.className)}>\n        {hasChildren && React.Children.map(children, this.renderChild)}\n        {!hasChildren &&\n          this.props.items.map(item => (\n            <SelectListItem\n              active={this.state.active}\n              item={item}\n              key={item}\n              onHover={this.handleHover}\n              onSelect={this.handleSelect}\n            />\n          ))}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport * as React from 'react';\nimport { searchUsers } from '../../../api/users';\nimport { DropdownOverlay } from '../../../components/controls/Dropdown';\nimport SearchBox from '../../../components/controls/SearchBox';\nimport { translate } from '../../../helpers/l10n';\nimport { isLoggedIn, isUserActive } from '../../../helpers/users';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport { withCurrentUser } from '../../hoc/withCurrentUser';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  onSelect: (login: string) => void;\n}\n\ninterface State {\n  currentUser: string;\n  query: string;\n  users: T.UserActive[];\n}\n\nconst LIST_SIZE = 10;\n\nexport class SetAssigneePopup extends React.PureComponent<Props, State> {\n  defaultUsersArray: T.UserActive[];\n\n  constructor(props: Props) {\n    super(props);\n    this.defaultUsersArray = [{ login: '', name: translate('unassigned') }];\n\n    if (isLoggedIn(props.currentUser)) {\n      this.defaultUsersArray = [props.currentUser, ...this.defaultUsersArray];\n    }\n\n    this.state = {\n      query: '',\n      users: this.defaultUsersArray,\n      currentUser: this.defaultUsersArray.length > 0 ? this.defaultUsersArray[0].login : ''\n    };\n  }\n\n  searchUsers = (query: string) => {\n    searchUsers({ q: query, ps: LIST_SIZE }).then(this.handleSearchResult, () => {});\n  };\n\n  handleSearchResult = ({ users }: { users: T.UserBase[] }) => {\n    const activeUsers = users.filter(isUserActive);\n    this.setState({\n      users: activeUsers,\n      currentUser: activeUsers.length > 0 ? activeUsers[0].login : ''\n    });\n  };\n\n  handleSearchChange = (query: string) => {\n    if (query.length === 0) {\n      this.setState({\n        query,\n        users: this.defaultUsersArray,\n        currentUser: this.defaultUsersArray[0].login\n      });\n    } else {\n      this.setState({ query });\n      this.searchUsers(query);\n    }\n  };\n\n  render() {\n    return (\n      <DropdownOverlay noPadding={true}>\n        <div className=\"multi-select\">\n          <div className=\"menu-search\">\n            <SearchBox\n              autoFocus={true}\n              className=\"little-spacer-top\"\n              minLength={2}\n              onChange={this.handleSearchChange}\n              placeholder={translate('search.search_for_users')}\n              value={this.state.query}\n            />\n          </div>\n          <SelectList\n            currentItem={this.state.currentUser}\n            items={map(this.state.users, 'login')}\n            onSelect={this.props.onSelect}>\n            {this.state.users.map(user => (\n              <SelectListItem item={user.login} key={user.login}>\n                {!!user.login && (\n                  <Avatar className=\"spacer-right\" hash={user.avatar} name={user.name} size={16} />\n                )}\n                <span className=\"text-middle\" style={{ marginLeft: user.login ? 24 : undefined }}>\n                  {user.name}\n                </span>\n              </SelectListItem>\n            ))}\n          </SelectList>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n\nexport default withCurrentUser(SetAssigneePopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from '../../../components/controls/buttons';\nimport Toggler from '../../../components/controls/Toggler';\nimport DropdownIcon from '../../../components/icons/DropdownIcon';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport Avatar from '../../ui/Avatar';\nimport SetAssigneePopup from '../popups/SetAssigneePopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: T.Issue;\n  canAssign: boolean;\n  onAssign: (login: string) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueAssign extends React.PureComponent<Props> {\n  toggleAssign = (open?: boolean) => {\n    this.props.togglePopup('assign', open);\n  };\n\n  handleClose = () => {\n    this.toggleAssign(false);\n  };\n\n  renderAssignee() {\n    const { issue } = this.props;\n    const assigneeName = issue.assigneeName || issue.assignee;\n\n    if (assigneeName) {\n      return (\n        <>\n          <span className=\"text-top\">\n            <Avatar\n              className=\"little-spacer-right\"\n              hash={issue.assigneeAvatar}\n              name={assigneeName}\n              size={16}\n            />\n          </span>\n          <span className=\"issue-meta-label\">\n            {issue.assigneeActive === false\n              ? translateWithParameters('user.x_deleted', assigneeName)\n              : assigneeName}\n          </span>\n        </>\n      );\n    }\n\n    return <span className=\"issue-meta-label\">{translate('unassigned')}</span>;\n  }\n\n  render() {\n    const { canAssign, isOpen, issue } = this.props;\n    const assigneeName = issue.assigneeName || issue.assignee;\n\n    if (canAssign) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            closeOnEscape={true}\n            onRequestClose={this.handleClose}\n            open={isOpen}\n            overlay={<SetAssigneePopup onSelect={this.props.onAssign} />}>\n            <ButtonLink\n              aria-expanded={isOpen}\n              aria-label={\n                assigneeName\n                  ? translateWithParameters(\n                      'issue.assign.assigned_to_x_click_to_change',\n                      assigneeName\n                    )\n                  : translate('issue.assign.unassigned_click_to_assign')\n              }\n              className=\"issue-action issue-action-with-options js-issue-assign\"\n              onClick={this.toggleAssign}>\n              {this.renderAssignee()}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    }\n\n    return this.renderAssignee();\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from '../../../components/controls/buttons';\nimport { DropdownOverlay } from '../../../components/controls/Dropdown';\nimport { PopupPlacement } from '../../../components/ui/popups';\nimport { translate } from '../../../helpers/l10n';\nimport FormattingTips from '../../common/FormattingTips';\n\ninterface Props {\n  comment?: Pick<T.IssueComment, 'markdown'>;\n  onComment: (text: string) => void;\n  toggleComment: (visible: boolean) => void;\n  placeholder: string;\n  placement?: PopupPlacement;\n  autoTriggered?: boolean;\n}\n\ninterface State {\n  textComment: string;\n}\n\nexport default class CommentPopup extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      textComment: props.comment ? props.comment.markdown : ''\n    };\n  }\n\n  handleCommentChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ textComment: event.target.value });\n  };\n\n  handleCommentClick = () => {\n    if (this.state.textComment.trim().length > 0) {\n      this.props.onComment(this.state.textComment);\n    }\n  };\n\n  handleCancelClick = () => {\n    this.props.toggleComment(false);\n  };\n\n  handleKeyboard = (event: React.KeyboardEvent) => {\n    if (event.keyCode === 13 && (event.metaKey || event.ctrlKey)) {\n      // Ctrl + Enter\n      this.handleCommentClick();\n    } else if ([37, 38, 39, 40].includes(event.keyCode)) {\n      // Arrow keys\n      event.stopPropagation();\n    }\n  };\n\n  render() {\n    const { comment, autoTriggered } = this.props;\n    return (\n      <DropdownOverlay placement={this.props.placement}>\n        <div className=\"issue-comment-bubble-popup\">\n          <div className=\"issue-comment-form-text\">\n            <textarea\n              autoFocus={true}\n              onChange={this.handleCommentChange}\n              onKeyDown={this.handleKeyboard}\n              placeholder={this.props.placeholder}\n              rows={2}\n              value={this.state.textComment}\n            />\n          </div>\n          <div className=\"issue-comment-form-footer\">\n            <div className=\"issue-comment-form-actions\">\n              <Button\n                className=\"js-issue-comment-submit little-spacer-right\"\n                disabled={this.state.textComment.trim().length < 1}\n                onClick={this.handleCommentClick}>\n                {comment && translate('save')}\n                {!comment && translate('issue.comment.submit')}\n              </Button>\n              <ResetButtonLink className=\"js-issue-comment-cancel\" onClick={this.handleCancelClick}>\n                {autoTriggered ? translate('skip') : translate('cancel')}\n              </ResetButtonLink>\n            </div>\n            <div className=\"issue-comment-form-tips\">\n              <FormattingTips />\n            </div>\n          </div>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { addIssueComment } from '../../../api/issues';\nimport { ButtonLink } from '../../../components/controls/buttons';\nimport Toggler from '../../../components/controls/Toggler';\nimport { translate } from '../../../helpers/l10n';\nimport { updateIssue } from '../actions';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  commentAutoTriggered?: boolean;\n  commentPlaceholder: string;\n  currentPopup?: string;\n  issueKey: string;\n  onChange: (issue: T.Issue) => void;\n  toggleComment: (open?: boolean, placeholder?: string, autoTriggered?: boolean) => void;\n}\n\nexport default class IssueCommentAction extends React.PureComponent<Props> {\n  addComment = (text: string) => {\n    updateIssue(this.props.onChange, addIssueComment({ issue: this.props.issueKey, text }));\n    this.props.toggleComment(false);\n  };\n\n  handleCommentClick = () => {\n    this.props.toggleComment();\n  };\n\n  handleClose = () => {\n    this.props.toggleComment(false);\n  };\n\n  render() {\n    return (\n      <li className=\"issue-meta dropdown\">\n        <Toggler\n          closeOnClickOutside={false}\n          onRequestClose={this.handleClose}\n          open={this.props.currentPopup === 'comment'}\n          overlay={\n            <CommentPopup\n              autoTriggered={this.props.commentAutoTriggered}\n              onComment={this.addComment}\n              placeholder={this.props.commentPlaceholder}\n              toggleComment={this.props.toggleComment}\n            />\n          }>\n          <ButtonLink\n            aria-expanded={this.props.currentPopup === 'comment'}\n            aria-label={translate('issue.comment.add_comment')}\n            className=\"issue-action js-issue-comment\"\n            onClick={this.handleCommentClick}>\n            <span className=\"issue-meta-label\">{translate('issue.comment.formlink')}</span>\n          </ButtonLink>\n        </Toggler>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from '../../../components/controls/Dropdown';\nimport SeverityIcon from '../../../components/icons/SeverityIcon';\nimport { translate } from '../../../helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ntype Props = {\n  issue: Pick<T.Issue, 'severity'>;\n  onSelect: (severity: string) => void;\n};\n\nconst SEVERITY = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\n\nexport default function SetSeverityPopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.severity} items={SEVERITY} onSelect={onSelect}>\n        {SEVERITY.map(severity => (\n          <SelectListItem className=\"display-flex-center\" item={severity} key={severity}>\n            <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n            {translate('severity', severity)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { setIssueSeverity } from '../../../api/issues';\nimport { ButtonLink } from '../../../components/controls/buttons';\nimport Toggler from '../../../components/controls/Toggler';\nimport DropdownIcon from '../../../components/icons/DropdownIcon';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { IssueResponse } from '../../../types/issues';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport SetSeverityPopup from '../popups/SetSeverityPopup';\n\ninterface Props {\n  canSetSeverity: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'severity'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueSeverity extends React.PureComponent<Props> {\n  toggleSetSeverity = (open?: boolean) => {\n    this.props.togglePopup('set-severity', open);\n  };\n\n  setSeverity = (severity: string) => {\n    this.props.setIssueProperty('severity', 'set-severity', setIssueSeverity, severity);\n  };\n\n  handleClose = () => {\n    this.toggleSetSeverity(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetSeverity) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetSeverity}\n            overlay={<SetSeverityPopup issue={issue} onSelect={this.setSeverity} />}>\n            <ButtonLink\n              aria-label={translateWithParameters(\n                'issue.severity.severity_x_click_to_change',\n                translate('severity', issue.severity)\n              )}\n              aria-expanded={this.props.isOpen}\n              className=\"issue-action issue-action-with-options js-issue-set-severity\"\n              onClick={this.toggleSetSeverity}>\n              <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    }\n\n    return <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { difference, without } from 'lodash';\nimport * as React from 'react';\nimport { searchIssueTags } from '../../../api/issues';\nimport { DropdownOverlay } from '../../../components/controls/Dropdown';\nimport { PopupPlacement } from '../../../components/ui/popups';\nimport TagsSelector from '../../tags/TagsSelector';\n\ninterface Props {\n  selectedTags: string[];\n  setTags: (tags: string[]) => void;\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\nconst MAX_LIST_SIZE = 100;\n\nexport default class SetIssueTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return searchIssueTags({\n      q: query,\n      ps: Math.min(this.props.selectedTags.length - 1 + LIST_SIZE, MAX_LIST_SIZE)\n    }).then(\n      (tags: string[]) => {\n        if (this.mounted) {\n          this.setState({ searchResult: tags });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags([...this.props.selectedTags, tag]);\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.selectedTags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.selectedTags);\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <TagsSelector\n          listSize={LIST_SIZE}\n          onSearch={this.onSearch}\n          onSelect={this.onSelect}\n          onUnselect={this.onUnselect}\n          selectedTags={this.props.selectedTags}\n          tags={availableTags}\n        />\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { setIssueTags } from '../../../api/issues';\nimport { ButtonLink } from '../../../components/controls/buttons';\nimport Toggler from '../../../components/controls/Toggler';\nimport { translate } from '../../../helpers/l10n';\nimport TagsList from '../../tags/TagsList';\nimport { updateIssue } from '../actions';\nimport SetIssueTagsPopup from '../popups/SetIssueTagsPopup';\n\ninterface Props {\n  canSetTags: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'key' | 'tags'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTags extends React.PureComponent<Props> {\n  toggleSetTags = (open?: boolean) => {\n    this.props.togglePopup('edit-tags', open);\n  };\n\n  setTags = (tags: string[]) => {\n    const { issue } = this.props;\n    const newIssue = { ...issue, tags };\n    updateIssue(\n      this.props.onChange,\n      setIssueTags({ issue: issue.key, tags: tags.join(',') }),\n      issue as T.Issue,\n      newIssue as T.Issue\n    );\n  };\n\n  handleClose = () => {\n    this.toggleSetTags(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    const { tags = [] } = issue;\n\n    if (this.props.canSetTags) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen}\n            overlay={<SetIssueTagsPopup selectedTags={tags} setTags={this.setTags} />}>\n            <ButtonLink\n              aria-expanded={this.props.isOpen}\n              className=\"issue-action issue-action-with-options js-issue-edit-tags\"\n              onClick={this.toggleSetTags}>\n              <TagsList\n                allowUpdate={this.props.canSetTags}\n                tags={\n                  issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]\n                }\n              />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    }\n\n    return (\n      <TagsList\n        allowUpdate={this.props.canSetTags}\n        className=\"note\"\n        tags={issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { DropdownOverlay } from '../../../components/controls/Dropdown';\nimport { hasMessage, translate } from '../../../helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\nexport interface Props {\n  fromHotspot: boolean;\n  onSelect: (transition: string) => void;\n  transitions: string[];\n  type: T.IssueType;\n}\n\nexport default function SetTransitionPopup({ fromHotspot, onSelect, transitions, type }: Props) {\n  const isManualVulnerability = fromHotspot && type === 'VULNERABILITY';\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={transitions[0]} items={transitions} onSelect={onSelect}>\n        {transitions.map(transition => {\n          const [name, description] = translateTransition(transition, isManualVulnerability);\n          return (\n            <SelectListItem item={transition} key={transition} title={description}>\n              {name}\n            </SelectListItem>\n          );\n        })}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n\nfunction translateTransition(transition: string, isManualVulnerability: boolean) {\n  return isManualVulnerability && hasMessage('vulnerability.transition', transition)\n    ? [\n        translate('vulnerability.transition', transition),\n        translate('vulnerability.transition', transition, 'description')\n      ]\n    : [\n        translate('issue.transition', transition),\n        <FormattedMessage\n          key=\"description\"\n          defaultMessage={translate('issue.transition', transition, 'description')}\n          id={`issue.transition.${transition}.description`}\n          values={{\n            community_plug_link: (\n              <a\n                href=\"https://community.sonarsource.com/\"\n                rel=\"noopener noreferrer\"\n                target=\"_blank\">\n                {translate('issue.transition.community_plug_link')}\n              </a>\n            )\n          }}\n        />\n      ];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { setIssueTransition } from '../../../api/issues';\nimport { ButtonLink } from '../../../components/controls/buttons';\nimport Toggler from '../../../components/controls/Toggler';\nimport DropdownIcon from '../../../components/icons/DropdownIcon';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport StatusHelper from '../../shared/StatusHelper';\nimport { updateIssue } from '../actions';\nimport SetTransitionPopup from '../popups/SetTransitionPopup';\n\ninterface Props {\n  hasTransitions: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'fromHotspot' | 'key' | 'resolution' | 'status' | 'transitions' | 'type'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTransition extends React.PureComponent<Props> {\n  setTransition = (transition: string) => {\n    updateIssue(\n      this.props.onChange,\n      setIssueTransition({ issue: this.props.issue.key, transition })\n    );\n    this.toggleSetTransition();\n  };\n\n  toggleSetTransition = (open?: boolean) => {\n    this.props.togglePopup('transition', open);\n  };\n\n  handleClose = () => {\n    this.toggleSetTransition(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    if (this.props.hasTransitions) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.hasTransitions}\n            overlay={\n              <SetTransitionPopup\n                fromHotspot={issue.fromHotspot}\n                onSelect={this.setTransition}\n                transitions={issue.transitions}\n                type={issue.type}\n              />\n            }>\n            <ButtonLink\n              aria-label={translateWithParameters(\n                'issue.transition.status_x_click_to_change',\n                translate('issue.status', issue.status)\n              )}\n              aria-expanded={this.props.isOpen}\n              className=\"issue-action issue-action-with-options js-issue-transition\"\n              onClick={this.toggleSetTransition}>\n              <StatusHelper\n                className=\"issue-meta-label\"\n                resolution={issue.resolution}\n                status={issue.status}\n              />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    }\n\n    return (\n      <StatusHelper\n        className=\"issue-meta-label\"\n        resolution={issue.resolution}\n        status={issue.status}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from '../../../components/controls/Dropdown';\nimport IssueTypeIcon from '../../../components/icons/IssueTypeIcon';\nimport { translate } from '../../../helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ninterface Props {\n  issue: Pick<T.Issue, 'type'>;\n  onSelect: (type: T.IssueType) => void;\n}\n\nconst TYPES = ['BUG', 'VULNERABILITY', 'CODE_SMELL'];\n\nexport default function SetTypePopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.type} items={TYPES} onSelect={onSelect}>\n        {TYPES.map(type => (\n          <SelectListItem className=\"display-flex-center\" item={type} key={type}>\n            <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n            {translate('issue.type', type)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { setIssueType } from '../../../api/issues';\nimport { colors } from '../../../app/theme';\nimport { ButtonLink } from '../../../components/controls/buttons';\nimport Toggler from '../../../components/controls/Toggler';\nimport DropdownIcon from '../../../components/icons/DropdownIcon';\nimport IssueTypeIcon from '../../../components/icons/IssueTypeIcon';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { IssueResponse } from '../../../types/issues';\nimport SetTypePopup from '../popups/SetTypePopup';\n\ninterface Props {\n  canSetType: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'type'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueType extends React.PureComponent<Props> {\n  toggleSetType = (open?: boolean) => {\n    this.props.togglePopup('set-type', open);\n  };\n\n  setType = (type: string) => {\n    this.props.setIssueProperty('type', 'set-type', setIssueType, type);\n  };\n\n  handleClose = () => {\n    this.toggleSetType(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetType) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetType}\n            overlay={<SetTypePopup issue={issue} onSelect={this.setType} />}>\n            <ButtonLink\n              aria-label={translateWithParameters(\n                'issue.type.type_x_click_to_change',\n                translate('issue.type', issue.type)\n              )}\n              aria-expanded={this.props.isOpen}\n              className=\"issue-action issue-action-with-options js-issue-set-type\"\n              onClick={this.toggleSetType}>\n              <IssueTypeIcon\n                className=\"little-spacer-right\"\n                fill={colors.baseFontColor}\n                query={issue.type}\n              />\n              {translate('issue.type', issue.type)}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    }\n\n    return (\n      <span>\n        <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n        {translate('issue.type', issue.type)}\n      </span>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { IssueResponse } from '../../../types/issues';\nimport { updateIssue } from '../actions';\nimport IssueAssign from './IssueAssign';\nimport IssueCommentAction from './IssueCommentAction';\nimport IssueSeverity from './IssueSeverity';\nimport IssueTags from './IssueTags';\nimport IssueTransition from './IssueTransition';\nimport IssueType from './IssueType';\n\ninterface Props {\n  issue: T.Issue;\n  currentPopup?: string;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\ninterface State {\n  commentAutoTriggered: boolean;\n  commentPlaceholder: string;\n}\n\nexport default class IssueActionsBar extends React.PureComponent<Props, State> {\n  state: State = {\n    commentAutoTriggered: false,\n    commentPlaceholder: ''\n  };\n\n  setIssueProperty = (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => {\n    const { issue } = this.props;\n    if (issue[property] !== value) {\n      const newIssue = { ...issue, [property]: value };\n      updateIssue(\n        this.props.onChange,\n        apiCall({ issue: issue.key, [property]: value }),\n        issue,\n        newIssue\n      );\n    }\n    this.props.togglePopup(popup, false);\n  };\n\n  toggleComment = (open: boolean | undefined, placeholder = '', autoTriggered = false) => {\n    this.setState({\n      commentPlaceholder: placeholder,\n      commentAutoTriggered: autoTriggered\n    });\n    this.props.togglePopup('comment', open);\n  };\n\n  handleTransition = (issue: T.Issue) => {\n    this.props.onChange(issue);\n    if (\n      issue.resolution === 'FALSE-POSITIVE' ||\n      (issue.resolution === 'WONTFIX' && issue.type !== 'SECURITY_HOTSPOT')\n    ) {\n      this.toggleComment(true, translate('issue.comment.explain_why'), true);\n    }\n  };\n\n  render() {\n    const { issue } = this.props;\n    const canAssign = issue.actions.includes('assign');\n    const canComment = issue.actions.includes('comment');\n    const canSetSeverity = issue.actions.includes('set_severity');\n    const canSetType = issue.actions.includes('set_type');\n    const canSetTags = issue.actions.includes('set_tags');\n    const hasTransitions = issue.transitions && issue.transitions.length > 0;\n    const isSecurityHotspot = issue.type === 'SECURITY_HOTSPOT';\n\n    return (\n      <div className=\"issue-actions\">\n        <div className=\"issue-meta-list\">\n          <div className=\"issue-meta\">\n            <IssueType\n              canSetType={canSetType}\n              isOpen={this.props.currentPopup === 'set-type' && canSetType}\n              issue={issue}\n              setIssueProperty={this.setIssueProperty}\n              togglePopup={this.props.togglePopup}\n            />\n          </div>\n          {!isSecurityHotspot && (\n            <div className=\"issue-meta\">\n              <IssueSeverity\n                canSetSeverity={canSetSeverity}\n                isOpen={this.props.currentPopup === 'set-severity' && canSetSeverity}\n                issue={issue}\n                setIssueProperty={this.setIssueProperty}\n                togglePopup={this.props.togglePopup}\n              />\n            </div>\n          )}\n          <div className=\"issue-meta\">\n            <IssueTransition\n              hasTransitions={hasTransitions}\n              isOpen={this.props.currentPopup === 'transition' && hasTransitions}\n              issue={issue}\n              onChange={this.handleTransition}\n              togglePopup={this.props.togglePopup}\n            />\n          </div>\n          <div className=\"issue-meta\">\n            <IssueAssign\n              canAssign={canAssign}\n              isOpen={this.props.currentPopup === 'assign' && canAssign}\n              issue={issue}\n              onAssign={this.props.onAssign}\n              togglePopup={this.props.togglePopup}\n            />\n          </div>\n          {!isSecurityHotspot && issue.effort && (\n            <div className=\"issue-meta\">\n              <span className=\"issue-meta-label\">\n                {translateWithParameters('issue.x_effort', issue.effort)}\n              </span>\n            </div>\n          )}\n          {canComment && (\n            <IssueCommentAction\n              commentAutoTriggered={this.state.commentAutoTriggered}\n              commentPlaceholder={this.state.commentPlaceholder}\n              currentPopup={this.props.currentPopup}\n              issueKey={issue.key}\n              onChange={this.props.onChange}\n              toggleComment={this.toggleComment}\n            />\n          )}\n        </div>\n        <div className=\"list-inline\">\n          <div className=\"issue-meta js-issue-tags\">\n            <IssueTags\n              canSetTags={canSetTags}\n              isOpen={this.props.currentPopup === 'edit-tags' && canSetTags}\n              issue={issue}\n              onChange={this.props.onChange}\n              togglePopup={this.props.togglePopup}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from '../../../components/controls/buttons';\nimport { DropdownOverlay } from '../../../components/controls/Dropdown';\nimport { PopupPlacement } from '../../../components/ui/popups';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  onDelete: () => void;\n}\n\nexport default function CommentDeletePopup({ onDelete }: Props) {\n  return (\n    <DropdownOverlay placement={PopupPlacement.BottomRight}>\n      <div className=\"menu is-container\">\n        <div className=\"spacer-bottom\">{translate('issue.comment.delete_confirm_message')}</div>\n        <Button className=\"button-red\" onClick={onDelete}>\n          {translate('delete')}\n        </Button>\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DeleteButton, EditButton } from '../../../components/controls/buttons';\nimport Toggler from '../../../components/controls/Toggler';\nimport { PopupPlacement } from '../../../components/ui/popups';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { sanitizeString } from '../../../helpers/sanitize';\nimport DateFromNow from '../../intl/DateFromNow';\nimport Avatar from '../../ui/Avatar';\nimport CommentDeletePopup from '../popups/CommentDeletePopup';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  comment: T.IssueComment;\n  onDelete: (comment: string) => void;\n  onEdit: (comment: string, text: string) => void;\n}\n\ninterface State {\n  openPopup: string;\n}\n\nexport default class IssueCommentLine extends React.PureComponent<Props, State> {\n  state: State = {\n    openPopup: ''\n  };\n\n  handleEdit = (text: string) => {\n    this.props.onEdit(this.props.comment.key, text);\n    this.toggleEditPopup(false);\n  };\n\n  handleDelete = () => {\n    this.props.onDelete(this.props.comment.key);\n    this.toggleDeletePopup(false);\n  };\n\n  togglePopup = (popupName: string, force?: boolean) => {\n    this.setState(prevState => {\n      if (prevState.openPopup !== popupName && force !== false) {\n        return { openPopup: popupName };\n      } else if (prevState.openPopup === popupName && force !== true) {\n        return { openPopup: '' };\n      }\n      return prevState;\n    });\n  };\n\n  toggleDeletePopup = (force?: boolean) => {\n    this.togglePopup('delete', force);\n  };\n\n  toggleEditPopup = (force?: boolean) => {\n    this.togglePopup('edit', force);\n  };\n\n  closePopups = () => {\n    this.setState({ openPopup: '' });\n  };\n\n  render() {\n    const { comment } = this.props;\n    const author = comment.authorName || comment.author;\n    const displayName =\n      comment.authorActive === false && author\n        ? translateWithParameters('user.x_deleted', author)\n        : author;\n    return (\n      <div className=\"issue-comment\">\n        <div className=\"issue-comment-author\" title={displayName}>\n          <Avatar\n            className=\"little-spacer-right\"\n            hash={comment.authorAvatar}\n            name={author}\n            size={16}\n          />\n          {displayName}\n        </div>\n        <div\n          className=\"issue-comment-text markdown\"\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{ __html: sanitizeString(comment.htmlText) }}\n        />\n        <div className=\"issue-comment-age\">\n          <span className=\"a11y-hidden\">{translate('issue.comment.posted_on')}</span>\n          <DateFromNow date={comment.createdAt} />\n        </div>\n        <div className=\"issue-comment-actions\">\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                closeOnClickOutside={false}\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'edit'}\n                overlay={\n                  <CommentPopup\n                    comment={comment}\n                    onComment={this.handleEdit}\n                    placeholder=\"\"\n                    placement={PopupPlacement.BottomRight}\n                    toggleComment={this.toggleEditPopup}\n                  />\n                }>\n                <EditButton\n                  aria-label={translate('issue.comment.edit')}\n                  className=\"js-issue-comment-edit button-small\"\n                  onClick={this.toggleEditPopup}\n                />\n              </Toggler>\n            </div>\n          )}\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'delete'}\n                overlay={<CommentDeletePopup onDelete={this.handleDelete} />}>\n                <DeleteButton\n                  aria-label={translate('issue.comment.delete')}\n                  className=\"js-issue-comment-delete button-small\"\n                  onClick={this.toggleDeletePopup}\n                />\n              </Toggler>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum RuleStatus {\n  Ready = 'READY',\n  Beta = 'BETA',\n  Deprecated = 'DEPRECATED',\n  Removed = 'REMOVED'\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getIssueChangelog } from '../../../api/issues';\nimport { DropdownOverlay } from '../../../components/controls/Dropdown';\nimport { PopupPlacement } from '../../../components/ui/popups';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport DateTimeFormatter from '../../intl/DateTimeFormatter';\nimport Avatar from '../../ui/Avatar';\nimport IssueChangelogDiff from '../components/IssueChangelogDiff';\n\ninterface Props {\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n}\n\ninterface State {\n  changelog: T.IssueChangelog[];\n}\n\nexport default class ChangelogPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { changelog: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadChangelog();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadChangelog() {\n    getIssueChangelog(this.props.issue.key).then(\n      ({ changelog }) => {\n        if (this.mounted) {\n          this.setState({ changelog });\n        }\n      },\n      () => {}\n    );\n  }\n\n  render() {\n    const { issue } = this.props;\n    const { author } = issue;\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <div className=\"menu is-container issue-changelog\">\n          <table className=\"spaced\">\n            <tbody>\n              <tr>\n                <td className=\"thin text-left text-top nowrap\">\n                  <DateTimeFormatter date={issue.creationDate} />\n                </td>\n                <td className=\"text-left text-top\">\n                  {author ? `${translate('created_by')} ${author}` : translate('created')}\n                </td>\n              </tr>\n\n              {this.state.changelog.map((item, idx) => {\n                const userName = item.userName || item.user;\n\n                return (\n                  <tr key={idx}>\n                    <td className=\"thin text-left text-top nowrap\">\n                      <DateTimeFormatter date={item.creationDate} />\n                    </td>\n                    <td className=\"text-left text-top\">\n                      {userName && (\n                        <p>\n                          <Avatar\n                            className=\"little-spacer-right\"\n                            hash={item.avatar}\n                            name={userName}\n                            size={16}\n                          />\n                          {item.isUserActive\n                            ? userName\n                            : translateWithParameters('user.x_deleted', userName)}\n                        </p>\n                      )}\n                      {item.diffs.map(diff => (\n                        <IssueChangelogDiff diff={diff} key={diff.key} />\n                      ))}\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from '../../../components/controls/buttons';\nimport Toggler from '../../../components/controls/Toggler';\nimport DropdownIcon from '../../../components/icons/DropdownIcon';\nimport DateFromNow from '../../intl/DateFromNow';\nimport ChangelogPopup from '../popups/ChangelogPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n  creationDate: string;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueChangelog extends React.PureComponent<Props> {\n  toggleChangelog = (open?: boolean) => {\n    this.props.togglePopup('changelog', open);\n  };\n\n  handleClick = () => {\n    this.toggleChangelog();\n  };\n\n  handleClose = () => {\n    this.toggleChangelog(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<ChangelogPopup issue={this.props.issue} />}>\n          <ButtonLink\n            aria-expanded={this.props.isOpen}\n            className=\"issue-action issue-action-with-options js-issue-show-changelog\"\n            onClick={this.handleClick}>\n            <span className=\"issue-meta-label\">\n              <DateFromNow date={this.props.creationDate} />\n            </span>\n            <DropdownIcon className=\"little-spacer-left\" />\n          </ButtonLink>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from '../../../components/controls/buttons';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { RuleStatus } from '../../../types/rules';\nimport DocumentationTooltip from '../../common/DocumentationTooltip';\nimport { WorkspaceContextShape } from '../../workspace/context';\n\nexport interface IssueMessageProps {\n  engine?: string;\n  engineName?: string;\n  manualVulnerability: boolean;\n  message: string;\n  onOpenRule: WorkspaceContextShape['openRule'];\n  ruleKey: string;\n  ruleStatus?: RuleStatus;\n}\n\nexport default function IssueMessage(props: IssueMessageProps) {\n  const { engine, engineName, manualVulnerability, message, ruleKey, ruleStatus } = props;\n  const ruleEngine = engineName ? engineName : engine;\n\n  return (\n    <div className=\"issue-message break-word\">\n      <span className=\"spacer-right\">{message}</span>\n      <ButtonLink\n        aria-label={translate('issue.why_this_issue.long')}\n        className=\"issue-see-rule spacer-right text-baseline\"\n        onClick={() =>\n          props.onOpenRule({\n            key: ruleKey\n          })\n        }>\n        {translate('issue.why_this_issue')}\n      </ButtonLink>\n\n      {ruleStatus && (ruleStatus === RuleStatus.Deprecated || ruleStatus === RuleStatus.Removed) && (\n        <DocumentationTooltip\n          className=\"spacer-left\"\n          content={translate('rules.status', ruleStatus, 'help')}\n          links={[\n            {\n              href: '/documentation/user-guide/rules/',\n              label: translateWithParameters('see_x', translate('rules'))\n            }\n          ]}>\n          <span className=\"spacer-right badge badge-error\">\n            {translate('rules.status', ruleStatus)}\n          </span>\n        </DocumentationTooltip>\n      )}\n\n      {ruleEngine && (\n        <Tooltip overlay={translateWithParameters('issue.from_external_rule_engine', ruleEngine)}>\n          <div className=\"badge spacer-right text-baseline\">{ruleEngine}</div>\n        </Tooltip>\n      )}\n      {manualVulnerability && (\n        <Tooltip overlay={translate('issue.manual_vulnerability.description')}>\n          <div className=\"badge spacer-right text-baseline\">\n            {translate('issue.manual_vulnerability')}\n          </div>\n        </Tooltip>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from '../../../components/controls/Dropdown';\nimport IssueTypeIcon from '../../../components/icons/IssueTypeIcon';\nimport QualifierIcon from '../../../components/icons/QualifierIcon';\nimport TagsIcon from '../../../components/icons/TagsIcon';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { fileFromPath, limitComponentName } from '../../../helpers/path';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport StatusHelper from '../../shared/StatusHelper';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  issue: T.Issue;\n  onFilter: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesPopup extends React.PureComponent<Props> {\n  handleSelect = (property: string) => {\n    this.props.onFilter(property, this.props.issue);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const items = [\n      'type',\n      'severity',\n      'status',\n      'resolution',\n      'assignee',\n      'rule',\n      ...(issue.tags || []).map(tag => `tag###${tag}`),\n      'project',\n      issue.subProject ? 'module' : undefined,\n      'file'\n    ].filter(item => item) as string[];\n\n    const assignee = issue.assigneeName || issue.assignee;\n\n    return (\n      <DropdownOverlay noPadding={true}>\n        <header className=\"menu-search\">\n          <h6>{translate('issue.filter_similar_issues')}</h6>\n        </header>\n\n        <SelectList\n          className=\"issues-similar-issues-menu\"\n          currentItem={items[0]}\n          items={items}\n          onSelect={this.handleSelect}>\n          <SelectListItem className=\"display-flex-center\" item=\"type\">\n            <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n            {translate('issue.type', issue.type)}\n          </SelectListItem>\n\n          <SelectListItem item=\"severity\">\n            <SeverityHelper className=\"display-flex-center\" severity={issue.severity} />\n          </SelectListItem>\n\n          <SelectListItem item=\"status\">\n            <StatusHelper\n              className=\"display-flex-center\"\n              resolution={undefined}\n              status={issue.status}\n            />\n          </SelectListItem>\n\n          <SelectListItem item=\"resolution\">\n            {issue.resolution != null\n              ? translate('issue.resolution', issue.resolution)\n              : translate('unresolved')}\n          </SelectListItem>\n\n          <SelectListItem item=\"assignee\">\n            {assignee ? (\n              <span>\n                {translate('assigned_to')}\n                <Avatar\n                  className=\"little-spacer-left little-spacer-right\"\n                  hash={issue.assigneeAvatar}\n                  name={assignee}\n                  size={16}\n                />\n                {issue.assigneeActive === false\n                  ? translateWithParameters('user.x_deleted', assignee)\n                  : assignee}\n              </span>\n            ) : (\n              translate('unassigned')\n            )}\n          </SelectListItem>\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"rule\">{limitComponentName(issue.ruleName)}</SelectListItem>\n\n          {issue.tags != null &&\n            issue.tags.map(tag => (\n              <SelectListItem item={`tag###${tag}`} key={`tag###${tag}`}>\n                <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                <span className=\"text-middle\">{tag}</span>\n              </SelectListItem>\n            ))}\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"project\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n            {issue.projectName}\n          </SelectListItem>\n\n          {issue.subProject != null && (\n            <SelectListItem item=\"module\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n              {issue.subProjectName}\n            </SelectListItem>\n          )}\n\n          <SelectListItem item=\"file\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier={issue.componentQualifier} />\n            {fileFromPath(issue.componentLongName)}\n          </SelectListItem>\n        </SelectList>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from '../../../components/controls/buttons';\nimport Toggler from '../../../components/controls/Toggler';\nimport DropdownIcon from '../../../components/icons/DropdownIcon';\nimport FilterIcon from '../../../components/icons/FilterIcon';\nimport { translate } from '../../../helpers/l10n';\nimport SimilarIssuesPopup from '../popups/SimilarIssuesPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: T.Issue;\n  togglePopup: (popup: string, show?: boolean) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesFilter extends React.PureComponent<Props> {\n  handleFilter = (property: string, issue: T.Issue) => {\n    this.togglePopup(false);\n    if (this.props.onFilter) {\n      this.props.onFilter(property, issue);\n    }\n  };\n\n  togglePopup = (open?: boolean) => {\n    this.props.togglePopup('similarIssues', open);\n  };\n\n  handleClose = () => {\n    this.togglePopup(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<SimilarIssuesPopup issue={this.props.issue} onFilter={this.handleFilter} />}>\n          <ButtonLink\n            aria-label={translate('issue.filter_similar_issues')}\n            aria-expanded={this.props.isOpen}\n            className=\"issue-action issue-action-with-options js-issue-filter\"\n            onClick={this.togglePopup}\n            title={translate('issue.filter_similar_issues')}>\n            <FilterIcon className=\"icon-half-transparent\" />\n            <DropdownIcon className=\"icon-half-transparent\" />\n          </ButtonLink>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport LinkIcon from '../../../components/icons/LinkIcon';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { getComponentIssuesUrl } from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\nimport { RuleStatus } from '../../../types/rules';\nimport LocationIndex from '../../common/LocationIndex';\nimport { WorkspaceContext } from '../../workspace/context';\nimport IssueChangelog from './IssueChangelog';\nimport IssueMessage from './IssueMessage';\nimport SimilarIssuesFilter from './SimilarIssuesFilter';\n\nexport interface IssueTitleBarProps {\n  branchLike?: BranchLike;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default function IssueTitleBar(props: IssueTitleBarProps) {\n  const { issue } = props;\n  const hasSimilarIssuesFilter = props.onFilter != null;\n\n  const locationsCount =\n    issue.secondaryLocations.length +\n    issue.flows.reduce((sum, locations) => sum + locations.length, 0);\n\n  const locationsBadge = (\n    <Tooltip\n      overlay={translateWithParameters(\n        'issue.this_issue_involves_x_code_locations',\n        formatMeasure(locationsCount, 'INT')\n      )}>\n      <LocationIndex>{locationsCount}</LocationIndex>\n    </Tooltip>\n  );\n\n  const displayLocations = props.displayLocationsCount && locationsCount > 0;\n\n  const issueUrl = getComponentIssuesUrl(issue.project, {\n    ...getBranchLikeQuery(props.branchLike),\n    issues: issue.key,\n    open: issue.key,\n    types: issue.type === 'SECURITY_HOTSPOT' ? issue.type : undefined\n  });\n\n  return (\n    <div className=\"issue-row\">\n      <WorkspaceContext.Consumer>\n        {({ externalRulesRepoNames, openRule }) => (\n          <IssueMessage\n            engine={issue.externalRuleEngine}\n            engineName={\n              issue.externalRuleEngine &&\n              externalRulesRepoNames &&\n              externalRulesRepoNames[issue.externalRuleEngine]\n            }\n            manualVulnerability={issue.fromHotspot && issue.type === 'VULNERABILITY'}\n            message={issue.message}\n            onOpenRule={openRule}\n            ruleKey={issue.rule}\n            ruleStatus={issue.ruleStatus as RuleStatus | undefined}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n\n      <div className=\"issue-row-meta\">\n        <div className=\"issue-meta-list\">\n          <div className=\"issue-meta\">\n            <IssueChangelog\n              creationDate={issue.creationDate}\n              isOpen={props.currentPopup === 'changelog'}\n              issue={issue}\n              togglePopup={props.togglePopup}\n            />\n          </div>\n          {issue.textRange != null && (\n            <div className=\"issue-meta\">\n              <span className=\"issue-meta-label\" title={translate('line_number')}>\n                L{issue.textRange.endLine}\n              </span>\n            </div>\n          )}\n          {displayLocations && (\n            <div className=\"issue-meta\">\n              {props.displayLocationsLink ? (\n                <Link target=\"_blank\" to={issueUrl}>\n                  {locationsBadge}\n                </Link>\n              ) : (\n                locationsBadge\n              )}\n            </div>\n          )}\n          <div className=\"issue-meta\">\n            <Link\n              className=\"js-issue-permalink link-no-underline\"\n              target=\"_blank\"\n              title={translate('permalink')}\n              to={issueUrl}>\n              <LinkIcon />\n            </Link>\n          </div>\n          {hasSimilarIssuesFilter && (\n            <div className=\"issue-meta\">\n              <SimilarIssuesFilter\n                isOpen={props.currentPopup === 'similarIssues'}\n                issue={issue}\n                onFilter={props.onFilter}\n                togglePopup={props.togglePopup}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { deleteIssueComment, editIssueComment } from '../../api/issues';\nimport Checkbox from '../../components/controls/Checkbox';\nimport { BranchLike } from '../../types/branch-like';\nimport { updateIssue } from './actions';\nimport IssueActionsBar from './components/IssueActionsBar';\nimport IssueCommentLine from './components/IssueCommentLine';\nimport IssueTitleBar from './components/IssueTitleBar';\n\ninterface Props {\n  branchLike?: BranchLike;\n  checked?: boolean;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  selected: boolean;\n  togglePopup: (popup: string, show: boolean | void) => void;\n}\n\nexport default class IssueView extends React.PureComponent<Props> {\n  handleCheck = () => {\n    if (this.props.onCheck) {\n      this.props.onCheck(this.props.issue.key);\n    }\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (!isClickable(event.target as HTMLElement) && this.props.onClick) {\n      event.preventDefault();\n      this.props.onClick(this.props.issue.key);\n    }\n  };\n\n  editComment = (comment: string, text: string) => {\n    updateIssue(this.props.onChange, editIssueComment({ comment, text }));\n  };\n\n  deleteComment = (comment: string) => {\n    updateIssue(this.props.onChange, deleteIssueComment({ comment }));\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const hasCheckbox = this.props.onCheck != null;\n\n    const issueClass = classNames('issue', {\n      hotspot: issue.type === 'SECURITY_HOTSPOT',\n      'issue-with-checkbox': hasCheckbox,\n      selected: this.props.selected\n    });\n\n    return (\n      <div className={issueClass} data-issue={issue.key} onClick={this.handleClick} role=\"group\">\n        <IssueTitleBar\n          branchLike={this.props.branchLike}\n          currentPopup={this.props.currentPopup}\n          displayLocationsCount={this.props.displayLocationsCount}\n          displayLocationsLink={this.props.displayLocationsLink}\n          issue={issue}\n          onFilter={this.props.onFilter}\n          togglePopup={this.props.togglePopup}\n        />\n        <IssueActionsBar\n          currentPopup={this.props.currentPopup}\n          issue={issue}\n          onAssign={this.props.onAssign}\n          onChange={this.props.onChange}\n          togglePopup={this.props.togglePopup}\n        />\n        {issue.comments && issue.comments.length > 0 && (\n          <div className=\"issue-comments\">\n            {issue.comments.map(comment => (\n              <IssueCommentLine\n                comment={comment}\n                key={comment.key}\n                onDelete={this.deleteComment}\n                onEdit={this.editComment}\n              />\n            ))}\n          </div>\n        )}\n        {hasCheckbox && (\n          <>\n            <Checkbox\n              checked={this.props.checked || false}\n              className=\"issue-checkbox-container\"\n              onCheck={this.handleCheck}\n            />\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nfunction isClickable(node: HTMLElement | undefined | null): boolean {\n  if (!node) {\n    return false;\n  }\n  const clickableTags = ['A', 'BUTTON', 'INPUT', 'TEXTAREA'];\n  const tagName = (node.tagName || '').toUpperCase();\n  return clickableTags.includes(tagName) || isClickable(node.parentElement);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport * as React from 'react';\nimport { setIssueAssignee } from '../../api/issues';\nimport { BranchLike } from '../../types/branch-like';\nimport { updateIssue } from './actions';\nimport './Issue.css';\nimport IssueView from './IssueView';\n\ninterface Props {\n  branchLike?: BranchLike;\n  checked?: boolean;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  onPopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  openPopup?: string;\n  selected: boolean;\n}\n\nexport default class Issue extends React.PureComponent<Props> {\n  static defaultProps = {\n    selected: false\n  };\n\n  componentDidMount() {\n    if (this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUpdate(nextProps: Props) {\n    if (!nextProps.selected && this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.selected && this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  bindShortcuts() {\n    key('f', 'issues', () => {\n      this.togglePopup('transition');\n      return false;\n    });\n    key('a', 'issues', () => {\n      this.togglePopup('assign');\n      return false;\n    });\n    key('m', 'issues', () => {\n      if (this.props.issue.actions.includes('assign')) {\n        this.handleAssignement('_me');\n      }\n      return false;\n    });\n    key('i', 'issues', () => {\n      this.togglePopup('set-severity');\n      return false;\n    });\n    key('c', 'issues', () => {\n      this.togglePopup('comment');\n      return false;\n    });\n    key('t', 'issues', () => {\n      this.togglePopup('edit-tags');\n      return false;\n    });\n    key('space', 'issues', () => {\n      if (this.props.onCheck) {\n        this.props.onCheck(this.props.issue.key);\n        return false;\n      }\n      return undefined;\n    });\n  }\n\n  unbindShortcuts() {\n    key.unbind('f', 'issues');\n    key.unbind('a', 'issues');\n    key.unbind('m', 'issues');\n    key.unbind('i', 'issues');\n    key.unbind('c', 'issues');\n    key.unbind('space', 'issues');\n    key.unbind('t', 'issues');\n  }\n\n  togglePopup = (popupName: string, open?: boolean) => {\n    this.props.onPopupToggle(this.props.issue.key, popupName, open);\n  };\n\n  handleAssignement = (login: string) => {\n    const { issue } = this.props;\n    if (issue.assignee !== login) {\n      updateIssue(this.props.onChange, setIssueAssignee({ issue: issue.key, assignee: login }));\n    }\n    this.togglePopup('assign', false);\n  };\n\n  render() {\n    return (\n      <IssueView\n        branchLike={this.props.branchLike}\n        checked={this.props.checked}\n        currentPopup={this.props.openPopup}\n        displayLocationsCount={this.props.displayLocationsCount}\n        displayLocationsLink={this.props.displayLocationsLink}\n        issue={this.props.issue}\n        onAssign={this.handleAssignement}\n        onChange={this.props.onChange}\n        onCheck={this.props.onCheck}\n        onClick={this.props.onClick}\n        onFilter={this.props.onFilter}\n        selected={this.props.selected}\n        togglePopup={this.togglePopup}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { formatMeasure } from '../../../helpers/measures';\n\ninterface Props {\n  diff: T.IssueChangelogDiff;\n}\n\nexport default function IssueChangelogDiff({ diff }: Props) {\n  if (diff.key === 'file') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.file_move',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (['from_long_branch', 'from_branch'].includes(diff.key)) {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'from_short_branch') {\n    // Applies to both legacy short lived branch and pull request\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_non_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'line') {\n    return <p>{translateWithParameters('issue.changelog.line_removed_X', diff.oldValue || '')}</p>;\n  }\n\n  let message;\n  if (diff.newValue != null) {\n    let { newValue } = diff;\n    if (diff.key === 'effort') {\n      newValue = formatMeasure(diff.newValue, 'WORK_DUR');\n    }\n    message = translateWithParameters(\n      'issue.changelog.changed_to',\n      translate('issue.changelog.field', diff.key),\n      newValue\n    );\n  } else {\n    message = translateWithParameters(\n      'issue.changelog.removed',\n      translate('issue.changelog.field', diff.key)\n    );\n  }\n\n  if (diff.oldValue != null) {\n    let { oldValue } = diff;\n    if (diff.key === 'effort') {\n      oldValue = formatMeasure(diff.oldValue, 'WORK_DUR');\n    }\n    message += ` (${translateWithParameters('issue.changelog.was', oldValue)})`;\n  }\n  return <p>{message}</p>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationMessage.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  selected: boolean;\n}\n\nexport default function LocationMessage(props: Props) {\n  return (\n    <div className={classNames('location-message', { selected: props.selected })}>\n      {props.children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ButtonIcon } from '../../components/controls/buttons';\nimport { ClipboardIconButton } from '../../components/controls/clipboard';\nimport ExpandSnippetIcon from '../../components/icons/ExpandSnippetIcon';\nimport QualifierIcon from '../../components/icons/QualifierIcon';\nimport DeferredSpinner from '../../components/ui/DeferredSpinner';\nimport { getBranchLikeQuery } from '../../helpers/branch-like';\nimport { translate } from '../../helpers/l10n';\nimport { collapsedDirFromPath, fileFromPath } from '../../helpers/path';\nimport { getBranchLikeUrl, getComponentIssuesUrl, getPathUrlAsString } from '../../helpers/urls';\nimport { BranchLike } from '../../types/branch-like';\nimport { ComponentQualifier } from '../../types/component';\nimport './SourceViewerHeaderSlim.css';\n\nexport interface Props {\n  branchLike: BranchLike | undefined;\n  expandable?: boolean;\n  displayProjectName?: boolean;\n  linkToProject?: boolean;\n  loading?: boolean;\n  onExpand?: () => void;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\nexport default function SourceViewerHeaderSlim(props: Props) {\n  const {\n    branchLike,\n    expandable,\n    displayProjectName = true,\n    linkToProject = true,\n    loading,\n    onExpand,\n    sourceViewerFile\n  } = props;\n  const { measures, path, project, projectName, q, subProject, subProjectName } = sourceViewerFile;\n\n  const projectNameLabel = (\n    <>\n      <QualifierIcon qualifier={ComponentQualifier.Project} /> <span>{projectName}</span>\n    </>\n  );\n\n  return (\n    <div className=\"source-viewer-header-slim display-flex-row display-flex-space-between\">\n      <div className=\"display-flex-center flex-1\">\n        {displayProjectName && (\n          <div className=\"spacer-right\">\n            {linkToProject ? (\n              <a\n                className=\"link-with-icon\"\n                href={getPathUrlAsString(getBranchLikeUrl(project, branchLike))}>\n                {projectNameLabel}\n              </a>\n            ) : (\n              projectNameLabel\n            )}\n          </div>\n        )}\n\n        {subProject !== undefined && (\n          <>\n            <QualifierIcon qualifier={ComponentQualifier.SubProject} />{' '}\n            <span className=\"spacer-right\">{subProjectName}</span>\n          </>\n        )}\n\n        <div className=\"spacer-right\">\n          <QualifierIcon qualifier={q} /> <span>{collapsedDirFromPath(path)}</span>\n          <span className=\"component-name-file\">{fileFromPath(path)}</span>\n        </div>\n\n        <div className=\"spacer-right\">\n          <ClipboardIconButton className=\"button-link link-no-underline\" copyValue={path} />\n        </div>\n      </div>\n\n      {measures.issues !== undefined && (\n        <div\n          className={classNames('flex-0 big-spacer-left', {\n            'little-spacer-right': !expandable || loading\n          })}>\n          <Link\n            to={getComponentIssuesUrl(project, {\n              ...getBranchLikeQuery(branchLike),\n              files: path,\n              resolved: 'false'\n            })}>\n            {translate('source_viewer.view_all_issues')}\n          </Link>\n        </div>\n      )}\n\n      {expandable && (\n        <DeferredSpinner className=\"little-spacer-right\" loading={loading}>\n          <div className=\"flex-0 big-spacer-left\">\n            <ButtonIcon className=\"js-actions\" onClick={onExpand}>\n              <ExpandSnippetIcon />\n            </ButtonIcon>\n          </div>\n        </DeferredSpinner>\n      )}\n    </div>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./SourceViewerHeaderSlim.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".source-viewer-header-slim{padding:4px 10px;border-bottom:1px solid #cdcdcd;background-color:#f3f3f3;align-items:center;min-height:25px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Line.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".source-line:hover .source-line-coverage,.source-line:hover .source-line-duplications,.source-line:hover .source-line-duplications-extra,.source-line:hover .source-line-issues,.source-line:hover .source-line-number,.source-line:hover .source-line-scm{border-color:#e9e9e9;background-color:#e9e9e9}.source-line:hover .source-line-code{background-color:#f5f5f5}.source-line [role=button]{cursor:pointer}.source-line-highlighted .source-line-coverage,.source-line-highlighted .source-line-duplications,.source-line-highlighted .source-line-duplications-extra,.source-line-highlighted .source-line-issues,.source-line-highlighted .source-line-number,.source-line-highlighted .source-line-scm,.source-line-highlighted:hover .source-line-coverage,.source-line-highlighted:hover .source-line-duplications,.source-line-highlighted:hover .source-line-duplications-extra,.source-line-highlighted:hover .source-line-issues,.source-line-highlighted:hover .source-line-number,.source-line-highlighted:hover .source-line-scm{border-color:#c4dfec!important;background-color:#c4dfec}.source-line-highlighted .source-line-code,.source-line-highlighted:hover .source-line-code{background-color:#d9edf7}.source-line-filtered .source-line-code{background-color:#fbf3d5!important}.source-line-filtered.source-line-highlighted .source-line-code,.source-line-filtered.source-line-highlighted:hover .source-line-code{background-color:#cdd9c4!important}.source-line-filtered.source-line-filtered-dark .source-line-code{background-color:#f9ebb7!important}.source-line-filtered.source-line-filtered-dark:hover .source-line-code,.source-line-filtered:hover .source-line-code{background-color:#f1e8cb!important}.source-line-last .source-line-code{padding-bottom:160px}.source-line-number,.source-line-scm,.source-viewer pre{line-height:18px;font-family:Consolas,Ubuntu Mono,Liberation Mono,Menlo,Courier,monospace;font-size:12px}.source-line-code{position:relative;padding:0 10px}.source-line-code pre{float:left;word-wrap:break-word;white-space:pre-wrap}.source-line-code .issue-list{margin-left:-10px;margin-right:-10px}.source-line-code-inner{min-height:18px}.source-line-code-inner:after,.source-line-code-inner:before{display:table;content:\\\"\\\";line-height:0}.source-line-code-inner:after{clear:both}.source-line-code-inner pre{-moz-tab-size:4;tab-size:4}.source-line-code-issue{display:inline-block;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAGCAYAAAAPDoR2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1M0M2Rjk4M0M3QUYxMUUzODkzRUREMUM5OTNDMjY4QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1M0M2Rjk4NEM3QUYxMUUzODkzRUREMUM5OTNDMjY4QSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjUzQzZGOTgxQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjUzQzZGOTgyQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+bcqJtQAAAEhJREFUeNpi+G+swwDGDAwgbAWlwZiJAQFCgfgwEIfDRaC67ID4NRDnQ2kQnwFZwgFqnANMAQOUYY9sF0wBiCGH5CBkrAgQYACuWi4sSGW8yAAAAABJRU5ErkJggg==);background-repeat:repeat-x;background-size:4px;background-position:bottom}.source-meta{position:relative;vertical-align:top;width:1px;background-clip:padding-box;-webkit-user-select:none;-ms-user-select:none;user-select:none}.source-meta:focus{outline:none}.source-line-number{min-width:18px;padding:0 10px;background-color:#f3f3f3;color:#666;text-align:right}.source-line-issues{position:relative;padding:0 2px;background-color:#f3f3f3;white-space:nowrap}.source-line-with-issues svg{padding-right:2px;vertical-align:middle}.source-line-issues-counter{position:absolute;left:17px;line-height:8px;font-size:8px;z-index:900}.source-line-coverage,.source-line-duplications,.source-line-duplications-extra{background-color:#f3f3f3}.source-line-duplications-extra{display:none}.source-line-scm{padding:0 5px;background-color:#f3f3f3}.source-line-scm .dropdown{display:block}.source-line-scm [role=button]{height:18px}.source-line-scm-inner{max-width:40px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.source-line-bar{width:5px;height:18px}.source-line-bar:focus{outline:none}.source-line-covered{background-color:#b4dd78!important}.source-line-partially-covered,.source-line-uncovered{background-color:#a4030f!important}.source-line-partially-covered{background-image:repeating-linear-gradient(45deg,hsla(0,0%,100%,.5) 4px,transparent 0,transparent 8px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 12px,transparent 0,transparent 16px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 20px)!important}.source-line-duplicated{background-color:#797979!important}.source-viewer-bubble-popup a{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:13px;text-align:left;-webkit-user-select:text;-ms-user-select:text;user-select:text;border-bottom:none;transition:none;color:unset}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".location-index{position:relative;display:inline-block;vertical-align:top;line-height:16px;padding-left:6px;padding-right:6px;border-radius:2px;background-color:#d18582;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;transition:background-color .3s ease;-webkit-user-select:none;-ms-user-select:none;user-select:none}.location-index.selected{background-color:#a4030f}.location-index.muted{background-color:#cdcdcd}.location-index.is-leading:first-child{margin-left:0}.location-index.is-leading:not(:first-child){margin-left:-22px}.location-index[tabindex]{cursor:pointer}.location-index[tabindex]:hover,a:hover>.location-index{background-color:#a4030f}.location-index[tabindex]:focus{outline:none}.source-line-code-inner .location-index{line-height:16px;margin:1px 4px}.source-line-code-inner .location-index+.location-index{margin-left:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".location-message{display:inline-block;vertical-align:top;line-height:16px;padding:0 6px;border-radius:2px;background-color:#9e9e9e;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;text-overflow:ellipsis;overflow:hidden;transition:background-color .3s ease}.location-message.selected{background-color:#475760}.location-index+.location-message{margin-left:4px}.location-index>.location-message{display:none;position:absolute;bottom:calc(100% + 4px);left:0}.location-index:hover>.location-message{display:block}.location-index>.location-message:after{position:absolute;bottom:-5px;left:4px;width:0;height:0;border-top:5px solid #475760;border-left:5px solid transparent;border-right:5px solid transparent;content:\\\"\\\"}.source-line-code .location-message{padding-top:2px;padding-bottom:2px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".issue{position:relative;padding-top:8px;padding-bottom:8px;background-color:#f2dede;transition:all .3s ease,border 0s ease}.issue.hotspot{background-color:#eeeff4}.issue.selected{box-shadow:none;outline:none;border:2px solid #4b9fd5!important}.issue+.issue,.issue-container+.issue-container{margin-top:5px}.issue.selected+.issue{border-top-color:transparent}.issue-row{display:flex;margin-bottom:5px}.issue-row-meta{flex-grow:0;padding-right:5px;white-space:nowrap}.issue-message{flex-grow:1;padding-left:8px;padding-right:8px;line-height:18px;font-size:13px;font-weight:600;text-overflow:ellipsis}.issue-actions{justify-content:space-between;flex-wrap:wrap;padding-left:8px}.issue-actions,.issue-meta-list{display:flex;align-items:center}.issue-meta{line-height:16px;font-size:12px}.issue-meta+.issue-meta{margin-left:8px}.issue-meta-label{display:inline-block;vertical-align:top;max-width:180px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.issue-see-rule{border-bottom:none;font-size:12px}.issue-changelog{width:450px;max-height:320px;overflow:auto;white-space:normal}.issue-comments{margin-top:5px;padding-left:8px;font-size:12px}.issue-comment{display:flex}.issue-comment+.issue-comment{margin-top:4px}.issue-comment-author{max-width:130px;font-weight:600;overflow:hidden;text-overflow:ellipsis}.issue-comment-age,.issue-comment-author{flex-shrink:0;line-height:18px;color:#666;white-space:nowrap}.issue-comment-text{flex:1;min-width:0;margin-left:5px;margin-right:5px;line-height:18px;line-height:1.5;overflow:hidden;outline:none}.issue-comment-text.markdown pre{float:none;height:auto;margin:0;padding:8px;background-color:#e6e6e6;border:none;border-radius:3px}.issue-comment-text.markdown br~pre{margin-top:8px}.issue-comment-actions{flex-shrink:0;padding-left:5px;line-height:18px;white-space:nowrap}.issue-comment-bubble-popup{width:440px;font-size:12px}.issue-comment-form-text textarea{width:100%;max-width:100%}.issue-comment-form-footer{margin-top:5px;line-height:22px}.issue-comment-form-footer:after,.issue-comment-form-footer:before{display:table;content:\\\"\\\";line-height:0}.issue-comment-form-footer:after{clear:both}.issue-comment-form-actions{float:right}.issue-comment-form-tips{float:left}.issue-with-checkbox{padding-left:24px}.issue-with-checkbox .issue-checkbox-container{display:flex;justify-content:center;align-items:center}.issue-checkbox-container{display:none;position:absolute;width:28px;top:0;bottom:0;left:0;border:none}.issue-checkbox-container:hover{background-color:rgba(0,0,0,.05)}.issue:not(.selected) .location-index{background-color:#999}.issue .menu:not(.issues-similar-issues-menu):not(.issue-changelog){max-height:120px;overflow:auto}.issue .badge-error{background-color:#eec8c8}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { intersection } from 'lodash';\n\nexport function optimizeHighlightedSymbols(\n  symbolsForLine: string[] = [],\n  highlightedSymbols: string[] = []\n): string[] | undefined {\n  const symbols = intersection(symbolsForLine, highlightedSymbols);\n\n  return symbols.length ? symbols : undefined;\n}\n\nexport function optimizeLocationMessage(\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined,\n  optimizedSecondaryIssueLocations: T.LinearIssueLocation[]\n) {\n  return highlightedLocationMessage != null &&\n    optimizedSecondaryIssueLocations.some(\n      location => location.index === highlightedLocationMessage.index\n    )\n    ? highlightedLocationMessage\n    : undefined;\n}\n\nexport function optimizeSelectedIssue(selectedIssue: string | undefined, issuesForLine: T.Issue[]) {\n  return selectedIssue !== undefined && issuesForLine.find(issue => issue.key === selectedIssue)\n    ? selectedIssue\n    : undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function ListIcon({ fill = 'currentColor', ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M15.045 11.526v1.007q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 8.506v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 5.487v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 2.468v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport Issue from '../../issue/Issue';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  onIssueChange: (issue: T.Issue) => void;\n  onIssueClick: (issueKey: string) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  selectedIssue: string | undefined;\n}\n\nexport default function LineIssuesList(props: Props) {\n  const { issuePopup } = props;\n\n  return (\n    <div className=\"issue-list\">\n      {props.issues.map(issue => (\n        <Issue\n          branchLike={props.branchLike}\n          displayLocationsCount={props.displayIssueLocationsCount}\n          displayLocationsLink={props.displayIssueLocationsLink}\n          issue={issue}\n          key={issue.key}\n          onChange={props.onIssueChange}\n          onClick={props.onIssueClick}\n          onPopupToggle={props.onIssuePopupToggle}\n          openPopup={issuePopup && issuePopup.issue === issue.key ? issuePopup.name : undefined}\n          selected={props.selectedIssue === issue.key}\n        />\n      ))}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport LocationIndex from '../../common/LocationIndex';\nimport LocationMessage from '../../common/LocationMessage';\nimport {\n  highlightIssueLocations,\n  highlightSymbol,\n  splitByTokens,\n  Token\n} from '../helpers/highlight';\nimport LineIssuesList from './LineIssuesList';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: T.LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  line: T.SourceLine;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onLocationSelect: ((index: number) => void) | undefined;\n  onSymbolClick: (symbols: Array<string>) => void;\n  padding?: number;\n  scroll?: (element: HTMLElement) => void;\n  secondaryIssueLocations: T.LinearIssueLocation[];\n  selectedIssue: string | undefined;\n  showIssues?: boolean;\n}\n\ninterface State {\n  tokens: Token[];\n}\n\nexport default class LineCode extends React.PureComponent<Props, State> {\n  activeMarkerNode?: HTMLElement | null;\n  codeNode?: HTMLElement | null;\n  symbols?: NodeListOf<HTMLElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      tokens: splitByTokens(props.line.code || '')\n    };\n  }\n\n  componentDidMount() {\n    this.attachEvents();\n    if (this.props.highlightedLocationMessage && this.activeMarkerNode && this.props.scroll) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.line.code !== this.props.line.code) {\n      this.setState({\n        tokens: splitByTokens(nextProps.line.code || '')\n      });\n    }\n  }\n\n  componentWillUpdate() {\n    this.detachEvents();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    this.attachEvents();\n    if (\n      this.props.highlightedLocationMessage &&\n      (!prevProps.highlightedLocationMessage ||\n        prevProps.highlightedLocationMessage.index !==\n          this.props.highlightedLocationMessage.index) &&\n      this.activeMarkerNode &&\n      this.props.scroll\n    ) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachEvents();\n  }\n\n  attachEvents() {\n    if (this.codeNode) {\n      this.symbols = this.codeNode.querySelectorAll('.sym');\n      if (this.symbols) {\n        for (let i = 0; i < this.symbols.length; i++) {\n          const symbol = this.symbols[i];\n          symbol.addEventListener('click', this.handleSymbolClick);\n        }\n      }\n    }\n  }\n\n  detachEvents() {\n    if (this.symbols) {\n      for (let i = 0; i < this.symbols.length; i++) {\n        const symbol = this.symbols[i];\n        symbol.addEventListener('click', this.handleSymbolClick);\n      }\n    }\n  }\n\n  handleSymbolClick = (event: MouseEvent) => {\n    event.preventDefault();\n    const keys = (event.currentTarget as HTMLElement).className.match(/sym-\\d+/g);\n    if (keys && keys.length > 0) {\n      this.props.onSymbolClick(keys);\n    }\n  };\n\n  renderMarker(index: number, message: string | undefined, selected: boolean, leading: boolean) {\n    const { onLocationSelect } = this.props;\n    const onClick = onLocationSelect ? () => onLocationSelect(index) : undefined;\n    const ref = selected ? (node: HTMLElement | null) => (this.activeMarkerNode = node) : undefined;\n    return (\n      <LocationIndex\n        key={`marker-${index}`}\n        leading={leading}\n        onClick={onClick}\n        selected={selected}>\n        <span ref={ref}>{index + 1}</span>\n        {message && <LocationMessage selected={true}>{message}</LocationMessage>}\n      </LocationIndex>\n    );\n  }\n\n  render() {\n    const {\n      highlightedLocationMessage,\n      highlightedSymbols,\n      issues,\n      issueLocations,\n      line,\n      onIssueSelect,\n      padding,\n      secondaryIssueLocations,\n      selectedIssue,\n      showIssues\n    } = this.props;\n\n    let tokens = [...this.state.tokens];\n\n    if (highlightedSymbols) {\n      highlightedSymbols.forEach(symbol => {\n        tokens = highlightSymbol(tokens, symbol);\n      });\n    }\n\n    if (issueLocations.length > 0) {\n      tokens = highlightIssueLocations(tokens, issueLocations);\n    }\n\n    if (secondaryIssueLocations) {\n      tokens = highlightIssueLocations(tokens, secondaryIssueLocations, 'issue-location');\n\n      if (highlightedLocationMessage) {\n        const location = secondaryIssueLocations.find(\n          location => location.index === highlightedLocationMessage.index\n        );\n        if (location) {\n          tokens = highlightIssueLocations(tokens, [location], 'selected');\n        }\n      }\n    }\n\n    const className = classNames('source-line-code', 'code', {\n      'has-issues': issues.length > 0\n    });\n\n    const renderedTokens: React.ReactNode[] = [];\n\n    // track if the first marker is displayed before the source code\n    // set `false` for the first token in a row\n    let leadingMarker = false;\n\n    tokens.forEach((token, index) => {\n      if (this.props.displayLocationMarkers && token.markers.length > 0) {\n        token.markers.forEach(marker => {\n          const selected =\n            highlightedLocationMessage !== undefined && highlightedLocationMessage.index === marker;\n          const loc = secondaryIssueLocations.find(loc => loc.index === marker);\n          const message = loc && loc.text;\n          renderedTokens.push(this.renderMarker(marker, message, selected, leadingMarker));\n        });\n      }\n      renderedTokens.push(\n        <span className={token.className} key={index}>\n          {token.text}\n        </span>\n      );\n\n      // keep leadingMarker truthy if previous token has only whitespaces\n      leadingMarker = (index === 0 ? true : leadingMarker) && !token.text.trim().length;\n    });\n\n    const style = padding ? { paddingBottom: `${padding}px` } : undefined;\n    const filteredSelectedIssues = issues.filter(i => i.key === selectedIssue);\n\n    return (\n      <td className={className} data-line-number={line.line} style={style}>\n        <div className=\"source-line-code-inner\">\n          <pre ref={node => (this.codeNode = node)}>{renderedTokens}</pre>\n        </div>\n        {showIssues && issues.length > 0 && (\n          <LineIssuesList\n            branchLike={this.props.branchLike}\n            displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n            displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n            issuePopup={this.props.issuePopup}\n            issues={issues}\n            onIssueChange={this.props.onIssueChange}\n            onIssueClick={onIssueSelect}\n            onIssuePopupToggle={this.props.onIssuePopupToggle}\n            selectedIssue={selectedIssue}\n          />\n        )}\n        {selectedIssue && !showIssues && (\n          <LineIssuesList\n            branchLike={this.props.branchLike}\n            issuePopup={this.props.issuePopup}\n            issues={filteredSelectedIssues}\n            onIssueChange={this.props.onIssueChange}\n            onIssueClick={onIssueSelect}\n            onIssuePopupToggle={this.props.onIssuePopupToggle}\n            selectedIssue={selectedIssue}\n          />\n        )}\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\nexport interface LineCoverageProps {\n  line: T.SourceLine;\n  scroll?: (element: HTMLElement) => void;\n  scrollToUncoveredLine?: boolean;\n}\n\nexport function LineCoverage({ line, scroll, scrollToUncoveredLine }: LineCoverageProps) {\n  const coverageMarker = React.useRef<HTMLTableDataCellElement>(null);\n  React.useEffect(() => {\n    if (scrollToUncoveredLine && scroll && coverageMarker.current) {\n      scroll(coverageMarker.current);\n    }\n  }, [scrollToUncoveredLine, scroll, coverageMarker]);\n\n  const className =\n    'source-meta source-line-coverage' +\n    (line.coverageStatus != null ? ` source-line-${line.coverageStatus}` : '');\n  const status = getStatusTooltip(line);\n\n  return (\n    <td className={className} data-line-number={line.line} ref={coverageMarker}>\n      <Tooltip overlay={status} placement=\"bottom\">\n        <div aria-label={status} className=\"source-line-bar\" />\n      </Tooltip>\n    </td>\n  );\n}\n\nfunction getStatusTooltip(line: T.SourceLine) {\n  if (line.coverageStatus === 'uncovered') {\n    if (line.conditions) {\n      return translateWithParameters('source_viewer.tooltip.uncovered.conditions', line.conditions);\n    } else {\n      return translate('source_viewer.tooltip.uncovered');\n    }\n  } else if (line.coverageStatus === 'covered') {\n    if (line.conditions) {\n      return translateWithParameters('source_viewer.tooltip.covered.conditions', line.conditions);\n    } else {\n      return translate('source_viewer.tooltip.covered');\n    }\n  } else if (line.coverageStatus === 'partially-covered') {\n    if (line.conditions) {\n      return translateWithParameters(\n        'source_viewer.tooltip.partially-covered.conditions',\n        line.coveredConditions || 0,\n        line.conditions\n      );\n    } else {\n      return translate('source_viewer.tooltip.partially-covered');\n    }\n  }\n  return undefined;\n}\n\nexport default React.memo(LineCoverage);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { DropdownOverlay } from '../../../components/controls/Dropdown';\nimport Toggler from '../../../components/controls/Toggler';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { PopupPlacement } from '../../../components/ui/popups';\nimport { translate } from '../../../helpers/l10n';\n\nexport interface LineDuplicationBlockProps {\n  blocksLoaded: boolean;\n  duplicated: boolean;\n  index: number;\n  line: T.SourceLine;\n  onClick?: (line: T.SourceLine) => void;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n}\n\nexport function LineDuplicationBlock(props: LineDuplicationBlockProps) {\n  const { blocksLoaded, duplicated, index, line } = props;\n  const [dropdownOpen, setDropdownOpen] = React.useState(false);\n\n  const className = classNames('source-meta', 'source-line-duplications', {\n    'source-line-duplicated': duplicated\n  });\n\n  return duplicated ? (\n    <td className={className} data-index={index} data-line-number={line.line}>\n      <Tooltip\n        overlay={dropdownOpen ? undefined : translate('source_viewer.tooltip.duplicated_block')}\n        placement=\"right\">\n        <div>\n          <Toggler\n            onRequestClose={() => setDropdownOpen(false)}\n            open={dropdownOpen}\n            overlay={\n              <DropdownOverlay placement={PopupPlacement.RightTop}>\n                {props.renderDuplicationPopup(index, line.line)}\n              </DropdownOverlay>\n            }>\n            <div\n              aria-label={translate('source_viewer.tooltip.duplicated_block')}\n              className=\"source-line-bar\"\n              onClick={() => {\n                setDropdownOpen(true);\n                if (!blocksLoaded && line.duplicated && props.onClick) {\n                  props.onClick(line);\n                }\n              }}\n              role=\"button\"\n              tabIndex={0}\n            />\n          </Toggler>\n        </div>\n      </Tooltip>\n    </td>\n  ) : (\n    <td className={className} data-index={index} data-line-number={line.line}>\n      <div className=\"source-line-bar\" />\n    </td>\n  );\n}\n\nexport default React.memo(LineDuplicationBlock);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { uniq } from 'lodash';\nimport * as React from 'react';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport IssueIcon from '../../../components/icons/IssueIcon';\nimport { sortByType } from '../../../helpers/issues';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\nexport interface LineIssuesIndicatorProps {\n  issues: T.Issue[];\n  issuesOpen?: boolean;\n  line: T.SourceLine;\n  onClick: () => void;\n}\n\nexport function LineIssuesIndicator(props: LineIssuesIndicatorProps) {\n  const { issues, issuesOpen, line } = props;\n  const hasIssues = issues.length > 0;\n  const className = classNames('source-meta', 'source-line-issues', {\n    'source-line-with-issues': hasIssues\n  });\n\n  if (!hasIssues) {\n    return <td className={className} data-line-number={line.line} />;\n  }\n\n  const mostImportantIssue = sortByType(issues)[0];\n  const issueTypes = uniq(issues.map(i => i.type));\n\n  let tooltipContent;\n  if (issueTypes.length > 1) {\n    tooltipContent = translate('source_viewer.issues_on_line.multiple_issues');\n  } else if (issues.length === 1) {\n    tooltipContent = translateWithParameters(\n      'source_viewer.issues_on_line.issue_of_type_X',\n      translate('issue.type', mostImportantIssue.type)\n    );\n  } else {\n    tooltipContent = translateWithParameters(\n      'source_viewer.issues_on_line.X_issues_of_type_Y',\n      issues.length,\n      translate('issue.type', mostImportantIssue.type, 'plural')\n    );\n  }\n\n  return (\n    <td className={className} data-line-number={line.line}>\n      <span\n        aria-label={translate('source_viewer.issues_on_line', issuesOpen ? 'hide' : 'show')}\n        onClick={(e: React.MouseEvent<HTMLElement>) => {\n          e.preventDefault();\n          e.currentTarget.blur();\n          props.onClick();\n        }}\n        role=\"button\"\n        tabIndex={0}>\n        <Tooltip overlay={tooltipContent}>\n          <IssueIcon type={mostImportantIssue.type} />\n        </Tooltip>\n        {issues.length > 1 && <span className=\"source-line-issues-counter\">{issues.length}</span>}\n      </span>\n    </td>\n  );\n}\n\nexport default React.memo(LineIssuesIndicator);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from '../../../components/controls/Dropdown';\nimport { PopupPlacement } from '../../../components/ui/popups';\nimport { translate } from '../../../helpers/l10n';\nimport { getCodeUrl, getPathUrlAsString } from '../../../helpers/urls';\nimport { ActionsDropdownItem } from '../../controls/ActionsDropdown';\nimport { SourceViewerContext } from '../SourceViewerContext';\n\nexport interface LineOptionsPopupProps {\n  firstLineNumber: number;\n  line: T.SourceLine;\n}\n\nexport function LineOptionsPopup({ firstLineNumber, line }: LineOptionsPopupProps) {\n  return (\n    <SourceViewerContext.Consumer>\n      {({ branchLike, file }) => {\n        const codeLocation = getCodeUrl(file.project, branchLike, file.key, line.line);\n        const codeUrl = getPathUrlAsString(codeLocation, false);\n        const isAtTop = line.line - 4 < firstLineNumber;\n        return (\n          <DropdownOverlay\n            className=\"big-spacer-left\"\n            noPadding={true}\n            placement={isAtTop ? PopupPlacement.BottomLeft : PopupPlacement.TopLeft}>\n            <ul className=\"padded source-viewer-bubble-popup nowrap\">\n              <ActionsDropdownItem copyValue={codeUrl}>\n                {translate('component_viewer.copy_permalink')}\n              </ActionsDropdownItem>\n            </ul>\n          </DropdownOverlay>\n        );\n      }}\n    </SourceViewerContext.Consumer>\n  );\n}\n\nexport default React.memo(LineOptionsPopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Toggler from '../../../components/controls/Toggler';\nimport { translateWithParameters } from '../../../helpers/l10n';\nimport LineOptionsPopup from './LineOptionsPopup';\n\nexport interface LineNumberProps {\n  displayOptions: boolean;\n  firstLineNumber: number;\n  line: T.SourceLine;\n}\n\nexport function LineNumber({ displayOptions, firstLineNumber, line }: LineNumberProps) {\n  const [isOpen, setOpen] = React.useState<boolean>(false);\n  const { line: lineNumber } = line;\n  const hasLineNumber = !!lineNumber;\n\n  return hasLineNumber ? (\n    <td className=\"source-meta source-line-number\" data-line-number={lineNumber}>\n      {displayOptions ? (\n        <Toggler\n          closeOnClickOutside={true}\n          onRequestClose={() => setOpen(false)}\n          open={isOpen}\n          overlay={<LineOptionsPopup firstLineNumber={firstLineNumber} line={line} />}>\n          <span\n            aria-expanded={isOpen}\n            aria-haspopup={true}\n            aria-label={translateWithParameters('source_viewer.line_X', lineNumber)}\n            onClick={() => setOpen(true)}\n            role=\"button\"\n            tabIndex={0}>\n            {lineNumber}\n          </span>\n        </Toggler>\n      ) : (\n        lineNumber\n      )}\n    </td>\n  ) : (\n    <td className=\"source-meta source-line-number\" />\n  );\n}\n\nexport default React.memo(LineNumber);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport DateFormatter from '../../intl/DateFormatter';\n\nexport interface SCMPopupProps {\n  line: T.SourceLine;\n}\n\nexport function SCMPopup({ line }: SCMPopupProps) {\n  const hasAuthor = line.scmAuthor !== undefined && line.scmAuthor !== '';\n  const hasDate = line.scmDate !== undefined;\n  return (\n    <div className=\"source-viewer-bubble-popup abs-width-400\">\n      {hasAuthor && (\n        <div>\n          <h4>{translate('author')}</h4>\n          {line.scmAuthor}\n        </div>\n      )}\n      {hasDate && (\n        <div className={classNames({ 'spacer-top': hasAuthor })}>\n          <h4>{translate('source_viewer.tooltip.scm.commited_on')}</h4>\n          <DateFormatter date={line.scmDate!} />\n        </div>\n      )}\n      {line.scmRevision && (\n        <div className={classNames({ 'spacer-top': hasAuthor || hasDate })}>\n          <h4>{translate('source_viewer.tooltip.scm.revision')}</h4>\n          {line.scmRevision}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default React.memo(SCMPopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Dropdown from '../../../components/controls/Dropdown';\nimport { PopupPlacement } from '../../../components/ui/popups';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport SCMPopup from './SCMPopup';\n\nexport interface LineSCMProps {\n  line: T.SourceLine;\n  previousLine: T.SourceLine | undefined;\n}\n\nexport function LineSCM({ line, previousLine }: LineSCMProps) {\n  const hasPopup = !!line.line;\n  const cell = (\n    <div className=\"source-line-scm-inner\">\n      {isSCMChanged(line, previousLine) ? line.scmAuthor || '' : ' '}\n    </div>\n  );\n\n  if (hasPopup) {\n    let ariaLabel = translate('source_viewer.click_for_scm_info');\n    if (line.scmAuthor) {\n      ariaLabel = `${translateWithParameters(\n        'source_viewer.author_X',\n        line.scmAuthor\n      )}, ${ariaLabel}`;\n    }\n\n    return (\n      <td className=\"source-meta source-line-scm\" data-line-number={line.line}>\n        <Dropdown overlay={<SCMPopup line={line} />} overlayPlacement={PopupPlacement.RightTop}>\n          <div aria-label={ariaLabel} role=\"button\">\n            {cell}\n          </div>\n        </Dropdown>\n      </td>\n    );\n  } else {\n    return (\n      <td className=\"source-meta source-line-scm\" data-line-number={line.line}>\n        {cell}\n      </td>\n    );\n  }\n}\n\nfunction isSCMChanged(s: T.SourceLine, p: T.SourceLine | undefined) {\n  let changed = true;\n  if (p != null && s.scmRevision != null && p.scmRevision != null) {\n    changed = s.scmRevision !== p.scmRevision || s.scmDate !== p.scmDate;\n  }\n  return changed;\n}\n\nexport default React.memo(LineSCM);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { times } from 'lodash';\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport './Line.css';\nimport LineCode from './LineCode';\nimport LineCoverage from './LineCoverage';\nimport LineDuplicationBlock from './LineDuplicationBlock';\nimport LineIssuesIndicator from './LineIssuesIndicator';\nimport LineNumber from './LineNumber';\nimport LineSCM from './LineSCM';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayAllIssues?: boolean;\n  displayCoverage: boolean;\n  displayDuplications: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayIssues: boolean;\n  displayLineNumberOptions?: boolean;\n  displayLocationMarkers?: boolean;\n  displaySCM?: boolean;\n  duplications: number[];\n  duplicationsCount: number;\n  firstLineNumber: number;\n  highlighted: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: T.LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  last: boolean;\n  line: T.SourceLine;\n  loadDuplications: (line: T.SourceLine) => void;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issueKey: string, popupName: string, open?: boolean) => void;\n  onIssuesClose: (line: T.SourceLine) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onIssuesOpen: (line: T.SourceLine) => void;\n  onIssueUnselect: () => void;\n  onLocationSelect: ((x: number) => void) | undefined;\n  onSymbolClick: (symbols: string[]) => void;\n  openIssues: boolean;\n  previousLine: T.SourceLine | undefined;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement) => void;\n  scrollToUncoveredLine?: boolean;\n  secondaryIssueLocations: T.LinearIssueLocation[];\n  selectedIssue: string | undefined;\n  verticalBuffer?: number;\n}\n\nconst LINE_HEIGHT = 18;\n\nexport default class Line extends React.PureComponent<Props> {\n  handleIssuesIndicatorClick = () => {\n    if (this.props.openIssues) {\n      this.props.onIssuesClose(this.props.line);\n      this.props.onIssueUnselect();\n    } else {\n      this.props.onIssuesOpen(this.props.line);\n\n      const { issues } = this.props;\n      if (issues.length > 0) {\n        this.props.onIssueSelect(issues[0].key);\n      }\n    }\n  };\n\n  render() {\n    const {\n      branchLike,\n      displayAllIssues,\n      displayCoverage,\n      displayDuplications,\n      displayIssueLocationsCount,\n      displayIssueLocationsLink,\n      displayLineNumberOptions,\n      displayLocationMarkers,\n      highlightedLocationMessage,\n      displayIssues,\n      displaySCM = true,\n      duplications,\n      duplicationsCount,\n      firstLineNumber,\n      highlighted,\n      highlightedSymbols,\n      issueLocations,\n      issuePopup,\n      issues,\n      last,\n      line,\n      openIssues,\n      previousLine,\n      scrollToUncoveredLine,\n      secondaryIssueLocations,\n      selectedIssue,\n      verticalBuffer\n    } = this.props;\n\n    const className = classNames('source-line', {\n      'source-line-highlighted': highlighted,\n      'source-line-filtered': line.isNew,\n      'source-line-filtered-dark':\n        displayCoverage &&\n        (line.coverageStatus === 'uncovered' || line.coverageStatus === 'partially-covered'),\n      'source-line-last': last === true\n    });\n\n    const bottomPadding = verticalBuffer ? verticalBuffer * LINE_HEIGHT : undefined;\n\n    // default is true\n    const displayOptions = displayLineNumberOptions !== false;\n\n    return (\n      <tr className={className} data-line-number={line.line}>\n        <LineNumber displayOptions={displayOptions} firstLineNumber={firstLineNumber} line={line} />\n\n        {displaySCM && <LineSCM line={line} previousLine={previousLine} />}\n        {displayIssues && !displayAllIssues ? (\n          <LineIssuesIndicator\n            issues={issues}\n            issuesOpen={openIssues}\n            line={line}\n            onClick={this.handleIssuesIndicatorClick}\n          />\n        ) : (\n          <td className=\"source-meta source-line-issues\" />\n        )}\n\n        {displayDuplications && (\n          <LineDuplicationBlock\n            blocksLoaded={duplicationsCount > 0}\n            duplicated={Boolean(line.duplicated)}\n            index={0}\n            key={0}\n            line={this.props.line}\n            onClick={this.props.loadDuplications}\n            renderDuplicationPopup={this.props.renderDuplicationPopup}\n          />\n        )}\n\n        {duplicationsCount > 1 &&\n          times(duplicationsCount - 1, index => (\n            <LineDuplicationBlock\n              blocksLoaded={true}\n              duplicated={duplications.includes(index + 1)}\n              index={index + 1}\n              key={index + 1}\n              line={this.props.line}\n              renderDuplicationPopup={this.props.renderDuplicationPopup}\n            />\n          ))}\n\n        {displayCoverage && (\n          <LineCoverage\n            line={line}\n            scroll={this.props.scroll}\n            scrollToUncoveredLine={scrollToUncoveredLine}\n          />\n        )}\n\n        <LineCode\n          branchLike={branchLike}\n          displayIssueLocationsCount={displayIssueLocationsCount}\n          displayIssueLocationsLink={displayIssueLocationsLink}\n          displayLocationMarkers={displayLocationMarkers}\n          highlightedLocationMessage={highlightedLocationMessage}\n          highlightedSymbols={highlightedSymbols}\n          issueLocations={issueLocations}\n          issuePopup={issuePopup}\n          issues={issues}\n          line={line}\n          onIssueChange={this.props.onIssueChange}\n          onIssuePopupToggle={this.props.onIssuePopupToggle}\n          onIssueSelect={this.props.onIssueSelect}\n          onLocationSelect={this.props.onLocationSelect}\n          onSymbolClick={this.props.onSymbolClick}\n          padding={bottomPadding}\n          scroll={this.props.scroll}\n          secondaryIssueLocations={secondaryIssueLocations}\n          selectedIssue={selectedIssue}\n          showIssues={openIssues || displayAllIssues}\n        />\n      </tr>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { searchIssues } from '../../../api/issues';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { parseIssueFromResponse } from '../../../helpers/issues';\nimport { BranchLike } from '../../../types/branch-like';\n\n// maximum possible value\nconst PAGE_SIZE = 500;\n\nfunction buildQuery(component: string, branchLike: BranchLike | undefined) {\n  return {\n    additionalFields: '_all',\n    resolved: 'false',\n    componentKeys: component,\n    s: 'FILE_LINE',\n    ...getBranchLikeQuery(branchLike)\n  };\n}\n\nexport function loadPage(\n  query: T.RawQuery,\n  page: number,\n  pageSize = PAGE_SIZE\n): Promise<T.Issue[]> {\n  return searchIssues({\n    ...query,\n    p: page,\n    ps: pageSize\n  }).then(r =>\n    r.issues.map(issue => parseIssueFromResponse(issue, r.components, r.users, r.rules))\n  );\n}\n\nexport function loadPageAndNext(\n  query: T.RawQuery,\n  toLine: number,\n  page: number,\n  pageSize = PAGE_SIZE\n): Promise<T.Issue[]> {\n  return loadPage(query, page).then(issues => {\n    if (issues.length === 0) {\n      return [];\n    }\n\n    const lastIssue = issues[issues.length - 1];\n\n    if (\n      (lastIssue.textRange != null && lastIssue.textRange.endLine > toLine) ||\n      issues.length < pageSize\n    ) {\n      return issues;\n    }\n\n    return loadPageAndNext(query, toLine, page + 1, pageSize).then(nextIssues => {\n      return [...issues, ...nextIssues];\n    });\n  });\n}\n\nexport default function loadIssues(\n  component: string,\n  _fromLine: number,\n  toLine: number,\n  branchLike: BranchLike | undefined\n): Promise<T.Issue[]> {\n  const query = buildQuery(component, branchLike);\n  return new Promise(resolve => {\n    loadPageAndNext(query, toLine, 1).then(issues => {\n      resolve(issues);\n    });\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from '../../components/controls/buttons';\nimport { translate } from '../../helpers/l10n';\nimport { BranchLike } from '../../types/branch-like';\nimport { MetricKey } from '../../types/metrics';\nimport Line from './components/Line';\nimport { getSecondaryIssueLocationsForLine } from './helpers/issueLocations';\nimport {\n  optimizeHighlightedSymbols,\n  optimizeLocationMessage,\n  optimizeSelectedIssue\n} from './helpers/lines';\n\nconst EMPTY_ARRAY: any[] = [];\n\nconst ZERO_LINE = {\n  code: '',\n  duplicated: false,\n  isNew: false,\n  line: 0\n};\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  componentKey: string;\n  displayAllIssues?: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  duplications: T.Duplication[] | undefined;\n  duplicationsByLine: { [line: number]: number[] };\n  hasSourcesAfter: boolean;\n  hasSourcesBefore: boolean;\n  highlightedLine: number | undefined;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  // `undefined` elements mean they are located in a different file,\n  // but kept to maintain the location indexes\n  highlightedLocations: (T.FlowLocation | undefined)[] | undefined;\n  highlightedSymbols: string[];\n  issueLocationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[] | undefined;\n  issuesByLine: { [line: number]: T.Issue[] };\n  loadDuplications: (line: T.SourceLine) => void;\n  loadingSourcesAfter: boolean;\n  loadingSourcesBefore: boolean;\n  loadSourcesAfter: () => void;\n  loadSourcesBefore: () => void;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onIssuesClose: (line: T.SourceLine) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onIssuesOpen: (line: T.SourceLine) => void;\n  onIssueUnselect: () => void;\n  onLocationSelect: ((index: number) => void) | undefined;\n  onSymbolClick: (symbols: string[]) => void;\n  openIssuesByLine: { [line: number]: boolean };\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement) => void;\n  metricKey?: string;\n  selectedIssue: string | undefined;\n  sources: T.SourceLine[];\n  symbolsByLine: { [line: number]: string[] };\n}\n\nexport default class SourceViewerCode extends React.PureComponent<Props> {\n  firstUncoveredLineFound = false;\n\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.metricKey !== prevProps.metricKey) {\n      this.firstUncoveredLineFound = false;\n    }\n  }\n\n  getDuplicationsForLine = (line: T.SourceLine): number[] => {\n    return this.props.duplicationsByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getIssuesForLine = (line: T.SourceLine): T.Issue[] => {\n    return this.props.issuesByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getIssueLocationsForLine = (line: T.SourceLine): T.LinearIssueLocation[] => {\n    return this.props.issueLocationsByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  renderLine = ({\n    line,\n    index,\n    displayCoverage,\n    displayDuplications,\n    displayIssues\n  }: {\n    line: T.SourceLine;\n    index: number;\n    displayCoverage: boolean;\n    displayDuplications: boolean;\n    displayIssues: boolean;\n  }) => {\n    const {\n      highlightedLocationMessage,\n      highlightedLocations,\n      metricKey,\n      selectedIssue,\n      sources\n    } = this.props;\n\n    const secondaryIssueLocations = getSecondaryIssueLocationsForLine(line, highlightedLocations);\n\n    const duplicationsCount = this.props.duplications ? this.props.duplications.length : 0;\n\n    const issuesForLine = this.getIssuesForLine(line);\n    const firstLineNumber = sources && sources.length ? sources[0].line : 0;\n\n    let scrollToUncoveredLine = false;\n    if (\n      !this.firstUncoveredLineFound &&\n      displayCoverage &&\n      line.coverageStatus &&\n      ['uncovered', 'partially-covered'].includes(line.coverageStatus)\n    ) {\n      scrollToUncoveredLine =\n        (metricKey === MetricKey.new_uncovered_lines && line.isNew) ||\n        metricKey === MetricKey.uncovered_lines;\n      this.firstUncoveredLineFound = scrollToUncoveredLine;\n    }\n\n    return (\n      <Line\n        branchLike={this.props.branchLike}\n        displayAllIssues={this.props.displayAllIssues}\n        displayCoverage={displayCoverage}\n        displayDuplications={displayDuplications}\n        displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n        displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n        displayIssues={displayIssues}\n        displayLocationMarkers={this.props.displayLocationMarkers}\n        duplications={this.getDuplicationsForLine(line)}\n        duplicationsCount={duplicationsCount}\n        firstLineNumber={firstLineNumber}\n        highlighted={line.line === this.props.highlightedLine}\n        highlightedLocationMessage={optimizeLocationMessage(\n          highlightedLocationMessage,\n          secondaryIssueLocations\n        )}\n        highlightedSymbols={optimizeHighlightedSymbols(\n          this.props.symbolsByLine[line.line],\n          this.props.highlightedSymbols\n        )}\n        issueLocations={this.getIssueLocationsForLine(line)}\n        issuePopup={this.props.issuePopup}\n        issues={issuesForLine}\n        key={line.line}\n        last={index === this.props.sources.length - 1 && !this.props.hasSourcesAfter}\n        line={line}\n        loadDuplications={this.props.loadDuplications}\n        onIssueChange={this.props.onIssueChange}\n        onIssuePopupToggle={this.props.onIssuePopupToggle}\n        onIssueSelect={this.props.onIssueSelect}\n        onIssueUnselect={this.props.onIssueUnselect}\n        onIssuesClose={this.props.onIssuesClose}\n        onIssuesOpen={this.props.onIssuesOpen}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.props.onSymbolClick}\n        openIssues={this.props.openIssuesByLine[line.line] || false}\n        previousLine={index > 0 ? sources[index - 1] : undefined}\n        renderDuplicationPopup={this.props.renderDuplicationPopup}\n        scroll={this.props.scroll}\n        scrollToUncoveredLine={scrollToUncoveredLine}\n        secondaryIssueLocations={secondaryIssueLocations}\n        selectedIssue={optimizeSelectedIssue(selectedIssue, issuesForLine)}\n      />\n    );\n  };\n\n  render() {\n    const { issues = [], sources } = this.props;\n\n    const displayCoverage = sources.some(s => s.coverageStatus != null);\n    const displayDuplications = sources.some(s => !!s.duplicated);\n    const displayIssues = issues.length > 0;\n\n    const hasFileIssues = displayIssues && issues.some(issue => !issue.textRange);\n\n    return (\n      <div className=\"source-viewer-code\">\n        {this.props.hasSourcesBefore && (\n          <div className=\"source-viewer-more-code\">\n            {this.props.loadingSourcesBefore ? (\n              <div className=\"js-component-viewer-loading-before\">\n                <i className=\"spinner\" />\n                <span className=\"note spacer-left\">\n                  {translate('source_viewer.loading_more_code')}\n                </span>\n              </div>\n            ) : (\n              <Button\n                className=\"js-component-viewer-source-before\"\n                onClick={this.props.loadSourcesBefore}>\n                {translate('source_viewer.load_more_code')}\n              </Button>\n            )}\n          </div>\n        )}\n\n        <table className=\"source-table\">\n          <tbody>\n            {hasFileIssues &&\n              this.renderLine({\n                line: ZERO_LINE,\n                index: -1,\n                displayCoverage,\n                displayDuplications,\n                displayIssues\n              })}\n            {sources.map((line, index) =>\n              this.renderLine({ line, index, displayCoverage, displayDuplications, displayIssues })\n            )}\n          </tbody>\n        </table>\n\n        {this.props.hasSourcesAfter && (\n          <div className=\"source-viewer-more-code\">\n            {this.props.loadingSourcesAfter ? (\n              <div className=\"js-component-viewer-loading-after\">\n                <i className=\"spinner\" />\n                <span className=\"note spacer-left\">\n                  {translate('source_viewer.loading_more_code')}\n                </span>\n              </div>\n            ) : (\n              <Button\n                className=\"js-component-viewer-source-after\"\n                onClick={this.props.loadSourcesAfter}>\n                {translate('source_viewer.load_more_code')}\n              </Button>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueTypeIcon from '../../../components/icons/IssueTypeIcon';\nimport { getLocalizedMetricName } from '../../../helpers/l10n';\nimport { isMetricKey, MetricKey } from '../../../types/metrics';\nimport Measure from '../../measure/Measure';\n\nexport interface MeasureWithMetric {\n  metric: T.Metric;\n  value?: string;\n}\n\ninterface Props {\n  measure: MeasureWithMetric;\n}\n\nexport default function MeasuresOverlayMeasure({ measure }: Props) {\n  return (\n    <div\n      className=\"measure measure-one-line\"\n      data-metric={measure.metric.key}\n      key={measure.metric.key}>\n      <span className=\"measure-name\">\n        {isMetricKey(measure.metric.key) &&\n          [MetricKey.bugs, MetricKey.vulnerabilities, MetricKey.code_smells].includes(\n            measure.metric.key\n          ) && <IssueTypeIcon className=\"little-spacer-right\" query={measure.metric.key} />}\n        {getLocalizedMetricName(measure.metric)}\n      </span>\n      <span className=\"measure-value\">\n        <Measure\n          metricKey={measure.metric.key}\n          metricType={measure.metric.type}\n          small={true}\n          value={measure.value}\n        />\n      </span>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { groupBy, keyBy, sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { getFacets } from '../../../api/issues';\nimport { getMeasures } from '../../../api/measures';\nimport { getAllMetrics } from '../../../api/metrics';\nimport { ResetButtonLink } from '../../../components/controls/buttons';\nimport Modal from '../../../components/controls/Modal';\nimport IssueTypeIcon from '../../../components/icons/IssueTypeIcon';\nimport QualifierIcon from '../../../components/icons/QualifierIcon';\nimport TagsIcon from '../../../components/icons/TagsIcon';\nimport DuplicationsRating from '../../../components/ui/DuplicationsRating';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { ISSUE_TYPES, SEVERITIES } from '../../../helpers/constants';\nimport { getLocalizedMetricName, translate } from '../../../helpers/l10n';\nimport {\n  enhanceMeasuresWithMetrics,\n  formatMeasure,\n  getDisplayMetrics\n} from '../../../helpers/measures';\nimport { getBranchLikeUrl } from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\nimport Measure from '../../measure/Measure';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport CoverageRating from '../../ui/CoverageRating';\nimport MeasuresOverlayMeasure from './MeasuresOverlayMeasure';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  onClose: () => void;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\ninterface Measures {\n  [metricKey: string]: T.MeasureEnhanced;\n}\n\ninterface State {\n  loading: boolean;\n  measures: Measures;\n  severitiesFacet?: T.FacetValue[];\n  showAllMeasures: boolean;\n  tagsFacet?: T.FacetValue[];\n  typesFacet?: T.FacetValue<T.IssueType>[];\n}\n\nexport default class MeasuresOverlay extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true, measures: {}, showAllMeasures: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchData();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchData = () => {\n    Promise.all([this.fetchMeasures(), this.fetchIssues()]).then(\n      ([measures, facets]) => {\n        if (this.mounted) {\n          this.setState({ loading: false, measures, ...facets });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  fetchMeasures = () => {\n    return getAllMetrics().then(metrics => {\n      const metricKeys = getDisplayMetrics(metrics).map(metric => metric.key);\n\n      // eslint-disable-next-line promise/no-nesting\n      return getMeasures({\n        component: this.props.sourceViewerFile.key,\n        metricKeys: metricKeys.join(),\n        ...getBranchLikeQuery(this.props.branchLike)\n      }).then(measures => {\n        const withMetrics = enhanceMeasuresWithMetrics(measures, metrics).filter(\n          measure => measure.metric\n        );\n        return keyBy(withMetrics, measure => measure.metric.key);\n      });\n    });\n  };\n\n  fetchIssues = () => {\n    return getFacets(\n      {\n        componentKeys: this.props.sourceViewerFile.key,\n        resolved: 'false',\n        ...getBranchLikeQuery(this.props.branchLike)\n      },\n      ['types', 'severities', 'tags']\n    ).then(({ facets }) => {\n      const severitiesFacet = facets.find(f => f.property === 'severities');\n      const tagsFacet = facets.find(f => f.property === 'tags');\n      const typesFacet = facets.find(f => f.property === 'types');\n      return {\n        severitiesFacet: severitiesFacet && severitiesFacet.values,\n        tagsFacet: tagsFacet && tagsFacet.values,\n        typesFacet: typesFacet && (typesFacet.values as T.FacetValue<T.IssueType>[])\n      };\n    });\n  };\n\n  handleAllMeasuresClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ showAllMeasures: true });\n  };\n\n  renderMeasure = (measure: T.MeasureEnhanced | undefined) => {\n    return measure ? <MeasuresOverlayMeasure key={measure.metric.key} measure={measure} /> : null;\n  };\n\n  renderLines = () => {\n    const { measures } = this.state;\n\n    return (\n      <div className=\"measures-viewer-section\">\n        <div className=\"measures-viewer-card\">\n          <div className=\"measures\">\n            {this.renderMeasure(measures.lines)}\n            {this.renderMeasure(measures.ncloc)}\n            {this.renderMeasure(measures.comment_lines)}\n            {this.renderMeasure(measures.comment_lines_density)}\n          </div>\n\n          <div className=\"measures\">\n            {this.renderMeasure(measures.cognitive_complexity)}\n            {this.renderMeasure(measures.complexity)}\n            {this.renderMeasure(measures.function_complexity)}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderBigMeasure = (measure: T.MeasureEnhanced | undefined) => {\n    return measure ? (\n      <div className=\"measure measure-big\" data-metric={measure.metric.key}>\n        <span className=\"measure-value\">\n          <Measure\n            metricKey={measure.metric.key}\n            metricType={measure.metric.type}\n            value={measure.value}\n          />\n        </span>\n        <span className=\"measure-name\">{getLocalizedMetricName(measure.metric, true)}</span>\n      </div>\n    ) : null;\n  };\n\n  renderIssues = () => {\n    const { measures, severitiesFacet, tagsFacet, typesFacet } = this.state;\n    return (\n      <div className=\"measures-viewer-section\">\n        <div className=\"measures-viewer-card\">\n          <div className=\"measures\">\n            {this.renderBigMeasure(measures.violations)}\n            {this.renderBigMeasure(measures.sqale_index)}\n          </div>\n          {measures.violations && !!measures.violations.value && (\n            <>\n              {typesFacet && (\n                <div className=\"measures\">\n                  {sortBy(typesFacet, f => ISSUE_TYPES.indexOf(f.val)).map(f => (\n                    <div className=\"measure measure-one-line\" key={f.val}>\n                      <span className=\"measure-name\">\n                        <IssueTypeIcon className=\"little-spacer-right\" query={f.val} />\n                        {translate('issue.type', f.val)}\n                      </span>\n                      <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                    </div>\n                  ))}\n                </div>\n              )}\n              {severitiesFacet && (\n                <div className=\"measures\">\n                  {sortBy(severitiesFacet, f => SEVERITIES.indexOf(f.val)).map(f => (\n                    <div className=\"measure measure-one-line\" key={f.val}>\n                      <span className=\"measure-name\">\n                        <SeverityHelper severity={f.val} />\n                      </span>\n                      <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                    </div>\n                  ))}\n                </div>\n              )}\n              {tagsFacet && (\n                <div className=\"measures\">\n                  {tagsFacet.map(f => (\n                    <div className=\"measure measure-one-line\" key={f.val}>\n                      <span className=\"measure-name\">\n                        <TagsIcon className=\"little-spacer-right\" />\n                        {f.val}\n                      </span>\n                      <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  renderCoverage = () => {\n    const { coverage } = this.state.measures;\n    if (!coverage) {\n      return null;\n    }\n    return (\n      <div className=\"measures-viewer-section\">\n        <div className=\"measures-viewer-card\">\n          <div className=\"measures\">\n            <div className=\"measures-chart\">\n              <CoverageRating size=\"big\" value={coverage.value} />\n            </div>\n            <div className=\"measure measure-big\" data-metric={coverage.metric.key}>\n              <span className=\"measure-value\">\n                <Measure\n                  metricKey={coverage.metric.key}\n                  metricType={coverage.metric.type}\n                  value={coverage.value}\n                />\n              </span>\n              <span className=\"measure-name\">{getLocalizedMetricName(coverage.metric)}</span>\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            {this.renderMeasure(this.state.measures.uncovered_lines)}\n            {this.renderMeasure(this.state.measures.lines_to_cover)}\n            {this.renderMeasure(this.state.measures.uncovered_conditions)}\n            {this.renderMeasure(this.state.measures.conditions_to_cover)}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderDuplications = () => {\n    const { duplicated_lines_density: duplications } = this.state.measures;\n    if (!duplications) {\n      return null;\n    }\n    return (\n      <div className=\"measures-viewer-section\">\n        <div className=\"measures-viewer-card\">\n          <div className=\"measures\">\n            <div className=\"measures-chart\">\n              <DuplicationsRating\n                muted={duplications.value === undefined}\n                size=\"big\"\n                value={Number(duplications.value || 0)}\n              />\n            </div>\n            <div className=\"measure measure-big\" data-metric={duplications.metric.key}>\n              <span className=\"measure-value\">\n                <Measure\n                  metricKey={duplications.metric.key}\n                  metricType={duplications.metric.type}\n                  value={duplications.value}\n                />\n              </span>\n              <span className=\"measure-name\">\n                {getLocalizedMetricName(duplications.metric, true)}\n              </span>\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            {this.renderMeasure(this.state.measures.duplicated_blocks)}\n            {this.renderMeasure(this.state.measures.duplicated_lines)}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderTests = () => {\n    const { measures } = this.state;\n    return (\n      <div className=\"measures-viewer\">\n        <div className=\"measures-viewer-section measures-viewer-section-limited\">\n          <div className=\"measures-viewer-card\">\n            <div className=\"measures\">\n              {this.renderMeasure(measures.tests)}\n              {this.renderMeasure(measures.test_success_density)}\n              {this.renderMeasure(measures.test_failures)}\n              {this.renderMeasure(measures.test_errors)}\n              {this.renderMeasure(measures.skipped_tests)}\n              {this.renderMeasure(measures.test_execution_time)}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderDomain = (domain: string, measures: T.MeasureEnhanced[]) => {\n    return (\n      <div className=\"measures-viewer-card\" key={domain}>\n        <div className=\"measures\">\n          <div className=\"measure measure-big\">\n            <span className=\"measure-name\">{translate('metric_domain', domain)}</span>\n          </div>\n          {sortBy(\n            measures.filter(measure => measure.value !== undefined),\n            measure => getLocalizedMetricName(measure.metric)\n          ).map(measure => this.renderMeasure(measure))}\n        </div>\n      </div>\n    );\n  };\n\n  renderAllMeasures = () => {\n    const domains = groupBy(Object.values(this.state.measures), measure => measure.metric.domain);\n    const domainKeys = Object.keys(domains);\n    const odd = domainKeys.filter((_, index) => index % 2 === 1);\n    const even = domainKeys.filter((_, index) => index % 2 === 0);\n    return (\n      <div className=\"measures-viewer measures-viewer-secondary\">\n        <div className=\"measures-viewer-section\">\n          {odd.map(domain => this.renderDomain(domain, domains[domain]))}\n        </div>\n        <div className=\"measures-viewer-section\">\n          {even.map(domain => this.renderDomain(domain, domains[domain]))}\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    const { branchLike, sourceViewerFile } = this.props;\n    const { loading } = this.state;\n\n    const header = translate('component_viewer.file_measures');\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose} size=\"large\">\n        <div className=\"modal-head\">\n          <h2>{header}</h2>\n        </div>\n        <div className=\"modal-body modal-container\">\n          <div className=\"measures-viewer-header big-spacer-bottom\">\n            <div>\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n              <Link to={getBranchLikeUrl(sourceViewerFile.project, branchLike)}>\n                {sourceViewerFile.projectName}\n              </Link>\n\n              {sourceViewerFile.subProject && (\n                <>\n                  <QualifierIcon className=\"big-spacer-left little-spacer-right\" qualifier=\"BRC\" />\n                  {sourceViewerFile.subProjectName}\n                </>\n              )}\n            </div>\n\n            <div className=\"display-flex-center little-spacer-top\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier={sourceViewerFile.q} />\n              {sourceViewerFile.path}\n            </div>\n          </div>\n\n          {loading ? (\n            <i className=\"spinner\" />\n          ) : (\n            <>\n              {sourceViewerFile.q === 'UTS' ? (\n                this.renderTests()\n              ) : (\n                <div className=\"measures-viewer\">\n                  {this.renderLines()}\n                  {this.renderIssues()}\n                  {this.renderCoverage()}\n                  {this.renderDuplications()}\n                </div>\n              )}\n            </>\n          )}\n\n          <div className=\"spacer-top\">\n            {this.state.showAllMeasures ? (\n              this.renderAllMeasures()\n            ) : (\n              <a className=\"js-show-all-measures\" href=\"#\" onClick={this.handleAllMeasuresClick}>\n                {translate('component_viewer.show_all_measures')}\n              </a>\n            )}\n          </div>\n        </div>\n\n        <footer className=\"modal-foot\">\n          <ResetButtonLink onClick={this.props.onClose}>{translate('close')}</ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { stringify } from 'querystring';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ButtonIcon } from '../../components/controls/buttons';\nimport { ClipboardIconButton } from '../../components/controls/clipboard';\nimport Dropdown from '../../components/controls/Dropdown';\nimport ListIcon from '../../components/icons/ListIcon';\nimport QualifierIcon from '../../components/icons/QualifierIcon';\nimport { PopupPlacement } from '../../components/ui/popups';\nimport { getBranchLikeQuery } from '../../helpers/branch-like';\nimport { ISSUE_TYPES } from '../../helpers/constants';\nimport { ISSUETYPE_METRIC_KEYS_MAP } from '../../helpers/issues';\nimport { translate } from '../../helpers/l10n';\nimport { formatMeasure } from '../../helpers/measures';\nimport { collapsedDirFromPath, fileFromPath } from '../../helpers/path';\nimport { omitNil } from '../../helpers/request';\nimport { getBaseUrl } from '../../helpers/system';\nimport {\n  getBranchLikeUrl,\n  getCodeUrl,\n  getComponentIssuesUrl,\n  getPathUrlAsString\n} from '../../helpers/urls';\nimport { BranchLike } from '../../types/branch-like';\nimport { ComponentQualifier } from '../../types/component';\nimport { WorkspaceContextShape } from '../workspace/context';\nimport MeasuresOverlay from './components/MeasuresOverlay';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  componentMeasures?: T.Measure[];\n  openComponent: WorkspaceContextShape['openComponent'];\n  showMeasures?: boolean;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\ninterface State {\n  measuresOverlay: boolean;\n}\n\nexport default class SourceViewerHeader extends React.PureComponent<Props, State> {\n  state: State = { measuresOverlay: false };\n\n  handleShowMeasuresClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    this.setState({ measuresOverlay: true });\n  };\n\n  handleMeasuresOverlayClose = () => {\n    this.setState({ measuresOverlay: false });\n  };\n\n  openInWorkspace = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    const { key } = this.props.sourceViewerFile;\n    this.props.openComponent({ branchLike: this.props.branchLike, key });\n  };\n\n  renderIssueMeasures = () => {\n    const { branchLike, componentMeasures, sourceViewerFile } = this.props;\n    return (\n      componentMeasures &&\n      componentMeasures.length > 0 && (\n        <>\n          <div className=\"source-viewer-header-measure-separator\" />\n\n          {ISSUE_TYPES.map((type: T.IssueType) => {\n            const params = {\n              ...getBranchLikeQuery(branchLike),\n              files: sourceViewerFile.path,\n              resolved: 'false',\n              types: type\n            };\n\n            const measure = componentMeasures.find(\n              m => m.metric === ISSUETYPE_METRIC_KEYS_MAP[type].metric\n            );\n            return (\n              <div className=\"source-viewer-header-measure\" key={type}>\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('issue.type', type)}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  <Link to={getComponentIssuesUrl(sourceViewerFile.project, params)}>\n                    {formatMeasure((measure && measure.value) || 0, 'INT')}\n                  </Link>\n                </span>\n              </div>\n            );\n          })}\n        </>\n      )\n    );\n  };\n\n  render() {\n    const { showMeasures } = this.props;\n    const {\n      key,\n      measures,\n      path,\n      project,\n      projectName,\n      q,\n      subProject,\n      subProjectName\n    } = this.props.sourceViewerFile;\n    const unitTestsOrLines = q === ComponentQualifier.TestFile ? 'tests' : 'lines';\n    const workspace = false;\n    const rawSourcesLink =\n      getBaseUrl() +\n      '/api/sources/raw?' +\n      stringify(omitNil({ key, ...getBranchLikeQuery(this.props.branchLike) }));\n\n    // TODO favorite\n    return (\n      <div className=\"source-viewer-header display-flex-center\">\n        <div className=\"flex-1 little-spacer-top\">\n          <div className=\"component-name\">\n            <div className=\"component-name-parent\">\n              <a\n                className=\"link-with-icon\"\n                href={getPathUrlAsString(getBranchLikeUrl(project, this.props.branchLike))}>\n                <QualifierIcon qualifier=\"TRK\" /> <span>{projectName}</span>\n              </a>\n            </div>\n\n            {subProject !== undefined && (\n              <div className=\"component-name-parent\">\n                <QualifierIcon qualifier=\"BRC\" /> <span>{subProjectName}</span>\n              </div>\n            )}\n\n            <div className=\"component-name-path\">\n              <QualifierIcon qualifier={q} /> <span>{collapsedDirFromPath(path)}</span>\n              <span className=\"component-name-file\">{fileFromPath(path)}</span>\n              <span className=\"nudged-up spacer-left\">\n                <ClipboardIconButton\n                  aria-label={translate('component_viewer.copy_path_to_clipboard')}\n                  className=\"button-link link-no-underline\"\n                  copyValue={path}\n                />\n              </span>\n            </div>\n          </div>\n        </div>\n\n        {this.state.measuresOverlay && (\n          <MeasuresOverlay\n            branchLike={this.props.branchLike}\n            onClose={this.handleMeasuresOverlayClose}\n            sourceViewerFile={this.props.sourceViewerFile}\n          />\n        )}\n\n        {showMeasures && (\n          <div className=\"display-flex-center\">\n            {measures[unitTestsOrLines] && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate(`metric.${unitTestsOrLines}.name`)}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures[unitTestsOrLines], 'SHORT_INT')}\n                </span>\n              </div>\n            )}\n\n            {measures.coverage !== undefined && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('metric.coverage.name')}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures.coverage, 'PERCENT')}\n                </span>\n              </div>\n            )}\n\n            {measures.duplicationDensity !== undefined && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('duplications')}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures.duplicationDensity, 'PERCENT')}\n                </span>\n              </div>\n            )}\n\n            {this.renderIssueMeasures()}\n          </div>\n        )}\n\n        <Dropdown\n          className=\"source-viewer-header-actions flex-0\"\n          overlay={\n            <ul className=\"menu\">\n              <li>\n                <a className=\"js-measures\" href=\"#\" onClick={this.handleShowMeasuresClick}>\n                  {translate('component_viewer.show_details')}\n                </a>\n              </li>\n              <li>\n                <Link\n                  className=\"js-new-window\"\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\"\n                  to={getCodeUrl(this.props.sourceViewerFile.project, this.props.branchLike, key)}>\n                  {translate('component_viewer.new_window')}\n                </Link>\n              </li>\n              {!workspace && (\n                <li>\n                  <a className=\"js-workspace\" href=\"#\" onClick={this.openInWorkspace}>\n                    {translate('component_viewer.open_in_workspace')}\n                  </a>\n                </li>\n              )}\n              <li>\n                <a\n                  className=\"js-raw-source\"\n                  href={rawSourcesLink}\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\">\n                  {translate('component_viewer.show_raw_source')}\n                </a>\n              </li>\n            </ul>\n          }\n          overlayPlacement={PopupPlacement.BottomRight}>\n          <ButtonIcon className=\"js-actions\">\n            <ListIcon />\n          </ButtonIcon>\n        </Dropdown>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { intersection, uniqBy } from 'lodash';\nimport * as React from 'react';\nimport {\n  getComponentData,\n  getComponentForSourceViewer,\n  getDuplications,\n  getSources\n} from '../../api/components';\nimport { Alert } from '../../components/ui/Alert';\nimport { getBranchLikeQuery, isSameBranchLike } from '../../helpers/branch-like';\nimport { translate } from '../../helpers/l10n';\nimport { BranchLike } from '../../types/branch-like';\nimport { WorkspaceContext } from '../workspace/context';\nimport DuplicationPopup from './components/DuplicationPopup';\nimport {\n  filterDuplicationBlocksByLine,\n  getDuplicationBlocksForIndex,\n  isDuplicationBlockInRemovedComponent\n} from './helpers/duplications';\nimport getCoverageStatus from './helpers/getCoverageStatus';\nimport {\n  duplicationsByLine,\n  issuesByLine,\n  locationsByLine,\n  symbolsByLine\n} from './helpers/indexing';\nimport defaultLoadIssues from './helpers/loadIssues';\nimport SourceViewerCode from './SourceViewerCode';\nimport { SourceViewerContext } from './SourceViewerContext';\nimport SourceViewerHeader from './SourceViewerHeader';\nimport SourceViewerHeaderSlim from './SourceViewerHeaderSlim';\nimport './styles.css';\n\n// TODO react-virtualized\n\nexport interface Props {\n  aroundLine?: number;\n  branchLike: BranchLike | undefined;\n  component: string;\n  componentMeasures?: T.Measure[];\n  displayAllIssues?: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  highlightedLine?: number;\n  // `undefined` elements mean they are located in a different file,\n  // but kept to maintaint the location indexes\n  highlightedLocations?: (T.FlowLocation | undefined)[];\n  highlightedLocationMessage?: { index: number; text: string | undefined };\n  loadComponent?: (\n    component: string,\n    branchLike: BranchLike | undefined\n  ) => Promise<T.SourceViewerFile>;\n  loadIssues?: (\n    component: string,\n    from: number,\n    to: number,\n    branchLike: BranchLike | undefined\n  ) => Promise<T.Issue[]>;\n  loadSources?: (\n    component: string,\n    from: number,\n    to: number,\n    branchLike: BranchLike | undefined\n  ) => Promise<T.SourceLine[]>;\n  onLoaded?: (component: T.SourceViewerFile, sources: T.SourceLine[], issues: T.Issue[]) => void;\n  onLocationSelect?: (index: number) => void;\n  onIssueChange?: (issue: T.Issue) => void;\n  onIssueSelect?: (issueKey: string) => void;\n  onIssueUnselect?: () => void;\n  scroll?: (element: HTMLElement) => void;\n  selectedIssue?: string;\n  showMeasures?: boolean;\n  metricKey?: string;\n  slimHeader?: boolean;\n}\n\ninterface State {\n  component?: T.SourceViewerFile;\n  duplicatedFiles?: T.Dict<T.DuplicatedFile>;\n  duplications?: T.Duplication[];\n  duplicationsByLine: { [line: number]: number[] };\n  hasSourcesAfter: boolean;\n  highlightedSymbols: string[];\n  issueLocationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  issuePopup?: { issue: string; name: string };\n  issues?: T.Issue[];\n  issuesByLine: { [line: number]: T.Issue[] };\n  loading: boolean;\n  loadingSourcesAfter: boolean;\n  loadingSourcesBefore: boolean;\n  notAccessible: boolean;\n  notExist: boolean;\n  openIssuesByLine: { [line: number]: boolean };\n  selectedIssue?: string;\n  sourceRemoved: boolean;\n  sources?: T.SourceLine[];\n  symbolsByLine: { [line: number]: string[] };\n}\n\nconst LINES = 500;\n\nexport default class SourceViewerBase extends React.PureComponent<Props, State> {\n  node?: HTMLElement | null;\n  mounted = false;\n\n  static defaultProps = {\n    displayAllIssues: false,\n    displayIssueLocationsCount: true,\n    displayIssueLocationsLink: true,\n    displayLocationMarkers: true\n  };\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      duplicationsByLine: {},\n      hasSourcesAfter: false,\n      highlightedSymbols: [],\n      issuesByLine: {},\n      issueLocationsByLine: {},\n      loading: true,\n      loadingSourcesAfter: false,\n      loadingSourcesBefore: false,\n      notAccessible: false,\n      notExist: false,\n      openIssuesByLine: {},\n      selectedIssue: props.selectedIssue,\n      sourceRemoved: false,\n      symbolsByLine: {}\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchComponent();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    // if a component or a branch has changed,\n    // set `loading: true` immediately to avoid unwanted scrolling in `LineCode`\n    if (\n      nextProps.component !== this.props.component ||\n      !isSameBranchLike(nextProps.branchLike, this.props.branchLike)\n    ) {\n      this.setState({ loading: true });\n    }\n    if (\n      nextProps.onIssueSelect !== undefined &&\n      nextProps.selectedIssue !== this.props.selectedIssue\n    ) {\n      this.setState({ selectedIssue: nextProps.selectedIssue });\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.component !== this.props.component ||\n      !isSameBranchLike(prevProps.branchLike, this.props.branchLike)\n    ) {\n      this.fetchComponent();\n    } else if (\n      this.props.aroundLine !== undefined &&\n      prevProps.aroundLine !== this.props.aroundLine &&\n      this.isLineOutsideOfRange(this.props.aroundLine)\n    ) {\n      this.fetchSources();\n    } else {\n      const { selectedIssue } = this.props;\n      const { issues } = this.state;\n      if (\n        selectedIssue !== undefined &&\n        issues !== undefined &&\n        issues.find(issue => issue.key === selectedIssue) === undefined\n      ) {\n        this.reloadIssues();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  get loadComponent() {\n    return this.props.loadComponent || defaultLoadComponent;\n  }\n\n  get loadIssues() {\n    return this.props.loadIssues || defaultLoadIssues;\n  }\n\n  get propsLoadSources() {\n    return this.props.loadSources || defaultLoadSources;\n  }\n\n  computeCoverageStatus(lines: T.SourceLine[]) {\n    return lines.map(line => ({ ...line, coverageStatus: getCoverageStatus(line) }));\n  }\n\n  isLineOutsideOfRange(lineNumber: number) {\n    const { sources } = this.state;\n    if (sources && sources.length > 0) {\n      const firstLine = sources[0];\n      const lastList = sources[sources.length - 1];\n      return lineNumber < firstLine.line || lineNumber > lastList.line;\n    }\n\n    return true;\n  }\n\n  fetchComponent() {\n    this.setState({ loading: true });\n\n    const to = (this.props.aroundLine || 0) + LINES;\n    const loadIssues = (component: T.SourceViewerFile, sources: T.SourceLine[]) => {\n      this.loadIssues(this.props.component, 1, to, this.props.branchLike).then(\n        issues => {\n          if (this.mounted) {\n            const finalSources = sources.slice(0, LINES);\n\n            this.setState(\n              {\n                component,\n                duplicatedFiles: undefined,\n                duplications: undefined,\n                duplicationsByLine: {},\n                hasSourcesAfter: sources.length > LINES,\n                highlightedSymbols: [],\n                issueLocationsByLine: locationsByLine(issues),\n                issues,\n                issuesByLine: issuesByLine(issues),\n                loading: false,\n                notAccessible: false,\n                notExist: false,\n                openIssuesByLine: {},\n                issuePopup: undefined,\n                sourceRemoved: false,\n                sources: this.computeCoverageStatus(finalSources),\n                symbolsByLine: symbolsByLine(sources.slice(0, LINES))\n              },\n              () => {\n                if (this.props.onLoaded) {\n                  this.props.onLoaded(component, finalSources, issues);\n                }\n              }\n            );\n          }\n        },\n        () => {\n          // TODO\n        }\n      );\n    };\n\n    const onFailLoadComponent = (response: Response) => {\n      // TODO handle other statuses\n      if (this.mounted) {\n        if (response.status === 403) {\n          this.setState({ loading: false, notAccessible: true });\n        } else if (response.status === 404) {\n          this.setState({ loading: false, notExist: true });\n        }\n      }\n    };\n\n    const onFailLoadSources = (response: Response, component: T.SourceViewerFile) => {\n      // TODO handle other statuses\n      if (this.mounted) {\n        if (response.status === 403) {\n          this.setState({ component, loading: false, notAccessible: true });\n        } else if (response.status === 404) {\n          this.setState({ component, loading: false, sourceRemoved: true });\n        }\n      }\n    };\n\n    const onResolve = (component: T.SourceViewerFile) => {\n      const sourcesRequest =\n        component.q === 'FIL' || component.q === 'UTS' ? this.loadSources() : Promise.resolve([]);\n      sourcesRequest.then(\n        sources => loadIssues(component, sources),\n        response => onFailLoadSources(response, component)\n      );\n    };\n\n    this.loadComponent(this.props.component, this.props.branchLike).then(\n      onResolve,\n      onFailLoadComponent\n    );\n  }\n\n  fetchSources() {\n    this.loadSources().then(\n      sources => {\n        if (this.mounted) {\n          const finalSources = sources.slice(0, LINES);\n          this.setState(\n            {\n              sources: sources.slice(0, LINES),\n              hasSourcesAfter: sources.length > LINES\n            },\n            () => {\n              if (this.props.onLoaded && this.state.component && this.state.issues) {\n                this.props.onLoaded(this.state.component, finalSources, this.state.issues);\n              }\n            }\n          );\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  }\n\n  reloadIssues() {\n    if (!this.state.sources) {\n      return;\n    }\n    const firstSourceLine = this.state.sources[0];\n    const lastSourceLine = this.state.sources[this.state.sources.length - 1];\n    this.loadIssues(\n      this.props.component,\n      firstSourceLine && firstSourceLine.line,\n      lastSourceLine && lastSourceLine.line,\n      this.props.branchLike\n    ).then(\n      issues => {\n        if (this.mounted) {\n          this.setState({\n            issues,\n            issuesByLine: issuesByLine(issues),\n            issueLocationsByLine: locationsByLine(issues)\n          });\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  }\n\n  loadSources = (): Promise<T.SourceLine[]> => {\n    return new Promise((resolve, reject) => {\n      const onFailLoadSources = (response: Response) => {\n        // TODO handle other statuses\n        if (this.mounted) {\n          if ([403, 404].includes(response.status)) {\n            reject(response);\n          } else {\n            resolve([]);\n          }\n        }\n      };\n\n      const from = this.props.aroundLine ? Math.max(1, this.props.aroundLine - LINES / 2 + 1) : 1;\n\n      let to = this.props.aroundLine ? this.props.aroundLine + LINES / 2 + 1 : LINES + 1;\n      // make sure we try to download `LINES` lines\n      if (from === 1 && to < LINES) {\n        to = LINES;\n      }\n      // request one additional line to define `hasSourcesAfter`\n      to++;\n\n      this.propsLoadSources(this.props.component, from, to, this.props.branchLike).then(sources => {\n        resolve(sources);\n      }, onFailLoadSources);\n    });\n  };\n\n  loadSourcesBefore = () => {\n    if (!this.state.sources) {\n      return;\n    }\n    const firstSourceLine = this.state.sources[0];\n    this.setState({ loadingSourcesBefore: true });\n    const from = Math.max(1, firstSourceLine.line - LINES);\n    Promise.all([\n      this.propsLoadSources(\n        this.props.component,\n        from,\n        firstSourceLine.line - 1,\n        this.props.branchLike\n      ),\n      this.loadIssues(this.props.component, from, firstSourceLine.line - 1, this.props.branchLike)\n    ]).then(\n      ([sources, issues]) => {\n        if (this.mounted) {\n          this.setState(prevState => {\n            const nextIssues = uniqBy([...issues, ...(prevState.issues || [])], issue => issue.key);\n            return {\n              issues: nextIssues,\n              issuesByLine: issuesByLine(nextIssues),\n              issueLocationsByLine: locationsByLine(nextIssues),\n              loadingSourcesBefore: false,\n              sources: [...this.computeCoverageStatus(sources), ...(prevState.sources || [])],\n              symbolsByLine: { ...prevState.symbolsByLine, ...symbolsByLine(sources) }\n            };\n          });\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  loadSourcesAfter = () => {\n    if (!this.state.sources) {\n      return;\n    }\n    const lastSourceLine = this.state.sources[this.state.sources.length - 1];\n    this.setState({ loadingSourcesAfter: true });\n    const fromLine = lastSourceLine.line + 1;\n    // request one additional line to define `hasSourcesAfter`\n    const toLine = lastSourceLine.line + LINES + 1;\n    Promise.all([\n      this.propsLoadSources(this.props.component, fromLine, toLine, this.props.branchLike),\n      this.loadIssues(this.props.component, fromLine, toLine, this.props.branchLike)\n    ]).then(\n      ([sources, issues]) => {\n        if (this.mounted) {\n          this.setState(prevState => {\n            const nextIssues = uniqBy([...(prevState.issues || []), ...issues], issue => issue.key);\n            return {\n              issues: nextIssues,\n              issuesByLine: issuesByLine(nextIssues),\n              issueLocationsByLine: locationsByLine(nextIssues),\n              hasSourcesAfter: sources.length > LINES,\n              loadingSourcesAfter: false,\n              sources: [\n                ...(prevState.sources || []),\n                ...this.computeCoverageStatus(sources.slice(0, LINES))\n              ],\n              symbolsByLine: {\n                ...prevState.symbolsByLine,\n                ...symbolsByLine(sources.slice(0, LINES))\n              }\n            };\n          });\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  loadDuplications = () => {\n    getDuplications({\n      key: this.props.component,\n      ...getBranchLikeQuery(this.props.branchLike)\n    }).then(\n      r => {\n        if (this.mounted) {\n          this.setState({\n            duplications: r.duplications,\n            duplicationsByLine: duplicationsByLine(r.duplications),\n            duplicatedFiles: r.files\n          });\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  handleIssuePopupToggle = (issue: string, popupName: string, open?: boolean) => {\n    this.setState((state: State) => {\n      const samePopup =\n        state.issuePopup && state.issuePopup.name === popupName && state.issuePopup.issue === issue;\n      if (open !== false && !samePopup) {\n        return { issuePopup: { issue, name: popupName } };\n      } else if (open !== true && samePopup) {\n        return { issuePopup: undefined };\n      }\n      return null;\n    });\n  };\n\n  handleSymbolClick = (symbols: string[]) => {\n    this.setState(state => {\n      const shouldDisable = intersection(state.highlightedSymbols, symbols).length > 0;\n      const highlightedSymbols = shouldDisable ? [] : symbols;\n      return { highlightedSymbols };\n    });\n  };\n\n  handleIssueSelect = (issue: string) => {\n    if (this.props.onIssueSelect) {\n      this.props.onIssueSelect(issue);\n    } else {\n      this.setState({ selectedIssue: issue });\n    }\n  };\n\n  handleIssueUnselect = () => {\n    if (this.props.onIssueUnselect) {\n      this.props.onIssueUnselect();\n    } else {\n      this.setState({ selectedIssue: undefined });\n    }\n  };\n\n  handleOpenIssues = (line: T.SourceLine) => {\n    this.setState(state => ({\n      openIssuesByLine: { ...state.openIssuesByLine, [line.line]: true }\n    }));\n  };\n\n  handleCloseIssues = (line: T.SourceLine) => {\n    this.setState(state => ({\n      openIssuesByLine: { ...state.openIssuesByLine, [line.line]: false }\n    }));\n  };\n\n  handleIssueChange = (issue: T.Issue) => {\n    this.setState(({ issues = [] }) => {\n      const newIssues = issues.map(candidate => (candidate.key === issue.key ? issue : candidate));\n      return { issues: newIssues, issuesByLine: issuesByLine(newIssues) };\n    });\n    if (this.props.onIssueChange) {\n      this.props.onIssueChange(issue);\n    }\n  };\n\n  renderDuplicationPopup = (index: number, line: number) => {\n    const { component, duplicatedFiles, duplications } = this.state;\n\n    if (!component || !duplicatedFiles) {\n      return null;\n    }\n\n    const blocks = getDuplicationBlocksForIndex(duplications, index);\n\n    return (\n      <WorkspaceContext.Consumer>\n        {({ openComponent }) => (\n          <DuplicationPopup\n            blocks={filterDuplicationBlocksByLine(blocks, line)}\n            branchLike={this.props.branchLike}\n            duplicatedFiles={duplicatedFiles}\n            inRemovedComponent={isDuplicationBlockInRemovedComponent(blocks)}\n            openComponent={openComponent}\n            sourceViewerFile={component}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n    );\n  };\n\n  renderCode(sources: T.SourceLine[]) {\n    const hasSourcesBefore = sources.length > 0 && sources[0].line > 1;\n    return (\n      <SourceViewerCode\n        branchLike={this.props.branchLike}\n        componentKey={this.props.component}\n        displayAllIssues={this.props.displayAllIssues}\n        displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n        displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n        displayLocationMarkers={this.props.displayLocationMarkers}\n        duplications={this.state.duplications}\n        duplicationsByLine={this.state.duplicationsByLine}\n        hasSourcesAfter={this.state.hasSourcesAfter}\n        hasSourcesBefore={hasSourcesBefore}\n        highlightedLine={this.props.highlightedLine}\n        highlightedLocationMessage={this.props.highlightedLocationMessage}\n        highlightedLocations={this.props.highlightedLocations}\n        highlightedSymbols={this.state.highlightedSymbols}\n        issueLocationsByLine={this.state.issueLocationsByLine}\n        issuePopup={this.state.issuePopup}\n        issues={this.state.issues}\n        issuesByLine={this.state.issuesByLine}\n        loadDuplications={this.loadDuplications}\n        loadSourcesAfter={this.loadSourcesAfter}\n        loadSourcesBefore={this.loadSourcesBefore}\n        loadingSourcesAfter={this.state.loadingSourcesAfter}\n        loadingSourcesBefore={this.state.loadingSourcesBefore}\n        onIssueChange={this.handleIssueChange}\n        onIssuePopupToggle={this.handleIssuePopupToggle}\n        onIssueSelect={this.handleIssueSelect}\n        onIssueUnselect={this.handleIssueUnselect}\n        onIssuesClose={this.handleCloseIssues}\n        onIssuesOpen={this.handleOpenIssues}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.handleSymbolClick}\n        openIssuesByLine={this.state.openIssuesByLine}\n        renderDuplicationPopup={this.renderDuplicationPopup}\n        scroll={this.props.scroll}\n        metricKey={this.props.metricKey}\n        selectedIssue={this.state.selectedIssue}\n        sources={sources}\n        symbolsByLine={this.state.symbolsByLine}\n      />\n    );\n  }\n\n  renderHeader(branchLike: BranchLike | undefined, sourceViewerFile: T.SourceViewerFile) {\n    return this.props.slimHeader ? (\n      <SourceViewerHeaderSlim branchLike={branchLike} sourceViewerFile={sourceViewerFile} />\n    ) : (\n      <WorkspaceContext.Consumer>\n        {({ openComponent }) => (\n          <SourceViewerHeader\n            branchLike={this.props.branchLike}\n            componentMeasures={this.props.componentMeasures}\n            openComponent={openComponent}\n            showMeasures={this.props.showMeasures}\n            sourceViewerFile={sourceViewerFile}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n    );\n  }\n\n  render() {\n    const { component, loading, sources, notAccessible, sourceRemoved } = this.state;\n\n    if (loading) {\n      return null;\n    }\n\n    if (this.state.notExist) {\n      return (\n        <Alert className=\"spacer-top\" variant=\"warning\">\n          {translate('component_viewer.no_component')}\n        </Alert>\n      );\n    }\n\n    if (notAccessible) {\n      return (\n        <Alert className=\"spacer-top\" variant=\"warning\">\n          {translate('code_viewer.no_source_code_displayed_due_to_security')}\n        </Alert>\n      );\n    }\n\n    if (!component) {\n      return null;\n    }\n\n    return (\n      <SourceViewerContext.Provider value={{ branchLike: this.props.branchLike, file: component }}>\n        <div className=\"source-viewer\" ref={node => (this.node = node)}>\n          {this.renderHeader(this.props.branchLike, component)}\n          {sourceRemoved && (\n            <Alert className=\"spacer-top\" variant=\"warning\">\n              {translate('code_viewer.no_source_code_displayed_due_to_source_removed')}\n            </Alert>\n          )}\n          {!sourceRemoved && sources !== undefined && this.renderCode(sources)}\n        </div>\n      </SourceViewerContext.Provider>\n    );\n  }\n}\n\nfunction defaultLoadComponent(\n  component: string,\n  branchLike: BranchLike | undefined\n): Promise<T.SourceViewerFile> {\n  return Promise.all([\n    getComponentForSourceViewer({ component, ...getBranchLikeQuery(branchLike) }),\n    getComponentData({ component, ...getBranchLikeQuery(branchLike) })\n  ]).then(([sourceViewerComponent, { component }]) => ({\n    ...sourceViewerComponent,\n    leakPeriodDate: component.leakPeriodDate\n  }));\n}\n\nfunction defaultLoadSources(\n  key: string,\n  from: number | undefined,\n  to: number | undefined,\n  branchLike: BranchLike | undefined\n) {\n  return getSources({ key, from, to, ...getBranchLikeQuery(branchLike) });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { groupBy, sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport QualifierIcon from '../../../components/icons/QualifierIcon';\nimport { Alert } from '../../../components/ui/Alert';\nimport { isPullRequest } from '../../../helpers/branch-like';\nimport { translate } from '../../../helpers/l10n';\nimport { collapsedDirFromPath, fileFromPath } from '../../../helpers/path';\nimport { getProjectUrl } from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\nimport { WorkspaceContextShape } from '../../workspace/context';\n\ninterface Props {\n  blocks: T.DuplicationBlock[];\n  branchLike: BranchLike | undefined;\n  duplicatedFiles?: T.Dict<T.DuplicatedFile>;\n  inRemovedComponent: boolean;\n  openComponent: WorkspaceContextShape['openComponent'];\n  sourceViewerFile: T.SourceViewerFile;\n}\n\nexport default class DuplicationPopup extends React.PureComponent<Props> {\n  shouldLink() {\n    const { branchLike } = this.props;\n    return !isPullRequest(branchLike);\n  }\n\n  isDifferentComponent = (\n    a: { project: string; subProject?: string },\n    b: { project: string; subProject?: string }\n  ) => {\n    return Boolean(a && b && (a.project !== b.project || a.subProject !== b.subProject));\n  };\n\n  handleFileClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    const { key, line } = event.currentTarget.dataset;\n    if (this.shouldLink() && key) {\n      this.props.openComponent({\n        branchLike: this.props.branchLike,\n        key,\n        line: line ? Number(line) : undefined\n      });\n    }\n  };\n\n  renderDuplication(file: T.DuplicatedFile, children: React.ReactNode, line?: number) {\n    return this.shouldLink() ? (\n      <a\n        data-key={file.key}\n        data-line={line}\n        href=\"#\"\n        onClick={this.handleFileClick}\n        title={file.name}>\n        {children}\n      </a>\n    ) : (\n      children\n    );\n  }\n\n  render() {\n    const { duplicatedFiles = {}, sourceViewerFile } = this.props;\n\n    const groupedBlocks = groupBy(this.props.blocks, '_ref');\n    let duplications = Object.keys(groupedBlocks).map(fileRef => {\n      return {\n        blocks: groupedBlocks[fileRef],\n        file: duplicatedFiles[fileRef]\n      };\n    });\n\n    // first duplications in the same file\n    // then duplications in the same sub-project\n    // then duplications in the same project\n    // then duplications in other projects\n    duplications = sortBy(\n      duplications,\n      d => d.file.projectName !== sourceViewerFile.projectName,\n      d => d.file.subProjectName !== sourceViewerFile.subProjectName,\n      d => d.file.key !== sourceViewerFile.key\n    );\n\n    return (\n      <div className=\"source-viewer-bubble-popup abs-width-400\">\n        {this.props.inRemovedComponent && (\n          <Alert variant=\"warning\">\n            {translate('duplications.dups_found_on_deleted_resource')}\n          </Alert>\n        )}\n        {duplications.length > 0 && (\n          <>\n            <h6 className=\"spacer-bottom\">\n              {translate('component_viewer.transition.duplication')}\n            </h6>\n            {duplications.map(duplication => (\n              <div className=\"spacer-top text-ellipsis\" key={duplication.file.key}>\n                <div className=\"component-name\">\n                  {this.isDifferentComponent(duplication.file, this.props.sourceViewerFile) && (\n                    <>\n                      <div className=\"component-name-parent\">\n                        <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n                        <Link to={getProjectUrl(duplication.file.project)}>\n                          {duplication.file.projectName}\n                        </Link>\n                      </div>\n                      {duplication.file.subProject && duplication.file.subProjectName && (\n                        <div className=\"component-name-parent\">\n                          <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n                          {duplication.file.subProjectName}\n                        </div>\n                      )}\n                    </>\n                  )}\n\n                  {duplication.file.key !== this.props.sourceViewerFile.key && (\n                    <div className=\"component-name-path\">\n                      {this.renderDuplication(\n                        duplication.file,\n                        <>\n                          <span>{collapsedDirFromPath(duplication.file.name)}</span>\n                          <span className=\"component-name-file\">\n                            {fileFromPath(duplication.file.name)}\n                          </span>\n                        </>\n                      )}\n                    </div>\n                  )}\n\n                  <div className=\"component-name-path\">\n                    {'Lines: '}\n                    {duplication.blocks.map((block, index) => (\n                      <React.Fragment key={index}>\n                        {this.renderDuplication(\n                          duplication.file,\n                          <>\n                            {block.from}\n                            {'  '}\n                            {block.from + block.size - 1}\n                          </>,\n                          block.from\n                        )}\n                        {index < duplication.blocks.length - 1 && ', '}\n                      </React.Fragment>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// TODO Test this function, but I don't get the logic behind it\nexport function filterDuplicationBlocksByLine(blocks: T.DuplicationBlock[], line: number) {\n  /* eslint-disable no-underscore-dangle */\n  let foundOne = false;\n  return blocks.filter(b => {\n    const outOfBounds = b.from > line || b.from + b.size < line;\n    const currentFile = b._ref === '1';\n    const shouldDisplayForCurrentFile = outOfBounds || foundOne;\n    const shouldDisplay = !currentFile || shouldDisplayForCurrentFile;\n    const isOk = b._ref !== undefined && shouldDisplay;\n    if (b._ref === '1' && !outOfBounds) {\n      foundOne = true;\n    }\n    return isOk;\n  });\n  /* eslint-enable no-underscore-dangle */\n}\n\nexport function getDuplicationBlocksForIndex(\n  duplications: T.Duplication[] | undefined,\n  index: number\n) {\n  return (duplications && duplications[index] && duplications[index].blocks) || [];\n}\n\nexport function isDuplicationBlockInRemovedComponent(blocks: T.DuplicationBlock[]) {\n  return blocks.some(b => b._ref === undefined); // eslint-disable-line no-underscore-dangle\n}\n"],"sourceRoot":""}