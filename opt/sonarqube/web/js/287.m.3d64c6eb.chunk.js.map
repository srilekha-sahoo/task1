{"version":3,"sources":["webpack:///./src/main/js/apps/projectBaseline/styles.css?25cb","webpack:///./src/main/js/apps/projectBaseline/styles.css","webpack:///./src/main/js/apps/projectBaseline/components/AppHeader.tsx","webpack:///./src/main/js/apps/projectBaseline/components/BaselineSettingAnalysis.tsx","webpack:///./src/main/js/apps/projectBaseline/components/BaselineSettingReferenceBranch.tsx","webpack:///./src/main/js/apps/projectBaseline/components/BranchAnalysisListRenderer.tsx","webpack:///./src/main/js/apps/projectBaseline/components/BranchAnalysisList.tsx","webpack:///./src/main/js/apps/projectBaseline/components/BranchBaselineSettingModal.tsx","webpack:///./src/main/js/apps/projectBaseline/components/BranchListRow.tsx","webpack:///./src/main/js/apps/projectBaseline/components/BranchList.tsx","webpack:///./src/main/js/apps/projectBaseline/components/ProjectBaselineSelector.tsx","webpack:///./src/main/js/apps/projectBaseline/components/App.tsx","webpack:///./src/main/js/apps/projectBaseline/components/AppContainer.ts","webpack:///./src/main/js/components/controls/HelpTooltip.tsx","webpack:///./src/main/js/components/controls/Select.tsx","webpack:///./src/main/js/components/controls/SimpleModal.tsx","webpack:///./src/main/js/components/icons/CopyIcon.tsx","webpack:///./src/main/js/components/controls/clipboard.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/components/ui/MandatoryFieldMarker.tsx","webpack:///./src/main/js/components/intl/DateTimeFormatter.tsx","webpack:///./src/main/js/components/ui/MandatoryFieldsExplanation.tsx","webpack:///./src/main/js/components/controls/HelpTooltip.css?96bd","webpack:///./src/main/js/components/controls/HelpTooltip.css","webpack:///./src/main/js/components/controls/Select.css?5002","webpack:///./src/main/js/components/controls/Select.css","webpack:///./src/main/js/components/controls/ConfirmModal.tsx","webpack:///./src/main/js/components/intl/DateFormatter.tsx","webpack:///./src/main/js/components/ui/Level.tsx","webpack:///./src/main/js/components/controls/Radio.tsx","webpack:///./src/main/js/components/icons/SettingsIcon.tsx","webpack:///./src/main/js/components/controls/ActionsDropdown.tsx","webpack:///./src/main/js/components/controls/Radio.css?16b3","webpack:///./src/main/js/components/controls/Radio.css","webpack:///./src/main/js/components/icons/BranchIcon.tsx","webpack:///./src/main/js/components/ui/Level.css?03ac","webpack:///./src/main/js/components/ui/Level.css","webpack:///./src/main/js/components/activity-graph/utils.ts","webpack:///./src/main/js/types/project-activity.ts","webpack:///./src/main/js/components/icons/PullRequestIcon.tsx","webpack:///./src/main/js/components/controls/ValidationInput.tsx","webpack:///./src/main/js/components/intl/TimeFormatter.tsx","webpack:///./src/main/js/components/icons/BranchLikeIcon.tsx","webpack:///./src/main/js/app/components/ComponentContext.tsx","webpack:///./src/main/js/components/controls/SearchSelect.tsx","webpack:///./src/main/js/components/icons/RecommendedIcon.tsx","webpack:///./src/main/js/components/controls/RadioCard.tsx","webpack:///./src/main/js/apps/projectActivity/components/EventInner.tsx","webpack:///./src/main/js/apps/projectActivity/components/DefinitionChangeEventInner.tsx","webpack:///./src/main/js/apps/projectActivity/components/RichQualityGateEventInner.tsx","webpack:///./src/main/js/apps/projectActivity/utils.ts","webpack:///./src/main/js/api/projectActivity.ts","webpack:///./src/main/js/api/newCodePeriod.ts","webpack:///./src/main/js/apps/projectBaseline/utils.ts","webpack:///./src/main/js/apps/projectBaseline/components/BaselineSettingDays.tsx","webpack:///./src/main/js/apps/projectBaseline/components/BaselineSettingPreviousVersion.tsx","webpack:///./src/main/js/components/controls/RadioCard.css?3dc8","webpack:///./src/main/js/components/controls/RadioCard.css","webpack:///./src/main/js/components/icons/WarningIcon.tsx","webpack:///./src/main/js/apps/projectActivity/components/forms/ChangeEventForm.tsx","webpack:///./src/main/js/apps/projectActivity/components/forms/RemoveEventForm.tsx","webpack:///./src/main/js/apps/projectActivity/components/Event.tsx","webpack:///./src/main/js/apps/projectActivity/components/Events.tsx"],"names":["api","content","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push","AppHeader","props","canAdmin","className","defaultMessage","id","values","link","to","BaselineSettingAnalysis","disabled","onSelect","selected","RadioCard","onClick","title","renderBranchOption","option","isInvalid","Tooltip","overlay","value","AlertErrorIcon","undefined","isMain","BaselineSettingReferenceBranch","branchList","referenceBranch","settingLevel","currentBranch","find","b","MandatoryFieldsExplanation","htmlFor","MandatoryFieldMarker","SearchSelect","autofocus","defaultOptions","minimumQueryLength","onSearch","q","Promise","resolve","filter","includes","onChangeReferenceBranch","renderOption","BranchAnalysisListRenderer","analyses","loading","range","selectedAnalysisKey","byVersionByDay","category","hasFilteredData","length","Object","keys","byDay","Select","autoBlur","clearable","onChange","handleRangeChange","label","searchable","onScroll","handleScroll","ref","registerScrollableNode","DeferredSpinner","map","version","idx","days","key","first","sticky","shouldStick","registerBadgeNode","mouseEnterDelay","day","Number","DateFormatter","date","long","analysis","args","isFirst","onSelectAnalysis","valueOf","TimeFormatter","formattedTime","dateTime","toISOString","events","Events","analysisKey","Radio","checked","onCheck","renderAnalysis","super","mounted","badges","state","scroll","e","currentTarget","this","updateScroll","scrollTop","setState","el","getAttribute","setAttribute","String","offsetTop","badge","fetchAnalyses","selectedNode","document","querySelector","scrollableNode","parent","bottomOffset","initial","branch","component","project","from","Date","then","result","a","scrollToSelected","branchToOption","name","handleSubmit","preventDefault","analysisDate","type","saving","onClose","effectiveValue","requestClose","handleSelectAnalysis","handleSelectDays","handleSelectReferenceBranch","handleSelectSetting","otherBranches","defaultBranch","getValueFromProps","newCodePeriod","header","currentSetting","currentSettingValue","isChanged","isValid","Modal","contentLabel","onRequestClose","size","onSubmit","role","BaselineSettingPreviousVersion","isDefault","BaselineSettingDays","onChangeDays","BranchListRow","existingBranches","inheritedSetting","settingWarning","branchInheritsItselfAsReference","referenceBranchDoesNotExist","BranchLikeIcon","branchLike","WarningIcon","DateTimeFormatter","renderNewCodePeriodSetting","ActionsDropdown","onOpenEditModal","onResetToDefault","branches","updateBranchNewCodePeriod","newSetting","updated","slice","openEditModal","editedBranch","closeEditModal","resetToDefault","fetchBranches","branchLikes","branchSettings","newCodePeriods","ncp","inherited","branchesWithBaseline","branchKey","ProjectBaselineSelector","branchesEnabled","generalSetting","overrideGeneralSetting","onToggleSpecificSetting","setting","description","renderGeneralSetting","onSelectSetting","onSelectDays","onSelectReferenceBranch","invisible","Alert","variant","onCancel","DEFAULT_GENERAL_SETTING","resetSuccess","success","resetSetting","handleCancel","getUpdatedState","handleToggleSpecificSetting","fetchLeakPeriodSetting","sortAndFilterBranches","prevProps","params","defaultDays","Boolean","all","Suggestions","suggestions","AlertSuccessIcon","HelpTooltip","mouseLeaveDelay","onShow","placement","children","fill","gray71","ReactSelectLib","ReactSelect","ReactCreatable","lib","Creatable","Async","renderInput","iconProps","innerRef","clearRenderer","SimpleModal","submitting","stopSubmitting","handleCloseClick","event","blur","handleFormSubmit","submit","handleSubmitClick","modalProps","onCloseClick","onFormSubmit","onSubmitClick","CopyIcon","Icon","fillRule","d","copySuccess","setCopyButton","node","copyButton","handleSuccessCopy","setTimeout","clipboard","on","destroy","ClipboardButton","copyValue","visible","ClipboardIconButton","tooltip","tooltipProps","Consumer","addSuggestions","removeSuggestions","SuggestionsInner","formatterOption","year","month","hour","minute","star","ConfirmModal","onConfirm","confirmData","renderModalContent","confirmButtonText","confirmDisable","headerDescription","isDestructive","cancelButtonText","autoFocus","noBackdrop","longFormatterOption","Level","formatted","level","small","muted","handleClick","href","SettingsIcon","viewBox","transform","style","overlayPlacement","toggleClassName","Dropdown","onOpen","DropdownIcon","destructive","download","ActionsDropdownDivider","BranchIcon","blue","DEFAULT_GRAPH","issues","GRAPHS_METRICS_DISPLAYED","bugs","code_smells","vulnerabilities","coverage","lines_to_cover","uncovered_lines","duplications","ncloc","duplicated_lines","GRAPHS_METRICS","concat","reliability_rating","security_rating","sqale_rating","duplicated_lines_density","isCustomGraph","graph","custom","getGraphTypes","ignoreCustom","graphs","hasDataValues","serie","data","some","point","y","hasHistoryData","series","getSeriesMetricType","getDisplayedHistoryMetrics","customMetrics","getHistoryMetrics","splitSeriesInGraphs","maxGraph","maxSeries","generateSeries","measuresHistory","metrics","displayedMetrics","measure","indexOf","metric","uncoveredLines","linesToCover","history","x","translatedName","generateCoveredLinesMetric","Array","isArray","findMetric","saveActivityGraph","namespace","join","getActivityGraph","customGraphs","split","GraphType","PullRequestIcon","ValidationInput","hasError","error","required","help","second","ComponentContext","handleSearch","query","currentQuery","handleChange","onMultiSelect","handleInputChange","handleFilterOption","resetOnBlur","Component","canCreate","escapeClearsValue","filterOption","isLoading","multi","noResultsText","onBlurResetsInput","onInputChange","optionRenderer","placeholder","promptTextCreator","valueRenderer","RecommendedIcon","recommended","titleInfo","vertical","isActionable","tabIndex","EventInner","readonly","isDefinitionChangeEvent","definitionChange","DefinitionChangeEventInner","expanded","stopPropagation","toggleProjectsList","renderProjectLink","renderBranch","mainBranch","changeType","message","newBranch","oldBranch","turned","projects","renderProjectChange","isRichQualityGateEvent","qualityGate","RichQualityGateEventInner","stillFailing","status","failing","EVENT_TYPES","APPLICATION_EVENT_TYPES","activityQueryChanged","prevQuery","nextQuery","datesQueryChanged","customMetricsChanged","historyQueryChanged","getAnalysesByVersionByDay","reduce","acc","currentVersion","versionEvent","newVersion","getTime","toString","matchFilters","isAfterFrom","isBeforeTo","hasSelectedCategoryEvents","parseQuery","urlQuery","parseGraph","selectedDate","serializeQuery","serializeUrlQuery","custom_metrics","selected_date","getProjectActivity","catch","createEvent","r","deleteEvent","changeEvent","deleteAnalysis","getNewCodePeriod","setNewCodePeriod","resetNewCodePeriod","listBranchesNewCodePeriod","validateDays","parsed","parseInt","isNaN","getSettingValue","validateSetting","warningIconColor","changeInput","target","RemoveEventForm","removeEventQuestion","changing","setChanging","deleting","setDeleting","isOther","isVersion","canChange","canDelete","onDelete","showActions","sortedEvents"],"mappings":"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","file":"js/287.m.3d64c6eb.chunk.js","sourcesContent":["var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".project-baseline{padding:32px}.project-baseline-setting{display:flex;flex-direction:column;max-height:60vh;padding-top:2px}.project-baseline-selector .general-setting{margin-left:7px}.branch-baseline-selector>hr{margin:0 -32px 32px}.branch-baseline-setting-modal{min-height:450px;display:flex;flex-direction:column}.branch-analysis-list-wrapper{display:flex;flex-direction:column;overflow:hidden;position:relative;min-height:200px}.branch-analysis-list{overflow-y:auto;padding-left:12px;padding-right:15px;min-height:50px}.branch-analysis-list>ul{padding-top:18px}.branch-analysis-date{margin-bottom:16px;font-size:15px;font-weight:700}.branch-analysis-day{margin-top:8px;margin-bottom:24px}.branch-analysis{display:flex;justify-content:space-between;cursor:pointer;padding:8px;border-top:1px solid #e6e6e6;border-bottom:1px solid #e6e6e6}.branch-analysis+.branch-analysis{border-top:none}.branch-analysis:hover{background-color:#cae3f2}.branch-analysis>.project-activity-events{flex:1 0 50%}.branch-analysis-time{width:150px}.branch-analysis-version-badge{margin-left:-12px;padding-top:8px;padding-bottom:8px;background-color:#fff}.branch-analysis-version-badge.sticky+.branch-analysis-days-list{padding-top:36px}.branch-analysis-version-badge.first,.branch-analysis-version-badge.sticky{position:absolute;top:1px;left:13px;right:16px;padding-top:24px;z-index:1}.branch-analysis-version-badge .badge{max-width:385px;border-radius:0 2px 2px 0;font-weight:700;font-size:12px;letter-spacing:0;overflow:hidden;text-overflow:ellipsis}.branch-setting-warning{background-color:#fcf8e3!important}.project-activity-event-icon.VERSION{color:#4b9fd5}.project-activity-event-icon.QUALITY_GATE{color:#9139d4}.project-activity-event-icon.QUALITY_PROFILE{color:#ccc}.project-activity-event-icon.DEFINITION_CHANGE{color:#33a759}.project-activity-event-icon.OTHER{color:#442d1b}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { translate } from '../../../helpers/l10n';\n\nexport interface AppHeaderProps {\n  canAdmin: boolean;\n}\n\nexport default function AppHeader(props: AppHeaderProps) {\n  const { canAdmin } = props;\n\n  return (\n    <header className=\"page-header\">\n      <h1 className=\"page-title\">{translate('project_baseline.page')}</h1>\n      <p className=\"page-description\">\n        <FormattedMessage\n          defaultMessage={translate('project_baseline.page.description')}\n          id=\"project_baseline.page.description\"\n          values={{\n            link: (\n              <Link to=\"/documentation/project-administration/new-code-period/\">\n                {translate('project_baseline.page.description.link')}\n              </Link>\n            )\n          }}\n        />\n        <br />\n        {canAdmin && (\n          <FormattedMessage\n            defaultMessage={translate('project_baseline.page.description2')}\n            id=\"project_baseline.page.description2\"\n            values={{\n              link: (\n                <Link to=\"/admin/settings?category=new_code_period\">\n                  {translate('project_baseline.page.description2.link')}\n                </Link>\n              )\n            }}\n          />\n        )}\n      </p>\n    </header>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport RadioCard from '../../../components/controls/RadioCard';\nimport { translate } from '../../../helpers/l10n';\n\nexport interface Props {\n  disabled?: boolean;\n  onSelect: (selection: T.NewCodePeriodSettingType) => void;\n  selected: boolean;\n}\n\nexport default function BaselineSettingAnalysis({ disabled, onSelect, selected }: Props) {\n  return (\n    <RadioCard\n      disabled={disabled}\n      onClick={() => onSelect('SPECIFIC_ANALYSIS')}\n      selected={selected}\n      title={translate('baseline.specific_analysis')}>\n      <p className=\"big-spacer-bottom\">{translate('baseline.specific_analysis.description')}</p>\n    </RadioCard>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport RadioCard from '../../../components/controls/RadioCard';\nimport SearchSelect from '../../../components/controls/SearchSelect';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport AlertErrorIcon from '../../../components/icons/AlertErrorIcon';\nimport MandatoryFieldMarker from '../../../components/ui/MandatoryFieldMarker';\nimport MandatoryFieldsExplanation from '../../../components/ui/MandatoryFieldsExplanation';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\nexport interface BaselineSettingReferenceBranchProps {\n  branchList: BranchOption[];\n  className?: string;\n  configuredBranchName?: string;\n  disabled?: boolean;\n  onChangeReferenceBranch: (value: string) => void;\n  onSelect: (selection: T.NewCodePeriodSettingType) => void;\n  referenceBranch: string;\n  selected: boolean;\n  settingLevel: 'project' | 'branch';\n}\n\nexport interface BranchOption {\n  disabled?: boolean;\n  isInvalid?: boolean;\n  isMain: boolean;\n  value: string;\n}\n\nfunction renderBranchOption(option: BranchOption) {\n  return option.isInvalid ? (\n    <Tooltip\n      overlay={translateWithParameters('baseline.reference_branch.does_not_exist', option.value)}>\n      <span>\n        {option.value} <AlertErrorIcon />\n      </span>\n    </Tooltip>\n  ) : (\n    <>\n      <span\n        title={\n          option.disabled ? translate('baseline.reference_branch.cannot_be_itself') : undefined\n        }>\n        {option.value}\n      </span>\n      {option.isMain && (\n        <div className=\"badge spacer-left\">{translate('branches.main_branch')}</div>\n      )}\n    </>\n  );\n}\n\nexport default function BaselineSettingReferenceBranch(props: BaselineSettingReferenceBranchProps) {\n  const { branchList, className, disabled, referenceBranch, selected, settingLevel } = props;\n\n  const currentBranch = branchList.find(b => b.value === referenceBranch) || {\n    value: referenceBranch,\n    isMain: false,\n    isInvalid: true\n  };\n\n  return (\n    <RadioCard\n      className={className}\n      disabled={disabled}\n      onClick={() => props.onSelect('REFERENCE_BRANCH')}\n      selected={selected}\n      title={translate('baseline.reference_branch')}>\n      <>\n        <p>{translate('baseline.reference_branch.description')}</p>\n        {selected && (\n          <>\n            {settingLevel === 'project' && (\n              <p className=\"spacer-top\">{translate('baseline.reference_branch.description2')}</p>\n            )}\n            <div className=\"big-spacer-top display-flex-column\">\n              <MandatoryFieldsExplanation className=\"spacer-bottom\" />\n              <label className=\"text-middle\" htmlFor=\"reference_branch\">\n                <strong>{translate('baseline.reference_branch.choose')}</strong>\n                <MandatoryFieldMarker />\n              </label>\n              <SearchSelect<BranchOption>\n                autofocus={false}\n                className=\"little-spacer-top spacer-bottom\"\n                defaultOptions={branchList}\n                minimumQueryLength={1}\n                onSearch={q => Promise.resolve(branchList.filter(b => b.value.includes(q)))}\n                onSelect={option => props.onChangeReferenceBranch(option.value)}\n                renderOption={renderBranchOption}\n                value={currentBranch}\n              />\n            </div>\n          </>\n        )}\n      </>\n    </RadioCard>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Radio from '../../../components/controls/Radio';\nimport Select from '../../../components/controls/Select';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport DateFormatter from '../../../components/intl/DateFormatter';\nimport TimeFormatter from '../../../components/intl/TimeFormatter';\nimport DeferredSpinner from '../../../components/ui/DeferredSpinner';\nimport { parseDate, toShortNotSoISOString } from '../../../helpers/dates';\nimport { translate } from '../../../helpers/l10n';\nimport Events from '../../projectActivity/components/Events';\nimport { getAnalysesByVersionByDay } from '../../projectActivity/utils';\n\nexport interface BranchAnalysisListRendererProps {\n  analyses: T.ParsedAnalysis[];\n  handleRangeChange: ({ value }: { value: number }) => void;\n  handleScroll: (e: React.SyntheticEvent<HTMLDivElement>) => void;\n  loading: boolean;\n  onSelectAnalysis: (analysis: T.ParsedAnalysis) => void;\n  range: number;\n  registerBadgeNode: (version: string) => (el: HTMLDivElement) => void;\n  registerScrollableNode: (el: HTMLDivElement) => void;\n  selectedAnalysisKey: string;\n  shouldStick: (version: string) => boolean;\n}\n\nfunction renderAnalysis(args: {\n  analysis: T.ParsedAnalysis;\n  isFirst: boolean;\n  onSelectAnalysis: (analysis: T.ParsedAnalysis) => void;\n  selectedAnalysisKey: string;\n}) {\n  const { analysis, isFirst, onSelectAnalysis, selectedAnalysisKey } = args;\n  return (\n    <li\n      className={classNames('branch-analysis', {\n        selected: analysis.key === selectedAnalysisKey\n      })}\n      data-date={parseDate(analysis.date).valueOf()}\n      key={analysis.key}\n      onClick={() => onSelectAnalysis(analysis)}>\n      <div className=\"branch-analysis-time spacer-right\">\n        <TimeFormatter date={parseDate(analysis.date)} long={false}>\n          {formattedTime => (\n            <time className=\"text-middle\" dateTime={parseDate(analysis.date).toISOString()}>\n              {formattedTime}\n            </time>\n          )}\n        </TimeFormatter>\n      </div>\n\n      {analysis.events.length > 0 && (\n        <Events analysisKey={analysis.key} events={analysis.events} isFirst={isFirst} />\n      )}\n\n      <div className=\"analysis-selection-button\">\n        <Radio checked={analysis.key === selectedAnalysisKey} onCheck={() => {}} value=\"\" />\n      </div>\n    </li>\n  );\n}\n\nexport default function BranchAnalysisListRenderer(props: BranchAnalysisListRendererProps) {\n  const { analyses, loading, range, selectedAnalysisKey } = props;\n\n  const byVersionByDay = React.useMemo(\n    () =>\n      getAnalysesByVersionByDay(analyses, {\n        category: ''\n      }),\n    [analyses]\n  );\n\n  const hasFilteredData =\n    byVersionByDay.length > 1 ||\n    (byVersionByDay.length === 1 && Object.keys(byVersionByDay[0].byDay).length > 0);\n\n  return (\n    <>\n      <div className=\"spacer-bottom\">\n        {translate('baseline.analysis_from')}\n        <Select\n          autoBlur={true}\n          className=\"input-medium spacer-left\"\n          clearable={false}\n          onChange={props.handleRangeChange}\n          options={[\n            {\n              label: translate('baseline.branch_analyses.ranges.30days'),\n              value: 30\n            },\n            {\n              label: translate('baseline.branch_analyses.ranges.allTime'),\n              value: 0\n            }\n          ]}\n          searchable={false}\n          value={range}\n        />\n      </div>\n      <div className=\"branch-analysis-list-wrapper\">\n        <div\n          className=\"bordered branch-analysis-list\"\n          onScroll={props.handleScroll}\n          ref={props.registerScrollableNode}>\n          {loading && <DeferredSpinner className=\"big-spacer-top\" />}\n\n          {!loading && !hasFilteredData ? (\n            <div className=\"big-spacer-top big-spacer-bottom strong\">\n              {translate('baseline.no_analyses')}\n            </div>\n          ) : (\n            <ul>\n              {byVersionByDay.map((version, idx) => {\n                const days = Object.keys(version.byDay);\n                if (days.length <= 0) {\n                  return null;\n                }\n                return (\n                  <li key={version.key || 'noversion'}>\n                    {version.version && (\n                      <div\n                        className={classNames('branch-analysis-version-badge', {\n                          first: idx === 0,\n                          sticky: props.shouldStick(version.version)\n                        })}\n                        ref={props.registerBadgeNode(version.version)}>\n                        <Tooltip\n                          mouseEnterDelay={0.5}\n                          overlay={`${translate('version')} ${version.version}`}>\n                          <span className=\"badge\">{version.version}</span>\n                        </Tooltip>\n                      </div>\n                    )}\n                    <ul className=\"branch-analysis-days-list\">\n                      {days.map(day => (\n                        <li\n                          className=\"branch-analysis-day\"\n                          data-day={toShortNotSoISOString(Number(day))}\n                          key={day}>\n                          <div className=\"branch-analysis-date\">\n                            <DateFormatter date={Number(day)} long={true} />\n                          </div>\n                          <ul className=\"branch-analysis-analyses-list\">\n                            {version.byDay[day] != null &&\n                              version.byDay[day].map(analysis =>\n                                renderAnalysis({\n                                  analysis,\n                                  selectedAnalysisKey,\n                                  isFirst: analyses[0].key === analysis.key,\n                                  onSelectAnalysis: props.onSelectAnalysis\n                                })\n                              )}\n                          </ul>\n                        </li>\n                      ))}\n                    </ul>\n                  </li>\n                );\n              })}\n            </ul>\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { subDays } from 'date-fns';\nimport { throttle } from 'lodash';\nimport * as React from 'react';\nimport { getProjectActivity } from '../../../api/projectActivity';\nimport { parseDate, toShortNotSoISOString } from '../../../helpers/dates';\nimport { scrollToElement } from '../../../helpers/scrolling';\nimport BranchAnalysisListRenderer from './BranchAnalysisListRenderer';\n\ninterface Props {\n  analysis: string;\n  branch: string;\n  component: string;\n  onSelectAnalysis: (analysis: T.ParsedAnalysis) => void;\n}\n\ninterface State {\n  analyses: T.ParsedAnalysis[];\n  loading: boolean;\n  range: number;\n  scroll: number;\n}\n\nconst STICKY_BADGE_SCROLL_OFFSET = 10;\n\nexport default class BranchAnalysisList extends React.PureComponent<Props, State> {\n  mounted = false;\n  badges: T.Dict<HTMLDivElement> = {};\n  scrollableNode?: HTMLDivElement;\n  state: State = {\n    analyses: [],\n    loading: true,\n    range: 30,\n    scroll: 0\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.updateScroll = throttle(this.updateScroll, 20);\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchAnalyses(true);\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  scrollToSelected() {\n    const selectedNode = document.querySelector('.branch-analysis.selected');\n    if (this.scrollableNode && selectedNode) {\n      scrollToElement(selectedNode, { parent: this.scrollableNode, bottomOffset: 40 });\n    }\n  }\n\n  fetchAnalyses(initial = false) {\n    const { analysis, branch, component } = this.props;\n    const { range } = this.state;\n    this.setState({ loading: true });\n\n    return getProjectActivity({\n      branch,\n      project: component,\n      from: range ? toShortNotSoISOString(subDays(new Date(), range)) : undefined\n    }).then((result: { analyses: T.Analysis[] }) => {\n      // If the selected analysis wasn't found in the default 30 days range, redo the search\n      if (initial && analysis && !result.analyses.find(a => a.key === analysis)) {\n        this.handleRangeChange({ value: 0 });\n        return;\n      }\n\n      this.setState(\n        {\n          analyses: result.analyses.map(analysis => ({\n            ...analysis,\n            date: parseDate(analysis.date)\n          })) as T.ParsedAnalysis[],\n          loading: false\n        },\n        () => {\n          this.scrollToSelected();\n        }\n      );\n    });\n  }\n\n  handleScroll = (e: React.SyntheticEvent<HTMLDivElement>) => {\n    if (e.currentTarget) {\n      this.updateScroll(e.currentTarget.scrollTop);\n    }\n  };\n\n  updateScroll = (scroll: number) => {\n    this.setState({ scroll });\n  };\n\n  registerBadgeNode = (version: string) => (el: HTMLDivElement) => {\n    if (el) {\n      if (!el.getAttribute('originOffsetTop')) {\n        el.setAttribute('originOffsetTop', String(el.offsetTop));\n      }\n      this.badges[version] = el;\n    }\n  };\n\n  shouldStick = (version: string) => {\n    const badge = this.badges[version];\n    return (\n      !!badge &&\n      Number(badge.getAttribute('originOffsetTop')) < this.state.scroll + STICKY_BADGE_SCROLL_OFFSET\n    );\n  };\n\n  handleRangeChange = ({ value }: { value: number }) => {\n    this.setState({ range: value }, () => this.fetchAnalyses());\n  };\n\n  render() {\n    const { analysis, onSelectAnalysis } = this.props;\n    const { analyses, loading, range } = this.state;\n\n    return (\n      <BranchAnalysisListRenderer\n        analyses={analyses}\n        handleRangeChange={this.handleRangeChange}\n        handleScroll={this.handleScroll}\n        loading={loading}\n        onSelectAnalysis={onSelectAnalysis}\n        range={range}\n        registerBadgeNode={this.registerBadgeNode}\n        registerScrollableNode={el => {\n          this.scrollableNode = el;\n        }}\n        selectedAnalysisKey={analysis}\n        shouldStick={this.shouldStick}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { setNewCodePeriod } from '../../../api/newCodePeriod';\nimport { ResetButtonLink, SubmitButton } from '../../../components/controls/buttons';\nimport Modal from '../../../components/controls/Modal';\nimport DeferredSpinner from '../../../components/ui/DeferredSpinner';\nimport { toNotSoISOString } from '../../../helpers/dates';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { Branch, BranchWithNewCodePeriod } from '../../../types/branch-like';\nimport { getSettingValue, validateSetting } from '../utils';\nimport BaselineSettingAnalysis from './BaselineSettingAnalysis';\nimport BaselineSettingDays from './BaselineSettingDays';\nimport BaselineSettingPreviousVersion from './BaselineSettingPreviousVersion';\nimport BaselineSettingReferenceBranch from './BaselineSettingReferenceBranch';\nimport BranchAnalysisList from './BranchAnalysisList';\n\ninterface Props {\n  branch: BranchWithNewCodePeriod;\n  branchList: Branch[];\n  component: string;\n  onClose: (branch?: string, newSetting?: T.NewCodePeriod) => void;\n}\n\ninterface State {\n  analysis: string;\n  analysisDate?: Date;\n  days: string;\n  referenceBranch: string;\n  saving: boolean;\n  selected?: T.NewCodePeriodSettingType;\n}\n\nexport default class BranchBaselineSettingModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    const otherBranches = props.branchList.filter(b => b.name !== props.branch.name);\n    const defaultBranch = otherBranches.length > 0 ? otherBranches[0].name : '';\n\n    this.state = {\n      analysis: this.getValueFromProps('SPECIFIC_ANALYSIS') || '',\n      days: this.getValueFromProps('NUMBER_OF_DAYS') || '30',\n      referenceBranch: this.getValueFromProps('REFERENCE_BRANCH') || defaultBranch,\n      saving: false,\n      selected: this.props.branch.newCodePeriod && this.props.branch.newCodePeriod.type\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  getValueFromProps(type: T.NewCodePeriodSettingType) {\n    return this.props.branch.newCodePeriod && this.props.branch.newCodePeriod.type === type\n      ? this.props.branch.newCodePeriod.value\n      : null;\n  }\n\n  branchToOption = (b: Branch) => ({\n    value: b.name,\n    isMain: b.isMain,\n    disabled: b.name === this.props.branch.name // cannot itself be used as a reference branch\n  });\n\n  handleSubmit = (e: React.SyntheticEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    const { branch, component } = this.props;\n    const { analysis, analysisDate, days, referenceBranch, selected: type } = this.state;\n\n    const value = getSettingValue({ type, analysis, days, referenceBranch });\n\n    if (type) {\n      this.setState({ saving: true });\n      setNewCodePeriod({\n        project: component,\n        type,\n        value,\n        branch: branch.name\n      }).then(\n        () => {\n          this.setState({\n            saving: false\n          });\n          this.props.onClose(branch.name, {\n            type,\n            value,\n            effectiveValue: analysisDate && toNotSoISOString(analysisDate)\n          });\n        },\n        () => {\n          this.setState({\n            saving: false\n          });\n        }\n      );\n    }\n  };\n\n  requestClose = () => this.props.onClose();\n\n  handleSelectAnalysis = (analysis: T.ParsedAnalysis) =>\n    this.setState({ analysis: analysis.key, analysisDate: analysis.date });\n\n  handleSelectDays = (days: string) => this.setState({ days });\n\n  handleSelectReferenceBranch = (referenceBranch: string) => this.setState({ referenceBranch });\n\n  handleSelectSetting = (selected: T.NewCodePeriodSettingType) => this.setState({ selected });\n\n  render() {\n    const { branch, branchList } = this.props;\n    const { analysis, days, referenceBranch, saving, selected } = this.state;\n\n    const header = translateWithParameters('baseline.new_code_period_for_branch_x', branch.name);\n\n    const currentSetting = branch.newCodePeriod && branch.newCodePeriod.type;\n    const currentSettingValue = branch.newCodePeriod && branch.newCodePeriod.value;\n\n    const { isChanged, isValid } = validateSetting({\n      analysis,\n      currentSetting,\n      currentSettingValue,\n      days,\n      referenceBranch,\n      selected\n    });\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.requestClose} size=\"large\">\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"modal-body modal-container branch-baseline-setting-modal\">\n            <div className=\"display-flex-row huge-spacer-bottom\" role=\"radiogroup\">\n              <BaselineSettingPreviousVersion\n                isDefault={false}\n                onSelect={this.handleSelectSetting}\n                selected={selected === 'PREVIOUS_VERSION'}\n              />\n              <BaselineSettingDays\n                days={days}\n                isChanged={isChanged}\n                isValid={isValid}\n                onChangeDays={this.handleSelectDays}\n                onSelect={this.handleSelectSetting}\n                selected={selected === 'NUMBER_OF_DAYS'}\n              />\n              <BaselineSettingAnalysis\n                onSelect={this.handleSelectSetting}\n                selected={selected === 'SPECIFIC_ANALYSIS'}\n              />\n              <BaselineSettingReferenceBranch\n                branchList={branchList.map(this.branchToOption)}\n                onChangeReferenceBranch={this.handleSelectReferenceBranch}\n                onSelect={this.handleSelectSetting}\n                referenceBranch={referenceBranch}\n                selected={selected === 'REFERENCE_BRANCH'}\n                settingLevel=\"branch\"\n              />\n            </div>\n            {selected === 'SPECIFIC_ANALYSIS' && (\n              <BranchAnalysisList\n                analysis={analysis}\n                branch={branch.name}\n                component={this.props.component}\n                onSelectAnalysis={this.handleSelectAnalysis}\n              />\n            )}\n          </div>\n          <footer className=\"modal-foot\">\n            <DeferredSpinner className=\"spacer-right\" loading={saving} />\n            <SubmitButton disabled={!isChanged || saving || !isValid}>\n              {translate('save')}\n            </SubmitButton>\n            <ResetButtonLink onClick={this.props.onClose}>{translate('cancel')}</ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ActionsDropdown, { ActionsDropdownItem } from '../../../components/controls/ActionsDropdown';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport BranchLikeIcon from '../../../components/icons/BranchLikeIcon';\nimport WarningIcon from '../../../components/icons/WarningIcon';\nimport DateTimeFormatter from '../../../components/intl/DateTimeFormatter';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { BranchWithNewCodePeriod } from '../../../types/branch-like';\n\nexport interface BranchListRowProps {\n  branch: BranchWithNewCodePeriod;\n  existingBranches: Array<string>;\n  inheritedSetting: T.NewCodePeriod;\n  onOpenEditModal: (branch: BranchWithNewCodePeriod) => void;\n  onResetToDefault: (branchName: string) => void;\n}\n\nfunction renderNewCodePeriodSetting(newCodePeriod: T.NewCodePeriod) {\n  switch (newCodePeriod.type) {\n    case 'SPECIFIC_ANALYSIS':\n      return (\n        <>\n          {`${translate('baseline.specific_analysis')}: `}\n          {newCodePeriod.effectiveValue ? (\n            <DateTimeFormatter date={newCodePeriod.effectiveValue} />\n          ) : (\n            '?'\n          )}\n        </>\n      );\n    case 'NUMBER_OF_DAYS':\n      return `${translate('baseline.number_days')}: ${newCodePeriod.value}`;\n    case 'PREVIOUS_VERSION':\n      return translate('baseline.previous_version');\n    case 'REFERENCE_BRANCH':\n      return `${translate('baseline.reference_branch')}: ${newCodePeriod.value}`;\n    default:\n      return newCodePeriod.type;\n  }\n}\n\nfunction branchInheritsItselfAsReference(\n  branch: BranchWithNewCodePeriod,\n  inheritedSetting: T.NewCodePeriod\n) {\n  return (\n    !branch.newCodePeriod &&\n    inheritedSetting.type === 'REFERENCE_BRANCH' &&\n    branch.name === inheritedSetting.value\n  );\n}\n\nfunction referenceBranchDoesNotExist(\n  branch: BranchWithNewCodePeriod,\n  existingBranches: Array<string>\n) {\n  return (\n    branch.newCodePeriod &&\n    branch.newCodePeriod.value &&\n    branch.newCodePeriod.type === 'REFERENCE_BRANCH' &&\n    !existingBranches.includes(branch.newCodePeriod.value)\n  );\n}\n\nexport default function BranchListRow(props: BranchListRowProps) {\n  const { branch, existingBranches, inheritedSetting } = props;\n\n  let settingWarning: string | undefined;\n  if (branchInheritsItselfAsReference(branch, inheritedSetting)) {\n    settingWarning = translateWithParameters(\n      'baseline.reference_branch.invalid_branch_setting',\n      branch.name\n    );\n  } else if (referenceBranchDoesNotExist(branch, existingBranches)) {\n    settingWarning = translateWithParameters(\n      'baseline.reference_branch.does_not_exist',\n      branch.newCodePeriod?.value || ''\n    );\n  }\n\n  return (\n    <tr className={settingWarning ? 'branch-setting-warning' : ''}>\n      <td className=\"nowrap\">\n        <BranchLikeIcon branchLike={branch} className=\"little-spacer-right\" />\n        {branch.name}\n        {branch.isMain && (\n          <div className=\"badge spacer-left\">{translate('branches.main_branch')}</div>\n        )}\n      </td>\n      <td className=\"huge-spacer-right nowrap\">\n        <Tooltip overlay={settingWarning}>\n          <span>\n            {settingWarning && <WarningIcon className=\"little-spacer-right\" />}\n            {branch.newCodePeriod\n              ? renderNewCodePeriodSetting(branch.newCodePeriod)\n              : translate('branch_list.default_setting')}\n          </span>\n        </Tooltip>\n      </td>\n      <td className=\"text-right\">\n        <ActionsDropdown>\n          <ActionsDropdownItem onClick={() => props.onOpenEditModal(branch)}>\n            {translate('edit')}\n          </ActionsDropdownItem>\n          {branch.newCodePeriod && (\n            <ActionsDropdownItem onClick={() => props.onResetToDefault(branch.name)}>\n              {translate('reset_to_default')}\n            </ActionsDropdownItem>\n          )}\n        </ActionsDropdown>\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { listBranchesNewCodePeriod, resetNewCodePeriod } from '../../../api/newCodePeriod';\nimport DeferredSpinner from '../../../components/ui/DeferredSpinner';\nimport { isBranch, sortBranches } from '../../../helpers/branch-like';\nimport { translate } from '../../../helpers/l10n';\nimport { Branch, BranchLike, BranchWithNewCodePeriod } from '../../../types/branch-like';\nimport BranchBaselineSettingModal from './BranchBaselineSettingModal';\nimport BranchListRow from './BranchListRow';\n\ninterface Props {\n  branchList: Branch[];\n  component: T.Component;\n  inheritedSetting: T.NewCodePeriod;\n}\n\ninterface State {\n  branches: BranchWithNewCodePeriod[];\n  editedBranch?: BranchWithNewCodePeriod;\n  loading: boolean;\n}\n\nexport default class BranchList extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    branches: [],\n    loading: true\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchBranches();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  sortAndFilterBranches(branchLikes: BranchLike[] = []) {\n    return sortBranches(branchLikes.filter(isBranch));\n  }\n\n  fetchBranches() {\n    const project = this.props.component.key;\n    this.setState({ loading: true });\n\n    listBranchesNewCodePeriod({ project }).then(\n      branchSettings => {\n        const newCodePeriods = branchSettings.newCodePeriods\n          ? branchSettings.newCodePeriods.filter(ncp => !ncp.inherited)\n          : [];\n\n        const branchesWithBaseline = this.props.branchList.map(b => {\n          const newCodePeriod = newCodePeriods.find(ncp => ncp.branchKey === b.name);\n          if (!newCodePeriod) {\n            return b;\n          }\n          const { type = 'PREVIOUS_VERSION', value, effectiveValue } = newCodePeriod;\n          return {\n            ...b,\n            newCodePeriod: { type, value, effectiveValue }\n          };\n        });\n\n        this.setState({ branches: branchesWithBaseline, loading: false });\n      },\n      () => {\n        this.setState({ loading: false });\n      }\n    );\n  }\n\n  updateBranchNewCodePeriod = (branch: string, newSetting: T.NewCodePeriod | undefined) => {\n    const { branches } = this.state;\n\n    const updated = branches.find(b => b.name === branch);\n    if (updated) {\n      updated.newCodePeriod = newSetting;\n    }\n    return branches.slice(0);\n  };\n\n  openEditModal = (branch: BranchWithNewCodePeriod) => {\n    this.setState({ editedBranch: branch });\n  };\n\n  closeEditModal = (branch?: string, newSetting?: T.NewCodePeriod) => {\n    if (branch) {\n      this.setState({\n        branches: this.updateBranchNewCodePeriod(branch, newSetting),\n        editedBranch: undefined\n      });\n    } else {\n      this.setState({ editedBranch: undefined });\n    }\n  };\n\n  resetToDefault = (branch: string) => {\n    return resetNewCodePeriod({\n      project: this.props.component.key,\n      branch\n    }).then(() => {\n      this.setState({ branches: this.updateBranchNewCodePeriod(branch, undefined) });\n    });\n  };\n\n  render() {\n    const { branchList, inheritedSetting } = this.props;\n    const { branches, editedBranch, loading } = this.state;\n\n    if (branches.length < 1) {\n      return null;\n    }\n\n    if (loading) {\n      return <DeferredSpinner />;\n    }\n\n    return (\n      <>\n        <table className=\"data zebra\">\n          <thead>\n            <tr>\n              <th>{translate('branch_list.branch')}</th>\n              <th className=\"nowrap huge-spacer-right\">\n                {translate('branch_list.current_setting')}\n              </th>\n              <th className=\"thin nowrap\">{translate('branch_list.actions')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {branches.map(branch => (\n              <BranchListRow\n                branch={branch}\n                existingBranches={branchList.map(b => b.name)}\n                inheritedSetting={inheritedSetting}\n                key={branch.name}\n                onOpenEditModal={this.openEditModal}\n                onResetToDefault={this.resetToDefault}\n              />\n            ))}\n          </tbody>\n        </table>\n        {editedBranch && (\n          <BranchBaselineSettingModal\n            branch={editedBranch}\n            branchList={branchList}\n            component={this.props.component.key}\n            onClose={this.closeEditModal}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from '../../../components/controls/buttons';\nimport Radio from '../../../components/controls/Radio';\nimport { Alert } from '../../../components/ui/Alert';\nimport DeferredSpinner from '../../../components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { Branch } from '../../../types/branch-like';\nimport { validateSetting } from '../utils';\nimport BaselineSettingAnalysis from './BaselineSettingAnalysis';\nimport BaselineSettingDays from './BaselineSettingDays';\nimport BaselineSettingPreviousVersion from './BaselineSettingPreviousVersion';\nimport BaselineSettingReferenceBranch from './BaselineSettingReferenceBranch';\nimport BranchAnalysisList from './BranchAnalysisList';\n\nexport interface ProjectBaselineSelectorProps {\n  analysis?: string;\n  branch: Branch;\n  branchList: Branch[];\n  branchesEnabled?: boolean;\n  component: string;\n  currentSetting?: T.NewCodePeriodSettingType;\n  currentSettingValue?: string;\n  days: string;\n  generalSetting: T.NewCodePeriod;\n  onCancel: () => void;\n  onSelectAnalysis: (analysis: T.ParsedAnalysis) => void;\n  onSelectDays: (value: string) => void;\n  onSelectReferenceBranch: (value: string) => void;\n  onSelectSetting: (value?: T.NewCodePeriodSettingType) => void;\n  onSubmit: (e: React.SyntheticEvent<HTMLFormElement>) => void;\n  onToggleSpecificSetting: (selection: boolean) => void;\n  referenceBranch?: string;\n  saving: boolean;\n  selected?: T.NewCodePeriodSettingType;\n  overrideGeneralSetting: boolean;\n}\n\nfunction renderGeneralSetting(generalSetting: T.NewCodePeriod) {\n  let setting: string;\n  let description: string;\n  if (generalSetting.type === 'NUMBER_OF_DAYS') {\n    setting = `${translate('baseline.number_days')} (${translateWithParameters(\n      'duration.days',\n      generalSetting.value || '?'\n    )})`;\n    description = translate('baseline.number_days.description');\n  } else {\n    setting = translate('baseline.previous_version');\n    description = translate('baseline.previous_version.description');\n  }\n\n  return (\n    <div className=\"general-setting\">\n      <strong>{setting}</strong>: {description}\n    </div>\n  );\n}\n\nfunction branchToOption(b: Branch) {\n  return { value: b.name, isMain: b.isMain };\n}\n\nexport default function ProjectBaselineSelector(props: ProjectBaselineSelectorProps) {\n  const {\n    analysis,\n    branch,\n    branchList,\n    branchesEnabled,\n    component,\n    currentSetting,\n    currentSettingValue,\n    days,\n    generalSetting,\n    overrideGeneralSetting,\n    referenceBranch,\n    saving,\n    selected\n  } = props;\n\n  const { isChanged, isValid } = validateSetting({\n    analysis,\n    currentSetting,\n    currentSettingValue,\n    days,\n    overrideGeneralSetting,\n    referenceBranch,\n    selected\n  });\n\n  return (\n    <form className=\"project-baseline-selector\" onSubmit={props.onSubmit}>\n      <div className=\"big-spacer-top spacer-bottom\" role=\"radiogroup\">\n        <Radio\n          checked={!overrideGeneralSetting}\n          className=\"big-spacer-bottom\"\n          onCheck={() => props.onToggleSpecificSetting(false)}\n          value=\"general\">\n          {translate('project_baseline.general_setting')}\n        </Radio>\n        <div className=\"big-spacer-left\">{renderGeneralSetting(generalSetting)}</div>\n\n        <Radio\n          checked={overrideGeneralSetting}\n          className=\"huge-spacer-top\"\n          onCheck={() => props.onToggleSpecificSetting(true)}\n          value=\"specific\">\n          {translate('project_baseline.specific_setting')}\n        </Radio>\n      </div>\n\n      <div className=\"big-spacer-left big-spacer-right project-baseline-setting\">\n        <div className=\"display-flex-row big-spacer-bottom\" role=\"radiogroup\">\n          <BaselineSettingPreviousVersion\n            disabled={!overrideGeneralSetting}\n            onSelect={props.onSelectSetting}\n            selected={overrideGeneralSetting && selected === 'PREVIOUS_VERSION'}\n          />\n          <BaselineSettingDays\n            days={days}\n            disabled={!overrideGeneralSetting}\n            isChanged={isChanged}\n            isValid={isValid}\n            onChangeDays={props.onSelectDays}\n            onSelect={props.onSelectSetting}\n            selected={overrideGeneralSetting && selected === 'NUMBER_OF_DAYS'}\n          />\n          {branchesEnabled ? (\n            <BaselineSettingReferenceBranch\n              branchList={branchList.map(branchToOption)}\n              disabled={!overrideGeneralSetting}\n              onChangeReferenceBranch={props.onSelectReferenceBranch}\n              onSelect={props.onSelectSetting}\n              referenceBranch={referenceBranch || ''}\n              selected={overrideGeneralSetting && selected === 'REFERENCE_BRANCH'}\n              settingLevel=\"project\"\n            />\n          ) : (\n            <BaselineSettingAnalysis\n              disabled={!overrideGeneralSetting}\n              onSelect={props.onSelectSetting}\n              selected={overrideGeneralSetting && selected === 'SPECIFIC_ANALYSIS'}\n            />\n          )}\n        </div>\n        {selected === 'SPECIFIC_ANALYSIS' && (\n          <BranchAnalysisList\n            analysis={analysis || ''}\n            branch={branch.name}\n            component={component}\n            onSelectAnalysis={props.onSelectAnalysis}\n          />\n        )}\n      </div>\n      <div className={classNames('big-spacer-top', { invisible: !isChanged })}>\n        <Alert variant=\"info\" className=\"spacer-bottom\">\n          {translate('baseline.next_analysis_notice')}\n        </Alert>\n        <DeferredSpinner className=\"spacer-right\" loading={saving} />\n        <SubmitButton disabled={saving || !isValid || !isChanged}>{translate('save')}</SubmitButton>\n        <ResetButtonLink className=\"spacer-left\" onClick={props.onCancel}>\n          {translate('cancel')}\n        </ResetButtonLink>\n      </div>\n    </form>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { debounce } from 'lodash';\nimport * as React from 'react';\nimport { getNewCodePeriod, resetNewCodePeriod, setNewCodePeriod } from '../../../api/newCodePeriod';\nimport Suggestions from '../../../app/components/embed-docs-modal/Suggestions';\nimport AlertSuccessIcon from '../../../components/icons/AlertSuccessIcon';\nimport DeferredSpinner from '../../../components/ui/DeferredSpinner';\nimport { isBranch, sortBranches } from '../../../helpers/branch-like';\nimport { translate } from '../../../helpers/l10n';\nimport { Branch, BranchLike } from '../../../types/branch-like';\nimport '../styles.css';\nimport { getSettingValue } from '../utils';\nimport AppHeader from './AppHeader';\nimport BranchList from './BranchList';\nimport ProjectBaselineSelector from './ProjectBaselineSelector';\n\ninterface Props {\n  branchLike: Branch;\n  branchLikes: BranchLike[];\n  branchesEnabled?: boolean;\n  canAdmin?: boolean;\n  component: T.Component;\n}\n\ninterface State {\n  analysis?: string;\n  branchList: Branch[];\n  currentSetting?: T.NewCodePeriodSettingType;\n  currentSettingValue?: string;\n  days: string;\n  generalSetting?: T.NewCodePeriod;\n  loading: boolean;\n  overrideGeneralSetting?: boolean;\n  referenceBranch?: string;\n  saving: boolean;\n  selected?: T.NewCodePeriodSettingType;\n  success?: boolean;\n}\n\nconst DEFAULT_NUMBER_OF_DAYS = '30';\n\nconst DEFAULT_GENERAL_SETTING: { type: T.NewCodePeriodSettingType } = {\n  type: 'PREVIOUS_VERSION'\n};\n\nexport default class App extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    branchList: [],\n    days: DEFAULT_NUMBER_OF_DAYS,\n    loading: true,\n    saving: false\n  };\n\n  // We use debounce as we could have multiple save in less that 3sec.\n  resetSuccess = debounce(() => this.setState({ success: undefined }), 3000);\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchLeakPeriodSetting();\n    this.sortAndFilterBranches(this.props.branchLikes);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.branchLikes !== this.props.branchLikes) {\n      this.sortAndFilterBranches(this.props.branchLikes);\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  getUpdatedState(params: {\n    currentSetting?: T.NewCodePeriodSettingType;\n    currentSettingValue?: string;\n    generalSetting: T.NewCodePeriod;\n  }) {\n    const { currentSetting, currentSettingValue, generalSetting } = params;\n    const { referenceBranch } = this.state;\n\n    const defaultDays =\n      (generalSetting.type === 'NUMBER_OF_DAYS' && generalSetting.value) || DEFAULT_NUMBER_OF_DAYS;\n\n    return {\n      loading: false,\n      currentSetting,\n      currentSettingValue,\n      generalSetting,\n      selected: currentSetting || generalSetting.type,\n      overrideGeneralSetting: Boolean(currentSetting),\n      days: (currentSetting === 'NUMBER_OF_DAYS' && currentSettingValue) || defaultDays,\n      analysis: (currentSetting === 'SPECIFIC_ANALYSIS' && currentSettingValue) || '',\n      referenceBranch:\n        (currentSetting === 'REFERENCE_BRANCH' && currentSettingValue) || referenceBranch\n    };\n  }\n\n  sortAndFilterBranches(branchLikes: BranchLike[] = []) {\n    const branchList = sortBranches(branchLikes.filter(isBranch));\n    this.setState({ branchList, referenceBranch: branchList[0].name });\n  }\n\n  fetchLeakPeriodSetting() {\n    const { branchLike, branchesEnabled, component } = this.props;\n\n    this.setState({ loading: true });\n\n    Promise.all([\n      getNewCodePeriod(),\n      getNewCodePeriod({\n        branch: branchesEnabled ? undefined : branchLike.name,\n        project: component.key\n      })\n    ]).then(\n      ([generalSetting, setting]) => {\n        if (this.mounted) {\n          if (!generalSetting.type) {\n            generalSetting = DEFAULT_GENERAL_SETTING;\n          }\n          const currentSettingValue = setting.value;\n          const currentSetting = setting.inherited ? undefined : setting.type || 'PREVIOUS_VERSION';\n\n          this.setState(\n            this.getUpdatedState({\n              generalSetting,\n              currentSetting,\n              currentSettingValue\n            })\n          );\n        }\n      },\n      () => {\n        this.setState({ loading: false });\n      }\n    );\n  }\n\n  resetSetting = () => {\n    this.setState({ saving: true });\n    resetNewCodePeriod({ project: this.props.component.key }).then(\n      () => {\n        this.setState({\n          saving: false,\n          currentSetting: undefined,\n          selected: undefined,\n          success: true\n        });\n        this.resetSuccess();\n      },\n      () => {\n        this.setState({ saving: false });\n      }\n    );\n  };\n\n  handleSelectAnalysis = (analysis: T.ParsedAnalysis) => this.setState({ analysis: analysis.key });\n\n  handleSelectDays = (days: string) => this.setState({ days });\n\n  handleSelectReferenceBranch = (referenceBranch: string) => {\n    this.setState({ referenceBranch });\n  };\n\n  handleCancel = () =>\n    this.setState(\n      ({ generalSetting = DEFAULT_GENERAL_SETTING, currentSetting, currentSettingValue }) =>\n        this.getUpdatedState({ generalSetting, currentSetting, currentSettingValue })\n    );\n\n  handleSelectSetting = (selected?: T.NewCodePeriodSettingType) => this.setState({ selected });\n\n  handleToggleSpecificSetting = (overrideGeneralSetting: boolean) =>\n    this.setState({ overrideGeneralSetting });\n\n  handleSubmit = (e: React.SyntheticEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    const { component } = this.props;\n    const { analysis, days, selected: type, referenceBranch, overrideGeneralSetting } = this.state;\n\n    if (!overrideGeneralSetting) {\n      this.resetSetting();\n      return;\n    }\n\n    const value = getSettingValue({ type, analysis, days, referenceBranch });\n\n    if (type) {\n      this.setState({ saving: true });\n      setNewCodePeriod({\n        project: component.key,\n        type,\n        value\n      }).then(\n        () => {\n          this.setState({\n            saving: false,\n            currentSetting: type,\n            currentSettingValue: value || undefined,\n            success: true\n          });\n          this.resetSuccess();\n        },\n        () => {\n          this.setState({ saving: false });\n        }\n      );\n    }\n  };\n\n  render() {\n    const { branchesEnabled, canAdmin, component, branchLike } = this.props;\n    const {\n      analysis,\n      branchList,\n      currentSetting,\n      days,\n      generalSetting,\n      loading,\n      currentSettingValue,\n      overrideGeneralSetting,\n      referenceBranch,\n      saving,\n      selected,\n      success\n    } = this.state;\n\n    return (\n      <>\n        <Suggestions suggestions=\"project_baseline\" />\n        <div className=\"page page-limited\">\n          <AppHeader canAdmin={!!canAdmin} />\n          {loading ? (\n            <DeferredSpinner />\n          ) : (\n            <div className=\"panel-white project-baseline\">\n              {branchesEnabled && <h2>{translate('project_baseline.default_setting')}</h2>}\n\n              {generalSetting && overrideGeneralSetting !== undefined && (\n                <ProjectBaselineSelector\n                  analysis={analysis}\n                  branch={branchLike}\n                  branchList={branchList}\n                  branchesEnabled={branchesEnabled}\n                  component={component.key}\n                  currentSetting={currentSetting}\n                  currentSettingValue={currentSettingValue}\n                  days={days}\n                  generalSetting={generalSetting}\n                  onCancel={this.handleCancel}\n                  onSelectAnalysis={this.handleSelectAnalysis}\n                  onSelectDays={this.handleSelectDays}\n                  onSelectReferenceBranch={this.handleSelectReferenceBranch}\n                  onSelectSetting={this.handleSelectSetting}\n                  onSubmit={this.handleSubmit}\n                  onToggleSpecificSetting={this.handleToggleSpecificSetting}\n                  overrideGeneralSetting={overrideGeneralSetting}\n                  referenceBranch={referenceBranch}\n                  saving={saving}\n                  selected={selected}\n                />\n              )}\n\n              <div className={classNames('spacer-top', { invisible: saving || !success })}>\n                <span className=\"text-success\">\n                  <AlertSuccessIcon className=\"spacer-right\" />\n                  {translate('settings.state.saved')}\n                </span>\n              </div>\n              {generalSetting && branchesEnabled && (\n                <div className=\"huge-spacer-top branch-baseline-selector\">\n                  <hr />\n                  <h2>{translate('project_baseline.configure_branches')}</h2>\n                  <BranchList\n                    branchList={branchList}\n                    component={component}\n                    inheritedSetting={\n                      currentSetting\n                        ? {\n                            type: currentSetting,\n                            value: currentSettingValue\n                          }\n                        : generalSetting\n                    }\n                  />\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { getAppState, Store } from '../../../store/rootReducer';\nimport App from './App';\n\nconst mapStateToProps = (state: Store) => ({\n  branchesEnabled: getAppState(state).branchesEnabled,\n  canAdmin: getAppState(state).canAdmin\n});\n\nexport default connect(mapStateToProps)(App);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { colors } from '../../app/theme';\nimport HelpIcon from '../icons/HelpIcon';\nimport { IconProps } from '../icons/Icon';\nimport './HelpTooltip.css';\nimport Tooltip, { Placement } from './Tooltip';\n\ninterface Props extends Pick<IconProps, 'size'> {\n  className?: string;\n  children?: React.ReactNode;\n  onShow?: () => void;\n  overlay: React.ReactNode;\n  placement?: Placement;\n}\n\nexport default function HelpTooltip({ size = 12, ...props }: Props) {\n  return (\n    <div className={classNames('help-tooltip', props.className)}>\n      <Tooltip\n        mouseLeaveDelay={0.25}\n        onShow={props.onShow}\n        overlay={props.overlay}\n        placement={props.placement}>\n        <span className=\"display-inline-flex-center\">\n          {props.children || <HelpIcon fill={colors.gray71} size={size} />}\n        </span>\n      </Tooltip>\n    </div>\n  );\n}\n\nexport function DarkHelpTooltip({ size = 12, ...props }: Omit<Props, 'children'>) {\n  return (\n    <HelpTooltip {...props}>\n      <HelpIcon fill={colors.transparentBlack} fillInner={colors.white} size={size} />\n    </HelpTooltip>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ReactSelectClass, {\n  ReactAsyncSelectProps,\n  ReactCreatableSelectProps,\n  ReactSelectProps\n} from 'react-select';\nimport { lazyLoadComponent } from '../lazyLoadComponent';\nimport { ClearButton } from './buttons';\nimport './Select.css';\n\nconst ReactSelectLib = import('react-select');\nconst ReactSelect = lazyLoadComponent(() => ReactSelectLib);\nconst ReactCreatable = lazyLoadComponent(() =>\n  ReactSelectLib.then(lib => ({ default: lib.Creatable }))\n);\nconst ReactAsync = lazyLoadComponent(() => ReactSelectLib.then(lib => ({ default: lib.Async })));\n\nfunction renderInput() {\n  return <ClearButton className=\"button-tiny spacer-left text-middle\" iconProps={{ size: 12 }} />;\n}\n\nexport interface WithInnerRef {\n  innerRef?: React.Ref<ReactSelectClass<unknown>>;\n}\n\nexport default function Select({ innerRef, ...props }: WithInnerRef & ReactSelectProps) {\n  // hide the \"x\" icon when select is empty\n  const clearable = props.clearable ? Boolean(props.value) : false;\n  return (\n    <ReactSelect {...props} clearable={clearable} clearRenderer={renderInput} ref={innerRef} />\n  );\n}\n\nexport function Creatable(props: ReactCreatableSelectProps) {\n  return <ReactCreatable {...props} clearRenderer={renderInput} />;\n}\n\nexport function AsyncSelect(props: ReactAsyncSelectProps & WithInnerRef) {\n  return <ReactAsync {...props} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Modal, { ModalProps } from './Modal';\n\nexport interface ChildrenProps {\n  onCloseClick: (event?: React.SyntheticEvent<HTMLElement>) => void;\n  onFormSubmit: (event: React.SyntheticEvent<HTMLFormElement>) => void;\n  onSubmitClick: (event?: React.SyntheticEvent<HTMLElement>) => void;\n  submitting: boolean;\n}\n\ninterface Props extends ModalProps {\n  children: (props: ChildrenProps) => React.ReactNode;\n  header: string;\n  onClose: () => void;\n  onSubmit: () => void | Promise<void | Response>;\n}\n\ninterface State {\n  submitting: boolean;\n}\n\nexport default class SimpleModal extends React.Component<Props, State> {\n  mounted = false;\n  state: State = { submitting: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopSubmitting = () => {\n    if (this.mounted) {\n      this.setState({ submitting: false });\n    }\n  };\n\n  handleCloseClick = (event?: React.SyntheticEvent<HTMLElement>) => {\n    if (event) {\n      event.preventDefault();\n      event.currentTarget.blur();\n    }\n    this.props.onClose();\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.submit();\n  };\n\n  handleSubmitClick = (event?: React.SyntheticEvent<HTMLElement>) => {\n    if (event) {\n      event.preventDefault();\n      event.currentTarget.blur();\n    }\n    this.submit();\n  };\n\n  submit = () => {\n    const result = this.props.onSubmit();\n    if (result) {\n      this.setState({ submitting: true });\n      result.then(this.stopSubmitting, this.stopSubmitting);\n    }\n  };\n\n  render() {\n    const { children, header, onClose, onSubmit, ...modalProps } = this.props;\n    return (\n      <Modal contentLabel={header} onRequestClose={onClose} {...modalProps}>\n        {children({\n          onCloseClick: this.handleCloseClick,\n          onFormSubmit: this.handleFormSubmit,\n          onSubmitClick: this.handleSubmitClick,\n          submitting: this.state.submitting\n        })}\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function CopyIcon({ fill = 'currentColor', ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <g fill={fill} fillRule=\"nonzero\">\n        <path d=\"M2.931 15.005V3H2v13h9v-.995z\" />\n        <path d=\"M10 4.015h3V14H4V1h6v3.015zM9 8V6H8v2H6v1h2v2h1V9h2V8H9z\" />\n        <path d=\"M11 1v2h2a2.151 2.151 0 0 0-2-2z\" />\n      </g>\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as Clipboard from 'clipboard';\nimport * as React from 'react';\nimport { translate } from '../../helpers/l10n';\nimport CopyIcon from '../icons/CopyIcon';\nimport { Button, ButtonIcon } from './buttons';\nimport Tooltip from './Tooltip';\n\nexport interface State {\n  copySuccess: boolean;\n}\n\ninterface RenderProps {\n  setCopyButton: (node: HTMLElement | null) => void;\n  copySuccess: boolean;\n}\n\ninterface BaseProps {\n  children: (props: RenderProps) => React.ReactNode;\n}\n\nexport class ClipboardBase extends React.PureComponent<BaseProps, State> {\n  private clipboard?: Clipboard;\n  private copyButton?: HTMLElement | null;\n  mounted = false;\n  state: State = { copySuccess: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    if (this.copyButton) {\n      this.clipboard = new Clipboard(this.copyButton);\n      this.clipboard.on('success', this.handleSuccessCopy);\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.clipboard) {\n      this.clipboard.destroy();\n    }\n    if (this.copyButton) {\n      this.clipboard = new Clipboard(this.copyButton);\n      this.clipboard.on('success', this.handleSuccessCopy);\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.clipboard) {\n      this.clipboard.destroy();\n    }\n  }\n\n  setCopyButton = (node: HTMLElement | null) => {\n    this.copyButton = node;\n  };\n\n  handleSuccessCopy = () => {\n    if (this.mounted) {\n      this.setState({ copySuccess: true });\n      setTimeout(() => {\n        if (this.mounted) {\n          this.setState({ copySuccess: false });\n        }\n      }, 1000);\n    }\n  };\n\n  render() {\n    return this.props.children({\n      setCopyButton: this.setCopyButton,\n      copySuccess: this.state.copySuccess\n    });\n  }\n}\n\ninterface ButtonProps {\n  className?: string;\n  copyValue: string;\n  children?: React.ReactNode;\n}\n\nexport function ClipboardButton({ className, children, copyValue }: ButtonProps) {\n  return (\n    <ClipboardBase>\n      {({ setCopyButton, copySuccess }) => (\n        <Tooltip overlay={translate('copied_action')} visible={copySuccess}>\n          <Button\n            className={classNames('no-select', className)}\n            data-clipboard-text={copyValue}\n            innerRef={setCopyButton}>\n            {children || (\n              <>\n                <CopyIcon className=\"little-spacer-right\" />\n                {translate('copy')}\n              </>\n            )}\n          </Button>\n        </Tooltip>\n      )}\n    </ClipboardBase>\n  );\n}\n\ninterface IconButtonProps {\n  'aria-label'?: string;\n  className?: string;\n  copyValue: string;\n}\n\nexport function ClipboardIconButton(props: IconButtonProps) {\n  const { className, copyValue } = props;\n  return (\n    <ClipboardBase>\n      {({ setCopyButton, copySuccess }) => {\n        return (\n          <ButtonIcon\n            aria-label={props['aria-label'] ?? translate('copy_to_clipboard')}\n            className={classNames('no-select', className)}\n            data-clipboard-text={copyValue}\n            innerRef={setCopyButton}\n            tooltip={translate(copySuccess ? 'copied_action' : 'copy_to_clipboard')}\n            tooltipProps={copySuccess ? { visible: copySuccess } : undefined}>\n            <CopyIcon />\n          </ButtonIcon>\n        );\n      }}\n    </ClipboardBase>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from '../../helpers/l10n';\n\nexport interface MandatoryFieldMarkerProps {\n  className?: string;\n}\n\nexport default function MandatoryFieldMarker({ className }: MandatoryFieldMarkerProps) {\n  return (\n    <em\n      aria-label={translate('field_required')}\n      className={classNames('mandatory little-spacer-left', className)}>\n      *\n    </em>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport const formatterOption = {\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric'\n};\n\nexport default function DateTimeFormatter({ children, date }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...formatterOption}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { translate } from '../../helpers/l10n';\n\nexport interface MandatoryFieldsExplanationProps {\n  className?: string;\n}\n\nexport default function MandatoryFieldsExplanation({ className }: MandatoryFieldsExplanationProps) {\n  return (\n    <div aria-hidden={true} className={classNames('text-muted', className)}>\n      <FormattedMessage\n        id=\"fields_marked_with_x_required\"\n        defaultMessage={translate('fields_marked_with_x_required')}\n        values={{ star: <em className=\"mandatory\">*</em> }}\n      />\n    </div>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./HelpTooltip.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".help-tooltip{display:inline-flex;align-items:center;vertical-align:middle}.help-toolip-link{display:block;width:12px;height:12px;border:none}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Select.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".Select{position:relative;display:inline-block;vertical-align:middle;font-size:12px;text-align:left}.Select,.Select div,.Select input,.Select span{box-sizing:border-box}.Select.is-disabled>.Select-control{background-color:#ebebeb!important;border-color:#ddd!important}.Select.is-disabled>.Select-control:hover{box-shadow:none!important}.Select.is-disabled .Select-arrow-zone{cursor:not-allowed!important;pointer-events:none!important}.Select.is-disabled .Select-placeholder,.Select.is-disabled .Select-value{color:#bbb!important}.Select-control{position:relative;display:table;width:100%;height:24px;line-height:22px;border:1px solid #cdcdcd;border-collapse:separate;border-radius:2px;background-color:#fff;color:#333;cursor:default;outline:none;overflow:hidden}.is-searchable.is-open>.Select-control{cursor:text}.is-open>.Select-control{border-bottom-right-radius:0;border-bottom-left-radius:0;background:#fff}.is-open>.Select-control>.Select-arrow{border-color:transparent transparent #999;border-width:0 5px 5px}.is-searchable.is-focused:not(.is-open)>.Select-control{cursor:text}.is-focused:not(.is-open)>.Select-control{border-color:#4b9fd5}.Select-placeholder{color:#666}.Select-placeholder,:not(.Select--multi)>.Select-control .Select-value{bottom:0;left:0;line-height:23px;padding-left:8px;padding-right:24px;position:absolute;right:0;top:0;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.Select-value [class^=icon-]{padding-top:5px}.Select-value img,.Select-value svg{padding-top:3px}.Select-option [class^=icon-],.Select-option img,.Select-option svg{padding-top:2px}.has-value.is-pseudo-focused:not(.Select--multi)>.Select-control>.Select-value .Select-value-label,.has-value:not(.Select--multi)>.Select-control>.Select-value .Select-value-label{color:#333}.has-value.is-pseudo-focused:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label,.has-value:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label{cursor:pointer;text-decoration:none}.has-value.is-pseudo-focused:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label:focus,.has-value.is-pseudo-focused:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label:hover,.has-value:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label:focus,.has-value:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label:hover{color:#007eff;outline:none;text-decoration:underline}.Select-input{vertical-align:top;height:22px;padding-left:8px;padding-right:8px;outline:none}.Select-input>input{background:none transparent;border:0;cursor:default;display:inline-block;font-family:inherit;font-size:12px;height:22px;margin:0;outline:none;padding:0;box-shadow:none;-webkit-appearance:none}.is-focused .Select-input>input{cursor:text}.has-value.is-pseudo-focused .Select-input{opacity:0}.Select-control:not(.is-searchable)>.Select-input{outline:none}.Select-loading-zone{cursor:pointer;display:table-cell;position:relative;text-align:center;vertical-align:middle;width:16px}.Select-loading{animation:Select-animation-spin .4s linear infinite;box-sizing:border-box;border-radius:50%;border:2px solid #ccc;border-right-color:#333;display:inline-block}.Select-clear-zone,.Select-loading{width:16px;height:16px;position:relative;vertical-align:middle}.Select-clear-zone{animation:Select-animation-fadeIn .2s;color:#999;cursor:pointer;display:table-cell;text-align:center;padding-right:4px}.Select-clear-zone:hover .Select-clear{background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTQgMTQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxLjQxNCI+PHBhdGggZD0iTTEzLjk2OSAxLjQwNkw4LjM5IDYuOTg0bDUuNTc4IDUuNTc5LTEuNDA2IDEuNDA2TDYuOTg0IDguMzlsLTUuNTc4IDUuNTc4TDAgMTIuNTYzbDUuNTc4LTUuNTc5TDAgMS40MDYgMS40MDYgMGw1LjU3OCA1LjU3OEwxMi41NjMgMGwxLjQwNiAxLjQwNnoiIGZpbGw9IiNlNzE0MzgiIGZpbGwtcnVsZT0ibm9uemVybyIvPjwvc3ZnPg==)}.Select-clear{display:block;width:9px;height:9px;background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTQgMTQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxLjQxNCI+PHBhdGggZD0iTTEzLjk2OSAxLjQwNkw4LjM5IDYuOTg0bDUuNTc4IDUuNTc5LTEuNDA2IDEuNDA2TDYuOTg0IDguMzlsLTUuNTc4IDUuNTc4TDAgMTIuNTYzbDUuNTc4LTUuNTc5TDAgMS40MDYgMS40MDYgMGw1LjU3OCA1LjU3OEwxMi41NjMgMGwxLjQwNiAxLjQwNnoiIGZpbGw9IiM5OTkiIGZpbGwtcnVsZT0ibm9uemVybyIvPjwvc3ZnPg==);background-size:9px 9px;text-indent:-9999px}.Select--multi .Select-clear-zone{width:17px}.Select-arrow-zone{cursor:pointer;display:table-cell;position:relative;text-align:center;vertical-align:middle;width:20px;padding-right:5px}.Select-arrow{border-color:#999 transparent transparent;border-style:solid;border-width:4px 4px 2px;display:inline-block;height:0;width:0}.is-open .Select-arrow,.Select-arrow-zone:hover>.Select-arrow{border-top-color:#666}@keyframes Select-animation-fadeIn{0%{opacity:0}to{opacity:1}}.Select-menu-outer{border-bottom-right-radius:4px;border-bottom-left-radius:4px;background-color:#fff;border:1px solid #ccc;border-top-color:#e6e6e6;box-sizing:border-box;margin-top:-1px;max-height:200px;position:absolute;top:100%;width:100%;z-index:7500;-webkit-overflow-scrolling:touch;box-shadow:0 6px 12px rgba(0,0,0,.175)}.Select-menu{max-height:198px;padding:5px 0;overflow-y:auto}.Select-option{display:block;line-height:20px;padding:0 8px;box-sizing:border-box;color:#333;font-size:12px;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.Select-option:last-child{border-bottom-right-radius:2px;border-bottom-left-radius:2px}.Select-option.is-focused{background-color:#f3f3f3}.Select-option.is-disabled{cursor:default;opacity:.4;font-style:italic}.Select-noresults{box-sizing:border-box;color:#999;cursor:default;display:block;padding:8px 10px}.Select--multi .Select-value{background-color:rgba(0,126,255,.08);border-radius:2px;border:1px solid rgba(0,126,255,.24);color:#333;display:inline-block;font-size:12px;line-height:14px;margin:1px 4px 1px 1px;vertical-align:top}.Select-value-label{font-size:12px}.is-searchable.is-open .Select-value-label{opacity:.5}.Select-big .Select-control{padding-top:4px;padding-bottom:4px}.Select-big .Select-placeholder{margin-top:4px;margin-bottom:4px}.Select-big .Select-value-label{display:inline-block;margin-top:7px;line-height:16px}.Select-big .Select-option{padding:7px 8px;line-height:16px}.Select-big img,.Select-big svg{padding-top:0}.Select--multi .Select-value-icon,.Select--multi .Select-value-label{display:inline-block;vertical-align:middle}.Select--multi .Select-value-label{display:inline-block;max-width:200px;border-bottom-right-radius:2px;border-top-right-radius:2px;cursor:default;padding:2px 5px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.Select--multi a.Select-value-label{color:#007eff;cursor:pointer;text-decoration:none}.Select--multi a.Select-value-label:hover{text-decoration:underline}.Select--multi .Select-value-icon{cursor:pointer;border-bottom-left-radius:2px;border-top-left-radius:2px;border-right:1px solid rgba(0,126,255,.24);padding:1px 5px}.Select--multi .Select-value-icon:focus,.Select--multi .Select-value-icon:hover{background-color:rgba(0,113,230,.08);color:#0071e6}.Select--multi .Select-value-icon:active{background-color:rgba(0,126,255,.24)}.Select--multi.is-disabled .Select-value{background-color:#fcfcfc;border:1px solid #e3e3e3;color:#333}.Select--multi.is-disabled .Select-value-icon{cursor:not-allowed;border-right:1px solid #e3e3e3}.Select--multi.is-disabled .Select-value-icon:active,.Select--multi.is-disabled .Select-value-icon:focus,.Select--multi.is-disabled .Select-value-icon:hover{background-color:#fcfcfc}.Select-aria-only{display:none}@keyframes Select-animation-spin{to{transform:rotate(1turn)}}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../helpers/l10n';\nimport DeferredSpinner from '../ui/DeferredSpinner';\nimport { ResetButtonLink, SubmitButton } from './buttons';\nimport ClickEventBoundary from './ClickEventBoundary';\nimport { ModalProps } from './Modal';\nimport SimpleModal, { ChildrenProps } from './SimpleModal';\n\nexport interface ConfirmModalProps<T> extends ModalProps {\n  cancelButtonText?: string;\n  confirmButtonText: string;\n  confirmData?: T;\n  confirmDisable?: boolean;\n  isDestructive?: boolean;\n  onConfirm: (data?: T) => void | Promise<void | Response>;\n}\n\ninterface Props<T> extends ConfirmModalProps<T> {\n  header: string;\n  headerDescription?: React.ReactNode;\n  onClose: () => void;\n}\n\nexport default class ConfirmModal<T = string> extends React.PureComponent<Props<T>> {\n  mounted = false;\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSubmit = () => {\n    const result = this.props.onConfirm(this.props.confirmData);\n    if (result) {\n      return result.then(this.props.onClose, () => {\n        /* noop */\n      });\n    }\n    this.props.onClose();\n    return undefined;\n  };\n\n  renderModalContent = ({ onCloseClick, onFormSubmit, submitting }: ChildrenProps) => {\n    const {\n      children,\n      confirmButtonText,\n      confirmDisable,\n      header,\n      headerDescription,\n      isDestructive,\n      cancelButtonText = translate('cancel')\n    } = this.props;\n    return (\n      <ClickEventBoundary>\n        <form onSubmit={onFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n            {headerDescription}\n          </header>\n          <div className=\"modal-body\">{children}</div>\n          <footer className=\"modal-foot\">\n            <DeferredSpinner className=\"spacer-right\" loading={submitting} />\n            <SubmitButton\n              autoFocus={true}\n              className={isDestructive ? 'button-red' : undefined}\n              disabled={submitting || confirmDisable}>\n              {confirmButtonText}\n            </SubmitButton>\n            <ResetButtonLink disabled={submitting} onClick={onCloseClick}>\n              {cancelButtonText}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </ClickEventBoundary>\n    );\n  };\n\n  render() {\n    const { header, onClose, noBackdrop, size } = this.props;\n    const modalProps = { header, onClose, noBackdrop, size };\n    return (\n      <SimpleModal onSubmit={this.handleSubmit} {...modalProps}>\n        {this.renderModalContent}\n      </SimpleModal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\n\nexport interface DateFormatterProps {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n  long?: boolean;\n}\n\nexport const formatterOption = { year: 'numeric', month: 'short', day: '2-digit' };\n\nexport const longFormatterOption = { year: 'numeric', month: 'long', day: 'numeric' };\n\nexport default function DateFormatter({ children, date, long }: DateFormatterProps) {\n  return (\n    <FormattedDate value={parseDate(date)} {...(long ? longFormatterOption : formatterOption)}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { formatMeasure } from '../../helpers/measures';\nimport './Level.css';\n\nexport interface LevelProps {\n  'aria-label'?: string;\n  'aria-labelledby'?: string;\n  className?: string;\n  level: string;\n  small?: boolean;\n  muted?: boolean;\n}\n\nexport default function Level(props: LevelProps) {\n  const formatted = formatMeasure(props.level, 'LEVEL');\n  const className = classNames(props.className, 'level', 'level-' + props.level, {\n    'level-small': props.small,\n    'level-muted': props.muted\n  });\n\n  return (\n    <span\n      aria-label={props['aria-label']}\n      aria-labelledby={props['aria-labelledby']}\n      className={className}>\n      {formatted}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './Radio.css';\n\ninterface Props {\n  checked: boolean;\n  className?: string;\n  disabled?: boolean;\n  onCheck: (value: string) => void;\n  value: string;\n}\n\nexport default class Radio extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n\n    if (!this.props.disabled) {\n      this.props.onCheck(this.props.value);\n    }\n  };\n\n  render() {\n    const { className, checked, children, disabled } = this.props;\n\n    return (\n      <a\n        aria-checked={checked}\n        className={classNames('display-inline-flex-center link-radio', className, { disabled })}\n        href=\"#\"\n        onClick={this.handleClick}\n        role=\"radio\">\n        <i className={classNames('icon-radio', 'spacer-right', { 'is-checked': checked })} />\n        {children}\n      </a>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function SettingsIcon({\n  fill = 'currentColor',\n  size = 14,\n  ...iconProps\n}: IconProps) {\n  return (\n    <Icon size={size} viewBox=\"0 0 14 14\" {...iconProps}>\n      <g transform=\"matrix(0.0364583,0,0,0.0364583,0,-1.16667)\">\n        <path\n          d=\"M256,224C256,206.333 249.75,191.25 237.25,178.75C224.75,166.25 209.667,160 192,160C174.333,160 159.25,166.25 146.75,178.75C134.25,191.25 128,206.333 128,224C128,241.667 134.25,256.75 146.75,269.25C159.25,281.75 174.333,288 192,288C209.667,288 224.75,281.75 237.25,269.25C249.75,256.75 256,241.667 256,224ZM384,196.75L384,252.25C384,254.25 383.333,256.167 382,258C380.667,259.833 379,260.917 377,261.25L330.75,268.25C327.583,277.25 324.333,284.833 321,291C326.833,299.333 335.75,310.833 347.75,325.5C349.417,327.5 350.25,329.583 350.25,331.75C350.25,333.917 349.5,335.833 348,337.5C343.5,343.667 335.25,352.667 323.25,364.5C311.25,376.333 303.417,382.25 299.75,382.25C297.75,382.25 295.583,381.5 293.25,380L258.75,353C251.417,356.833 243.833,360 236,362.5C233.333,385.167 230.917,400.667 228.75,409C227.583,413.667 224.583,416 219.75,416L164.25,416C161.917,416 159.875,415.292 158.125,413.875C156.375,412.458 155.417,410.667 155.25,408.5L148.25,362.5C140.083,359.833 132.583,356.75 125.75,353.25L90.5,380C88.833,381.5 86.75,382.25 84.25,382.25C81.917,382.25 79.833,381.333 78,379.5C57,360.5 43.25,346.5 36.75,337.5C35.583,335.833 35,333.917 35,331.75C35,329.75 35.667,327.833 37,326C39.5,322.5 43.75,316.958 49.75,309.375C55.75,301.792 60.25,295.917 63.25,291.75C58.75,283.417 55.333,275.167 53,267L7.25,260.25C5.083,259.917 3.333,258.875 2,257.125C0.667,255.375 0,253.417 0,251.25L0,195.75C0,193.75 0.667,191.833 2,190C3.333,188.167 4.917,187.083 6.75,186.75L53.25,179.75C55.583,172.083 58.833,164.417 63,156.75C56.333,147.25 47.417,135.75 36.25,122.25C34.583,120.25 33.75,118.25 33.75,116.25C33.75,114.583 34.5,112.667 36,110.5C40.333,104.5 48.542,95.542 60.625,83.625C72.708,71.708 80.583,65.75 84.25,65.75C86.417,65.75 88.583,66.583 90.75,68.25L125.25,95C132.583,91.167 140.167,88 148,85.5C150.667,62.833 153.083,47.333 155.25,39C156.417,34.333 159.417,32 164.25,32L219.75,32C222.083,32 224.125,32.708 225.875,34.125C227.625,35.542 228.583,37.333 228.75,39.5L235.75,85.5C243.917,88.167 251.417,91.25 258.25,94.75L293.75,68C295.25,66.5 297.25,65.75 299.75,65.75C301.917,65.75 304,66.583 306,68.25C327.5,88.083 341.25,102.25 347.25,110.75C348.417,112.083 349,113.917 349,116.25C349,118.25 348.333,120.167 347,122C344.5,125.5 340.25,131.042 334.25,138.625C328.25,146.208 323.75,152.083 320.75,156.25C325.083,164.583 328.5,172.75 331,180.75L376.75,187.75C378.917,188.083 380.667,189.125 382,190.875C383.333,192.625 384,194.583 384,196.75Z\"\n          style={{ fill }}\n        />\n      </g>\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { LocationDescriptor } from 'history';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { translate } from '../../helpers/l10n';\nimport DropdownIcon from '../icons/DropdownIcon';\nimport SettingsIcon from '../icons/SettingsIcon';\nimport { PopupPlacement } from '../ui/popups';\nimport { Button } from './buttons';\nimport { ClipboardBase } from './clipboard';\nimport Dropdown from './Dropdown';\nimport Tooltip from './Tooltip';\n\nexport interface ActionsDropdownProps {\n  className?: string;\n  children: React.ReactNode;\n  onOpen?: () => void;\n  overlayPlacement?: PopupPlacement;\n  small?: boolean;\n  toggleClassName?: string;\n}\n\nexport default function ActionsDropdown(props: ActionsDropdownProps) {\n  const { children, className, overlayPlacement, small, toggleClassName } = props;\n  return (\n    <Dropdown\n      className={className}\n      onOpen={props.onOpen}\n      overlay={<ul className=\"menu\">{children}</ul>}\n      overlayPlacement={overlayPlacement}>\n      <Button\n        className={classNames('dropdown-toggle', toggleClassName, {\n          'button-small': small\n        })}>\n        <SettingsIcon size={small ? 12 : 14} />\n        <DropdownIcon className=\"little-spacer-left\" />\n      </Button>\n    </Dropdown>\n  );\n}\n\ninterface ItemProps {\n  className?: string;\n  children: React.ReactNode;\n  /** used to pass a string to copy to clipboard */\n  copyValue?: string;\n  destructive?: boolean;\n  /** used to pass a name of downloaded file */\n  download?: string;\n  id?: string;\n  onClick?: () => void;\n  to?: LocationDescriptor;\n}\n\nexport class ActionsDropdownItem extends React.PureComponent<ItemProps> {\n  handleClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.onClick) {\n      this.props.onClick();\n    }\n  };\n\n  render() {\n    const className = classNames(this.props.className, { 'text-danger': this.props.destructive });\n\n    if (this.props.download && typeof this.props.to === 'string') {\n      return (\n        <li>\n          <a\n            className={className}\n            download={this.props.download}\n            href={this.props.to}\n            id={this.props.id}>\n            {this.props.children}\n          </a>\n        </li>\n      );\n    }\n\n    if (this.props.to) {\n      return (\n        <li>\n          <Link className={className} id={this.props.id} to={this.props.to}>\n            {this.props.children}\n          </Link>\n        </li>\n      );\n    }\n\n    if (this.props.copyValue) {\n      return (\n        <ClipboardBase>\n          {({ setCopyButton, copySuccess }) => (\n            <Tooltip overlay={translate('copied_action')} visible={copySuccess}>\n              <li data-clipboard-text={this.props.copyValue} ref={setCopyButton}>\n                <a className={className} href=\"#\" id={this.props.id} onClick={this.handleClick}>\n                  {this.props.children}\n                </a>\n              </li>\n            </Tooltip>\n          )}\n        </ClipboardBase>\n      );\n    }\n\n    return (\n      <li>\n        <a className={className} href=\"#\" id={this.props.id} onClick={this.handleClick}>\n          {this.props.children}\n        </a>\n      </li>\n    );\n  }\n}\n\nexport function ActionsDropdownDivider() {\n  return <li className=\"divider\" />;\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Radio.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".icon-radio{position:relative;display:inline-block;vertical-align:top;width:14px;height:14px;margin:1px;border:1px solid #cdcdcd;border-radius:12px;box-sizing:border-box;transition:border-color .3s ease;flex-shrink:0}.icon-radio:after{position:absolute;top:2px;left:2px;display:block;width:8px;height:8px;border-radius:8px;background-color:#236a97;content:\\\"\\\";opacity:0;transition:opacity .3s ease}.link-radio .icon-radio.is-checked:after{opacity:1}.link-radio{border-bottom:none}.link-radio,.link-radio:not(.disabled):active,.link-radio:not(.disabled):focus,.link-radio:not(.disabled):hover{color:inherit}.link-radio:not(.disabled):hover>.icon-radio{border-color:#4b9fd5}.link-radio.disabled,.link-radio.disabled:hover,.link-radio.disabled label{color:#bbb;cursor:not-allowed}.link-radio.disabled .icon-radio:after{background-color:#ebebeb}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { colors } from '../../app/theme';\nimport Icon, { IconProps } from './Icon';\n\nexport default function BranchIcon({ fill, ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M12.5 6.5c0-1.1-.9-2-2-2s-2 .9-2 2c0 .8.5 1.5 1.2 1.8-.3.6-.7 1.1-1.2 1.4-.9.5-1.9.5-2.5.4V4c.9-.2 1.5-1 1.5-1.9 0-1.1-.9-2-2-2s-2 .9-2 2C3.5 3 4.1 3.8 5 4v8c-.9.2-1.5 1-1.5 1.9 0 1.1.9 2 2 2s2-.9 2-2c0-.9-.6-1.7-1.5-1.9v-1c.2 0 .5.1.7.1.7 0 1.5-.1 2.2-.6.8-.5 1.4-1.2 1.7-2.1 1.1 0 1.9-.9 1.9-1.9zm-8-4.4c0-.6.4-1 1-1s1 .4 1 1-.4 1-1 1-1-.5-1-1zm2 11.9c0 .6-.4 1-1 1s-1-.4-1-1 .4-1 1-1 1 .4 1 1zm4-6.5c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1z\"\n        style={{ fill: fill || colors.blue }}\n      />\n    </Icon>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Level.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".level{display:inline-block;min-width:80px;height:24px;line-height:24px;border-radius:24px;box-sizing:border-box;color:#fff;letter-spacing:.02em;font-size:13px;font-weight:400;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.level,.level-small{width:auto;padding-left:9px;padding-right:9px}.level-small{min-width:64px;margin-top:-1px;margin-bottom:-1px;height:20px;line-height:20px;font-size:12px}.level-muted{background-color:#bdbdbd!important}a>.level{margin-bottom:-1px;border-bottom:1px solid;transition:all .2s ease}a>.level:hover{opacity:.8}.level-OK{background-color:#0a0}.level-WARN{background-color:#ed7d20}.level-ERROR{background-color:#d4333f}.level-NONE{background-color:#b4b4b4}.level-NOT_COMPUTED{background-color:#404040}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { chunk, flatMap, groupBy, sortBy } from 'lodash';\nimport { getLocalizedMetricName, translate } from '../../helpers/l10n';\nimport { localizeMetric } from '../../helpers/measures';\nimport { get, save } from '../../helpers/storage';\nimport { MetricKey } from '../../types/metrics';\nimport { GraphType, MeasureHistory, Serie } from '../../types/project-activity';\n\nexport const DEFAULT_GRAPH = GraphType.issues;\n\nconst GRAPHS_METRICS_DISPLAYED: T.Dict<string[]> = {\n  [GraphType.issues]: [MetricKey.bugs, MetricKey.code_smells, MetricKey.vulnerabilities],\n  [GraphType.coverage]: [MetricKey.lines_to_cover, MetricKey.uncovered_lines],\n  [GraphType.duplications]: [MetricKey.ncloc, MetricKey.duplicated_lines]\n};\n\nconst GRAPHS_METRICS: T.Dict<string[]> = {\n  [GraphType.issues]: GRAPHS_METRICS_DISPLAYED[GraphType.issues].concat([\n    MetricKey.reliability_rating,\n    MetricKey.security_rating,\n    MetricKey.sqale_rating\n  ]),\n  [GraphType.coverage]: [...GRAPHS_METRICS_DISPLAYED[GraphType.coverage], MetricKey.coverage],\n  [GraphType.duplications]: [\n    ...GRAPHS_METRICS_DISPLAYED[GraphType.duplications],\n    MetricKey.duplicated_lines_density\n  ]\n};\n\nexport function isCustomGraph(graph: GraphType) {\n  return graph === GraphType.custom;\n}\n\nexport function getGraphTypes(ignoreCustom = false) {\n  const graphs = [GraphType.issues, GraphType.coverage, GraphType.duplications];\n  return ignoreCustom ? graphs : [...graphs, GraphType.custom];\n}\n\nexport function hasDataValues(serie: Serie) {\n  return serie.data.some(point => Boolean(point.y || point.y === 0));\n}\n\nexport function hasHistoryData(series: Serie[]) {\n  return series.some(serie => serie.data && serie.data.length > 1);\n}\n\nexport function getSeriesMetricType(series: Serie[]) {\n  return series.length > 0 ? series[0].type : 'INT';\n}\n\nexport function getDisplayedHistoryMetrics(graph: GraphType, customMetrics: string[]) {\n  return isCustomGraph(graph) ? customMetrics : GRAPHS_METRICS_DISPLAYED[graph];\n}\n\nexport function getHistoryMetrics(graph: GraphType, customMetrics: string[]) {\n  return isCustomGraph(graph) ? customMetrics : GRAPHS_METRICS[graph];\n}\n\nexport function hasHistoryDataValue(series: Serie[]) {\n  return series.some(serie => serie.data && serie.data.length > 1 && hasDataValues(serie));\n}\n\nexport function splitSeriesInGraphs(series: Serie[], maxGraph: number, maxSeries: number) {\n  return flatMap(\n    groupBy(series, serie => serie.type),\n    type => chunk(type, maxSeries)\n  ).slice(0, maxGraph);\n}\n\nexport function generateCoveredLinesMetric(\n  uncoveredLines: MeasureHistory,\n  measuresHistory: MeasureHistory[]\n) {\n  const linesToCover = measuresHistory.find(measure => measure.metric === MetricKey.lines_to_cover);\n  return {\n    data: linesToCover\n      ? uncoveredLines.history.map((analysis, idx) => ({\n          x: analysis.date,\n          y: Number(linesToCover.history[idx].value) - Number(analysis.value)\n        }))\n      : [],\n    name: 'covered_lines',\n    translatedName: translate('project_activity.custom_metric.covered_lines'),\n    type: 'INT'\n  };\n}\n\nexport function generateSeries(\n  measuresHistory: MeasureHistory[],\n  graph: GraphType,\n  metrics: T.Metric[] | T.Dict<T.Metric>,\n  displayedMetrics: string[]\n): Serie[] {\n  if (displayedMetrics.length <= 0 || measuresHistory === undefined) {\n    return [];\n  }\n  return sortBy(\n    measuresHistory\n      .filter(measure => displayedMetrics.indexOf(measure.metric) >= 0)\n      .map(measure => {\n        if (measure.metric === MetricKey.uncovered_lines && !isCustomGraph(graph)) {\n          return generateCoveredLinesMetric(measure, measuresHistory);\n        }\n        const metric = findMetric(measure.metric, metrics);\n        return {\n          data: measure.history.map(analysis => ({\n            x: analysis.date,\n            y: metric && metric.type === 'LEVEL' ? analysis.value : Number(analysis.value)\n          })),\n          name: measure.metric,\n          translatedName: metric ? getLocalizedMetricName(metric) : localizeMetric(measure.metric),\n          type: metric ? metric.type : 'INT'\n        };\n      }),\n    serie =>\n      displayedMetrics.indexOf(serie.name === 'covered_lines' ? 'uncovered_lines' : serie.name)\n  );\n}\n\nexport function saveActivityGraph(\n  namespace: string,\n  project: string,\n  graph: GraphType,\n  metrics: string[] = []\n) {\n  save(namespace, graph, project);\n  if (isCustomGraph(graph)) {\n    save(`${namespace}.custom`, metrics.join(','), project);\n  }\n}\n\nexport function getActivityGraph(\n  namespace: string,\n  project: string\n): { graph: GraphType; customGraphs: string[] } {\n  const customGraphs = get(`${namespace}.custom`, project);\n  return {\n    graph: (get(namespace, project) as GraphType) || DEFAULT_GRAPH,\n    customGraphs: customGraphs ? customGraphs.split(',') : []\n  };\n}\n\nfunction findMetric(key: string, metrics: T.Metric[] | T.Dict<T.Metric>) {\n  if (Array.isArray(metrics)) {\n    return metrics.find(metric => metric.key === key);\n  }\n  return metrics[key];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum GraphType {\n  issues = 'issues',\n  coverage = 'coverage',\n  duplications = 'duplications',\n  custom = 'custom'\n}\n\nexport interface HistoryItem {\n  date: Date;\n  value?: string;\n}\n\nexport interface MeasureHistory {\n  metric: string;\n  history: HistoryItem[];\n}\n\nexport interface Serie {\n  data: Point[];\n  name: string;\n  translatedName: string;\n  type: string;\n}\n\nexport interface Point {\n  x: Date;\n  y: number | string | undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { colors } from '../../app/theme';\nimport Icon, { IconProps } from './Icon';\n\nexport default function PullRequestIcon({ fill, ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M13,11.9L13,5.5C13,5.4 13.232,1.996 7.9,2L9.1,0.8L8.5,0.1L5.9,2.6L8.5,5.1L9.2,4.4L7.905,3.008C12.256,2.99 12,5.4 12,5.5L12,11.9C11.1,12.1 10.5,12.9 10.5,13.8C10.5,14.9 11.4,15.8 12.5,15.8C13.6,15.8 14.5,14.9 14.5,13.8C14.5,12.9 13.9,12.2 13,11.9ZM4,11.9C4.9,12.2 5.5,12.9 5.5,13.8C5.5,14.9 4.6,15.8 3.5,15.8C2.4,15.8 1.5,14.9 1.5,13.8C1.5,12.9 2.1,12.1 3,11.9L3,4.1C2.1,3.9 1.5,3.1 1.5,2.2C1.5,1.1 2.4,0.2 3.5,0.2C4.6,0.2 5.5,1.1 5.5,2.2C5.5,3.1 4.9,3.9 4,4.1L4,11.9ZM12.5,14.9C11.9,14.9 11.5,14.5 11.5,13.9C11.5,13.3 11.9,12.9 12.5,12.9C13.1,12.9 13.5,13.3 13.5,13.9C13.5,14.5 13.1,14.9 12.5,14.9ZM3.5,14.9C2.9,14.9 2.5,14.5 2.5,13.9C2.5,13.3 2.9,12.9 3.5,12.9C4.1,12.9 4.5,13.3 4.5,13.9C4.5,14.5 4.1,14.9 3.5,14.9ZM2.5,2.2C2.5,1.6 2.9,1.2 3.5,1.2C4.1,1.2 4.5,1.6 4.5,2.2C4.5,2.8 4.1,3.2 3.5,3.2C2.9,3.2 2.5,2.8 2.5,2.2Z\"\n        style={{ fill: fill || colors.blue }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport AlertErrorIcon from '../icons/AlertErrorIcon';\nimport AlertSuccessIcon from '../icons/AlertSuccessIcon';\nimport MandatoryFieldMarker from '../ui/MandatoryFieldMarker';\nimport HelpTooltip from './HelpTooltip';\n\ninterface Props {\n  description?: React.ReactNode;\n  children: React.ReactNode;\n  className?: string;\n  error: string | undefined;\n  help?: string;\n  id: string;\n  isInvalid: boolean;\n  isValid: boolean;\n  label: React.ReactNode;\n  required?: boolean;\n}\n\nexport default function ValidationInput(props: Props) {\n  const hasError = props.isInvalid && props.error !== undefined;\n  return (\n    <div className={props.className}>\n      <label htmlFor={props.id}>\n        <span className=\"text-middle\">\n          <strong>{props.label}</strong>\n          {props.required && <MandatoryFieldMarker />}\n        </span>\n        {props.help && <HelpTooltip className=\"spacer-left\" overlay={props.help} />}\n      </label>\n      <div className=\"little-spacer-top spacer-bottom\">\n        {props.children}\n        {props.isInvalid && <AlertErrorIcon className=\"spacer-left text-middle\" />}\n        {hasError && (\n          <span className=\"little-spacer-left text-danger text-middle\">{props.error}</span>\n        )}\n        {props.isValid && <AlertSuccessIcon className=\"spacer-left text-middle\" />}\n      </div>\n      {props.description && <div className=\"note abs-width-400\">{props.description}</div>}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedTime } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\n\nexport interface TimeFormatterProps {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n  long?: boolean;\n}\n\nexport const formatterOption = { hour: 'numeric', minute: 'numeric' };\n\nexport const longFormatterOption = { hour: 'numeric', minute: 'numeric', second: 'numeric' };\n\nexport default function TimeFormatter({ children, date, long }: TimeFormatterProps) {\n  return (\n    <FormattedTime value={parseDate(date)} {...(long ? longFormatterOption : formatterOption)}>\n      {children}\n    </FormattedTime>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport BranchIcon from '../../components/icons/BranchIcon';\nimport { IconProps } from '../../components/icons/Icon';\nimport PullRequestIcon from '../../components/icons/PullRequestIcon';\nimport { isPullRequest } from '../../helpers/branch-like';\nimport { BranchLike } from '../../types/branch-like';\n\nexport interface BranchLikeIconProps extends IconProps {\n  branchLike: BranchLike;\n}\n\nexport default function BranchLikeIcon({ branchLike, ...props }: BranchLikeIconProps) {\n  if (isPullRequest(branchLike)) {\n    return <PullRequestIcon {...props} />;\n  }\n  return <BranchIcon {...props} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../types/branch-like';\n\ninterface ComponentContextType {\n  branchLike: BranchLike | undefined;\n  component: T.Component | undefined;\n}\n\nexport const ComponentContext = React.createContext<ComponentContextType>({\n  branchLike: undefined,\n  component: undefined\n});\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce } from 'lodash';\nimport * as React from 'react';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\nimport Select, { Creatable } from './Select';\n\ninterface Props<T> {\n  autofocus?: boolean;\n  canCreate?: boolean;\n  className?: string;\n  clearable?: boolean;\n  defaultOptions?: T[];\n  minimumQueryLength?: number;\n  multi?: boolean;\n  onSearch: (query: string) => Promise<T[]>;\n  onSelect?: (option: T) => void;\n  onMultiSelect?: (options: T[]) => void;\n  promptTextCreator?: (label: string) => string;\n  renderOption?: (option: T) => JSX.Element;\n  resetOnBlur?: boolean;\n  value?: T | T[];\n}\n\ninterface State<T> {\n  loading: boolean;\n  options: T[];\n  query: string;\n}\n\nexport default class SearchSelect<T extends { value: string }> extends React.PureComponent<\n  Props<T>,\n  State<T>\n> {\n  mounted = false;\n\n  constructor(props: Props<T>) {\n    super(props);\n    this.state = { loading: false, options: props.defaultOptions || [], query: '' };\n    this.handleSearch = debounce(this.handleSearch, 250);\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  get autofocus() {\n    return this.props.autofocus !== undefined ? this.props.autofocus : true;\n  }\n\n  get minimumQueryLength() {\n    return this.props.minimumQueryLength !== undefined ? this.props.minimumQueryLength : 2;\n  }\n\n  get resetOnBlur() {\n    return this.props.resetOnBlur !== undefined ? this.props.resetOnBlur : true;\n  }\n\n  handleSearch = (query: string) => {\n    // Ignore the result if the query changed\n    const currentQuery = query;\n    this.props.onSearch(currentQuery).then(\n      options => {\n        if (this.mounted) {\n          this.setState(state => ({\n            loading: false,\n            options: state.query === currentQuery ? options : state.options\n          }));\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleChange = (option: T | T[]) => {\n    if (Array.isArray(option)) {\n      if (this.props.onMultiSelect) {\n        this.props.onMultiSelect(option);\n      }\n    } else if (this.props.onSelect) {\n      this.props.onSelect(option);\n    }\n  };\n\n  handleInputChange = (query: string) => {\n    if (query.length >= this.minimumQueryLength) {\n      this.setState({ loading: true, query });\n      this.handleSearch(query);\n    } else {\n      // `onInputChange` is called with an empty string after a user selects a value\n      // in this case we shouldn't reset `options`, because it also resets select value :(\n      const options = (query.length === 0 && this.props.defaultOptions) || [];\n      this.setState({ options, query });\n    }\n  };\n\n  // disable internal filtering\n  handleFilterOption = () => true;\n\n  render() {\n    const Component = this.props.canCreate ? Creatable : Select;\n    return (\n      <Component\n        autoFocus={this.autofocus}\n        className={this.props.className}\n        clearable={this.props.clearable}\n        escapeClearsValue={false}\n        filterOption={this.handleFilterOption}\n        isLoading={this.state.loading}\n        multi={this.props.multi}\n        noResultsText={\n          this.state.query.length < this.minimumQueryLength\n            ? translateWithParameters('select2.tooShort', this.minimumQueryLength)\n            : translate('select2.noMatches')\n        }\n        onBlurResetsInput={this.resetOnBlur}\n        onChange={this.handleChange}\n        onInputChange={this.handleInputChange}\n        optionRenderer={this.props.renderOption}\n        options={this.state.options}\n        placeholder={translate('search_verb')}\n        promptTextCreator={this.props.promptTextCreator}\n        searchable={true}\n        value={this.props.value}\n        valueRenderer={this.props.renderOption}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function RecommendedIcon({ fill = 'currentColor', ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M15.089 13.199l-1.742-3.736c-0.962 1.401-2.464 2.398-4.203 2.701l1.459 3.128c0.186 0.4 0.764 0.373 0.914-0.040l0.748-2.054 0.154-0.072 2.054 0.748c0.412 0.151 0.804-0.276 0.618-0.675zM8.040 0.384c-3.003 0-5.446 2.443-5.446 5.446s2.443 5.446 5.446 5.446c3.003 0 5.446-2.443 5.446-5.446s-2.443-5.446-5.446-5.446zM10.689 5.429l-0.966 0.941 0.228 1.33c0.070 0.406-0.358 0.711-0.718 0.522l-1.194-0.628-1.194 0.628c-0.363 0.19-0.788-0.118-0.718-0.522l0.228-1.33-0.966-0.941c-0.293-0.286-0.131-0.786 0.274-0.844l1.335-0.194 0.597-1.209c0.181-0.367 0.707-0.368 0.888 0l0.597 1.209 1.335 0.194c0.405 0.059 0.568 0.558 0.274 0.844zM2.732 9.463l-1.742 3.736c-0.187 0.4 0.208 0.825 0.618 0.674l2.054-0.748 0.154 0.072 0.748 2.054c0.15 0.412 0.727 0.441 0.914 0.040l1.459-3.128c-1.739-0.302-3.241-1.3-4.203-2.701z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { translate } from '../../helpers/l10n';\nimport RecommendedIcon from '../icons/RecommendedIcon';\nimport './Radio.css';\nimport './RadioCard.css';\n\nexport interface RadioCardProps {\n  className?: string;\n  disabled?: boolean;\n  onClick?: () => void;\n  selected?: boolean;\n}\n\ninterface Props extends RadioCardProps {\n  children: React.ReactNode;\n  recommended?: string;\n  title: React.ReactNode;\n  titleInfo?: React.ReactNode;\n  vertical?: boolean;\n}\n\nexport default function RadioCard(props: Props) {\n  const {\n    className,\n    disabled,\n    onClick,\n    recommended,\n    selected,\n    titleInfo,\n    vertical = false\n  } = props;\n  const isActionable = Boolean(onClick);\n  return (\n    <div\n      aria-checked={selected}\n      className={classNames(\n        'radio-card',\n        {\n          'radio-card-actionable': isActionable,\n          'radio-card-vertical': vertical,\n          disabled,\n          selected\n        },\n        className\n      )}\n      onClick={isActionable && !disabled ? onClick : undefined}\n      role=\"radio\"\n      tabIndex={0}>\n      <h2 className=\"radio-card-header big-spacer-bottom\">\n        <span className=\"display-flex-center link-radio\">\n          {isActionable && (\n            <i className={classNames('icon-radio', 'spacer-right', { 'is-checked': selected })} />\n          )}\n          {props.title}\n        </span>\n        {titleInfo}\n      </h2>\n      <div className=\"radio-card-body\">{props.children}</div>\n      {recommended && (\n        <div className=\"radio-card-recommended\">\n          <RecommendedIcon className=\"spacer-right\" />\n          <FormattedMessage\n            defaultMessage={recommended}\n            id={recommended}\n            values={{ recommended: <strong>{translate('recommended')}</strong> }}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ComponentContext } from '../../../app/components/ComponentContext';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { translate } from '../../../helpers/l10n';\nimport { DefinitionChangeEventInner, isDefinitionChangeEvent } from './DefinitionChangeEventInner';\nimport { isRichQualityGateEvent, RichQualityGateEventInner } from './RichQualityGateEventInner';\n\nexport interface EventInnerProps {\n  event: T.AnalysisEvent;\n  readonly?: boolean;\n}\n\nexport default function EventInner({ event, readonly }: EventInnerProps) {\n  if (isRichQualityGateEvent(event)) {\n    return <RichQualityGateEventInner event={event} readonly={readonly} />;\n  } else if (isDefinitionChangeEvent(event)) {\n    return (\n      <ComponentContext.Consumer>\n        {({ branchLike }) => (\n          <DefinitionChangeEventInner branchLike={branchLike} event={event} readonly={readonly} />\n        )}\n      </ComponentContext.Consumer>\n    );\n  }\n\n  return (\n    <Tooltip overlay={event.description || null}>\n      <span className=\"text-middle\">\n        <span className=\"note little-spacer-right\">\n          {translate('event.category', event.category)}:\n        </span>\n        <strong className=\"spacer-right\">{event.name}</strong>\n      </span>\n    </Tooltip>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { ButtonLink } from '../../../components/controls/buttons';\nimport BranchIcon from '../../../components/icons/BranchIcon';\nimport DropdownIcon from '../../../components/icons/DropdownIcon';\nimport { isMainBranch } from '../../../helpers/branch-like';\nimport { translate } from '../../../helpers/l10n';\nimport { limitComponentName } from '../../../helpers/path';\nimport { getProjectUrl } from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\n\nexport type DefinitionChangeEvent = T.AnalysisEvent &\n  Required<Pick<T.AnalysisEvent, 'definitionChange'>>;\n\nexport function isDefinitionChangeEvent(event: T.AnalysisEvent): event is DefinitionChangeEvent {\n  return event.category === 'DEFINITION_CHANGE' && event.definitionChange !== undefined;\n}\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  event: DefinitionChangeEvent;\n  readonly?: boolean;\n}\n\ninterface State {\n  expanded: boolean;\n}\n\nexport class DefinitionChangeEventInner extends React.PureComponent<Props, State> {\n  state: State = { expanded: false };\n\n  stopPropagation = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.stopPropagation();\n  };\n\n  toggleProjectsList = () => {\n    this.setState(state => ({ expanded: !state.expanded }));\n  };\n\n  renderProjectLink = (project: { key: string; name: string }, branch: string | undefined) => (\n    <Link\n      onClick={this.stopPropagation}\n      title={project.name}\n      to={getProjectUrl(project.key, branch)}>\n      {limitComponentName(project.name, 28)}\n    </Link>\n  );\n\n  renderBranch = (branch = translate('branches.main_branch')) => (\n    <span className=\"nowrap\" title={branch}>\n      <BranchIcon className=\"little-spacer-left text-text-top\" />\n      {branch}\n    </span>\n  );\n\n  renderProjectChange(project: {\n    changeType: string;\n    key: string;\n    name: string;\n    branch?: string;\n    newBranch?: string;\n    oldBranch?: string;\n  }) {\n    const mainBranch = !this.props.branchLike || isMainBranch(this.props.branchLike);\n\n    if (project.changeType === 'ADDED') {\n      const message = mainBranch\n        ? 'event.definition_change.added'\n        : 'event.definition_change.branch_added';\n      return (\n        <div className=\"text-ellipsis\">\n          <FormattedMessage\n            defaultMessage={translate(message)}\n            id={message}\n            values={{\n              project: this.renderProjectLink(project, project.branch),\n              branch: this.renderBranch(project.branch)\n            }}\n          />\n        </div>\n      );\n    } else if (project.changeType === 'REMOVED') {\n      const message = mainBranch\n        ? 'event.definition_change.removed'\n        : 'event.definition_change.branch_removed';\n      return (\n        <div className=\"text-ellipsis\">\n          <FormattedMessage\n            defaultMessage={translate(message)}\n            id={message}\n            values={{\n              project: this.renderProjectLink(project, project.branch),\n              branch: this.renderBranch(project.branch)\n            }}\n          />\n        </div>\n      );\n    } else if (project.changeType === 'BRANCH_CHANGED') {\n      return (\n        <FormattedMessage\n          defaultMessage={translate('event.definition_change.branch_replaced')}\n          id=\"event.definition_change.branch_replaced\"\n          values={{\n            project: this.renderProjectLink(project, project.newBranch),\n            oldBranch: this.renderBranch(project.oldBranch),\n            newBranch: this.renderBranch(project.newBranch)\n          }}\n        />\n      );\n    }\n    return null;\n  }\n\n  render() {\n    const { event, readonly } = this.props;\n    const { expanded } = this.state;\n    return (\n      <>\n        <span className=\"note\">\n          {translate('event.category', event.category)}\n          {!readonly && ':'}\n        </span>\n\n        {!readonly && (\n          <div>\n            <ButtonLink\n              className=\"project-activity-event-inner-more-link\"\n              onClick={this.toggleProjectsList}\n              stopPropagation={true}>\n              {expanded ? translate('hide') : translate('more')}\n              <DropdownIcon className=\"little-spacer-left\" turned={expanded} />\n            </ButtonLink>\n          </div>\n        )}\n\n        {expanded && (\n          <ul className=\"spacer-left spacer-top\">\n            {event.definitionChange.projects.map(project => (\n              <li className=\"display-flex-center spacer-top\" key={project.key}>\n                {this.renderProjectChange(project)}\n              </li>\n            ))}\n          </ul>\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { ResetButtonLink } from '../../../components/controls/buttons';\nimport DropdownIcon from '../../../components/icons/DropdownIcon';\nimport Level from '../../../components/ui/Level';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { getProjectUrl } from '../../../helpers/urls';\n\nexport type RichQualityGateEvent = T.AnalysisEvent & Required<Pick<T.AnalysisEvent, 'qualityGate'>>;\n\nexport function isRichQualityGateEvent(event: T.AnalysisEvent): event is RichQualityGateEvent {\n  return event.category === 'QUALITY_GATE' && event.qualityGate !== undefined;\n}\n\ninterface Props {\n  event: RichQualityGateEvent;\n  readonly?: boolean;\n}\n\ninterface State {\n  expanded: boolean;\n}\n\nexport class RichQualityGateEventInner extends React.PureComponent<Props, State> {\n  state: State = { expanded: false };\n\n  stopPropagation = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.stopPropagation();\n  };\n\n  toggleProjectsList = () => {\n    this.setState(state => ({ expanded: !state.expanded }));\n  };\n\n  render() {\n    const { event, readonly } = this.props;\n    const { expanded } = this.state;\n    return (\n      <>\n        <span className=\"note spacer-right\">{translate('event.category', event.category)}:</span>\n        {event.qualityGate.stillFailing ? (\n          <FormattedMessage\n            defaultMessage={translate('event.quality_gate.still_x')}\n            id=\"event.quality_gate.still_x\"\n            values={{ status: <Level level={event.qualityGate.status} small={true} /> }}\n          />\n        ) : (\n          <Level level={event.qualityGate.status} small={true} />\n        )}\n\n        <div>\n          {!readonly && event.qualityGate.failing.length > 0 && (\n            <ResetButtonLink\n              className=\"project-activity-event-inner-more-link\"\n              onClick={this.toggleProjectsList}\n              stopPropagation={true}>\n              {expanded ? translate('hide') : translate('more')}\n              <DropdownIcon className=\"little-spacer-left\" turned={expanded} />\n            </ResetButtonLink>\n          )}\n        </div>\n\n        {expanded && (\n          <ul className=\"spacer-left spacer-top\">\n            {event.qualityGate.failing.map(project => (\n              <li className=\"display-flex-center spacer-top\" key={project.key}>\n                <Level\n                  aria-label={translate('quality_gates.status')}\n                  className=\"spacer-right\"\n                  level={event.qualityGate.status}\n                  small={true}\n                />\n                <div className=\"flex-1 text-ellipsis\">\n                  <Link\n                    onClick={this.stopPropagation}\n                    title={project.name}\n                    to={getProjectUrl(project.key, project.branch)}>\n                    <span aria-label={translateWithParameters('project_x', project.name)}>\n                      {project.name}\n                    </span>\n                  </Link>\n                </div>\n              </li>\n            ))}\n          </ul>\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as startOfDay from 'date-fns/start_of_day';\nimport { isEqual } from 'lodash';\nimport { DEFAULT_GRAPH } from '../../components/activity-graph/utils';\nimport { parseDate } from '../../helpers/dates';\nimport {\n  cleanQuery,\n  parseAsArray,\n  parseAsDate,\n  parseAsString,\n  serializeDate,\n  serializeString,\n  serializeStringArray\n} from '../../helpers/query';\nimport { GraphType } from '../../types/project-activity';\n\nexport interface Query {\n  category: string;\n  customMetrics: string[];\n  from?: Date;\n  graph: GraphType;\n  project: string;\n  selectedDate?: Date;\n  to?: Date;\n}\n\nexport const EVENT_TYPES = ['VERSION', 'QUALITY_GATE', 'QUALITY_PROFILE', 'OTHER'];\nexport const APPLICATION_EVENT_TYPES = ['QUALITY_GATE', 'DEFINITION_CHANGE', 'OTHER'];\n\nexport function activityQueryChanged(prevQuery: Query, nextQuery: Query) {\n  return prevQuery.category !== nextQuery.category || datesQueryChanged(prevQuery, nextQuery);\n}\n\nexport function customMetricsChanged(prevQuery: Query, nextQuery: Query) {\n  return !isEqual(prevQuery.customMetrics, nextQuery.customMetrics);\n}\n\nexport function datesQueryChanged(prevQuery: Query, nextQuery: Query) {\n  return !isEqual(prevQuery.from, nextQuery.from) || !isEqual(prevQuery.to, nextQuery.to);\n}\n\nexport function historyQueryChanged(prevQuery: Query, nextQuery: Query) {\n  return prevQuery.graph !== nextQuery.graph;\n}\n\nexport function selectedDateQueryChanged(prevQuery: Query, nextQuery: Query) {\n  return !isEqual(prevQuery.selectedDate, nextQuery.selectedDate);\n}\n\ninterface AnalysesByDay {\n  byDay: T.Dict<T.ParsedAnalysis[]>;\n  version: string | null;\n  key: string | null;\n}\n\nexport function getAnalysesByVersionByDay(\n  analyses: T.ParsedAnalysis[],\n  query: Pick<Query, 'category' | 'from' | 'to'>\n) {\n  return analyses.reduce<AnalysesByDay[]>((acc, analysis) => {\n    let currentVersion = acc[acc.length - 1];\n    const versionEvent = analysis.events.find(event => event.category === 'VERSION');\n    if (versionEvent) {\n      const newVersion = { version: versionEvent.name, key: versionEvent.key, byDay: {} };\n      if (!currentVersion || Object.keys(currentVersion.byDay).length > 0) {\n        acc.push(newVersion);\n      } else {\n        acc[acc.length - 1] = newVersion;\n      }\n      currentVersion = newVersion;\n    } else if (!currentVersion) {\n      // APPs don't have version events, so let's create a fake one\n      currentVersion = { version: null, key: null, byDay: {} };\n      acc.push(currentVersion);\n    }\n\n    const day = startOfDay(parseDate(analysis.date))\n      .getTime()\n      .toString();\n\n    let matchFilters = true;\n    if (query.category || query.from || query.to) {\n      const isAfterFrom = !query.from || analysis.date >= query.from;\n      const isBeforeTo = !query.to || analysis.date <= query.to;\n      const hasSelectedCategoryEvents =\n        !query.category || analysis.events.find(event => event.category === query.category) != null;\n      matchFilters = isAfterFrom && isBeforeTo && hasSelectedCategoryEvents;\n    }\n\n    if (matchFilters) {\n      if (!currentVersion.byDay[day]) {\n        currentVersion.byDay[day] = [];\n      }\n      currentVersion.byDay[day].push(analysis);\n    }\n    return acc;\n  }, []);\n}\n\nexport function parseQuery(urlQuery: T.RawQuery): Query {\n  return {\n    category: parseAsString(urlQuery['category']),\n    customMetrics: parseAsArray(urlQuery['custom_metrics'], parseAsString),\n    from: parseAsDate(urlQuery['from']),\n    graph: parseGraph(urlQuery['graph']),\n    project: parseAsString(urlQuery['id']),\n    to: parseAsDate(urlQuery['to']),\n    selectedDate: parseAsDate(urlQuery['selected_date'])\n  };\n}\n\nexport function serializeQuery(query: Query): T.RawQuery {\n  return cleanQuery({\n    category: serializeString(query.category),\n    from: serializeDate(query.from),\n    project: serializeString(query.project),\n    to: serializeDate(query.to)\n  });\n}\n\nexport function serializeUrlQuery(query: Query): T.RawQuery {\n  return cleanQuery({\n    category: serializeString(query.category),\n    custom_metrics: serializeStringArray(query.customMetrics),\n    from: serializeDate(query.from),\n    graph: serializeGraph(query.graph),\n    id: serializeString(query.project),\n    to: serializeDate(query.to),\n    selected_date: serializeDate(query.selectedDate)\n  });\n}\n\nfunction parseGraph(value?: string) {\n  const graph = parseAsString(value);\n  return Object.keys(GraphType).includes(graph) ? (graph as GraphType) : DEFAULT_GRAPH;\n}\n\nfunction serializeGraph(value?: GraphType) {\n  return value === DEFAULT_GRAPH ? undefined : value;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { getJSON, post, postJSON, RequestData } from '../helpers/request';\nimport { BranchParameters } from '../types/branch-like';\n\nexport function getProjectActivity(\n  data: {\n    project: string;\n    category?: string;\n    from?: string;\n    p?: number;\n    ps?: number;\n  } & BranchParameters\n): Promise<{ analyses: T.Analysis[]; paging: T.Paging }> {\n  return getJSON('/api/project_analyses/search', data).catch(throwGlobalError);\n}\n\ninterface CreateEventResponse {\n  analysis: string;\n  key: string;\n  name: string;\n  category: string;\n  description?: string;\n}\n\nexport function createEvent(\n  analysis: string,\n  name: string,\n  category?: string,\n  description?: string\n): Promise<CreateEventResponse> {\n  const data: RequestData = { analysis, name };\n  if (category) {\n    data.category = category;\n  }\n  if (description) {\n    data.description = description;\n  }\n  return postJSON('/api/project_analyses/create_event', data).then(r => r.event, throwGlobalError);\n}\n\nexport function deleteEvent(event: string): Promise<void | Response> {\n  return post('/api/project_analyses/delete_event', { event }).catch(throwGlobalError);\n}\n\nexport function changeEvent(\n  event: string,\n  name?: string,\n  description?: string\n): Promise<CreateEventResponse> {\n  const data: RequestData = { event };\n  if (name) {\n    data.name = name;\n  }\n  if (description) {\n    data.description = description;\n  }\n  return postJSON('/api/project_analyses/update_event', data).then(r => r.event, throwGlobalError);\n}\n\nexport function deleteAnalysis(analysis: string): Promise<void | Response> {\n  return post('/api/project_analyses/delete', { analysis }).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { getJSON, post } from '../helpers/request';\n\nexport function getNewCodePeriod(data?: {\n  project?: string;\n  branch?: string;\n}): Promise<T.Omit<T.NewCodePeriod, 'effectiveValue'>> {\n  return getJSON('/api/new_code_periods/show', data).catch(throwGlobalError);\n}\n\nexport function setNewCodePeriod(data: {\n  project?: string;\n  branch?: string;\n  type: T.NewCodePeriodSettingType;\n  value?: string;\n}): Promise<void> {\n  return post('/api/new_code_periods/set', data).catch(throwGlobalError);\n}\n\nexport function resetNewCodePeriod(data: { project?: string; branch?: string }): Promise<void> {\n  return post('/api/new_code_periods/unset', data).catch(throwGlobalError);\n}\n\nexport function listBranchesNewCodePeriod(data: {\n  project: string;\n}): Promise<{ newCodePeriods: T.NewCodePeriodBranch[] }> {\n  return getJSON('/api/new_code_periods/list', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function validateDays(days: string) {\n  const parsed = parseInt(days, 10);\n\n  return !(days.length < 1 || isNaN(parsed) || parsed < 1 || String(parsed) !== days);\n}\n\nexport function getSettingValue({\n  analysis,\n  days,\n  referenceBranch,\n  type\n}: {\n  analysis?: string;\n  days?: string;\n  referenceBranch?: string;\n  type?: T.NewCodePeriodSettingType;\n}) {\n  switch (type) {\n    case 'NUMBER_OF_DAYS':\n      return days;\n    case 'REFERENCE_BRANCH':\n      return referenceBranch;\n    case 'SPECIFIC_ANALYSIS':\n      return analysis;\n    default:\n      return undefined;\n  }\n}\n\nexport function validateSetting(state: {\n  analysis?: string;\n  currentSetting?: T.NewCodePeriodSettingType;\n  currentSettingValue?: string;\n  days: string;\n  overrideGeneralSetting?: boolean;\n  referenceBranch?: string;\n  selected?: T.NewCodePeriodSettingType;\n}) {\n  const {\n    analysis = '',\n    currentSetting,\n    currentSettingValue,\n    days,\n    overrideGeneralSetting,\n    referenceBranch = '',\n    selected\n  } = state;\n\n  let isChanged;\n  if (!currentSetting && overrideGeneralSetting !== undefined) {\n    isChanged = overrideGeneralSetting;\n  } else {\n    isChanged =\n      overrideGeneralSetting === false ||\n      selected !== currentSetting ||\n      (selected === 'NUMBER_OF_DAYS' && days !== currentSettingValue) ||\n      (selected === 'SPECIFIC_ANALYSIS' && analysis !== currentSettingValue) ||\n      (selected === 'REFERENCE_BRANCH' && referenceBranch !== currentSettingValue);\n  }\n\n  const isValid =\n    overrideGeneralSetting === false ||\n    selected === 'PREVIOUS_VERSION' ||\n    (selected === 'SPECIFIC_ANALYSIS' && analysis.length > 0) ||\n    (selected === 'NUMBER_OF_DAYS' && validateDays(days)) ||\n    (selected === 'REFERENCE_BRANCH' && referenceBranch.length > 0);\n\n  return { isChanged, isValid };\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport RadioCard from '../../../components/controls/RadioCard';\nimport ValidationInput from '../../../components/controls/ValidationInput';\nimport MandatoryFieldsExplanation from '../../../components/ui/MandatoryFieldsExplanation';\nimport { translate } from '../../../helpers/l10n';\n\nexport interface Props {\n  className?: string;\n  days: string;\n  disabled?: boolean;\n  isChanged: boolean;\n  isValid: boolean;\n  onChangeDays: (value: string) => void;\n  onSelect: (selection: T.NewCodePeriodSettingType) => void;\n  selected: boolean;\n}\n\nexport default function BaselineSettingDays(props: Props) {\n  const { className, days, disabled, isChanged, isValid, onChangeDays, onSelect, selected } = props;\n  return (\n    <RadioCard\n      className={className}\n      disabled={disabled}\n      onClick={() => onSelect('NUMBER_OF_DAYS')}\n      selected={selected}\n      title={translate('baseline.number_days')}>\n      <>\n        <p className=\"big-spacer-bottom\">{translate('baseline.number_days.description')}</p>\n        {selected && (\n          <>\n            <MandatoryFieldsExplanation />\n\n            <ValidationInput\n              error={undefined}\n              id=\"baseline_number_of_days\"\n              isInvalid={isChanged && !isValid}\n              isValid={isChanged && isValid}\n              label={translate('baseline.specify_days')}\n              required={true}>\n              <input onChange={e => onChangeDays(e.currentTarget.value)} type=\"text\" value={days} />\n            </ValidationInput>\n          </>\n        )}\n      </>\n    </RadioCard>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport RadioCard from '../../../components/controls/RadioCard';\nimport { translate } from '../../../helpers/l10n';\n\nexport interface Props {\n  disabled?: boolean;\n  isDefault?: boolean;\n  onSelect: (selection: T.NewCodePeriodSettingType) => void;\n  selected: boolean;\n}\n\nexport default function BaselineSettingPreviousVersion(props: Props) {\n  const { disabled, isDefault, onSelect, selected } = props;\n  return (\n    <RadioCard\n      disabled={disabled}\n      onClick={() => onSelect('PREVIOUS_VERSION')}\n      selected={selected}\n      title={\n        translate('baseline.previous_version') + (isDefault ? ` (${translate('default')})` : '')\n      }>\n      <p>{translate('baseline.previous_version.description')}</p>\n    </RadioCard>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./RadioCard.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".radio-card{display:flex;flex-direction:column;width:450px;min-height:210px;background-color:#fff;border:1px solid #e6e6e6;border-radius:3px;box-sizing:border-box;margin-right:16px;transition:all .2s ease}.radio-card.animated{height:0;border-width:0;overflow:hidden}.radio-card.animated.open{height:210px;border-width:1px}.radio-card.highlight{box-shadow:0 6px 12px rgba(0,0,0,.175)}.radio-card:last-child{margin-right:0}.radio-card:focus{outline:none}.radio-card-vertical{width:100%;min-height:auto}.radio-card-actionable{cursor:pointer}.radio-card-actionable:not(.disabled):hover{box-shadow:0 6px 12px rgba(0,0,0,.175);transform:translateY(-2px)}.radio-card-actionable.selected{border-color:#236a97}.radio-card-actionable.radio-card-vertical:not(.disabled):hover{box-shadow:none;transform:none}.radio-card-actionable.radio-card-vertical:not(.selected):not(.disabled):hover{border-color:#cae3f2}.radio-card-actionable.selected .radio-card-recommended{border:1px solid #236a97;border-top:none}.radio-card-actionable.disabled{cursor:not-allowed;background-color:#ebebeb;border-color:#ddd}.radio-card-actionable.disabled h2,.radio-card-actionable.disabled ul{color:#bbb}.radio-card-header{align-items:center;padding:16px 16px 0}.radio-card-body,.radio-card-header{display:flex;justify-content:space-between}.radio-card-body{flex-grow:1;flex-direction:column;padding:0 16px 16px}.radio-card-body .alert{margin-bottom:0}.radio-card-recommended{position:relative;padding:6px 16px;left:-1px;bottom:-1px;width:450px;color:#fff;background-color:#4b9fd5;border-radius:0 0 3px 3px;box-sizing:border-box;font-size:12px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { colors } from '../../app/theme';\nimport Icon, { IconProps } from './Icon';\n\nexport default function WarningIcon({ fill, ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M9 12.242v-1.484c0-.14-.11-.258-.25-.258h-1.5c-.14 0-.25.117-.25.258v1.484c0 .14.11.258.25.258h1.5c.14 0 .25-.117.25-.258zM8.984 9.32l.141-3.586a.189.189 0 0 0-.078-.148C9 5.546 8.93 5.5 8.859 5.5H7.141c-.07 0-.141.047-.188.086-.055.039-.078.117-.078.164l.133 3.57c0 .102.117.18.265.18H8.72c.14 0 .258-.078.265-.18zm-.109-7.297l6 11A1 1 0 0 1 14 14.5H2a1 1 0 0 1-.875-1.477l6-11a.994.994 0 0 1 1.75 0z\"\n        style={{ fill: fill || colors.warningIconColor }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ConfirmModal from '../../../../components/controls/ConfirmModal';\nimport { translate } from '../../../../helpers/l10n';\n\ninterface Props {\n  changeEvent: (event: string, name: string) => Promise<void>;\n  event: T.AnalysisEvent;\n  header: string;\n  onClose: () => void;\n}\n\ninterface State {\n  name: string;\n}\n\nexport default class ChangeEventForm extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { name: props.event.name };\n  }\n\n  changeInput = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ name: event.target.value });\n  };\n\n  handleSubmit = () => {\n    return this.props.changeEvent(this.props.event.key, this.state.name);\n  };\n\n  render() {\n    const { name } = this.state;\n    return (\n      <ConfirmModal\n        confirmButtonText={translate('change_verb')}\n        confirmDisable={!name || name === this.props.event.name}\n        header={this.props.header}\n        onClose={this.props.onClose}\n        onConfirm={this.handleSubmit}\n        size=\"small\">\n        <div className=\"modal-field\">\n          <label>{translate('name')}</label>\n          <input autoFocus={true} onChange={this.changeInput} type=\"text\" value={name} />\n        </div>\n      </ConfirmModal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ConfirmModal from '../../../../components/controls/ConfirmModal';\nimport { translate } from '../../../../helpers/l10n';\n\nexport interface RemoveEventFormProps {\n  analysisKey: string;\n  event: T.AnalysisEvent;\n  header: string;\n  removeEventQuestion: string;\n  onClose: () => void;\n  onConfirm: (analysis: string, event: string) => Promise<void>;\n}\n\nexport default function RemoveEventForm(props: RemoveEventFormProps) {\n  const { analysisKey, event, header, removeEventQuestion } = props;\n  return (\n    <ConfirmModal\n      confirmButtonText={translate('delete')}\n      header={header}\n      isDestructive={true}\n      onClose={props.onClose}\n      onConfirm={() => props.onConfirm(analysisKey, event.key)}>\n      {removeEventQuestion}\n    </ConfirmModal>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DeleteButton, EditButton } from '../../../components/controls/buttons';\nimport { translate } from '../../../helpers/l10n';\nimport EventInner from './EventInner';\nimport ChangeEventForm from './forms/ChangeEventForm';\nimport RemoveEventForm from './forms/RemoveEventForm';\n\nexport interface EventProps {\n  analysisKey: string;\n  canAdmin?: boolean;\n  event: T.AnalysisEvent;\n  isFirst?: boolean;\n  onChange?: (event: string, name: string) => Promise<void>;\n  onDelete?: (analysisKey: string, event: string) => Promise<void>;\n}\n\nexport function Event(props: EventProps) {\n  const { analysisKey, event, canAdmin, isFirst } = props;\n\n  const [changing, setChanging] = React.useState(false);\n  const [deleting, setDeleting] = React.useState(false);\n\n  const isOther = event.category === 'OTHER';\n  const isVersion = event.category === 'VERSION';\n  const canChange = (isOther || isVersion) && props.onChange;\n  const canDelete = (isOther || (isVersion && !isFirst)) && props.onDelete;\n  const showActions = canAdmin && (canChange || canDelete);\n\n  return (\n    <div className=\"project-activity-event\">\n      <EventInner event={event} />\n\n      {showActions && (\n        <span className=\"nowrap\">\n          {canChange && (\n            <EditButton\n              aria-label={translate('project_activity.events.tooltip.edit')}\n              className=\"button-small\"\n              data-test=\"project-activity__edit-event\"\n              onClick={() => setChanging(true)}\n              stopPropagation={true}\n            />\n          )}\n          {canDelete && (\n            <DeleteButton\n              aria-label={translate('project_activity.events.tooltip.delete')}\n              className=\"button-small\"\n              data-test=\"project-activity__delete-event\"\n              onClick={() => setDeleting(true)}\n              stopPropagation={true}\n            />\n          )}\n        </span>\n      )}\n\n      {changing && props.onChange && (\n        <ChangeEventForm\n          changeEvent={props.onChange}\n          event={event}\n          header={\n            isVersion\n              ? translate('project_activity.change_version')\n              : translate('project_activity.change_custom_event')\n          }\n          onClose={() => setChanging(false)}\n        />\n      )}\n\n      {deleting && props.onDelete && (\n        <RemoveEventForm\n          analysisKey={analysisKey}\n          event={event}\n          header={\n            isVersion\n              ? translate('project_activity.remove_version')\n              : translate('project_activity.remove_custom_event')\n          }\n          onClose={() => setDeleting(false)}\n          onConfirm={props.onDelete}\n          removeEventQuestion={translate(\n            `project_activity.${isVersion ? 'remove_version' : 'remove_custom_event'}.question`\n          )}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default React.memo(Event);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport Event from './Event';\n\nexport interface EventsProps {\n  analysisKey: string;\n  canAdmin?: boolean;\n  events: T.AnalysisEvent[];\n  isFirst?: boolean;\n  onChange?: (event: string, name: string) => Promise<void>;\n  onDelete?: (analysis: string, event: string) => Promise<void>;\n}\n\nexport function Events(props: EventsProps) {\n  const { analysisKey, canAdmin, events, isFirst } = props;\n\n  const sortedEvents = sortBy(\n    events,\n    // versions last\n    event => (event.category === 'VERSION' ? 1 : 0),\n    // then the rest sorted by category\n    'category'\n  );\n\n  return (\n    <div className=\"big-spacer-top\">\n      {sortedEvents.map(event => (\n        <Event\n          analysisKey={analysisKey}\n          canAdmin={canAdmin}\n          event={event}\n          isFirst={isFirst}\n          key={event.key}\n          onChange={props.onChange}\n          onDelete={props.onDelete}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default React.memo(Events);\n"],"sourceRoot":""}