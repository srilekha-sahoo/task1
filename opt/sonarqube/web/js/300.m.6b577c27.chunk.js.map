{"version":3,"sources":["webpack:///./src/main/js/apps/code/code.css?c1cd","webpack:///./src/main/js/apps/code/code.css","webpack:///./src/main/js/apps/code/bucket.ts","webpack:///./src/main/js/apps/code/utils.ts","webpack:///./src/main/js/apps/code/components/ComponentName.tsx","webpack:///./src/main/js/apps/code/components/Breadcrumbs.tsx","webpack:///./src/main/js/components/hoc/withKeyboardNavigation.tsx","webpack:///./src/main/js/apps/code/components/ComponentMeasure.tsx","webpack:///./src/main/js/components/icons/PinIcon.tsx","webpack:///./src/main/js/apps/code/components/ComponentPin.tsx","webpack:///./src/main/js/apps/code/components/Component.tsx","webpack:///./src/main/js/components/hoc/withScrollTo.tsx","webpack:///./src/main/js/apps/code/components/ComponentsEmpty.tsx","webpack:///./src/main/js/apps/code/components/ComponentsHeader.tsx","webpack:///./src/main/js/apps/code/components/Components.tsx","webpack:///./src/main/js/apps/code/components/Search.tsx","webpack:///./src/main/js/apps/code/components/SourceViewerWrapper.tsx","webpack:///./src/main/js/apps/code/components/CodeApp.tsx","webpack:///./src/main/js/components/icons/QualifierIcon.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/components/controls/ListFooter.tsx","webpack:///./node_modules/lodash/isArrayLikeObject.js","webpack:///./src/main/js/app/components/a11y/A11ySkipTarget.tsx","webpack:///./src/main/js/components/ui/Level.tsx","webpack:///./src/main/js/components/ui/Rating.tsx","webpack:///./src/main/js/components/icons/BranchIcon.tsx","webpack:///./src/main/js/components/ui/Level.css?03ac","webpack:///./src/main/js/components/ui/Level.css","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./src/main/js/components/ui/Rating.css?4296","webpack:///./src/main/js/components/ui/Rating.css","webpack:///./src/main/js/components/SourceViewer/SourceViewer.tsx","webpack:///./node_modules/lodash/intersection.js","webpack:///./src/main/js/components/ui/PageActions.tsx","webpack:///./node_modules/lodash/_baseIntersection.js","webpack:///./node_modules/lodash/_castArrayLikeObject.js"],"names":["api","content","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push","bucket","childrenBucket","breadcrumbsBucket","addComponent","component","key","addComponentChildren","componentKey","children","total","page","previous","getComponentChildren","addComponentBreadcrumbs","breadcrumbs","getComponentBreadcrumbs","METRICS","ncloc","bugs","vulnerabilities","code_smells","security_hotspots","coverage","duplicated_lines_density","APPLICATION_METRICS","alert_status","PORTFOLIO_METRICS","releasability_rating","reliability_rating","security_rating","security_review_rating","sqale_rating","LEAK_METRICS","new_lines","new_coverage","new_duplicated_lines_density","prepareChildren","r","components","paging","pageIndex","skipRootDir","filter","qualifier","name","storeChildrenBase","forEach","storeChildrenBreadcrumbs","parentComponentKey","parentBreadcrumbs","child","getCodeMetrics","branchLike","includes","metrics","includeQGStatus","concat","showLeakMeasure","retrieveComponentBase","instance","existing","getComponent","Promise","resolve","metricKeys","join","then","mounted","retrieveComponentChildren","ps","s","retrieveComponentBreadcrumbs","getTooltip","path","ComponentName","rootComponent","canBrowse","prefix","undefined","strings","sortedStrings","slice","sort","firstString","firstStringLength","length","lastString","charAt","substr","prefixTokens","split","lastPrefixPart","mostCommonPrefix","style","color","secondFontColor","inner","refKey","branch","className","to","QualifierIcon","query","id","Object","assign","selected","pathname","title","BranchIcon","Breadcrumbs","map","index","withKeyboardNavigation","WrappedComponent","attachShortcuts","this","skipIfFile","handleHighlightPrevious","handleHighlightNext","handleSelectCurrent","handleSelectParent","detachShortcuts","getCurrentIndex","props","findIndex","handler","isFile","onHighlight","cycle","first","onEndOfList","last","onSelect","handleSelectNext","onGoToParent","handleSelectPrevious","PageActions","showShortcuts","displayName","metric","isProject","isReleasability","finalMetricKey","finalMetricType","type","measure","Array","isArray","measures","find","value","Measure","metricKey","metricType","PinIcon","fill","iconProps","Icon","d","handleClick","event","preventDefault","currentTarget","blur","openComponent","href","onClick","canBePinned","hasBaseComponent","Consumer","componentRef","node","handleUpdate","setTimeout","handleScroll","Element","position","getBoundingClientRect","top","bottom","window","innerHeight","scrollTo","pageYOffset","ref","ComponentsEmpty","colSpan","SHORT_NAME_METRICS","ComponentsHeader","baseComponent","isPortfolio","columns","column","nowrap","keys","list","state","loading","handleKeyDown","keyCode","handleSearch","router","location","setState","replace","search","qualifiers","q","onSearchResults","catch","handleQueryChange","onSearchClear","nextProps","SearchBox","minLength","onChange","onKeyDown","placeholder","DeferredSpinner","withRouter","scrollToLine","line","row","document","querySelector","smooth","bottomOffset","componentMeasures","finalLine","Number","SourceViewer","aroundLine","highlightedLine","onIssueChange","onLoaded","showMeasures","super","loadComponent","all","retrieveComponent","searchResults","sourceViewer","stopLoading","handleComponentChange","handleLoadMore","p","loadMoreChildren","handleGoToParent","parentComponent","highlighted","handleHighlight","handleIssueChange","_","refreshBranchStatus","handleSearchClear","handleSearchResults","handleSelect","finalKey","fetchBranchStatus","fetchMetrics","prevProps","showSearch","hasComponents","shouldShowBreadcrumbs","shouldShowComponentList","componentsClassName","defaultTitle","Suggestions","suggestions","defer","A11ySkipTarget","anchor","ListFooter","count","loadMore","mapDispatchToProps","qualifierIcons","app","blue","brc","dev","dir","DirectoryIcon","fil","svw","trk","ProjectIcon","uts","UnitTestIcon","vw","cla","dev_prj","lib","pac","toLowerCase","FoundIcon","orange","addSuggestions","removeSuggestions","SuggestionsInner","needReload","ready","hasMore","button","reload","disabled","isArrayLike","isObjectLike","addA11ySkipLink","removeA11ySkipLink","A11ySkipTargetInner","getLink","label","weight","Level","formatted","level","small","muted","Rating","ariaAttrs","KNOWN_RATINGS","enhanceMeasure","leak","getLeakValue","period","getRatingTooltip","decimals","formattedValue","omitExtraDecimalZeros","tooltip","rating","overlay","arrayMap","baseIntersection","baseRest","castArrayLikeObject","intersection","arrays","mapped","componentQualifier","current","Project","SetCache","arrayIncludes","arrayIncludesWith","baseUnary","cacheHas","nativeMin","Math","min","iteratee","comparator","othLength","othIndex","caches","maxLength","Infinity","result","array","seen","outer","computed","cache","isArrayLikeObject"],"mappings":"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","file":"js/300.m.6b577c27.chunk.js","sourcesContent":["var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./code.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".code-components .page-actions{margin-top:-35px}.code-components .boxed-group.search-results{padding-top:16px}.code-components .boxed-group.search-results .page-actions{margin-top:-50px}.code-breadcrumbs{display:flex;flex-wrap:wrap}.code-breadcrumbs>li{padding:5px 5px 3px}.code-breadcrumbs>li:first-child{padding-left:0}.code-breadcrumbs>li:after{position:relative;top:-1px;padding-left:10px;color:#666;font-size:11px;content:\\\">\\\"}.code-breadcrumbs>li:last-child:after{display:none}.code-components-cell{padding-left:16px!important;box-sizing:border-box}.code-components-rating-cell{width:110px}.code-name-cell{max-width:0}@media (max-width:1200px){.code-name-cell .badge{display:none}}.code-search{margin-bottom:10px}.code-components-header{position:-webkit-sticky;position:sticky;top:105px;background-color:hsla(0,0%,100%,.9);z-index:1}table>thead>tr.code-components-header>th{vertical-align:middle}.code-child-component-icon{display:inline-block;border-left:1px solid #666;border-bottom:1px solid #666;margin-left:8px;margin-bottom:8px;margin-right:4px;height:8px;width:4px}.code-components .no-file .h1{position:fixed;top:50%}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nlet bucket: T.Dict<T.ComponentMeasure> = {};\nlet childrenBucket: T.Dict<{\n  children: T.ComponentMeasure[];\n  page: number;\n  total: number;\n}> = {};\nlet breadcrumbsBucket: T.Dict<T.Breadcrumb[]> = {};\n\nexport function addComponent(component: T.ComponentMeasure): void {\n  bucket[component.key] = component;\n}\n\nexport function getComponent(componentKey: string): T.ComponentMeasure {\n  return bucket[componentKey];\n}\n\nexport function addComponentChildren(\n  componentKey: string,\n  children: T.ComponentMeasure[],\n  total: number,\n  page: number\n): void {\n  const previous = getComponentChildren(componentKey);\n  if (previous) {\n    children = [...previous.children, ...children];\n  }\n  childrenBucket[componentKey] = { children, total, page };\n}\n\nexport function getComponentChildren(\n  componentKey: string\n): {\n  children: T.ComponentMeasure[];\n  page: number;\n  total: number;\n} {\n  return childrenBucket[componentKey];\n}\n\nexport function addComponentBreadcrumbs(componentKey: string, breadcrumbs: T.Breadcrumb[]): void {\n  breadcrumbsBucket[componentKey] = breadcrumbs;\n}\n\nexport function getComponentBreadcrumbs(componentKey: string): T.Breadcrumb[] {\n  return breadcrumbsBucket[componentKey];\n}\n\nexport function clearBucket(): void {\n  bucket = {};\n  childrenBucket = {};\n  breadcrumbsBucket = {};\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getBreadcrumbs, getChildren, getComponent } from '../../api/components';\nimport { getBranchLikeQuery, isPullRequest } from '../../helpers/branch-like';\nimport { BranchLike } from '../../types/branch-like';\nimport { MetricKey } from '../../types/metrics';\nimport {\n  addComponent,\n  addComponentBreadcrumbs,\n  addComponentChildren,\n  getComponent as getComponentFromBucket,\n  getComponentBreadcrumbs,\n  getComponentChildren\n} from './bucket';\n\nconst METRICS = [\n  MetricKey.ncloc,\n  MetricKey.bugs,\n  MetricKey.vulnerabilities,\n  MetricKey.code_smells,\n  MetricKey.security_hotspots,\n  MetricKey.coverage,\n  MetricKey.duplicated_lines_density\n];\n\nconst APPLICATION_METRICS = [MetricKey.alert_status, ...METRICS];\n\nconst PORTFOLIO_METRICS = [\n  MetricKey.releasability_rating,\n  MetricKey.reliability_rating,\n  MetricKey.security_rating,\n  MetricKey.security_review_rating,\n  MetricKey.sqale_rating,\n  MetricKey.ncloc\n];\n\nconst LEAK_METRICS = [\n  MetricKey.new_lines,\n  MetricKey.bugs,\n  MetricKey.vulnerabilities,\n  MetricKey.code_smells,\n  MetricKey.security_hotspots,\n  MetricKey.new_coverage,\n  MetricKey.new_duplicated_lines_density\n];\n\nconst PAGE_SIZE = 100;\n\ninterface Children {\n  components: T.ComponentMeasure[];\n  page: number;\n  total: number;\n}\n\nfunction prepareChildren(r: any): Children {\n  return {\n    components: r.components,\n    total: r.paging.total,\n    page: r.paging.pageIndex\n  };\n}\n\nexport function showLeakMeasure(branchLike?: BranchLike) {\n  return isPullRequest(branchLike);\n}\n\nfunction skipRootDir(breadcrumbs: T.ComponentMeasure[]) {\n  return breadcrumbs.filter(component => {\n    return !(component.qualifier === 'DIR' && component.name === '/');\n  });\n}\n\nfunction storeChildrenBase(children: T.ComponentMeasure[]) {\n  children.forEach(addComponent);\n}\n\nfunction storeChildrenBreadcrumbs(parentComponentKey: string, children: T.Breadcrumb[]) {\n  const parentBreadcrumbs = getComponentBreadcrumbs(parentComponentKey);\n  if (parentBreadcrumbs) {\n    children.forEach(child => {\n      const breadcrumbs = [...parentBreadcrumbs, child];\n      addComponentBreadcrumbs(child.key, breadcrumbs);\n    });\n  }\n}\n\nexport function getCodeMetrics(\n  qualifier: string,\n  branchLike?: BranchLike,\n  options: { includeQGStatus?: boolean } = {}\n) {\n  if (['VW', 'SVW'].includes(qualifier)) {\n    const metrics = [...PORTFOLIO_METRICS];\n    return options.includeQGStatus ? metrics.concat(MetricKey.alert_status) : metrics;\n  }\n  if (qualifier === 'APP') {\n    return [...APPLICATION_METRICS];\n  }\n  if (showLeakMeasure(branchLike)) {\n    return [...LEAK_METRICS];\n  }\n  return [...METRICS];\n}\n\nfunction retrieveComponentBase(\n  componentKey: string,\n  qualifier: string,\n  instance: { mounted: boolean },\n  branchLike?: BranchLike\n) {\n  const existing = getComponentFromBucket(componentKey);\n  if (existing) {\n    return Promise.resolve(existing);\n  }\n\n  const metrics = getCodeMetrics(qualifier, branchLike);\n\n  return getComponent({\n    component: componentKey,\n    metricKeys: metrics.join(),\n    ...getBranchLikeQuery(branchLike)\n  }).then(({ component }) => {\n    if (instance.mounted) {\n      addComponent(component);\n    }\n    return component;\n  });\n}\n\nexport function retrieveComponentChildren(\n  componentKey: string,\n  qualifier: string,\n  instance: { mounted: boolean },\n  branchLike?: BranchLike\n): Promise<{ components: T.ComponentMeasure[]; page: number; total: number }> {\n  const existing = getComponentChildren(componentKey);\n  if (existing) {\n    return Promise.resolve({\n      components: existing.children,\n      total: existing.total,\n      page: existing.page\n    });\n  }\n\n  const metrics = getCodeMetrics(qualifier, branchLike, { includeQGStatus: true });\n\n  return getChildren(componentKey, metrics, {\n    ps: PAGE_SIZE,\n    s: 'qualifier,name',\n    ...getBranchLikeQuery(branchLike)\n  })\n    .then(prepareChildren)\n    .then(r => {\n      if (instance.mounted) {\n        addComponentChildren(componentKey, r.components, r.total, r.page);\n        storeChildrenBase(r.components);\n        storeChildrenBreadcrumbs(componentKey, r.components);\n      }\n      return r;\n    });\n}\n\nfunction retrieveComponentBreadcrumbs(\n  component: string,\n  instance: { mounted: boolean },\n  branchLike?: BranchLike\n): Promise<T.Breadcrumb[]> {\n  const existing = getComponentBreadcrumbs(component);\n  if (existing) {\n    return Promise.resolve(existing);\n  }\n\n  return getBreadcrumbs({ component, ...getBranchLikeQuery(branchLike) })\n    .then(skipRootDir)\n    .then(breadcrumbs => {\n      if (instance.mounted) {\n        addComponentBreadcrumbs(component, breadcrumbs);\n      }\n      return breadcrumbs;\n    });\n}\n\nexport function retrieveComponent(\n  componentKey: string,\n  qualifier: string,\n  instance: { mounted: boolean },\n  branchLike?: BranchLike\n): Promise<{\n  breadcrumbs: T.Breadcrumb[];\n  component: T.ComponentMeasure;\n  components: T.ComponentMeasure[];\n  page: number;\n  total: number;\n}> {\n  return Promise.all([\n    retrieveComponentBase(componentKey, qualifier, instance, branchLike),\n    retrieveComponentChildren(componentKey, qualifier, instance, branchLike),\n    retrieveComponentBreadcrumbs(componentKey, instance, branchLike)\n  ]).then(r => {\n    return {\n      breadcrumbs: r[2],\n      component: r[0],\n      components: r[1].components,\n      page: r[1].page,\n      total: r[1].total\n    };\n  });\n}\n\nexport function loadMoreChildren(\n  componentKey: string,\n  page: number,\n  qualifier: string,\n  instance: { mounted: boolean },\n  branchLike?: BranchLike\n): Promise<Children> {\n  const metrics = getCodeMetrics(qualifier, branchLike, { includeQGStatus: true });\n\n  return getChildren(componentKey, metrics, {\n    ps: PAGE_SIZE,\n    p: page,\n    s: 'qualifier,name',\n    ...getBranchLikeQuery(branchLike)\n  })\n    .then(prepareChildren)\n    .then(r => {\n      if (instance.mounted) {\n        addComponentChildren(componentKey, r.components, r.total, r.page);\n        storeChildrenBase(r.components);\n        storeChildrenBreadcrumbs(componentKey, r.components);\n      }\n      return r;\n    });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { colors } from '../../../app/theme';\nimport BranchIcon from '../../../components/icons/BranchIcon';\nimport QualifierIcon from '../../../components/icons/QualifierIcon';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { translate } from '../../../helpers/l10n';\nimport { getProjectUrl } from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\n\nexport function getTooltip(component: T.ComponentMeasure) {\n  const isFile = component.qualifier === 'FIL' || component.qualifier === 'UTS';\n  if (isFile && component.path) {\n    return component.path + '\\n\\n' + component.key;\n  } else {\n    return component.name + '\\n\\n' + component.key;\n  }\n}\n\nexport function mostCommonPrefix(strings: string[]) {\n  const sortedStrings = strings.slice(0).sort();\n  const firstString = sortedStrings[0];\n  const firstStringLength = firstString.length;\n  const lastString = sortedStrings[sortedStrings.length - 1];\n  let i = 0;\n  while (i < firstStringLength && firstString.charAt(i) === lastString.charAt(i)) {\n    i++;\n  }\n  const prefix = firstString.substr(0, i);\n  const prefixTokens = prefix.split(/[\\s\\\\/]/);\n  const lastPrefixPart = prefixTokens[prefixTokens.length - 1];\n  return prefix.substr(0, prefix.length - lastPrefixPart.length);\n}\n\nexport interface Props {\n  branchLike?: BranchLike;\n  canBrowse?: boolean;\n  component: T.ComponentMeasure;\n  previous?: T.ComponentMeasure;\n  rootComponent: T.ComponentMeasure;\n}\n\nexport default function ComponentName({\n  branchLike,\n  component,\n  rootComponent,\n  previous,\n  canBrowse = false\n}: Props) {\n  const areBothDirs = component.qualifier === 'DIR' && previous && previous.qualifier === 'DIR';\n  const prefix =\n    areBothDirs && previous !== undefined\n      ? mostCommonPrefix([component.name + '/', previous.name + '/'])\n      : '';\n  const name = prefix ? (\n    <span>\n      <span style={{ color: colors.secondFontColor }}>{prefix}</span>\n      <span>{component.name.substr(prefix.length)}</span>\n    </span>\n  ) : (\n    component.name\n  );\n\n  let inner = null;\n\n  if (component.refKey && component.qualifier !== 'SVW') {\n    const branch = rootComponent.qualifier === 'APP' ? component.branch : undefined;\n    inner = (\n      <Link className=\"link-with-icon\" to={getProjectUrl(component.refKey, branch)}>\n        <QualifierIcon qualifier={component.qualifier} /> <span>{name}</span>\n      </Link>\n    );\n  } else if (canBrowse) {\n    const query = { id: rootComponent.key, ...getBranchLikeQuery(branchLike) };\n    if (component.key !== rootComponent.key) {\n      Object.assign(query, { selected: component.key });\n    }\n    inner = (\n      <Link className=\"link-with-icon\" to={{ pathname: '/code', query }}>\n        <QualifierIcon qualifier={component.qualifier} /> <span>{name}</span>\n      </Link>\n    );\n  } else {\n    inner = (\n      <span>\n        <QualifierIcon qualifier={component.qualifier} /> {name}\n      </span>\n    );\n  }\n\n  if (rootComponent.qualifier === 'APP') {\n    return (\n      <span className=\"max-width-100 display-inline-flex-center\">\n        <span className=\"text-ellipsis\" title={getTooltip(component)}>\n          {inner}\n        </span>\n        {component.branch ? (\n          <span className=\"text-ellipsis spacer-left\">\n            <BranchIcon className=\"little-spacer-right\" />\n            <span className=\"note\">{component.branch}</span>\n          </span>\n        ) : (\n          <span className=\"spacer-left badge flex-1\">{translate('branches.main_branch')}</span>\n        )}\n      </span>\n    );\n  } else {\n    return (\n      <span\n        className=\"max-width-100 display-inline-block text-ellipsis\"\n        title={getTooltip(component)}>\n        {inner}\n      </span>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport ComponentName from './ComponentName';\n\ninterface Props {\n  branchLike?: BranchLike;\n  breadcrumbs: T.Breadcrumb[];\n  rootComponent: T.ComponentMeasure;\n}\n\nexport default function Breadcrumbs({ branchLike, breadcrumbs, rootComponent }: Props) {\n  return (\n    <ul className=\"code-breadcrumbs\">\n      {breadcrumbs.map((component, index) => (\n        <li key={component.key}>\n          <ComponentName\n            branchLike={branchLike}\n            canBrowse={index < breadcrumbs.length - 1}\n            component={component}\n            rootComponent={rootComponent}\n          />\n        </li>\n      ))}\n    </ul>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport * as React from 'react';\nimport PageActions from '../../components/ui/PageActions';\nimport { getWrappedDisplayName } from './utils';\n\nexport interface WithKeyboardNavigationProps {\n  components?: T.ComponentMeasure[];\n  cycle?: boolean;\n  isFile?: boolean;\n  onEndOfList?: () => void;\n  onGoToParent?: () => void;\n  onHighlight?: (item: T.ComponentMeasure) => void;\n  onSelect?: (item: T.ComponentMeasure) => void;\n  selected?: T.ComponentMeasure;\n}\n\nconst KEY_SCOPE = 'key_nav';\n\nexport default function withKeyboardNavigation<P>(\n  WrappedComponent: React.ComponentClass<P & Partial<WithKeyboardNavigationProps>>\n) {\n  return class Wrapper extends React.Component<P & WithKeyboardNavigationProps> {\n    static displayName = getWrappedDisplayName(WrappedComponent, 'withKeyboardNavigation');\n\n    componentDidMount() {\n      this.attachShortcuts();\n    }\n\n    componentWillUnmount() {\n      this.detachShortcuts();\n    }\n\n    attachShortcuts = () => {\n      key.setScope(KEY_SCOPE);\n      key('up', KEY_SCOPE, () => {\n        return this.skipIfFile(this.handleHighlightPrevious);\n      });\n      key('down', KEY_SCOPE, () => {\n        return this.skipIfFile(this.handleHighlightNext);\n      });\n      key('right,enter', KEY_SCOPE, () => {\n        return this.skipIfFile(this.handleSelectCurrent);\n      });\n      key('left', KEY_SCOPE, () => {\n        this.handleSelectParent();\n        return false; // always hijack left\n      });\n    };\n\n    detachShortcuts = () => {\n      key.deleteScope(KEY_SCOPE);\n    };\n\n    getCurrentIndex = () => {\n      const { selected, components = [] } = this.props;\n      return selected ? components.findIndex(component => component.key === selected.key) : -1;\n    };\n\n    skipIfFile = (handler: () => void) => {\n      if (this.props.isFile) {\n        return true;\n      } else {\n        handler();\n        return false;\n      }\n    };\n\n    handleHighlightNext = () => {\n      if (this.props.onHighlight === undefined) {\n        return;\n      }\n\n      const { components = [], cycle } = this.props;\n      const index = this.getCurrentIndex();\n      const first = cycle ? 0 : index;\n\n      this.props.onHighlight(\n        index < components.length - 1 ? components[index + 1] : components[first]\n      );\n\n      if (index + 1 === components.length - 1 && this.props.onEndOfList) {\n        this.props.onEndOfList();\n      }\n    };\n\n    handleHighlightPrevious = () => {\n      if (this.props.onHighlight === undefined) {\n        return;\n      }\n      const { components = [], cycle } = this.props;\n      const index = this.getCurrentIndex();\n      const last = cycle ? components.length - 1 : index;\n\n      this.props.onHighlight(index > 0 ? components[index - 1] : components[last]);\n    };\n\n    handleSelectCurrent = () => {\n      if (this.props.onSelect === undefined) {\n        return;\n      }\n\n      const { selected } = this.props;\n      if (selected !== undefined) {\n        this.props.onSelect(selected as T.ComponentMeasure);\n      }\n    };\n\n    handleSelectNext = () => {\n      if (this.props.onSelect === undefined) {\n        return;\n      }\n\n      const { components = [] } = this.props;\n      const index = this.getCurrentIndex();\n\n      if (index !== -1 && index < components.length - 1) {\n        this.props.onSelect(components[index + 1]);\n      }\n    };\n\n    handleSelectParent = () => {\n      if (this.props.onGoToParent !== undefined) {\n        this.props.onGoToParent();\n      }\n    };\n\n    handleSelectPrevious = () => {\n      if (this.props.onSelect === undefined) {\n        return;\n      }\n\n      const { components = [] } = this.props;\n      const index = this.getCurrentIndex();\n\n      if (components.length && index > 0) {\n        this.props.onSelect(components[index - 1]);\n      }\n    };\n\n    render() {\n      return (\n        <>\n          <PageActions showShortcuts={!this.props.isFile} />\n\n          <WrappedComponent {...this.props} />\n        </>\n      );\n    }\n  };\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Measure from '../../../components/measure/Measure';\nimport { getLeakValue } from '../../../components/measure/utils';\nimport { isDiffMetric } from '../../../helpers/measures';\n\ninterface Props {\n  component: T.ComponentMeasure;\n  metric: T.Metric;\n}\n\nexport default class ComponentMeasure extends React.PureComponent<Props> {\n  render() {\n    const { component, metric } = this.props;\n    const isProject = component.qualifier === 'TRK';\n    const isReleasability = metric.key === 'releasability_rating';\n\n    const finalMetricKey = isProject && isReleasability ? 'alert_status' : metric.key;\n    const finalMetricType = isProject && isReleasability ? 'LEVEL' : metric.type;\n\n    const measure =\n      Array.isArray(component.measures) &&\n      component.measures.find(measure => measure.metric === finalMetricKey);\n\n    if (!measure) {\n      return measure === false ? <span /> : <span>—</span>;\n    }\n\n    const value = isDiffMetric(metric.key) ? getLeakValue(measure) : measure.value;\n    return <Measure metricKey={finalMetricKey} metricType={finalMetricType} value={value} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function PinIcon({ fill = 'currentColor', ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M7.25 7.25v-3.5a.243.243 0 0 0-.07-.18A.243.243 0 0 0 7 3.5a.243.243 0 0 0-.18.07.243.243 0 0 0-.07.18v3.5c0 .073.023.133.07.18.047.047.107.07.18.07a.243.243 0 0 0 .18-.07.243.243 0 0 0 .07-.18zM12.5 10a.482.482 0 0 1-.148.352.482.482 0 0 1-.352.148H8.648l-.398 3.773a.29.29 0 0 1-.082.161.219.219 0 0 1-.16.066H8c-.141 0-.224-.07-.25-.211L7.156 10.5H4a.482.482 0 0 1-.352-.148A.482.482 0 0 1 3.5 10c0-.641.204-1.217.613-1.73.409-.513.871-.77 1.387-.77v-4a.96.96 0 0 1-.703-.297A.96.96 0 0 1 4.5 2.5a.96.96 0 0 1 .297-.703A.96.96 0 0 1 5.5 1.5h5a.96.96 0 0 1 .703.297.96.96 0 0 1 .297.703.96.96 0 0 1-.297.703.96.96 0 0 1-.703.297v4c.516 0 .978.257 1.387.77.409.513.613 1.089.613 1.73z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport PinIcon from '../../../components/icons/PinIcon';\nimport { WorkspaceContextShape } from '../../../components/workspace/context';\nimport { translate } from '../../../helpers/l10n';\nimport { BranchLike } from '../../../types/branch-like';\n\ninterface Props {\n  branchLike?: BranchLike;\n  component: T.ComponentMeasure;\n  openComponent: WorkspaceContextShape['openComponent'];\n}\n\nexport default class ComponentPin extends React.PureComponent<Props> {\n  handleClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.openComponent({\n      branchLike: this.props.branchLike,\n      key: this.props.component.key,\n      name: this.props.component.path,\n      qualifier: this.props.component.qualifier\n    });\n  };\n\n  render() {\n    return (\n      <a\n        className=\"link-no-underline\"\n        href=\"#\"\n        onClick={this.handleClick}\n        title={translate('component_viewer.open_in_workspace')}>\n        <PinIcon />\n      </a>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { withScrollTo } from '../../../components/hoc/withScrollTo';\nimport { WorkspaceContext } from '../../../components/workspace/context';\nimport { BranchLike } from '../../../types/branch-like';\nimport ComponentMeasure from './ComponentMeasure';\nimport ComponentName from './ComponentName';\nimport ComponentPin from './ComponentPin';\n\ninterface Props {\n  branchLike?: BranchLike;\n  canBePinned?: boolean;\n  canBrowse?: boolean;\n  component: T.ComponentMeasure;\n  hasBaseComponent: boolean;\n  metrics: T.Metric[];\n  previous?: T.ComponentMeasure;\n  rootComponent: T.ComponentMeasure;\n  selected?: boolean;\n}\n\nexport class Component extends React.PureComponent<Props> {\n  render() {\n    const {\n      branchLike,\n      canBePinned = true,\n      canBrowse = false,\n      component,\n      hasBaseComponent,\n      metrics,\n      previous,\n      rootComponent,\n      selected = false\n    } = this.props;\n\n    const isFile = component.qualifier === 'FIL' || component.qualifier === 'UTS';\n\n    return (\n      <tr className={classNames({ selected })}>\n        <td className=\"blank\" />\n        {canBePinned && (\n          <td className=\"thin nowrap\">\n            {isFile && (\n              <span className=\"spacer-right\">\n                <WorkspaceContext.Consumer>\n                  {({ openComponent }) => (\n                    <ComponentPin\n                      branchLike={branchLike}\n                      component={component}\n                      openComponent={openComponent}\n                    />\n                  )}\n                </WorkspaceContext.Consumer>\n              </span>\n            )}\n          </td>\n        )}\n        <td className=\"code-name-cell\">\n          {hasBaseComponent && <div className=\"code-child-component-icon\" />}\n          <ComponentName\n            branchLike={branchLike}\n            canBrowse={canBrowse}\n            component={component}\n            previous={previous}\n            rootComponent={rootComponent}\n          />\n        </td>\n\n        {metrics.map(metric => (\n          <td\n            className={classNames('thin', {\n              'text-center': metric.type === 'RATING',\n              'nowrap text-right': metric.type !== 'RATING'\n            })}\n            key={metric.key}>\n            <div\n              className={classNames({\n                'code-components-rating-cell': metric.type === 'RATING',\n                'code-components-cell': metric.type !== 'RATING'\n              })}>\n              <ComponentMeasure component={component} metric={metric} />\n            </div>\n          </td>\n        ))}\n        <td className=\"blank\" />\n      </tr>\n    );\n  }\n}\n\nexport default withScrollTo(Component);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport { getWrappedDisplayName } from './utils';\n\nexport interface WithScrollToProps {\n  selected?: boolean;\n}\n\nconst TOP_OFFSET = 200;\nconst BOTTOM_OFFSET = 10;\n\nexport function withScrollTo<P>(WrappedComponent: React.ComponentClass<P>) {\n  return class Wrapper extends React.Component<P & Partial<WithScrollToProps>> {\n    componentRef?: React.Component | null;\n    node?: Element | Text | null;\n\n    static displayName = getWrappedDisplayName(WrappedComponent, 'withScrollTo');\n\n    componentDidMount() {\n      if (this.componentRef) {\n        // eslint-disable-next-line react/no-find-dom-node\n        this.node = findDOMNode(this.componentRef);\n        this.handleUpdate();\n      }\n    }\n\n    componentDidUpdate() {\n      this.handleUpdate();\n    }\n\n    handleUpdate() {\n      const { selected } = this.props;\n\n      if (selected) {\n        setTimeout(() => {\n          this.handleScroll();\n        }, 0);\n      }\n    }\n\n    handleScroll() {\n      if (this.node && this.node instanceof Element) {\n        const position = this.node.getBoundingClientRect();\n        const { top, bottom } = position;\n        if (bottom > window.innerHeight - BOTTOM_OFFSET) {\n          window.scrollTo(0, bottom - window.innerHeight + window.pageYOffset + BOTTOM_OFFSET);\n        } else if (top < TOP_OFFSET) {\n          window.scrollTo(0, top + window.pageYOffset - TOP_OFFSET);\n        }\n      }\n    }\n\n    render() {\n      return (\n        <WrappedComponent\n          {...this.props}\n          ref={ref => {\n            this.componentRef = ref;\n          }}\n        />\n      );\n    }\n  };\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  canBePinned?: boolean;\n}\n\nexport default function ComponentsEmpty({ canBePinned = true }: Props) {\n  return (\n    <tr>\n      {canBePinned && <td />}\n      <td className=\"note\" colSpan={2}>\n        {translate('no_results')}\n      </td>\n      <td colSpan={10} />\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  baseComponent?: T.ComponentMeasure;\n  canBePinned?: boolean;\n  metrics: string[];\n  rootComponent: T.ComponentMeasure;\n}\n\nconst SHORT_NAME_METRICS = [\n  'duplicated_lines_density',\n  'new_lines',\n  'new_coverage',\n  'new_duplicated_lines_density'\n];\n\nexport default function ComponentsHeader({\n  baseComponent,\n  canBePinned = true,\n  metrics,\n  rootComponent\n}: Props) {\n  const isPortfolio = ['VW', 'SVW'].includes(rootComponent.qualifier);\n  let columns: string[] = [];\n  if (isPortfolio) {\n    columns = [\n      translate('metric_domain.Releasability'),\n      translate('metric_domain.Reliability'),\n      translate('portfolio.metric_domain.vulnerabilities'),\n      translate('portfolio.metric_domain.security_hotspots'),\n      translate('metric_domain.Maintainability'),\n      translate('metric', 'ncloc', 'name')\n    ];\n  } else {\n    columns = metrics.map(metric =>\n      translate('metric', metric, SHORT_NAME_METRICS.includes(metric) ? 'short_name' : 'name')\n    );\n  }\n\n  return (\n    <thead>\n      <tr className=\"code-components-header\">\n        <th className=\"thin nowrap\" colSpan={canBePinned ? 2 : 1} />\n        <th />\n        {baseComponent &&\n          columns.map((column, index) => (\n            <th\n              className={classNames('thin', {\n                'code-components-cell': !isPortfolio && index > 0,\n                nowrap: !isPortfolio,\n                'text-center': isPortfolio && index < columns.length - 1,\n                'text-right': !isPortfolio || index === columns.length - 1\n              })}\n              key={column}>\n              {column}\n            </th>\n          ))}\n        <th />\n      </tr>\n    </thead>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { intersection } from 'lodash';\nimport * as React from 'react';\nimport withKeyboardNavigation from '../../../components/hoc/withKeyboardNavigation';\nimport { BranchLike } from '../../../types/branch-like';\nimport { getCodeMetrics } from '../utils';\nimport Component from './Component';\nimport ComponentsEmpty from './ComponentsEmpty';\nimport ComponentsHeader from './ComponentsHeader';\n\ninterface Props {\n  baseComponent?: T.ComponentMeasure;\n  branchLike?: BranchLike;\n  components: T.ComponentMeasure[];\n  metrics: T.Dict<T.Metric>;\n  rootComponent: T.ComponentMeasure;\n  selected?: T.ComponentMeasure;\n}\n\nconst BASE_COLUMN_COUNT = 4;\n\nexport class Components extends React.PureComponent<Props> {\n  render() {\n    const { baseComponent, branchLike, components, rootComponent, selected } = this.props;\n    const metricKeys = intersection(\n      getCodeMetrics(rootComponent.qualifier, branchLike),\n      Object.keys(this.props.metrics)\n    );\n    const metrics = metricKeys.map(metric => this.props.metrics[metric]);\n    const colSpan = metrics.length + BASE_COLUMN_COUNT;\n    const canBePinned = baseComponent && !['APP', 'VW', 'SVW'].includes(baseComponent.qualifier);\n\n    return (\n      <table className=\"data boxed-padding zebra\">\n        {baseComponent && (\n          <ComponentsHeader\n            baseComponent={baseComponent}\n            canBePinned={canBePinned}\n            metrics={metricKeys}\n            rootComponent={rootComponent}\n          />\n        )}\n        <tbody>\n          {baseComponent && (\n            <>\n              <Component\n                branchLike={branchLike}\n                canBePinned={canBePinned}\n                component={baseComponent}\n                hasBaseComponent={false}\n                key={baseComponent.key}\n                metrics={metrics}\n                rootComponent={rootComponent}\n              />\n              <tr className=\"blank\">\n                <td colSpan={3}>\n                  <hr className=\"null-spacer-top\" />\n                </td>\n                <td colSpan={colSpan}>\n                  <hr className=\"null-spacer-top\" />\n                </td>\n              </tr>\n            </>\n          )}\n\n          {components.length ? (\n            components.map((component, index, list) => (\n              <Component\n                branchLike={branchLike}\n                canBePinned={canBePinned}\n                canBrowse={true}\n                component={component}\n                hasBaseComponent={baseComponent !== undefined}\n                key={component.key}\n                metrics={metrics}\n                previous={index > 0 ? list[index - 1] : undefined}\n                rootComponent={rootComponent}\n                selected={selected && component.key === selected.key}\n              />\n            ))\n          ) : (\n            <ComponentsEmpty canBePinned={canBePinned} />\n          )}\n\n          <tr className=\"blank\">\n            <td colSpan={3} />\n            <td colSpan={colSpan} />\n          </tr>\n        </tbody>\n      </table>\n    );\n  }\n}\n\nexport default withKeyboardNavigation(Components);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { omit } from 'lodash';\nimport * as React from 'react';\nimport { getTree } from '../../../api/components';\nimport SearchBox from '../../../components/controls/SearchBox';\nimport { Location, Router, withRouter } from '../../../components/hoc/withRouter';\nimport DeferredSpinner from '../../../components/ui/DeferredSpinner';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { translate } from '../../../helpers/l10n';\nimport { BranchLike } from '../../../types/branch-like';\n\ninterface Props {\n  branchLike?: BranchLike;\n  component: T.ComponentMeasure;\n  location: Location;\n  onSearchClear: () => void;\n  onSearchResults: (results?: T.ComponentMeasure[]) => void;\n  router: Router;\n}\n\ninterface State {\n  query: string;\n  loading: boolean;\n}\n\nexport class Search extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    query: '',\n    loading: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    if (this.props.location.query.search) {\n      this.handleQueryChange(this.props.location.query.search);\n    }\n  }\n\n  componentDidUpdate(nextProps: Props) {\n    // if the component has change, reset the current state\n    if (nextProps.location.query.id !== this.props.location.query.id) {\n      this.setState({\n        query: '',\n        loading: false\n      });\n      this.props.onSearchClear();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    switch (event.keyCode) {\n      case 13:\n      case 38:\n      case 40:\n        event.preventDefault();\n        event.currentTarget.blur();\n        break;\n    }\n  };\n\n  handleSearch = (query: string) => {\n    if (this.mounted) {\n      const { branchLike, component, router, location } = this.props;\n      this.setState({ loading: true });\n      router.replace({ pathname: location.pathname, query: { ...location.query, search: query } });\n\n      const isPortfolio = ['VW', 'SVW', 'APP'].includes(component.qualifier);\n      const qualifiers = isPortfolio ? 'SVW,TRK' : 'BRC,UTS,FIL';\n\n      getTree({\n        component: component.key,\n        q: query,\n        s: 'qualifier,name',\n        qualifiers,\n        ...getBranchLikeQuery(branchLike)\n      })\n        .then(r => {\n          if (this.mounted) {\n            this.setState({\n              loading: false\n            });\n            this.props.onSearchResults(r.components);\n          }\n        })\n        .catch(() => {\n          if (this.mounted) {\n            this.setState({ loading: false });\n          }\n        });\n    }\n  };\n\n  handleQueryChange = (query: string) => {\n    const { router, location } = this.props;\n    this.setState({ query });\n    if (query.length === 0) {\n      router.replace({ pathname: location.pathname, query: omit(location.query, 'search') });\n      this.props.onSearchClear();\n    } else {\n      this.handleSearch(query);\n    }\n  };\n\n  render() {\n    const { component } = this.props;\n    const { loading } = this.state;\n    const isPortfolio = ['VW', 'SVW', 'APP'].includes(component.qualifier);\n\n    return (\n      <div className=\"code-search\" id=\"code-search\">\n        <SearchBox\n          minLength={3}\n          onChange={this.handleQueryChange}\n          onKeyDown={this.handleKeyDown}\n          placeholder={translate(\n            isPortfolio ? 'code.search_placeholder.portfolio' : 'code.search_placeholder'\n          )}\n          value={this.state.query}\n        />\n        <DeferredSpinner className=\"spacer-left\" loading={loading} />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Search);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { Location } from 'history';\nimport * as React from 'react';\nimport withKeyboardNavigation from '../../../components/hoc/withKeyboardNavigation';\nimport SourceViewer from '../../../components/SourceViewer/SourceViewer';\nimport { scrollToElement } from '../../../helpers/scrolling';\nimport { BranchLike } from '../../../types/branch-like';\n\ninterface Props {\n  branchLike?: BranchLike;\n  component: string;\n  componentMeasures: T.Measure[] | undefined;\n  location: Pick<Location, 'query'>;\n  onIssueChange?: (issue: T.Issue) => void;\n}\n\nexport class SourceViewerWrapper extends React.PureComponent<Props> {\n  scrollToLine = () => {\n    const { location } = this.props;\n    const { line } = location.query;\n\n    if (line) {\n      const row = document.querySelector(`.source-line[data-line-number=\"${line}\"]`);\n      if (row) {\n        scrollToElement(row, { smooth: false, bottomOffset: window.innerHeight / 2 - 60 });\n      }\n    }\n  };\n\n  render() {\n    const { branchLike, component, componentMeasures, location } = this.props;\n    const { line } = location.query;\n    const finalLine = line ? Number(line) : undefined;\n\n    return (\n      <SourceViewer\n        aroundLine={finalLine}\n        branchLike={branchLike}\n        component={component}\n        componentMeasures={componentMeasures}\n        highlightedLine={finalLine}\n        onIssueChange={this.props.onIssueChange}\n        onLoaded={this.scrollToLine}\n        showMeasures={true}\n      />\n    );\n  }\n}\n\nexport default withKeyboardNavigation(SourceViewerWrapper);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { Location } from 'history';\nimport { debounce } from 'lodash';\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { connect } from 'react-redux';\nimport { InjectedRouter } from 'react-router';\nimport A11ySkipTarget from '../../../app/components/a11y/A11ySkipTarget';\nimport Suggestions from '../../../app/components/embed-docs-modal/Suggestions';\nimport ListFooter from '../../../components/controls/ListFooter';\nimport { isPullRequest, isSameBranchLike } from '../../../helpers/branch-like';\nimport { translate } from '../../../helpers/l10n';\nimport { getCodeUrl, getProjectUrl } from '../../../helpers/urls';\nimport { fetchBranchStatus, fetchMetrics } from '../../../store/rootActions';\nimport { getMetrics } from '../../../store/rootReducer';\nimport { BranchLike } from '../../../types/branch-like';\nimport { addComponent, addComponentBreadcrumbs, clearBucket } from '../bucket';\nimport '../code.css';\nimport { loadMoreChildren, retrieveComponent, retrieveComponentChildren } from '../utils';\nimport Breadcrumbs from './Breadcrumbs';\nimport Components from './Components';\nimport Search from './Search';\nimport SourceViewerWrapper from './SourceViewerWrapper';\n\ninterface StateToProps {\n  metrics: T.Dict<T.Metric>;\n}\n\ninterface DispatchToProps {\n  fetchBranchStatus: (branchLike: BranchLike, projectKey: string) => Promise<void>;\n  fetchMetrics: () => void;\n}\n\ninterface OwnProps {\n  branchLike?: BranchLike;\n  component: T.Component;\n  location: Pick<Location, 'query'>;\n  router: Pick<InjectedRouter, 'push'>;\n}\n\ntype Props = StateToProps & DispatchToProps & OwnProps;\n\ninterface State {\n  baseComponent?: T.ComponentMeasure;\n  breadcrumbs: T.Breadcrumb[];\n  components?: T.ComponentMeasure[];\n  highlighted?: T.ComponentMeasure;\n  loading: boolean;\n  page: number;\n  searchResults?: T.ComponentMeasure[];\n  sourceViewer?: T.ComponentMeasure;\n  total: number;\n}\n\nexport class CodeApp extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      breadcrumbs: [],\n      loading: true,\n      page: 0,\n      total: 0\n    };\n    this.refreshBranchStatus = debounce(this.refreshBranchStatus, 1000);\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.props.fetchMetrics();\n    this.handleComponentChange();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.component !== this.props.component ||\n      !isSameBranchLike(prevProps.branchLike, this.props.branchLike)\n    ) {\n      this.handleComponentChange();\n    } else if (prevProps.location !== this.props.location) {\n      this.handleUpdate();\n    }\n  }\n\n  componentWillUnmount() {\n    clearBucket();\n    this.mounted = false;\n  }\n\n  loadComponent = (componentKey: string) => {\n    this.setState({ loading: true });\n    retrieveComponent(\n      componentKey,\n      this.props.component.qualifier,\n      this,\n      this.props.branchLike\n    ).then(r => {\n      if (this.mounted) {\n        if (['FIL', 'UTS'].includes(r.component.qualifier)) {\n          this.setState({\n            breadcrumbs: r.breadcrumbs,\n            components: r.components,\n            loading: false,\n            page: 0,\n            searchResults: undefined,\n            sourceViewer: r.component,\n            total: 0\n          });\n        } else {\n          this.setState({\n            baseComponent: r.component,\n            breadcrumbs: r.breadcrumbs,\n            components: r.components,\n            loading: false,\n            page: r.page,\n            searchResults: undefined,\n            sourceViewer: undefined,\n            total: r.total\n          });\n        }\n      }\n    }, this.stopLoading);\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  handleComponentChange = () => {\n    const { branchLike, component } = this.props;\n\n    // we already know component's breadcrumbs,\n    addComponentBreadcrumbs(component.key, component.breadcrumbs);\n\n    this.setState({ loading: true });\n    retrieveComponentChildren(component.key, component.qualifier, this, branchLike).then(() => {\n      addComponent(component);\n      if (this.mounted) {\n        this.handleUpdate();\n      }\n    }, this.stopLoading);\n  };\n\n  handleLoadMore = () => {\n    const { baseComponent, components, page } = this.state;\n    if (!baseComponent || !components) {\n      return;\n    }\n    loadMoreChildren(\n      baseComponent.key,\n      page + 1,\n      this.props.component.qualifier,\n      this,\n      this.props.branchLike\n    ).then(r => {\n      if (this.mounted && r.components.length) {\n        this.setState({\n          components: [...components, ...r.components],\n          page: r.page,\n          total: r.total\n        });\n      }\n    }, this.stopLoading);\n  };\n\n  handleGoToParent = () => {\n    const { branchLike, component } = this.props;\n    const { breadcrumbs = [] } = this.state;\n\n    if (breadcrumbs.length > 1) {\n      const parentComponent = breadcrumbs[breadcrumbs.length - 2];\n      this.props.router.push(getCodeUrl(component.key, branchLike, parentComponent.key));\n      this.setState({ highlighted: breadcrumbs[breadcrumbs.length - 1] });\n    }\n  };\n\n  handleHighlight = (highlighted: T.ComponentMeasure) => {\n    this.setState({ highlighted });\n  };\n\n  handleIssueChange = (_: T.Issue) => {\n    this.refreshBranchStatus();\n  };\n\n  handleSearchClear = () => {\n    this.setState({ searchResults: undefined });\n  };\n\n  handleSearchResults = (searchResults: T.ComponentMeasure[] = []) => {\n    this.setState({ searchResults });\n  };\n\n  handleSelect = (component: T.ComponentMeasure) => {\n    const { branchLike, component: rootComponent } = this.props;\n\n    if (component.refKey) {\n      this.props.router.push(getProjectUrl(component.refKey));\n    } else {\n      this.props.router.push(getCodeUrl(rootComponent.key, branchLike, component.key));\n    }\n\n    this.setState({ highlighted: undefined });\n  };\n\n  handleUpdate = () => {\n    const { component, location } = this.props;\n    const { selected } = location.query;\n    const finalKey = selected || component.key;\n\n    this.loadComponent(finalKey);\n  };\n\n  refreshBranchStatus = () => {\n    const { branchLike, component } = this.props;\n    if (branchLike && component && isPullRequest(branchLike)) {\n      this.props.fetchBranchStatus(branchLike, component.key);\n    }\n  };\n\n  render() {\n    const { branchLike, component, location } = this.props;\n    const {\n      baseComponent,\n      breadcrumbs,\n      components = [],\n      highlighted,\n      loading,\n      total,\n      searchResults,\n      sourceViewer\n    } = this.state;\n\n    const showSearch = searchResults !== undefined;\n\n    const hasComponents = components.length === 0 && searchResults === undefined;\n\n    const shouldShowBreadcrumbs = breadcrumbs.length > 1 && !showSearch;\n    const shouldShowComponentList =\n      sourceViewer === undefined && components.length > 0 && !showSearch;\n\n    const componentsClassName = classNames('boxed-group', 'spacer-top', {\n      'new-loading': loading,\n      'search-results': showSearch\n    });\n\n    const defaultTitle =\n      baseComponent && ['APP', 'VW', 'SVW'].includes(baseComponent.qualifier)\n        ? translate('projects.page')\n        : translate('code.page');\n\n    return (\n      <div className=\"page page-limited\">\n        <Suggestions suggestions=\"code\" />\n        <Helmet\n          defer={false}\n          title={sourceViewer !== undefined ? sourceViewer.name : defaultTitle}\n        />\n        <A11ySkipTarget anchor=\"code_main\" />\n\n        {!hasComponents && (\n          <Search\n            branchLike={branchLike}\n            component={component}\n            onSearchClear={this.handleSearchClear}\n            onSearchResults={this.handleSearchResults}\n          />\n        )}\n\n        <div className=\"code-components\">\n          {hasComponents && sourceViewer === undefined && (\n            <div className=\"display-flex-center display-flex-column no-file\">\n              <span className=\"h1 text-muted\">\n                {translate(\n                  'code_viewer.no_source_code_displayed_due_to_empty_analysis',\n                  component.qualifier\n                )}\n              </span>\n            </div>\n          )}\n          {shouldShowBreadcrumbs && (\n            <Breadcrumbs\n              branchLike={branchLike}\n              breadcrumbs={breadcrumbs}\n              rootComponent={component}\n            />\n          )}\n\n          {shouldShowComponentList && (\n            <>\n              <div className={componentsClassName}>\n                <Components\n                  baseComponent={baseComponent}\n                  branchLike={branchLike}\n                  components={components}\n                  cycle={true}\n                  metrics={this.props.metrics}\n                  onEndOfList={this.handleLoadMore}\n                  onGoToParent={this.handleGoToParent}\n                  onHighlight={this.handleHighlight}\n                  onSelect={this.handleSelect}\n                  rootComponent={component}\n                  selected={highlighted}\n                />\n              </div>\n              <ListFooter count={components.length} loadMore={this.handleLoadMore} total={total} />\n            </>\n          )}\n\n          {showSearch && searchResults && (\n            <div className={componentsClassName}>\n              <Components\n                branchLike={this.props.branchLike}\n                components={searchResults}\n                metrics={{}}\n                onHighlight={this.handleHighlight}\n                onSelect={this.handleSelect}\n                rootComponent={component}\n                selected={highlighted}\n              />\n            </div>\n          )}\n\n          {sourceViewer !== undefined && !showSearch && (\n            <div className=\"spacer-top\">\n              <SourceViewerWrapper\n                branchLike={branchLike}\n                component={sourceViewer.key}\n                componentMeasures={sourceViewer.measures}\n                isFile={true}\n                location={location}\n                onGoToParent={this.handleGoToParent}\n                onIssueChange={this.handleIssueChange}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: any): StateToProps => ({\n  metrics: getMetrics(state)\n});\n\nconst mapDispatchToProps: DispatchToProps = {\n  fetchBranchStatus: fetchBranchStatus as any,\n  fetchMetrics\n};\n\nexport default connect<StateToProps, DispatchToProps, Props>(\n  mapStateToProps,\n  mapDispatchToProps\n)(CodeApp);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { colors } from '../../app/theme';\nimport Icon, { IconProps } from './Icon';\n\nconst qualifierIcons: T.Dict<(props: IconProps) => React.ReactElement> = {\n  app: ApplicationIcon,\n  brc: SubProjectIcon,\n  dev: DeveloperIcon,\n  dir: DirectoryIcon,\n  fil: FileIcon,\n  svw: SubPortfolioIcon,\n  trk: ProjectIcon,\n  uts: UnitTestIcon,\n  vw: PortfolioIcon,\n\n  // deprecated:\n  cla: UnitTestIcon,\n  dev_prj: ProjectIcon,\n  lib: LibraryIcon,\n  pac: DirectoryIcon\n};\n\ninterface QualifierIconProps {\n  className?: string;\n  fill?: string;\n  qualifier: string | null | undefined;\n}\n\nexport default function QualifierIcon(props: QualifierIconProps) {\n  if (!props.qualifier) {\n    return null;\n  }\n\n  const qualifier = props.qualifier.toLowerCase();\n  const FoundIcon = qualifierIcons[qualifier];\n  return FoundIcon ? <FoundIcon className={props.className} fill={props.fill} /> : null;\n}\n\nfunction ApplicationIcon({ fill, ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M3.014 10.986a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zm9.984 0a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zm-5.004-.021c1.103 0 2 .896 2 2s-.897 2-2 2a2 2 0 0 1 0-4zm-4.98 1.021a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm-5.004-.021a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM2.984 6a2 2 0 1 1-.001 4.001A2 2 0 0 1 2.984 6zm9.984 0a2 2 0 1 1-.001 4.001A2 2 0 0 1 12.968 6zm-5.004-.021c1.103 0 2 .897 2 2a2 2 0 1 1-2-2zM2.984 7a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm-5.004-.021a1.001 1.001 0 0 1 0 2 1 1 0 0 1 0-2zM3 1.025a2 2 0 1 1-.001 4.001A2 2 0 0 1 3 1.025zm9.984 0a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zM7.98 1.004c1.103 0 2 .896 2 2s-.897 2-2 2a2 2 0 0 1 0-4zM3 2.025a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM7.98 2.004a1.001 1.001 0 0 1 0 2 1 1 0 0 1 0-2z\"\n        style={{ fill: fill || colors.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction DeveloperIcon({ fill, ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M7.974 8.02a3.5 3.5 0 0 1-2.482-1.017 3.428 3.428 0 0 1-1.028-2.455c0-.927.365-1.8 1.028-2.455a3.505 3.505 0 0 1 2.482-1.017 3.5 3.5 0 0 1 2.482 1.017 3.434 3.434 0 0 1 1.027 2.455c0 .928-.365 1.8-1.027 2.455A3.504 3.504 0 0 1 7.974 8.02zm0-5.778c-1.286 0-2.332 1.034-2.332 2.306s1.046 2.307 2.332 2.307c1.285 0 2.332-1.035 2.332-2.307S9.258 2.242 7.974 2.242zm3.534 6.418c.127.016.243.045.348.086.17.066.302.146.406.246.132.124.253.282.36.47.126.218.226.442.3.668.08.253.15.535.206.838.056.313.095.604.113.867.02.28.03.57.03.862 0 .532-.174.758-.306.882-.142.132-.397.31-.973.31H3.948c-.233 0-.437-.03-.606-.09-.14-.05-.26-.123-.366-.222-.13-.123-.306-.35-.306-.88 0-.294.01-.584.03-.863.018-.263.056-.554.112-.867a6.5 6.5 0 0 1 .207-.838c.073-.226.173-.45.298-.667.108-.19.23-.347.36-.47.106-.1.238-.18.407-.247.105-.04.22-.07.348-.086.202.13.432.277.683.435.342.217.756.4 1.265.564.523.166 1.06.25 1.59.25a5.25 5.25 0 0 0 1.592-.25c.51-.164.923-.348 1.266-.565.25-.158.48-.304.682-.435l-.002.002zm-.244-1.18c-.055 0-.184.066-.387.196-.202.13-.43.276-.685.437-.255.16-.586.307-.994.437-.408.13-.818.196-1.23.196-.41 0-.82-.065-1.228-.196a4.303 4.303 0 0 1-.993-.437c-.255-.16-.484-.306-.686-.437-.202-.13-.33-.196-.386-.196-.374 0-.716.06-1.026.183-.31.12-.572.283-.787.487a3.28 3.28 0 0 0-.57.737 4.662 4.662 0 0 0-.395.888c-.098.303-.18.633-.244.988a9.652 9.652 0 0 0-.128.992c-.02.306-.032.62-.032.942 0 .73.224 1.304.672 1.726.448.42 1.043.632 1.785.632h8.044c.743 0 1.34-.21 1.787-.633.447-.42.67-.996.67-1.725 0-.32-.01-.635-.03-.942a9.159 9.159 0 0 0-.374-1.98c-.098-.304-.23-.6-.395-.888a3.23 3.23 0 0 0-.57-.737 2.404 2.404 0 0 0-.788-.487 2.779 2.779 0 0 0-1.026-.183h-.004z\"\n        style={{ fill: fill || colors.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction DirectoryIcon({ fill, ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M14 12.286V5.703a.673.673 0 0 0-.195-.5.644.644 0 0 0-.49-.203H6.704a.686.686 0 0 1-.5-.214.707.707 0 0 1-.203-.51v-.57c0-.2-.07-.363-.207-.502A.679.679 0 0 0 5.29 3H2.707a.672.672 0 0 0-.5.204.683.683 0 0 0-.206.5v8.582c0 .2.07.367.206.506.137.14.304.208.5.208h10.61a.66.66 0 0 0 .49-.208.685.685 0 0 0 .194-.506H14zm1-6.598v6.65c0 .458-.152.83-.475 1.16-.324.326-.7.502-1.15.502H2.647c-.452 0-.84-.175-1.162-.503a1.572 1.572 0 0 1-.486-1.158V3.654a1.6 1.6 0 0 1 .486-1.17A1.578 1.578 0 0 1 2.648 2h2.7c.45 0 .84.157 1.164.485.324.328.488.714.488 1.17V4h6.373c.452 0 .83.174 1.152.5.323.33.475.73.475 1.187v.001z\"\n        style={{ fill: fill || colors.orange }}\n      />\n    </Icon>\n  );\n}\n\nfunction FileIcon({ fill, ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M14 15H2V1l7.997.02c1 .034 1.759.758 2.428 1.42.667.663 1.561 1.605 1.574 2.555H14V15zM9 2H3v12h10V6H9V2zm3 10H4v-1h8v1zm0-2H4V9h8v1zm-1.988-5h3.008c-.012-.674-.714-1.443-1.204-1.937-.488-.495-1.039-1.058-1.816-1.055v2.96l.012.032z\"\n        style={{ fill: fill || colors.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction LibraryIcon({ fill, ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M1 13h4V3H1v10zm3-1H2v-2h2v2zM2 4h2v4H2V4zm4 9h4V3H6v10zm3-1H7v-2h2v2zM7 4h2v4H7V4zm4 9h4V3h-4v10zm3-1h-2v-2h2v2zm-2-8h2v4h-2V4z\"\n        style={{ fill: fill || colors.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction PortfolioIcon({ fill, ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M14.97 14.97H1.016V1.015H14.97V14.97zm-1-12.955H2.015V13.97H13.97V2.015zm-.973 10.982H9V9h3.997v3.997zM7 12.996H3.004V9H7v3.996zM11.997 10H10v1.997h1.997V10zM6 10H4.004v1.996H6V10zm1-3H3.006V3.006H7V7zm5.985 0H9V3.015h3.985V7zM6 4.006H4.006V6H6V4.006zm5.985.009H10V6h1.985V4.015z\"\n        style={{ fill: fill || colors.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction ProjectIcon({ fill, ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M14.985 13.988L1 14.005 1.02 5h13.966v8.988h-.001zM1.998 5.995l.006 7.02L14.022 13 14 6.004l-12.002-.01v.001zM3 4.5V4h9.996l.004.5h1l-.005-1.497-11.98.003L2 4.5h1zm1-2v-.504h8.002L12 2.5h1l-.004-1.495H3.003L3 2.5h1z\"\n        style={{ fill: fill || colors.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction SubPortfolioIcon({ fill, ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M14 7h2v9H7v-2H0V0h14v7zM8 8v7h7V8H8zm3 6H9v-2h2v2zm3 0h-2v-2h2v2zm-1-7V1H1v12h6V7h6zm-7 5H2V8h4v4zm5-1H9V9h2v2zm3 0h-2V9h2v2zM5 9H3v2h2V9zm1-3H2V2h4v4zm6 0H8V2h4v4zM5 3H3v2h2V3zm6 0H9v2h2V3z\"\n        style={{ fill: fill || colors.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction SubProjectIcon({ fill, ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M8 9V8h6v1h1v1h1v6H6v-6h1V9h1zm7 2H7v4h8v-4zm-1-7v3h-1V5H1v7h4v1H0V4h14zm-1-2v1.5h-1V3H2v.5H1V2h12zm-1-2v1.5h-1V1H3v.5H2V0h10z\"\n        style={{ fill: fill || colors.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction UnitTestIcon({ fill, ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M14 15H2V1l7.997.02c1.013-.03 1.57.893 2.239 1.555.667.663 1.75 1.47 1.763 2.42H14V15zM9 2H3v12h10V6H9V2zM7 8l-3 2.5L7 13V8zm1 5l3-2.5L8 8v5zm2.012-8h3.008c-.012-.674-.78-1.258-1.27-1.752-.488-.495-.973-1.243-1.75-1.24v2.96l.012.032z\"\n        style={{ fill: fill || colors.blue }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\nimport { formatMeasure } from '../../helpers/measures';\nimport DeferredSpinner from '../ui/DeferredSpinner';\nimport { Button } from './buttons';\n\nexport interface ListFooterProps {\n  count: number;\n  className?: string;\n  loading?: boolean;\n  loadMore?: () => void;\n  needReload?: boolean;\n  reload?: () => void;\n  ready?: boolean;\n  total?: number;\n}\n\nexport default function ListFooter(props: ListFooterProps) {\n  const { className, count, loading, needReload, total, ready = true } = props;\n  const hasMore = total && total > count;\n\n  let button;\n  if (needReload && props.reload) {\n    button = (\n      <Button className=\"spacer-left\" data-test=\"reload\" disabled={loading} onClick={props.reload}>\n        {translate('reload')}\n      </Button>\n    );\n  } else if (hasMore && props.loadMore) {\n    button = (\n      <Button\n        className=\"spacer-left\"\n        disabled={loading}\n        data-test=\"show-more\"\n        onClick={props.loadMore}>\n        {translate('show_more')}\n      </Button>\n    );\n  }\n\n  return (\n    <footer\n      className={classNames('spacer-top note text-center', { 'new-loading': !ready }, className)}>\n      {translateWithParameters(\n        'x_of_y_shown',\n        formatMeasure(count, 'INT', null),\n        formatMeasure(total, 'INT', null)\n      )}\n      {button}\n      {loading && <DeferredSpinner className=\"text-bottom spacer-left position-absolute\" />}\n    </footer>\n  );\n}\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport { A11yContext } from './A11yContext';\n\ninterface Props {\n  anchor: string;\n  label?: string;\n  weight?: number;\n}\n\nexport default function A11ySkipTarget(props: Props) {\n  return (\n    <A11yContext.Consumer>\n      {({ addA11ySkipLink, removeA11ySkipLink }) => (\n        <A11ySkipTargetInner\n          addA11ySkipLink={addA11ySkipLink}\n          removeA11ySkipLink={removeA11ySkipLink}\n          {...props}\n        />\n      )}\n    </A11yContext.Consumer>\n  );\n}\n\ninterface InnerProps {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n}\n\nexport class A11ySkipTargetInner extends React.PureComponent<Props & InnerProps> {\n  componentDidMount() {\n    this.props.addA11ySkipLink(this.getLink());\n  }\n\n  componentWillUnmount() {\n    this.props.removeA11ySkipLink(this.getLink());\n  }\n\n  getLink = (): T.A11ySkipLink => {\n    const { anchor: key, label = translate('skip_to_content'), weight } = this.props;\n    return { key, label, weight };\n  };\n\n  render() {\n    const { anchor } = this.props;\n    return <span id={`a11y_target__${anchor}`} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { formatMeasure } from '../../helpers/measures';\nimport './Level.css';\n\nexport interface LevelProps {\n  'aria-label'?: string;\n  'aria-labelledby'?: string;\n  className?: string;\n  level: string;\n  small?: boolean;\n  muted?: boolean;\n}\n\nexport default function Level(props: LevelProps) {\n  const formatted = formatMeasure(props.level, 'LEVEL');\n  const className = classNames(props.className, 'level', 'level-' + props.level, {\n    'level-small': props.small,\n    'level-muted': props.muted\n  });\n\n  return (\n    <span\n      aria-label={props['aria-label']}\n      aria-labelledby={props['aria-labelledby']}\n      className={className}>\n      {formatted}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\nimport { formatMeasure } from '../../helpers/measures';\nimport './Rating.css';\n\ninterface Props extends React.AriaAttributes {\n  className?: string;\n  muted?: boolean;\n  small?: boolean;\n  value: string | number | undefined;\n}\n\nexport default function Rating({\n  className,\n  muted = false,\n  small = false,\n  value,\n  ...ariaAttrs\n}: Props) {\n  if (value === undefined) {\n    return (\n      <span aria-label={translate('metric.no_rating')} {...ariaAttrs}>\n        –\n      </span>\n    );\n  }\n  const formatted = formatMeasure(value, 'RATING');\n  return (\n    <span\n      aria-label={translateWithParameters('metric.has_rating_X', formatted)}\n      className={classNames(\n        'rating',\n        `rating-${formatted}`,\n        { 'rating-small': small, 'rating-muted': muted },\n        className\n      )}\n      {...ariaAttrs}>\n      {formatted}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { colors } from '../../app/theme';\nimport Icon, { IconProps } from './Icon';\n\nexport default function BranchIcon({ fill, ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M12.5 6.5c0-1.1-.9-2-2-2s-2 .9-2 2c0 .8.5 1.5 1.2 1.8-.3.6-.7 1.1-1.2 1.4-.9.5-1.9.5-2.5.4V4c.9-.2 1.5-1 1.5-1.9 0-1.1-.9-2-2-2s-2 .9-2 2C3.5 3 4.1 3.8 5 4v8c-.9.2-1.5 1-1.5 1.9 0 1.1.9 2 2 2s2-.9 2-2c0-.9-.6-1.7-1.5-1.9v-1c.2 0 .5.1.7.1.7 0 1.5-.1 2.2-.6.8-.5 1.4-1.2 1.7-2.1 1.1 0 1.9-.9 1.9-1.9zm-8-4.4c0-.6.4-1 1-1s1 .4 1 1-.4 1-1 1-1-.5-1-1zm2 11.9c0 .6-.4 1-1 1s-1-.4-1-1 .4-1 1-1 1 .4 1 1zm4-6.5c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1z\"\n        style={{ fill: fill || colors.blue }}\n      />\n    </Icon>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Level.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".level{display:inline-block;min-width:80px;height:24px;line-height:24px;border-radius:24px;box-sizing:border-box;color:#fff;letter-spacing:.02em;font-size:13px;font-weight:400;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.level,.level-small{width:auto;padding-left:9px;padding-right:9px}.level-small{min-width:64px;margin-top:-1px;margin-bottom:-1px;height:20px;line-height:20px;font-size:12px}.level-muted{background-color:#bdbdbd!important}a>.level{margin-bottom:-1px;border-bottom:1px solid;transition:all .2s ease}a>.level:hover{opacity:.8}.level-OK{background-color:#0a0}.level-WARN{background-color:#ed7d20}.level-ERROR{background-color:#d4333f}.level-NONE{background-color:#b4b4b4}.level-NOT_COMPUTED{background-color:#404040}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\n\nconst KNOWN_RATINGS = [\n  'sqale_rating',\n  'maintainability_rating', // Needed to provide the label for \"new_maintainability_rating\"\n  'reliability_rating',\n  'security_rating',\n  'security_review_rating'\n];\n\nexport function enhanceMeasure(measure: T.Measure, metrics: T.Dict<T.Metric>): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.MeasureIntern | undefined): string | undefined {\n  return measure?.period?.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from '../../components/controls/Tooltip';\nimport Level from '../../components/ui/Level';\nimport Rating from '../../components/ui/Rating';\nimport { formatMeasure } from '../../helpers/measures';\nimport { getRatingTooltip } from './utils';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span className={className}>–</span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, {\n      decimals,\n      omitExtraDecimalZeros: metricType === 'PERCENT'\n    });\n    return <span className={className}>{formattedValue != null ? formattedValue : '–'}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Rating.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".rating{display:inline-block;width:24px;height:24px;line-height:24px;border-radius:24px;box-sizing:border-box;color:#fff;font-size:16px;font-weight:400;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.rating-muted{background-color:#bdbdbd!important;color:#fff!important;text-shadow:0 0 1px rgba(0,0,0,.35)!important}a>.rating{margin-bottom:-1px;border-bottom:1px solid;transition:all .2s ease}a>.rating:hover{opacity:.8}.rating-A{line-height:23px;background-color:#0a0}a>.rating-A{border-bottom-color:#0a0}.rating-B{background-color:#b0d513}a .rating-B{border-bottom-color:#b0d513}.rating-C{background-color:#eabe06}a .rating-C{border-bottom-color:#eabe06}.rating-D{background-color:#ed7d20}a .rating-D{border-bottom-color:#ed7d20}.rating-E{background-color:#d4333f}a .rating-E{border-bottom-color:#d4333f}.rating-small{width:18px;height:18px;line-height:18px;margin-top:-1px;margin-bottom:-1px;font-size:12px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from '../lazyLoadComponent';\n\nconst SourceViewer = lazyLoadComponent(\n  () => import(/* webpackPrefetch: true */ './SourceViewerBase'),\n  'SourceViewer'\n);\nexport default SourceViewer;\n","var arrayMap = require('./_arrayMap'),\n    baseIntersection = require('./_baseIntersection'),\n    baseRest = require('./_baseRest'),\n    castArrayLikeObject = require('./_castArrayLikeObject');\n\n/**\n * Creates an array of unique values that are included in all given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of intersecting values.\n * @example\n *\n * _.intersection([2, 1], [2, 3]);\n * // => [2]\n */\nvar intersection = baseRest(function(arrays) {\n  var mapped = arrayMap(arrays, castArrayLikeObject);\n  return (mapped.length && mapped[0] === arrays[0])\n    ? baseIntersection(mapped)\n    : [];\n});\n\nmodule.exports = intersection;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../helpers/l10n';\nimport { formatMeasure } from '../../helpers/measures';\nimport { ComponentQualifier } from '../../types/component';\n\nexport interface Props {\n  componentQualifier?: string;\n  current?: number;\n  showShortcuts?: boolean;\n  total?: number;\n}\n\nexport default function PageActions(props: Props) {\n  const { componentQualifier, current, showShortcuts, total = 0 } = props;\n\n  return (\n    <div className=\"page-actions display-flex-center\">\n      {showShortcuts && (\n        <span className=\"note nowrap\">\n          <span className=\"big-spacer-right\">\n            <span className=\"shortcut-button little-spacer-right\">↑</span>\n            <span className=\"shortcut-button little-spacer-right\">↓</span>\n            {translate('component_measures.to_select_files')}\n          </span>\n\n          <span>\n            <span className=\"shortcut-button little-spacer-right\">←</span>\n            <span className=\"shortcut-button little-spacer-right\">→</span>\n            {translate('component_measures.to_navigate')}\n          </span>\n        </span>\n      )}\n      {total > 0 && componentQualifier === ComponentQualifier.Project && (\n        <div className=\"nowrap\">\n          <span className=\"big-spacer-left\">\n            <strong>\n              {current !== undefined && (\n                <span>\n                  {formatMeasure(current, 'INT')}\n                  {' / '}\n                </span>\n              )}\n              {formatMeasure(total, 'INT')}\n            </strong>{' '}\n            {translate('component_measures.files')}\n          </span>\n        </div>\n      )}\n    </div>\n  );\n}\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * The base implementation of methods like `_.intersection`, without support\n * for iteratee shorthands, that accepts an array of arrays to inspect.\n *\n * @private\n * @param {Array} arrays The arrays to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of shared values.\n */\nfunction baseIntersection(arrays, iteratee, comparator) {\n  var includes = comparator ? arrayIncludesWith : arrayIncludes,\n      length = arrays[0].length,\n      othLength = arrays.length,\n      othIndex = othLength,\n      caches = Array(othLength),\n      maxLength = Infinity,\n      result = [];\n\n  while (othIndex--) {\n    var array = arrays[othIndex];\n    if (othIndex && iteratee) {\n      array = arrayMap(array, baseUnary(iteratee));\n    }\n    maxLength = nativeMin(array.length, maxLength);\n    caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n      ? new SetCache(othIndex && array)\n      : undefined;\n  }\n  array = arrays[0];\n\n  var index = -1,\n      seen = caches[0];\n\n  outer:\n  while (++index < length && result.length < maxLength) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (!(seen\n          ? cacheHas(seen, computed)\n          : includes(result, computed, comparator)\n        )) {\n      othIndex = othLength;\n      while (--othIndex) {\n        var cache = caches[othIndex];\n        if (!(cache\n              ? cacheHas(cache, computed)\n              : includes(arrays[othIndex], computed, comparator))\n            ) {\n          continue outer;\n        }\n      }\n      if (seen) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseIntersection;\n","var isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Casts `value` to an empty array if it's not an array like object.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array|Object} Returns the cast array-like object.\n */\nfunction castArrayLikeObject(value) {\n  return isArrayLikeObject(value) ? value : [];\n}\n\nmodule.exports = castArrayLikeObject;\n"],"sourceRoot":""}