(window.webpackJsonp=window.webpackJsonp||[]).push([[346,370],{1017:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return i}));var s=t(366),n=t(34),r=t(6),c=t(0);function i(){const e=decodeURIComponent(Object(n.a)("AUTHENTICATION-ERROR")||"");return s.createElement("div",{className:"page-wrapper-simple",id:"bd"},s.createElement("div",{className:"page-simple",id:"nonav"},s.createElement("div",{className:"text-center"},s.createElement("p",{id:"unauthorized"},Object(r.k)("unauthorized.message")),Boolean(e)&&s.createElement("p",{className:"spacer-top"},Object(r.k)("unauthorized.reason")," ",e),s.createElement("div",{className:"big-spacer-top"},s.createElement("a",{href:Object(c.getBaseUrl)()+"/"},Object(r.k)("layout.home"))))))}},1801:function(e,a,t){"use strict";t.r(a),t.d(a,"ChangeAdminPasswordApp",(function(){return w})),t.d(a,"mapStateToProps",(function(){return g}));var s=t(366),n=t(382),r=t(495),c=t(412),i=t(385),m=t(689),o=t(368),d=t(379),l=t(397),u=t(399),p=t(6),h=t(378),f=t(1017);function b(e){const{canAdmin:a,canSubmit:t,confirmPasswordValue:n,passwordValue:r,location:c,submitting:i,success:b}=e;return a?s.createElement("div",{className:"page-wrapper-simple"},s.createElement("div",{className:"page-simple"},b?s.createElement(d.a,{variant:"success"},s.createElement("p",{className:"spacer-bottom"},Object(p.k)("users.change_admin_password.form.success")),s.createElement("a",{href:Object(h.F)(c)},Object(p.k)("users.change_admin_password.form.continue_to_app"))):s.createElement(s.Fragment,null,s.createElement(m.a,null),s.createElement("h1",{className:"text-center bg-danger big padded"},Object(p.k)("users.change_admin_password.instance_is_at_risk")),s.createElement("p",{className:"text-center huge huge-spacer-top"},Object(p.k)("users.change_admin_password.header")),s.createElement("p",{className:"text-center huge-spacer-top huge-spacer-bottom"},Object(p.k)("users.change_admin_password.description")),s.createElement("form",{className:"text-center",onSubmit:a=>{a.preventDefault(),e.onSubmit()}},s.createElement("h2",{className:"big-spacer-bottom big"},Object(p.k)("users.change_admin_password.form.header")),s.createElement(u.a,{className:"form-field"}),s.createElement("div",{className:"form-field"},s.createElement("label",{htmlFor:"user-password"},Object(p.k)("users.change_admin_password.form.password"),s.createElement(l.a,null)),s.createElement("input",{id:"user-password",name:"password",onChange:a=>{e.onPasswordChange(a.currentTarget.value)},required:!0,type:"password",value:r})),s.createElement("div",{className:"form-field"},s.createElement("label",{htmlFor:"confirm-user-password"},Object(p.k)("users.change_admin_password.form.confirm"),s.createElement(l.a,null)),s.createElement("input",{id:"confirm-user-password",name:"confirm-password",onChange:a=>{e.onConfirmPasswordChange(a.currentTarget.value)},required:!0,type:"password",value:n}),n===r&&"admin"===r&&s.createElement(d.a,{className:"spacer-top",variant:"warning"},Object(p.k)("users.change_admin_password.form.cannot_use_default_password"))),s.createElement("div",{className:"form-field"},s.createElement(o.h,{disabled:!t||i},Object(p.k)("update_verb"),i&&s.createElement("i",{className:"spinner spacer-left"}))))))):s.createElement(f.default,null)}class w extends s.PureComponent{constructor(e){super(e),this.mounted=!1,this.handlePasswordChange=e=>{this.setState({passwordValue:e},this.checkCanSubmit)},this.handleConfirmPasswordChange=e=>{this.setState({confirmPasswordValue:e},this.checkCanSubmit)},this.handleSubmit=async()=>{const{canSubmit:e,passwordValue:a}=this.state;if(e){this.setState({submitting:!0});const e=await Object(r.a)({login:"admin",password:a}).then(()=>!0,()=>!1);this.mounted&&this.setState({submitting:!1,success:e})}},this.checkCanSubmit=()=>{this.setState(({passwordValue:e,confirmPasswordValue:a})=>({canSubmit:e===a&&"admin"!==e}))},this.state={passwordValue:"",confirmPasswordValue:"",submitting:!1,success:!e.instanceUsesDefaultAdminCredentials}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const{canAdmin:e,location:a}=this.props,{canSubmit:t,confirmPasswordValue:n,passwordValue:r,submitting:c,success:i}=this.state;return s.createElement(b,{canAdmin:e,passwordValue:r,confirmPasswordValue:n,canSubmit:t,onPasswordChange:this.handlePasswordChange,onConfirmPasswordChange:this.handleConfirmPasswordChange,onSubmit:this.handleSubmit,submitting:c,success:i,location:a})}}const g=e=>{const{canAdmin:a,instanceUsesDefaultAdminCredentials:t}=Object(i.getAppState)(e);return{canAdmin:a,instanceUsesDefaultAdminCredentials:t}};a.default=Object(n.b)(g)(Object(c.a)(w))},397:function(e,a,t){"use strict";t.d(a,"a",(function(){return c}));var s=t(367),n=t(366),r=t(6);function c({className:e}){return n.createElement("em",{"aria-label":Object(r.k)("field_required"),className:s("mandatory little-spacer-left",e)},"*")}},399:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var s=t(367),n=t(366),r=t(371),c=t(6);function i({className:e}){return n.createElement("div",{"aria-hidden":!0,className:s("text-muted",e)},n.createElement(r.FormattedMessage,{id:"fields_marked_with_x_required",defaultMessage:Object(c.k)("fields_marked_with_x_required"),values:{star:n.createElement("em",{className:"mandatory"},"*")}}))}}}]);
//# sourceMappingURL=346.m.6ecee6d7.chunk.js.map