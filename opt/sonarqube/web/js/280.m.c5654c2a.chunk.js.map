{"version":3,"sources":["webpack:///./src/main/js/apps/overview/styles.css?d11e","webpack:///./src/main/js/apps/overview/components/MeasurementLabel.tsx","webpack:///./src/main/js/apps/overview/components/IssueLabel.tsx","webpack:///./src/main/js/apps/overview/components/IssueRating.tsx","webpack:///./src/main/js/apps/overview/components/QualityGateCondition.tsx","webpack:///./src/main/js/apps/overview/components/QualityGateConditions.tsx","webpack:///./src/main/js/apps/overview/styles.css","webpack:///./src/main/js/components/ui/DismissableAlert.css?8b48","webpack:///./src/main/js/components/ui/DismissableAlert.css","webpack:///./src/main/js/apps/overview/branches/Event.tsx","webpack:///./src/main/js/apps/overview/branches/Analysis.tsx","webpack:///./src/main/js/apps/overview/branches/ActivityPanel.tsx","webpack:///./src/main/js/components/ui/DismissableAlert.tsx","webpack:///./src/main/js/apps/overview/branches/FirstAnalysisNextStepsNotif.tsx","webpack:///./src/main/js/apps/overview/branches/DrilldownMeasureValue.tsx","webpack:///./src/main/js/apps/overview/branches/ApplicationLeakPeriodInfo.tsx","webpack:///./src/main/js/apps/overview/branches/ProjectLeakPeriodInfo.tsx","webpack:///./src/main/js/apps/overview/branches/LeakPeriodInfo.tsx","webpack:///./src/main/js/apps/overview/branches/DebtValue.tsx","webpack:///./src/main/js/apps/overview/branches/SecurityHotspotsReviewed.tsx","webpack:///./src/main/js/apps/overview/branches/MeasuresPanelIssueMeasureRow.tsx","webpack:///./src/main/js/apps/overview/branches/MeasuresPanel.tsx","webpack:///./src/main/js/apps/overview/branches/MeasuresPanelNoNewCode.tsx","webpack:///./src/main/js/apps/overview/branches/NoCodeWarning.tsx","webpack:///./src/main/js/apps/overview/branches/QualityGatePanelSection.tsx","webpack:///./src/main/js/apps/overview/branches/QualityGatePanel.tsx","webpack:///./src/main/js/apps/overview/branches/BranchOverviewRenderer.tsx","webpack:///./src/main/js/apps/overview/branches/BranchOverview.tsx","webpack:///./src/main/js/apps/overview/components/App.tsx","webpack:///./src/main/js/components/controls/HelpTooltip.tsx","webpack:///./src/main/js/components/controls/Select.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/components/intl/DateTimeFormatter.tsx","webpack:///./src/main/js/components/controls/HelpTooltip.css?96bd","webpack:///./src/main/js/components/controls/HelpTooltip.css","webpack:///./src/main/js/components/controls/Checkbox.tsx","webpack:///./src/main/js/components/controls/Select.css?5002","webpack:///./src/main/js/components/controls/Select.css","webpack:///./src/main/js/components/intl/DateFromNow.tsx","webpack:///./src/main/js/app/components/a11y/A11ySkipTarget.tsx","webpack:///./src/main/js/components/intl/DateFormatter.tsx","webpack:///./src/main/js/components/controls/Checkbox.css?57e1","webpack:///./src/main/js/components/controls/Checkbox.css","webpack:///./src/main/js/components/ui/Level.tsx","webpack:///./src/main/js/components/icons/IssueTypeIcon.tsx","webpack:///./src/main/js/components/ui/Rating.tsx","webpack:///./src/main/js/components/icons/BranchIcon.tsx","webpack:///./src/main/js/components/ui/Level.css?03ac","webpack:///./src/main/js/components/ui/Level.css","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/components/icons/ChevronDownIcon.tsx","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./src/main/js/app/utils/addGlobalSuccessMessage.ts","webpack:///./src/main/js/components/activity-graph/utils.ts","webpack:///./src/main/js/components/ui/Rating.css?4296","webpack:///./src/main/js/components/ui/Rating.css","webpack:///./src/main/js/types/project-activity.ts","webpack:///./src/main/js/components/icons/IssueIcon.tsx","webpack:///./src/main/js/apps/settings/components/AdditionalCategoryKeys.ts","webpack:///./src/main/js/components/ui/CoverageRating.tsx","webpack:///./node_modules/lodash/inRange.js","webpack:///./src/main/js/api/application.ts","webpack:///./node_modules/lodash/_baseInRange.js","webpack:///./src/main/js/components/controls/BoxedTabs.tsx","webpack:///./src/main/js/components/ui/DuplicationsRating.tsx","webpack:///./src/main/js/app/components/ComponentContext.tsx","webpack:///./src/main/js/components/shared/DrilldownLink.tsx","webpack:///./src/main/js/apps/overview/utils.ts","webpack:///./src/main/js/components/ui/DuplicationsRating.css?6014","webpack:///./src/main/js/components/ui/DuplicationsRating.css","webpack:///./src/main/js/components/common/MultiSelectOption.tsx","webpack:///./src/main/js/components/common/MultiSelect.tsx","webpack:///./src/main/js/apps/projectActivity/components/EventInner.tsx","webpack:///./src/main/js/apps/projectActivity/components/DefinitionChangeEventInner.tsx","webpack:///./src/main/js/apps/projectActivity/components/RichQualityGateEventInner.tsx","webpack:///./src/main/js/api/component-report.ts","webpack:///./src/main/js/components/icons/HistoryIcon.tsx","webpack:///./src/main/js/api/projectActivity.ts","webpack:///./src/main/js/components/activity-graph/styles.css?935f","webpack:///./src/main/js/helpers/periods.ts","webpack:///./src/main/js/components/charts/LineChart.css?9765","webpack:///./src/main/js/api/time-machine.ts","webpack:///./src/main/js/components/activity-graph/styles.css","webpack:///./src/main/js/components/charts/AdvancedTimeline.css?3276","webpack:///./src/main/js/components/charts/AdvancedTimeline.css","webpack:///./src/main/js/components/charts/LineChart.css","webpack:///./src/main/js/components/common/ActivityLink.tsx","webpack:///./src/main/js/components/common/ActivityLink.css?a97d","webpack:///./src/main/js/components/common/ActivityLink.css","webpack:///./src/main/js/components/charts/AdvancedTimeline.tsx","webpack:///./src/main/js/components/icons/ChartLegendIcon.tsx","webpack:///./src/main/js/components/activity-graph/GraphsLegendItem.tsx","webpack:///./src/main/js/components/activity-graph/GraphsLegendCustom.tsx","webpack:///./src/main/js/components/activity-graph/GraphsLegendStatic.tsx","webpack:///./src/main/js/components/activity-graph/GraphsTooltipsContent.tsx","webpack:///./src/main/js/components/activity-graph/GraphsTooltipsContentCoverage.tsx","webpack:///./src/main/js/components/activity-graph/GraphsTooltipsContentDuplication.tsx","webpack:///./src/main/js/components/activity-graph/GraphsTooltipsContentEvents.tsx","webpack:///./src/main/js/components/activity-graph/GraphsTooltipsContentIssues.tsx","webpack:///./src/main/js/components/activity-graph/GraphsTooltips.tsx","webpack:///./src/main/js/components/activity-graph/GraphHistory.tsx","webpack:///./src/main/js/components/activity-graph/GraphsHistory.tsx","webpack:///./src/main/js/components/activity-graph/AddGraphMetricPopup.tsx","webpack:///./src/main/js/components/activity-graph/AddGraphMetric.tsx","webpack:///./src/main/js/components/activity-graph/GraphsHeader.tsx","webpack:///./src/main/js/components/controls/ComponentReportActionsRenderer.tsx","webpack:///./src/main/js/components/controls/ComponentReportActions.tsx"],"names":["api","content","__esModule","default","module","i","options","exported","locals","exports","MeasurementLabel","getLabelText","branchLike","component","measures","type","useDiffMetric","this","props","expandedLabelKey","labelKey","linesMetric","measure","value","defaultMessage","id","values","count","className","key","metric","centered","iconClass","undefined","icon","size","Number","link","decimals","omitExtraDecimalZeros","label","helpTooltip","params","resolved","types","sinceLeakPeriod","to","SecurityHotspot","overlay","rating","tooltip","renderRatingLink","getIssuesUrl","customQuery","query","Object","assign","condition","threshold","level","error","warning","severities","children","toLowerCase","metricKey","METRICS_TO_URL_MAPPING","reliability_rating","getUrlForBugsOrVulnerabilities","Bug","new_reliability_rating","security_rating","Vulnerability","new_security_rating","sqale_rating","getUrlForCodeSmells","new_maintainability_rating","security_hotspots_reviewed","getUrlForSecurityHotspot","new_security_hotspots_reviewed","DrilldownLink","period","isDiff","actual","operator","op","wrapWithLink","Measure","metricType","IssueTypeIcon","name","LEVEL_ORDER","QualityGateConditions","collapsible","failedConditions","collapsed","toggleCollapsed","Boolean","length","sortedConditions","indexOf","renderConditions","renderCollapsed","slice","map","onClick","ChevronDownIcon","___CSS_LOADER_API_IMPORT___","push","event","category","title","eventCategory","qualityGate","stillFailing","status","Level","small","description","analysis","sortedEvents","events","qualifier","Application","Project","DateTimeFormatter","date","analyses","graph","leakPeriodDate","loading","measuresHistory","metrics","series","graphs","shownLeakPeriodDate","startDate","reduce","oldest","history","getTime","Date","filteredAnalyses","filter","a","GraphsHeader","updateGraph","onGraphChange","GraphsHistory","ActivityLink","DeferredSpinner","alertKey","display","variant","show","setShow","Alert","ClearIcon","thin","withCurrentUser","currentUser","branchesEnabled","detectedCIOnLastAnalysis","projectBinding","showConfigurePullRequestDecoNotif","showConfigureCINotif","showOnlyConfigureCI","showOnlyConfigurePR","showBoth","isProjectAdmin","configuration","showSettings","tutorialsLink","pathname","projectSettingsLink","link_project_settings","link_ci","DrilldownMeasureValue","leakPeriod","DateFromNow","fromNow","HelpTooltip","projectName","intl","formatDate","formatTime","leakPeriodLabel","includes","mode","LeakPeriodInfo","new_technical_debt","sqale_index","SecurityHotspotsReviewed","CoverageRating","MeasuresPanelIssueMeasureRow","isNewCodeTab","isApp","toString","CodeSmell","IssueLabel","IssueRating","MeasuresPanelTabs","MeasuresPanelNoNewCode","branch","hasBadReferenceBranch","hasBadNewCodeSettingSameRef","parameter","badExplanationKey","showSettingsLink","style","height","alt","src","maxWidth","setting_link","learn_more_link","MeasuresPanel","appLeak","hasDiffMeasures","some","m","tab","selectTab","New","Overall","tabs","position","top","grid","ComponentReportActions","BoxedTabs","onSelect","selected","coverage","new_coverage","Coverage","tests","Duplication","duplicated_blocks","find","projects","qgStatus","newCodeFailedConditions","c","overallFailedConditions","showName","qgStatuses","overallLevel","s","success","overallFailedConditionsCount","acc","showIgnoredConditionWarning","p","ignoredConditions","failed","loadingHistory","loadingStatus","projectIsEmpty","A11ySkipTarget","anchor","FROM_DATE","setFullYear","getFullYear","super","mounted","loadStatus","loadApplicationStatus","loadProjectStatus","async","setState","appStatus","application","appMeasures","loadMeasuresAndMeta","appBranchName","appDetails","then","leaks","sortedLeaks","leak","Promise","all","project","projectDetails","projectBranchLike","isMain","excludedFromPurge","conditions","results","getFailedConditions","projectStatus","projectKey","metricKeys","componentKey","loadHistory","loadHistoryMeasures","loadAnalyses","doneLoadingHistory","state","graphMetrics","from","join","getTopLevelComponent","detectedCI","current","breadcrumbs","Portfolio","handleGraphChange","prevProps","lines","new_lines","EmptyOverview","lazyLoadComponent","PullRequestOverview","isPortfolio","appState","branchLikes","Suggestions","suggestions","analysisDate","hasAnalyses","isPending","isInProgress","withRouter","withAppState","mouseLeaveDelay","onShow","placement","fill","gray71","ReactSelectLib","ReactSelect","ReactCreatable","lib","Creatable","Async","renderInput","iconProps","Select","innerRef","clearable","clearRenderer","ref","Consumer","addSuggestions","removeSuggestions","SuggestionsInner","formatterOption","year","month","day","hour","minute","Checkbox","handleClick","preventDefault","currentTarget","blur","disabled","onCheck","checked","right","thirdState","note","href","role","defaultProps","originalChildren","f","hourPrecision","now","parsedDate","formattedDate","addA11ySkipLink","removeA11ySkipLink","A11ySkipTargetInner","getLink","weight","longFormatterOption","DateFormatter","long","formatted","muted","Rating","ariaAttrs","BranchIcon","d","blue","KNOWN_RATINGS","enhanceMeasure","getLeakValue","getRatingTooltip","finalMetricKey","substr","formattedValue","addGlobalSuccessMessage","message","dispatch","DEFAULT_GRAPH","issues","GRAPHS_METRICS_DISPLAYED","bugs","code_smells","vulnerabilities","lines_to_cover","uncovered_lines","duplications","ncloc","duplicated_lines","GRAPHS_METRICS","concat","duplicated_lines_density","isCustomGraph","custom","getGraphTypes","ignoreCustom","hasDataValues","serie","data","point","y","hasHistoryData","getSeriesMetricType","getDisplayedHistoryMetrics","customMetrics","getHistoryMetrics","splitSeriesInGraphs","maxGraph","maxSeries","generateSeries","displayedMetrics","uncoveredLines","linesToCover","idx","x","translatedName","generateCoveredLinesMetric","Array","isArray","findMetric","saveActivityGraph","namespace","getActivityGraph","customGraphs","split","GraphType","IssueIcon","ALM_INTEGRATION","ANALYSIS_SCOPE_CATEGORY","LANGUAGES_CATEGORY","NEW_CODE_PERIOD_CATEGORY","PULL_REQUEST_DECORATION_BINDING_CATEGORY","DonutChart","SIZE_TO_WIDTH_MAPPING","normal","big","huge","SIZE_TO_THICKNESS_MAPPING","padAngle","numberValue","green","barBackgroundColor","lineCoverageRed","width","thickness","baseInRange","toFinite","toNumber","number","start","end","getApplicationLeak","r","getApplicationDetails","addApplicationBranch","catch","updateApplicationBranch","deleteApplicationBranch","getApplicationProjects","addProjectToApplication","removeProjectFromApplication","refreshApplication","createApplication","visibility","deleteApplication","editApplication","nativeMax","Math","max","nativeMin","min","TabContainer","div","baseBorder","barBorderColor","highlightHoverMixin","barBackgroundColorHighlight","StyledTab","button","active","gridSize","ActiveBorder","DuplicationsRating","isNaN","ComponentContext","ISSUE_MEASURES","issueParamsPerMetric","blocker_violations","new_blocker_violations","critical_violations","new_critical_violations","major_violations","new_major_violations","minor_violations","new_minor_violations","info_violations","new_info_violations","open_issues","statuses","reopened_issues","confirmed_issues","false_positive_issues","resolutions","new_code_smells","new_bugs","new_vulnerabilities","isIssueMeasure","propsToIssueParams","renderIssuesLink","url","listView","METRICS","alert_status","quality_gate_details","security_hotspots","new_security_hotspots","security_review_rating","new_security_review_rating","new_lines_to_cover","new_duplicated_lines_density","ncloc_language_distribution","PR_METRICS","HISTORY_METRICS_LIST","MeasurementType","MEASUREMENTS_MAP","newMetric","newLinesMetric","afterMergeMetric","newLinesExpandedLabelKey","getIssueRatingName","ratingName","getIssueIconClass","getIssueMetricKey","getIssueRatingMetricKey","newRating","getMeasurementIconClass","getMeasurementMetricKey","getMeasurementAfterMergeMetricKey","getMeasurementLinesMetricKey","getMeasurementLabelKeys","MultiSelectOption","element","onHover","renderLabel","onFocus","onMouseOver","onSelectChange","handleSelectChange","item","onSelectItem","onUnselectItem","handleSearchChange","onSearchQuery","validateSearchInput","handleElementHover","prevState","activeIdx","getAllElements","handleKeyboard","evt","keyCode","stopPropagation","selectNextElement","selectPreviousElement","toggleSelect","onSearch","stopLoading","isNewElement","onUnselect","elem","selectedElements","elements","updateSelectedElements","filterSelected","updateUnselectedElements","listSize","unselectedElements","setElementActive","allElements","container","addEventListener","nextProps","totalElements","searchInput","focus","removeEventListener","allowSelection","allowNewElements","footerNode","activeElement","showNewElement","infiniteList","listClasses","SearchBox","autoFocus","onChange","placeholder","EventInner","readonly","isDefinitionChangeEvent","definitionChange","DefinitionChangeEventInner","expanded","toggleProjectsList","renderProjectLink","renderBranch","mainBranch","changeType","newBranch","oldBranch","turned","renderProjectChange","isRichQualityGateEvent","RichQualityGateEventInner","failing","getReportStatus","branchKey","getReportUrl","encodeURIComponent","subscribeToEmailReport","unsubscribeFromEmailReport","HistoryIcon","getProjectActivity","createEvent","deleteEvent","changeEvent","deleteAnalysis","getPeriodLabel","dateFormatter","modeParam","getPeriodDate","isApplicationPeriod","getAllTimeMachineData","prev","getTimeMachineData","ps","result","paging","pageIndex","pageSize","total","getRatingScale","availableHeight","domain","range","getLevelScale","getYScale","flatData","nice","getXScale","endDate","availableWidth","dateRange","extent","xScale","clamp","maxXRange","getScales","padding","yScale","getSelectedDatePos","selectedDate","firstSerie","findIndex","valueOf","xRange","xPos","selectedDateXPos","selectedDateIdx","getEventMarker","half","handleWheel","parentBbox","getBoundingClientRect","mouseXPos","pageX","left","speed","deltaMode","zoomSpeed","leftPos","round","deltaY","rightPos","invert","handleZoomUpdate","updateZoom","handleMouseMove","updateTooltipPos","handleMouseEnter","mouseOver","handleMouseOut","updateTooltip","updateSelectedDate","setLeakLegendTextWidth","node","leakLegendTextWidth","bisectX","bisector","previousPoint","nextPoint","renderHorizontalGrid","formatYTick","ticks","maxYTicksCount","formattedTicks","tick","dx","dy","textAnchor","x1","x2","y1","y2","renderXAxisTicks","format","tickFormat","transform","index","nextTick","renderNewCodeLegend","leakStart","leakWidth","yRange","legendMinWidth","legendPadding","legendBackgroundPosition","legendBackgroundWidth","legendMargin","legendPosition","legendTextAnchor","leakPrimaryColor","renderLeak","displayNewCodeLegend","renderLines","lineGenerator","defined","basisCurve","curve","renderDots","serieIdx","pointNotDefined","hasPointBefore","hasPointAfter","cx","cy","dots","renderAreas","areaGenerator","y0","renderSelectedDate","renderClipPath","renderMouseEventsOverlay","zoomEnabled","mouseEvents","onWheel","onMouseEnter","onMouseMove","onMouseOut","scales","selectedDatePos","disableZoom","isZoomed","hideGrid","hideXAxis","showAreas","eventSize","ChartLegendIcon","COLORS","darkBlue","Icon","removeMetric","isActionable","legendClass","showWarning","AlertWarnIcon","GraphsLegendCustom","hasData","legendItem","Tooltip","GraphsLegendStatic","GraphsTooltipsContent","GraphsTooltipsContentCoverage","addSeparator","tooltipIdx","uncovered","uncoveredValue","coverageValue","colSpan","GraphsTooltipsContentDuplication","duplicationDensity","duplicationDensityValue","GraphsTooltipsContentEvents","METRIC_RATING","GraphsTooltipsContentIssues","ratingValue","formatValue","tooltipPos","RightTop","graphWidth","LeftTop","tooltipContent","renderContent","metricsType","formatTooltipValue","tooltipXPos","graphEndDate","graphStartDate","isCustom","removeCustomMetric","AutoSizer","updateGraphZoom","getSelectedDateEvents","graphSeries","AddGraphMetricPopup","metricsTypeFilter","sort","MultiSelect","selectedMetrics","getLocalizedMetricNameFromKey","filterMetricsElements","hidden","getSelectedMetricsElements","resolve","addMetric","filteredMetrics","Dropdown","closeOnClick","closeOnClickOutside","DropdownIcon","option","addCustomMetric","selectOptions","searchable","ComponentReportActionsRenderer","frequency","subscribed","canSubscribe","currentUserHasEmail","renderDownloadButton","simple","download","target","rel","translationKey","onClickHandler","handleUnsubscription","handleSubscription","frequencyTranslation","renderSubscriptionButton","loadReportStatus","componentFrequency","globalFrequency","qualifierTranslation","handleSubscribe","handleUnsubscribe","qualifiers","email"],"mappings":"gFAAA,IAAIA,EAAM,EAAQ,KACFC,EAAU,EAAQ,MAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBC,GAFSP,EAAIC,EAASK,GAEXL,EAAQO,OAASP,EAAQO,OAAS,IAIjDJ,EAAOK,QAAUF,G,kCCpBjB,mGA2Ce,MAAMG,UAAyB,YAA9C,c,oBACE,KAAAC,aAAe,KACb,MAAM,WAAEC,EAAF,UAAcC,EAAd,SAAyBC,EAAzB,KAAmCC,EAAnC,cAAyCC,GAAgB,GAAUC,KAAKC,OACxE,iBAAEC,EAAF,SAAoBC,GAAa,YAAwBL,EAAMC,GAC/DK,EAAc,YAA6BN,EAAMC,GACjDM,EAAU,sBAAYR,EAAUO,GAEtC,GAAKC,EAEE,CACL,MAAMC,EAAQP,EAAgB,YAAaM,GAAWA,EAAQC,MAE9D,OACE,gBAAC,mBAAgB,CACfC,eAAgB,YAAUL,GAC1BM,GAAIN,EACJO,OAAQ,CACNC,MACE,gBAAC,IAAa,CACZf,WAAYA,EACZgB,UAAU,MACVf,UAAWA,EAAUgB,IACrBC,OAAQT,GACP,wBAAcE,EAAO,iBAfhC,OAAO,YAAUH,IAwBrB,SACE,MAAM,WAAER,EAAF,SAAcmB,EAAd,UAAwBlB,EAAxB,SAAmCC,EAAnC,KAA6CC,EAA7C,cAAmDC,GAAgB,GAAUC,KAAKC,MAClFc,EAAY,YAAwBjB,GACpCe,EAAS,YAAwBf,EAAMC,GACvCM,EAAU,sBAAYR,EAAUgB,GAEtC,IAAIP,EAKJ,GAJID,IACFC,EAAQP,EAAgB,YAAaM,GAAWA,EAAQC,YAG5CU,IAAVV,EACF,OACE,uBAAKK,UAAU,uBACb,qCAAkB,YAAU,WAAYA,UAAU,kCAClD,wBAAMA,UAAU,mBAAmBX,KAAKN,iBAK9C,MAAMuB,EAAO,gBAAoBF,EAAW,CAAEG,KAAM,MAAOZ,MAAOa,OAAOb,KACnEc,EACJ,gBAAC,IAAa,CACZzB,WAAYA,EACZgB,UAAU,qCACVf,UAAWA,EAAUgB,IACrBC,OAAQA,GACP,wBAAcP,EAAO,UAAW,CAAEe,SAAU,EAAGC,uBAAuB,KAGrEC,EAAQvB,KAAKN,eAEnB,OAAOoB,EACL,uBAAKH,UAAU,8BACb,uBAAKA,UAAU,mDACb,wBAAMA,UAAU,oBAAoBM,GACnCG,GAEH,uBAAKT,UAAU,0BAA0BY,IAG3C,uBAAKZ,UAAU,uBACb,wBAAMA,UAAU,oBAAoBM,GACpC,uBAAKN,UAAU,uBACb,4BAAOS,GACP,wBAAMT,UAAU,cAAcY,Q,odCxCzB,YAxCR,SAAoBtB,GACzB,MAAM,WAAEN,EAAF,UAAcC,EAAd,YAAyB4B,EAAzB,SAAsC3B,EAAtC,KAAgDC,EAAhD,cAAsDC,GAAgB,GAAUE,EAChFY,EAAS,YAAkBf,EAAMC,GACjCM,EAAU,sBAAYR,EAAUgB,GAChCE,EAAY,YAAkBjB,GAEpC,IAAIQ,EACAD,IACFC,EAAQP,EAAgB,YAAaM,GAAWA,EAAQC,OAG1D,MAAMmB,E,+VAAM,IACP,YAAmB9B,GADZ,CAEV+B,SAAU,QACVC,MAAO7B,EACP8B,gBAAiB7B,EAAgB,OAAS,UAG5C,OACE,qCACaiB,IAAVV,EACC,qCAAkB,YAAU,WAAYK,UAAU,kCAElD,gBAAC,IAAI,CACHA,UAAU,qCACVkB,GACE/B,IAAS,IAAUgC,gBACf,YAAgClC,EAAUgB,IAAKa,GAC/C,YAAsB7B,EAAUgB,IAAKa,IAE1C,wBAAcnB,EAAO,cAGzB,gBAAoBS,EAAW,CAAEJ,UAAW,wCAC5C,yBAAeE,GACfW,GAAe,gBAAC,IAAW,CAACb,UAAU,qBAAqBoB,QAASP,S,kCC3E3E,mEA+Ee,YAXR,SAAqBvB,GAC1B,MAAM,KAAEH,GAASG,EAEjB,OACE,gCACE,wBAAMU,UAAU,sCAAsC,YAAmBb,IApC/E,SAA0BG,GACxB,MAAM,WAAEN,EAAF,UAAcC,EAAd,cAAyBG,GAAgB,EAAzC,SAAgDF,EAAhD,KAA0DC,GAASG,EACnE+B,EAAS,YAAwBlC,EAAMC,GACvCM,EAAU,sBAAYR,EAAUmC,GAEtC,IAAKA,IAAW3B,EACd,OACE,uBAAKM,UAAU,UACb,gBAAC,IAAM,CAACL,WAAOU,KAKrB,MAAMV,EAAQD,IAAYN,EAAgB,YAAaM,GAAWA,EAAQC,OACpE2B,EAAU3B,GAAS,YAAiB0B,EAAQb,OAAOb,IAEzD,OACE,gBAAC,IAAO,CAACyB,QAASE,GAChB,4BACE,gBAAC,IAAa,CACZtC,WAAYA,EACZgB,UAAU,oBACVf,UAAWA,EAAUgB,IACrBC,OAAQmB,GACR,gBAAC,IAAM,CAAC1B,MAAOA,OAalB4B,CAAiBjC,Q,64BC9BT,MAAM,UAA6B,gBAAlD,c,oBACE,KAAAkC,aAAe,CAACP,EAA0BQ,KACxC,MAAMC,EAAK,GACTX,SAAU,SACP,YAAmB1B,KAAKC,MAAMN,YAFxB,GAGNyC,GAKL,OAHIR,GACFU,OAAOC,OAAOF,EAAO,CAAET,gBAAiB,SAEnC,YAAsB5B,KAAKC,MAAML,UAAUgB,IAAKyB,IAGzD,yBAAyBT,GACvB,MAAMS,EAAK,KACN,YAAmBrC,KAAKC,MAAMN,aAKnC,OAHIiC,GACFU,OAAOC,OAAOF,EAAO,CAAET,gBAAiB,SAEnC,YAAgC5B,KAAKC,MAAML,UAAUgB,IAAKyB,GAGnE,oBAAoBT,GAClB,OAAO5B,KAAKmC,aAAaP,EAAiB,CAAED,MAAO,eAGrD,+BAA+B7B,EAAc8B,GAC3C,MAOM,UAAEY,GAAcxC,KAAKC,MACrBwC,EAAgC,UAApBD,EAAUE,MAAoBF,EAAUG,MAAQH,EAAUI,QAE5E,OAAO5C,KAAKmC,aAAaP,EAAiB,CACxCD,MAAO7B,EACP+C,WAZmC,CACnC,+BACA,yBACA,mBACA,WAQyC1B,OAAOsB,GAAa,KAIjE,aAAaK,GACX,MAAM,WAAEnD,EAAF,UAAcC,EAAd,UAAyB4C,GAAcxC,KAAKC,MAE5CU,EAAY,EAChB,kCAD0B,0CAES6B,EAAUE,MAAMK,gBAG/CC,EAAYR,EAAUnC,QAAQQ,OAAOD,IAErCqC,EAAiD,CACrD,CAAC,IAAUC,oBAAqB,IAC9BlD,KAAKmD,+BAA+B,IAAUC,KAAK,GACrD,CAAC,IAAUC,wBAAyB,IAClCrD,KAAKmD,+BAA+B,IAAUC,KAAK,GACrD,CAAC,IAAUE,iBAAkB,IAC3BtD,KAAKmD,+BAA+B,IAAUI,eAAe,GAC/D,CAAC,IAAUC,qBAAsB,IAC/BxD,KAAKmD,+BAA+B,IAAUI,eAAe,GAC/D,CAAC,IAAUE,cAAe,IAAMzD,KAAK0D,qBAAoB,GACzD,CAAC,IAAUC,4BAA6B,IAAM3D,KAAK0D,qBAAoB,GACvE,CAAC,IAAUE,4BAA6B,IAAM5D,KAAK6D,0BAAyB,GAC5E,CAAC,IAAUC,gCAAiC,IAAM9D,KAAK6D,0BAAyB,IAGlF,OAAOZ,EAAuBD,GAC5B,gBAAC,IAAI,CAACrC,UAAWA,EAAWkB,GAAIoB,EAAuBD,MACpDF,GAGH,gBAACiB,EAAA,EAAa,CACZpE,WAAYA,EACZgB,UAAWA,EACXf,UAAWA,EAAUgB,IACrBC,OAAQ2B,EAAUnC,QAAQQ,OAAOD,IACjCgB,gBAAqC,MAApBY,EAAUwB,QAC1BlB,GAKP,S,MACE,MAAM,UAAEN,GAAcxC,KAAKC,OACrB,QAAEI,GAAYmC,GACd,OAAE3B,GAAWR,EAEb4D,EAAS,uBAAapD,EAAOD,KAE7B6B,EAAiC,UAApBD,EAAUE,MAAoBF,EAAUG,MAAQH,EAAUI,QACvEsB,EAAU1B,EAAUwB,OAAuB,QAAf,EAAC3D,EAAQ2D,cAAM,eAAE1D,MAAQD,EAAQC,MAEnE,IAAI6D,EAAW,YAAU,yBAA0B3B,EAAU4B,IAM7D,MAJoB,WAAhBvD,EAAOf,OACTqE,EAAW,YAAU,yBAA0B3B,EAAU4B,GAAI,WAGxDpE,KAAKqE,aACV,uBAAK1D,UAAU,iEACb,uBAAKA,UAAU,kEACb,gBAAC2D,EAAA,EAAO,CACNjD,SAAU,EACV2B,UAAW3C,EAAQQ,OAAOD,IAC1B2D,WAAYlE,EAAQQ,OAAOf,KAC3BQ,MAAO4D,KAIX,2BACE,wBAAMvD,UAAU,8DACd,gBAAC6D,EAAA,EAAa,CAAC7D,UAAU,sBAAsB0B,MAAOxB,EAAOD,MAC5DC,EAAO4D,OAERR,GAA8B,MAApBzB,EAAUwB,QACpB,wBAAMrD,UAAU,4EACb,YAAU,sCAGf,wBAAMA,UAAU,sCACbwD,E,IAAW,wBAAc1B,EAAW5B,EAAOf,WC3IxD,MAAM4E,EAAc,CAAC,QAAS,QAWvB,SAASC,EAAsB1E,GACpC,MAAM,WAAEN,EAAF,YAAciF,EAAd,UAA2BhF,EAA3B,iBAAsCiF,GAAqB5E,GAC1D6E,EAAWC,GAAmB,WAAeC,QAAQJ,IAE5D,GAAgC,IAA5BC,EAAiBI,OACnB,OAAO,KAGT,MAAMC,EAAmB,IAAOL,EAAkBrC,GAChDkC,EAAYS,QAAQ3C,EAAUE,QAGhC,IAAI0C,EACAC,EASJ,OARIP,GAAaI,EAAiBD,OAhBb,GAiBnBG,EAAmBF,EAAiBI,MAAM,EAjBvB,GAkBnBD,GAAkB,IAElBD,EAAmBF,EACnBG,GAAkB,GAIlB,uBACE1E,UAAU,wCACVH,GAAG,yCACF4E,EAAiBG,IAAI/C,GACpB,gBAAC,EAAoB,CACnB7C,WAAYA,EACZC,UAAWA,EACX4C,UAAWA,EACX5B,IAAK4B,EAAUnC,QAAQQ,OAAOD,OAGjCyE,GACC,gBAAC,IAAU,CACT1E,UAAU,iDACV6E,QAAS,IAAMT,GAAiBD,IAC/B,YACC,oCACAI,EAAiBD,OA1CN,GA4Cb,gBAACQ,EAAA,EAAe,CAAC9E,UAAU,yBAOtB,WAAWgE,I,sBCtF1BnF,EADkC,EAAQ,IAChCkG,EAA4B,IAE9BC,KAAK,CAACxG,EAAOC,EAAI,umIAAwmI,KAEjoID,EAAOK,QAAUA,G,qBCNjB,IAAIT,EAAM,EAAQ,KACFC,EAAU,EAAQ,MAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBC,GAFSP,EAAIC,EAASK,GAEXL,EAAQO,OAASP,EAAQO,OAAS,IAIjDJ,EAAOK,QAAUF,G,sBClBjBE,EADkC,EAAQ,IAChCkG,EAA4B,IAE9BC,KAAK,CAACxG,EAAOC,EAAI,uIAAwI,KAEjKD,EAAOK,QAAUA,G,2YCyEF,cAjDR,UAAe,MAAEoG,IACtB,GAAuB,YAAnBA,EAAMC,SACR,OACE,wBACElF,UAAU,sEACVmF,MAAK,UAAK,YAAU,WAAf,YAA6BF,EAAMnB,OACvCmB,EAAMnB,MAKb,MAAMsB,EAAgB,YAAU,iBAAkBH,EAAMC,UACxD,OAAI,YAAwBD,GAExB,uBAAKjF,UAAU,2BACb,wBAAMA,UAAU,QAAQoF,IAK1B,YAAuBH,GAEvB,uBAAKjF,UAAU,2BACb,wBAAMA,UAAU,QAAQoF,EAAsB,KAAC,IAC9CH,EAAMI,YAAYC,aACjB,gBAAC,mBAAgB,CACf1F,eAAgB,YAAU,8BAC1BC,GAAG,6BACHC,OAAQ,CAAEyF,OAAQ,gBAACC,EAAA,EAAK,CAACzD,MAAOkD,EAAMI,YAAYE,OAAQE,OAAO,OAGnE,gBAACD,EAAA,EAAK,CAACzD,MAAOkD,EAAMI,YAAYE,OAAQE,OAAO,KAOrD,uBAAKzF,UAAU,2BACb,wBAAMA,UAAU,+BAA+BoF,EAAsB,KAAC,IACrEH,EAAMS,YACL,0BAAQP,MAAOF,EAAMS,aAAcT,EAAMnB,MAEzC,8BAASmB,EAAMnB,U,oXCNR,cApCR,SAAD,GAAwD,IAArC,SAAE6B,GAAmC,EAAtBrG,EAAsB,kBAC5D,MAAMsG,EAAe,IACnBD,EAASE,OAETZ,GAA6B,YAAnBA,EAAMC,SAAyB,EAAI,EAE7C,YAIIY,EACJxG,EAAMwG,YAAc,IAAmBC,YACnC,IAAmBA,YACnB,IAAmBC,QAEzB,OACE,sBAAIhG,UAAU,qBACZ,uBAAKA,UAAU,8BACb,8BACE,gBAACiG,EAAA,EAAiB,CAACC,KAAMP,EAASO,SAIrCN,EAAatB,OAAS,EACrB,uBAAKtE,UAAU,4BACZ4F,EAAahB,IAAIK,GAChB,gBAAC,EAAK,CAACA,MAAOA,EAAOhF,IAAKgF,EAAMhF,QAIpC,wBAAMD,UAAU,QAAQ,YAAU,4BAA6B8F,QC8ExD,cAvFR,SAAuBxG,GAC5B,MAAM,SACJ6G,EAAW,GADP,WAEJnH,EAFI,UAGJC,EAHI,MAIJmH,EAAQ,IAJJ,eAKJC,EALI,QAMJC,EANI,gBAOJC,EAPI,QAQJC,GACElH,EAEEmH,EAAS,YACbF,EACAH,EACAI,EACA,YAA2BJ,EAAO,KAE9BM,EAAS,YAAoBD,EArBhB,EACQ,GAqB3B,IAAIE,EACJ,QAAuBtG,IAAnBgG,EAA8B,CAChC,MAAMO,EAAYL,EAAgBM,OAAO,CAACC,GAAgBC,cACxD,GAAIA,EAAQzC,OAAS,EAAG,CACtB,MAAM4B,EAAO,YAAUa,EAAQ,GAAGb,MAClC,OAAOY,EAAOE,UAAYd,EAAKc,UAAYd,EAAOY,EAElD,OAAOA,GAER,IAAIG,MACPN,EACEC,EAAUI,UAAYX,EAAeW,UAAYJ,EAAYP,EAGjE,MAAMa,EAAmBf,EAASgB,OAAOC,GAAKA,EAAEvB,OAAOvB,OAAS,GAAGK,MAAM,EArCnD,GAuCtB,OACE,uBAAK3E,UAAU,gCAA+B,YAAW,4BACvD,sBAAIA,UAAU,wBAAwB,YAAU,sBAEhD,uBAAKA,UAAU,0BACb,uBAAKA,UAAU,oBACb,uBAAKA,UAAU,8BACb,sCAAkB,EAAMA,UAAU,oDAChC,gBAACqH,EAAA,EAAY,CAACjB,MAAOA,EAAOI,QAASA,EAASc,YAAahI,EAAMiI,gBACjE,gBAACC,EAAA,EAAa,CACZrB,SAAU,GACVC,MAAOA,EACPM,OAAQA,EACRL,eAAgBM,EAChBL,QAASjC,QAAQiC,GACjBC,gBAAiBA,EACjBE,OAAQA,KAIZ,uBAAKzG,UAAU,iDACb,gBAACyH,EAAA,EAAY,CAACzI,WAAYA,EAAYC,UAAWA,EAAUgB,IAAKmG,MAAOA,MAI3E,uBAAKpG,UAAU,gDACb,mCAAe,+BACb,gBAAC0H,EAAA,EAAe,CACd1H,UAAU,yBACVsG,QAA6B,IAApBH,EAAS7B,QAAgBgC,GACb,IAApBH,EAAS7B,OACR,qBAAGtE,UAAU,+BAA+B,YAAU,eAEtD,sBAAIA,UAAU,0BACXkH,EAAiBtC,IAAIe,GACpB,gBAAC,EAAQ,CACPA,SAAUA,EACV1F,IAAK0F,EAAS1F,IACd6F,UAAW7G,EAAU6G,uB,sECzF9B,SAAS,EAAiBxG,GACvC,MAAM,SAAEqI,EAAF,SAAYxF,EAAZ,UAAsBnC,EAAtB,QAAiC4H,EAAU,SAA3C,QAAqDC,GAAYvI,GAChEwI,EAAMC,GAAW,YAAe,GAEvC,YAAgB,KACqC,SAA/C,YAPmC,4BAOFJ,IACnCI,GAAQ,IAET,CAACJ,IAMJ,OAAQG,EACN,gBAACE,EAAA,EAAK,CACJhI,UAAW,EAAW,qBAAD,OAAsB4H,GAAW5H,GACtD4H,QAASA,EACTC,QAASA,GACT,uBAAK7H,UAAU,iDACb,uBAAKA,UAAU,UAAUmC,GACzB,gBAAC,IAAU,cACG,YAAU,iBACtB0C,QAAS,KAZf,YAbuC,4BAaL,OAAQ8C,GAclCI,GAAQ,KAEV,gBAACE,EAAA,EAAS,CAAC1H,KAAM,GAAI2H,MAAM,OAbpB,K,sBCiFF,aAAAC,EAAA,IA7FR,SAAqC7I,G,MAC1C,MAAM,UACJL,EADI,YAEJmJ,EAFI,gBAGJC,EAHI,yBAIJC,EAJI,eAKJC,GACEjJ,EAEJ,IAAK,YAAW8I,IAAgBnJ,EAAU6G,YAAc,IAAmBE,QACzE,OAAO,KAGT,MAAMwC,EAAoCH,QAAsChI,IAAnBkI,EACvDE,OACyBpI,IAA7BiI,IAA0CA,EAE5C,IAAKG,IAAyBD,EAC5B,OAAO,KAGT,MAAME,EAAsBD,IAAyBD,EAC/CG,EAAsBH,IAAsCC,EAC5DG,EAAWH,GAAwBD,EACnCK,EAAwC,QAA1B,EAAG5J,EAAU6J,qBAAa,eAAEC,aAC1CC,EACJ,gBAAC,IAAI,CACH9H,GAAI,CACF+H,SAAU,aACVvH,MAAO,CAAE7B,GAAIZ,EAAUgB,OAExB,YAAU,gDAGTiJ,EACJ,gBAAC,IAAI,CACHhI,GAAI,CACF+H,SAAU,oBACVvH,MAAO,CACL7B,GAAIZ,EAAUgB,IACdiF,SAAU,OAGb,YAAU,uDAIf,OACE,gBAAC,EAAgB,CAACyC,SAAQ,4BAAuB1I,EAAUgB,KAAO4H,QAAQ,QACvEa,GACC,gBAAC,mBAAgB,CACf9I,eAAgB,YAAU,yCAC1BC,GAAG,wCACHC,OAAQ,CACNW,KAAMuI,KAKXL,IACEE,EACC,gBAAC,mBAAgB,CACfjJ,eAAgB,YAAU,oDAC1BC,GAAG,mDACHC,OAAQ,CACNqJ,sBAAuBD,KAI3B,YAAU,+CAGbN,IACEC,EACC,gBAAC,mBAAgB,CACfjJ,eAAgB,YAAU,2DAC1BC,GAAG,0DACHC,OAAQ,CACNsJ,QAASJ,EACTG,sBAAuBD,KAI3B,gBAAC,mBAAgB,CACftJ,eAAgB,YAAU,qDAC1BC,GAAG,oDACHC,OAAQ,CAAEsJ,QAASJ,U,2DC3FxB,SAASK,GAAsB/J,GACpC,MAAM,WAAEN,EAAF,UAAcC,EAAd,SAAyBC,EAAzB,OAAmCgB,GAAWZ,EAC9CI,EAAU,sBAAYR,EAAUgB,GAEtC,IAAI7B,EAiBJ,OAbEA,EAHGqB,EAID,4BACE,gBAAC0D,GAAA,EAAa,CACZpE,WAAYA,EACZgB,UAAU,qCACVf,UAAWA,EAAUgB,IACrBC,OAAQA,GACP,wBAAcR,EAAQC,MAAO,eAT1B,wBAAMK,UAAU,sCAAoC,KAgB9D,uBAAKA,UAAU,2CACZ3B,EACD,wBAAM2B,UAAU,cAAc,YAAuB,CAAEC,IAAKC,MAKnD,OAAWmJ,IAAX,I,8BChBA,eAjBR,UAAmC,WAAEC,IAC1C,OACE,uBAAKtJ,UAAU,8CACb,gBAACuJ,GAAA,EAAW,CAACrD,KAAMoD,EAAWpD,MAC3BsD,GAAW,YAAwB,qBAAsBA,IAE5D,gBAACC,GAAA,EAAW,CACVzJ,UAAU,qBACVoB,QAAS,YACP,sCACAkI,EAAWI,mB,UCyCN,cAAW,sBAhDnB,SAA+BpK,GACpC,MACEqK,MAAM,WAAEC,EAAF,WAAcC,GADhB,WAEJP,GACEhK,EAEEwK,EAAkB,aACtBR,EACA,CAAC,kBAAmB,qBAAqBS,SAAST,EAAWU,MACxD9D,GAAiB2D,EAAW3D,EAAM,KAClCA,GAAiB0D,EAAW1D,EAAM,OAGzC,IAAK4D,EACH,OAAO,KAGT,GAAwB,SAApBR,EAAWU,MAAuC,mBAApBV,EAAWU,KAC3C,OAAO,uBAAKhK,UAAU,mBAAmB8J,EAAuB,KAGlE,MAAMzD,EAAiB,aAAciD,GAErC,OAAKjD,EAKH,gCACE,uBAAKrG,UAAU,gCAAgCmF,MAAO2E,GACnDA,GAEH,gBAACP,GAAA,EAAW,CAACrD,KAAMG,GAChBmD,GACC,uBAAKxJ,UAAU,0BACZ,YACqB,sBAApBsJ,EAAWU,KACP,+BACA,qBACJR,MAfH,SC3BJ,SAASS,IAAe,WAAEX,IAC/B,OAAI,aAAoBA,GACf,gBAAC,GAAyB,CAACA,WAAYA,IAEvC,gBAAC,GAAqB,CAACA,WAAYA,IAI/B,OAAWW,IAAX,I,gCC2BA,eA9BR,SAAmB3K,GACxB,MAAM,WAAEN,EAAF,UAAcC,EAAd,SAAyBC,EAAzB,cAAmCE,GAAgB,GAAUE,EAC7DY,EAASd,EAAgB,IAAU8K,mBAAqB,IAAUC,YAClEzK,EAAU,sBAAYR,EAAUgB,GAEtC,IAAIP,EAKJ,OAJID,IACFC,EAAQP,EAAgB,aAAaM,GAAWA,EAAQC,OAIxD,qCACaU,IAAVV,EACC,qCAAkB,YAAU,WAAYK,UAAU,kCAElD,gBAACoD,GAAA,EAAa,CACZpE,WAAYA,EACZgB,UAAU,qCACVf,UAAWA,EAAUgB,IACrBC,OAAQA,GACP,wBAAcP,EAAO,aAG1B,wBAAMK,UAAU,mBACbN,EAAU,YAAuBA,EAAQQ,QAAQ,GAAQ,yBAAeA,Q,UC3BlE,SAASkK,GAAyB9K,GAC/C,MAAM,SAAEJ,EAAF,cAAYE,GAAgB,GAAUE,EACtCY,EAASd,EACX,IAAU+D,+BACV,IAAUF,2BACRvD,EAAU,sBAAYR,EAAUgB,GAEtC,IAAIP,EAKJ,OAJID,IACFC,EAAQP,EAAgB,aAAaM,GAAWA,EAAQC,OAIxD,qCACaU,IAAVV,EACC,qCAAkB,YAAU,WAAYK,UAAU,kCAElD,gCACE,gBAACqK,GAAA,EAAc,CAAC1K,MAAOA,IACvB,wBAAMK,UAAU,oBAAoB,wBAAcL,EAAO,aAG7D,wBAAMK,UAAU,mBACb,YAAU,kDCjBJ,SAASsK,GAA6BhL,GACnD,MAAM,WAAEN,EAAF,UAAcC,EAAd,aAAyBsL,EAAzB,SAAuCrL,EAAvC,KAAiDC,GAASG,EAE1DkL,EAAQvL,EAAU6G,YAAc,IAAmBC,YAEzD,OACE,uBACE/F,UAAU,yCAAwC,yCACjBb,EAAKsL,WAAWrI,gBAChDjD,IAAS,KAAUuL,UAClB,gCACE,uBAAK1K,UAAU,8EACb,gBAAC,GAAS,CACRhB,WAAYA,EACZC,UAAWA,EACXC,SAAUA,EACVE,cAAemL,KAGnB,uBAAKvK,UAAU,oCACb,gBAAC2K,GAAA,EAAU,CACT3L,WAAYA,EACZC,UAAWA,EACXC,SAAUA,EACVC,KAAMA,EACNC,cAAemL,MAKrB,uBAAKvK,UAAU,8EACb,gBAAC2K,GAAA,EAAU,CACT3L,WAAYA,EACZC,UAAWA,EACX4B,YACE1B,IAAS,KAAUgC,gBACf,YAAU,kDACVd,EAENnB,SAAUA,EACVC,KAAMA,EACNC,cAAemL,KAIpBpL,IAAS,KAAUgC,iBAClB,uBAAKnB,UAAU,oCACb,gBAACoK,GAAwB,CAAClL,SAAUA,EAAUE,cAAemL,OAG9DC,IAAUD,IACX,uBAAKvK,UAAU,yEACb,gBAAC4K,GAAA,EAAW,CACV5L,WAAYA,EACZC,UAAWA,EACXC,SAAUA,EACVC,KAAMA,EACNC,cAAemL,M,IC/CfM,G,qsBCbG,SAASC,GAAuBxL,GAC7C,MAAM,OAAEyL,EAAF,UAAU9L,EAAV,OAAqBoE,GAAW/D,EAIhC0L,IAFQ/L,EAAU6G,YAAc,IAAmBC,gBAG3C1C,IAAWA,EAAO6C,MAAwB,qBAAhB7C,EAAO2G,KAOzCiB,EAA8BD,IAAyBD,aAAM,EAANA,EAAQjH,SAAST,aAAM,EAANA,EAAQ6H,WAEhFC,EAAoBH,EACtBC,EACE,+CACA,8CACF,sCAEEG,KAAsBnM,EAAU6J,gBAAiB7J,EAAU6J,cAAcC,cAE/E,OACE,uBAAK/I,UAAU,kDAAkDqL,MAAO,CAAEC,OAAQ,MAChF,uBACEC,IAAI,GACJvL,UAAU,eACVsL,OAAQ,GACRE,IAAG,UAAK,wBAAL,6BAEL,uBAAKxL,UAAU,6BAA6BqL,MAAO,CAAEI,SAAU,MAC7D,qBAAGzL,UAAU,oCAAoC,YAAUmL,IAC1DF,EACCG,GACE,yBACE,gBAAC,mBAAgB,CACfxL,eAAgB,YAAU,sCAC1BC,GAAG,qCACHC,OAAQ,CACN4L,aACE,gBAAC,IAAI,CACHxK,GAAI,CACF+H,SAAU,oBACVvH,MAAM,GAAD,CAAI7B,GAAIZ,EAAUgB,KAAQ,YAAmB8K,MAEnD,YAAU,0CAQvB,yBACE,gBAAC,mBAAgB,CACfnL,eAAgB,YAAU,gCAC1BC,GAAG,+BACHC,OAAQ,CACN6L,gBACE,gBAAC,IAAI,CAACzK,GAAG,gDACN,YAAU,qBD3CxB,SAAS0K,GAActM,GAC5B,MAAM,QAAEuM,EAAF,OAAWd,EAAX,UAAmB9L,EAAnB,QAA8BqH,EAA9B,SAAuCpH,EAAW,GAAlD,OAAsDmE,GAAW/D,EAEjEwM,EAAkB5M,EAAS6M,KAAKC,GAAK,uBAAaA,EAAE9L,OAAOD,MAE3DqJ,EADQrK,EAAU6G,YAAc,IAAmBC,YAC9B8F,EAAUxI,GAE9B4I,EAAKC,GAAa,WAAerB,GAAkBsB,KAEpD5B,EAAe0B,IAAQpB,GAAkBsB,IAE/C,YAAgB,MAEE,IAAZ7F,IAAsBwF,GAAmBvB,GAC3C2B,EAAUrB,GAAkBuB,UAK7B,CAAC9F,EAASwF,IAEb,MAAMO,EAAO,CACX,CACEpM,IAAK4K,GAAkBsB,IACvBvL,MACE,uBAAKZ,UAAU,mCACb,wBAAMA,UAAU,aAAa,YAAU,sBACtCsJ,GAAc,gBAACW,GAAc,CAACX,WAAYA,MAIjD,CACErJ,IAAK4K,GAAkBuB,QACvBxL,MACE,uBAAKZ,UAAU,mCACb,wBAAMA,UAAU,YAAYqL,MAAO,CAAEiB,SAAU,WAAYC,IAAK,EAAI,WAASC,OAC1E,YAAU,6BAOrB,OACE,uBAAKxM,UAAU,iBAAgB,YAAW,4BACxC,uBAAKA,UAAU,iDACb,sBAAIA,UAAU,wBAAwB,YAAU,sBAChD,gBAACyM,GAAA,EAAsB,CAACxN,UAAWA,EAAW8L,OAAQA,KAGvDzE,EACC,uBAAKtG,UAAU,oDACb,gBAAC0H,EAAA,EAAe,CAACpB,QAASA,KAG5B,gCACE,gBAACoG,EAAA,EAAS,CAACC,SAAUT,EAAWU,SAAUX,EAAKI,KAAMA,IAErD,uBAAKrM,UAAU,2CACX8L,GAAmBvB,EACnB,gBAACO,GAAsB,CAACC,OAAQA,EAAQ9L,UAAWA,EAAWoE,OAAQA,IAEtE,gCACG,CACC,KAAUZ,IACV,KAAUG,cACV,KAAUzB,gBACV,KAAUuJ,WACV9F,IAAKzF,GACL,gBAACmL,GAA4B,CAC3BtL,WAAY+L,EACZ9L,UAAWA,EACXsL,aAAcA,EACdtK,IAAKd,EACLD,SAAUA,EACVC,KAAMA,KAIV,uBAAKa,UAAU,2CACX,sBAAYd,EAAU,IAAU2N,WAChC,sBAAY3N,EAAU,IAAU4N,gBAChC,uBACE9M,UAAU,uEAAsE,YACtE,+BACV,gBAAClB,GAAA,EAAgB,CACfE,WAAY+L,EACZ5K,SAAUoK,EACVtL,UAAWA,EACXC,SAAUA,EACVC,KAAM,IAAgB4N,SACtB3N,cAAemL,IAGhB0B,IAAQpB,GAAkBuB,SACzB,uBAAKpM,UAAU,oBACb,gBAACqJ,GAAqB,CACpBrK,WAAY+L,EACZ9L,UAAWA,EACXC,SAAUA,EACVgB,OAAQ,IAAU8M,UAM5B,uBAAKhN,UAAU,yDACb,gBAAClB,GAAA,EAAgB,CACfE,WAAY+L,EACZ5K,SAAUoK,EACVtL,UAAWA,EACXC,SAAUA,EACVC,KAAM,IAAgB8N,YACtB7N,cAAemL,IAGhB0B,IAAQpB,GAAkBuB,SACzB,uBAAKpM,UAAU,oBACb,gBAACqJ,GAAqB,CACpBrK,WAAY+L,EACZ9L,UAAWA,EACXC,SAAUA,EACVgB,OAAQ,IAAUgN,4BA/H5C,SAAYrC,GACV,iBACA,yBAFF,CAAYA,QAAiB,KA8Id,OAAWe,IElGX,eA1DR,UAAuB,WAAE5M,EAAF,UAAcC,EAAd,SAAyBC,IACrD,MAAMsL,EAAQvL,EAAU6G,YAAc,IAAmBC,YAezD,IAAIZ,EAAQ,YAAU,qCAmCtB,OAlCIqF,EAKArF,OAHa9E,IAAbnB,QACwEmB,IAAxEnB,EAASiO,KAAKzN,GAAWA,EAAQQ,OAAOD,MAAQ,IAAUmN,UAElD,YAAU,uBAEV,YAAU,uCAGH/M,IAAbnB,GAA8C,IAApBA,EAASoF,OAEnCa,EADE,YAAanG,GACP,YAAU,2CACMqB,IAAfrB,EACD,YACN,kCACA,YAAyBA,IAGnB,YAAU,0BAGhB,YAAaA,GACfmG,EAAQ,YAAU,sDACM9E,IAAfrB,IACTmG,EAAQ,YACN,6CACA,YAAyBnG,KAQ/B,gBAACgJ,EAAA,EAAK,CAACJ,QAAQ,SAASC,QAAQ,WAC7B1C,M,WCPQ,eA9CR,SAAiC7F,GACtC,MAAM,UAAEL,EAAF,SAAaoO,GAAa/N,EAC1BgO,EAA0BD,EAASnJ,iBAAiBiD,OAAOoG,GAAK,uBAAaA,EAAErN,SAC/EsN,EAA0BH,EAASnJ,iBAAiBiD,OAAOoG,IAAM,uBAAaA,EAAErN,SAEtF,GAAuC,IAAnCoN,EAAwBhJ,QAAmD,IAAnCkJ,EAAwBlJ,OAClE,OAAO,KAGT,MAAMmJ,EAAWxO,EAAU6G,YAAc,IAAmBC,YAE5D,OACE,uBAAK/F,UAAU,oCACZyN,GACC,sBAAIzN,UAAU,iDAAiDqN,EAASvJ,MAGzEwJ,EAAwBhJ,OAAS,GAChC,gCACE,sBAAItE,UAAU,kDACX,YAAU,sCAEb,gBAACgE,GAAA,EAAqB,CACpB/E,UAAWoO,EACXrO,WAAYqO,EAASrO,WACrBkF,iBAAkBoJ,KAKvBE,EAAwBlJ,OAAS,GAChC,gCACE,sBAAItE,UAAU,kDACX,YAAU,0CAEb,gBAACgE,GAAA,EAAqB,CACpB/E,UAAWoO,EACXrO,WAAYqO,EAASrO,WACrBkF,iBAAkBsJ,SCmDf,eAxFR,SAA0BlO,GAC/B,MAAM,UAAEL,EAAF,QAAaqH,EAAb,WAAsBoH,EAAa,IAAOpO,EAEhD,QAAmBe,IAAfqN,EACF,OAAO,KAGT,MAAMC,EAAeD,EAAW9I,IAAIgJ,GAAKA,EAAErI,QAAQwE,SAAS,SAAW,QAAU,KAC3E8D,EAA2B,OAAjBF,EAEVG,EAA+BJ,EAAW7G,OAC9C,CAACkH,EAAKV,IAAaU,EAAMV,EAASnJ,iBAAiBI,OACnD,GAGI0J,EACoB,QAAxB/O,EAAU6G,gBACKzF,IAAfqN,GACAA,EAAW3B,KAAKkC,GAAK5J,QAAQ4J,EAAEC,oBAEjC,OACE,uBAAKlO,UAAU,iBAAgB,YAAW,gCACxC,sBAAIA,UAAU,mDACX,YAAU,yBAA0B,IACrC,gBAACyJ,GAAA,EAAW,CACVzJ,UAAU,qBACVoB,QACE,uBAAKpB,UAAU,oCACZ,YAAU,kCAMlBgO,GACC,gBAAChG,EAAA,EAAK,CAAChI,UAAU,oBAAoB4H,QAAQ,SAASC,QAAQ,QAC5D,wBAAM7H,UAAU,eACb,YAAU,6CAEb,gBAACyJ,GAAA,EAAW,CACVzJ,UAAU,cACVoB,QAAS,YAAU,uDAKzB,uBAAKpB,UAAU,0BACZsG,EACC,uBAAKtG,UAAU,6BACb,gBAAC0H,EAAA,EAAe,CAACpB,QAASA,KAG5B,gCACE,uBACEtG,UAAW,EAAW,oCAAqC,CACzDmO,QAASN,EACTA,aAEF,sBAAI7N,UAAU,0BAA0B,YAAU,eAAgB2N,IAElE,wBAAM3N,UAAU,SACb8N,EAA+B,EAC5B,YACE,+BACAA,GAEF,YAAU,iDAIjBA,EAA+B,GAC9B,mCAAe,qCACZJ,EAAW9I,IAAIyI,GACd,gBAAC,GAAuB,CACtBpO,UAAWA,EACXgB,IAAKoN,EAASpN,IACdoN,SAAUA,YCuBf,eA/ER,SAAgC/N,GACrC,MAAM,SACJ6G,EADI,QAEJ0F,EAFI,OAGJd,EAHI,gBAIJ1C,EAJI,UAKJpJ,EALI,yBAMJqJ,EANI,MAOJlC,EAPI,eAQJgI,EARI,cASJC,EATI,SAUJnP,EAVI,gBAWJqH,EAAkB,GAXd,QAYJC,EAAU,GAZN,cAaJe,EAbI,OAcJlE,EAdI,eAeJkF,EAfI,eAgBJ+F,EAhBI,WAiBJZ,GACEpO,EAEEgK,EAAarK,EAAU6G,YAAc,IAAmBC,YAAc8F,EAAUxI,EAEtF,OACE,gCACE,gBAAC,EAA2B,CAC1BpE,UAAWA,EACXoJ,gBAAiBA,EACjBC,yBAA0BA,EAC1BC,eAAgBA,IAElB,uBAAKvI,UAAU,qBACb,uBAAKA,UAAU,YACb,gBAACuO,EAAA,EAAc,CAACC,OAAO,kBAEtBF,EACC,gBAAC,GAAa,CAACtP,WAAY+L,EAAQ9L,UAAWA,EAAWC,SAAUA,IAEnE,uBAAKc,UAAU,oBACb,uBAAKA,UAAU,6BACb,gBAAC,GAAgB,CACff,UAAWA,EACXqH,QAAS+H,EACTX,WAAYA,KAIhB,uBAAK1N,UAAU,UACb,uBAAKA,UAAU,uBACb,gBAAC4L,GAAa,CACZC,QAASA,EACTd,OAAQA,EACR9L,UAAWA,EACXqH,QAAS+H,EACTnP,SAAUA,EACVmE,OAAQA,IAGV,gBAAC,EAAa,CACZ8C,SAAUA,EACVnH,WAAY+L,EACZ9L,UAAWA,EACXmH,MAAOA,EACPC,eAAgBiD,GAAc,YAAUA,EAAWpD,MACnDI,QAAS8H,EACT7H,gBAAiBA,EACjBC,QAASA,EACTe,cAAeA,a,6rBC7C5B,MAIDkH,GAAY,aAAiB,IAAIxH,MAAOyH,aAAY,IAAIzH,MAAO0H,cAAgB,IAEtE,MAAM,WAAuB,gBAI1C,YAAYrP,GACVsP,MAAMtP,GAJR,KAAAuP,SAAU,EA8BV,KAAAC,WAAa,KACPzP,KAAKC,MAAML,UAAU6G,YAAc,IAAmBC,YACxD1G,KAAK0P,wBAEL1P,KAAK2P,qBAIT,KAAAD,sBAAwBE,UACtB,MAAM,OAAElE,EAAF,UAAU9L,GAAcI,KAAKC,MACnCD,KAAK6P,SAAS,CAAEb,eAAe,IAG/B,MAAMc,QAAkB,YAA0B,IAChDC,YAAanQ,EAAUgB,KACpB,YAAmB8K,MAEhB7L,SAAUmQ,EAAZ,QAAyB7I,EAAzB,OAAkCnD,SAAiBhE,KAAKiQ,oBAC5DrQ,EAAUgB,IACV8K,GAGIwE,EACHxE,IAAW,YAAaA,IAAW,YAAyBA,SAAY1K,EAErEmP,QAAmB,YAAsBvQ,EAAUgB,IAAKsP,GAG9D,YAAmBtQ,EAAUgB,IAAKsP,GAAeE,KAC/CC,IACE,GAAIrQ,KAAKwP,SAAWa,GAASA,EAAMpL,OAAQ,CACzC,MAAMqL,EAAc,IAAOD,EAAOE,GACzB,IAAI3I,KAAK2I,EAAK1J,OAEvB7G,KAAK6P,SAAS,CACZrD,QAAS8D,EAAY,OAI3B,KACMtQ,KAAKwP,SACPxP,KAAK6P,SAAS,CAAErD,aAASxL,MAS/BwP,QAAQC,IACNX,EAAU/B,SAASxI,IAAImL,IACrB,MAAMC,EAAiBR,EAAWpC,SAASD,KAAKc,GAAKA,EAAEhO,MAAQ8P,EAAQ9P,KACjEgQ,EAAoBD,EACtB,CAAEE,OAAQF,EAAeE,OAAQpM,KAAMkM,EAAejF,OAAQoF,mBAAmB,QACjF9P,EAEJ,OAAOhB,KAAKiQ,oBACVS,EAAQ9P,IACRgQ,EAGAF,EAAQK,WAAWjJ,OAAOoG,GAAkB,OAAbA,EAAEhI,QAAiBX,IAAI2I,GAAKA,EAAErN,SAC7DuP,KAAK,EAAGvQ,eAAH,CACLA,WACA6Q,UACAE,0BAGJR,KACAY,IACE,GAAIhR,KAAKwP,QAAS,CAChB,MAAMnB,EAAa2C,EAAQzL,IAAI,EAAG1F,WAAW,GAAI6Q,UAASE,wBACxD,MAAM,IAAEhQ,EAAF,KAAO6D,EAAP,OAAayB,GAAWwK,EACxBK,EAAa,YAAyDL,GAG5E,MAAO,CACL7L,iBAHuB7E,KAAKiR,oBAAoBF,EAAYlR,GAI5De,MACA6D,OACAyB,SACAvG,WAAYiR,KAIhB5Q,KAAK6P,SAAS,CACZb,eAAe,EACfnP,SAAUmQ,EACV7I,UACAnD,SACAqK,iBAIN,KACMrO,KAAKwP,SACPxP,KAAK6P,SAAS,CAAEb,eAAe,EAAOX,gBAAYrN,OAM1D,KAAA2O,kBAAoBC,UAClB,MAAM,OACJlE,EACA9L,WAAW,IAAEgB,EAAF,KAAO6D,IAChBzE,KAAKC,MACTD,KAAK6P,SAAS,CAAEb,eAAe,IAE/B,MAAMkC,QAAsB,YAA4B,IACtDC,WAAYvQ,GACT,YAAmB8K,KAKlB0F,OACyBpQ,IAA7BkQ,EAAcH,WACV,IAAK,IAAI,OAAYG,EAAcH,WAAWxL,IAAI2I,GAAKA,EAAElL,aACzD,IAENhD,KAAKiQ,oBAAoBrP,EAAK8K,EAAQ0F,GAAYhB,KAChD,EAAGvQ,WAAUsH,UAASnD,aACpB,GAAIhE,KAAKwP,SAAW3P,EAAU,CAC5B,MAAM,kBAAEgP,EAAF,OAAqB3I,GAAWgL,EAChCH,EAAa,YAAyCG,GAGtDlD,EAAW,CACfa,oBACAhK,iBAJuB7E,KAAKiR,oBAAoBF,EAAYlR,GAK5De,MACA6D,OACAyB,SACAvG,WAAY+L,GAGd1L,KAAK6P,SAAS,CACZb,eAAe,EACfnP,WACAsH,UACAnD,SACAqK,WAAY,CAACL,UAENhO,KAAKwP,SACdxP,KAAK6P,SAAS,CAAEb,eAAe,EAAOX,gBAAYrN,KAGtD,KACMhB,KAAKwP,SACPxP,KAAK6P,SAAS,CAAEb,eAAe,EAAOX,gBAAYrN,OAM1D,KAAAiP,oBAAsB,CACpBoB,EACA1R,EACAyR,EAAuB,KAEhB,YACLC,EACAD,EAAWnM,OAAS,EAAImM,EAAa,IACrC,YAAmBzR,IACnByQ,KAAK,EAAGxQ,WAAaC,YAAYsH,UAASnD,aACnC,CACLnE,SAAU,qCAA2BA,GAAY,GAAIsH,GAAW,IAChEA,UACAnD,YAKN,KAAAsN,YAAc,KACZtR,KAAK6P,SAAS,CAAEd,gBAAgB,IAEzByB,QAAQC,IAAI,CAACzQ,KAAKuR,sBAAuBvR,KAAKwR,iBAAiBpB,KACpEpQ,KAAKyR,mBACLzR,KAAKyR,qBAIT,KAAAF,oBAAsB,KACpB,MAAM,OAAE7F,EAAF,UAAU9L,GAAcI,KAAKC,OAC7B,MAAE8G,GAAU/G,KAAK0R,MAEjBC,EAAe,YAAkB5K,EAAO,IACxCI,EAAU,IAAK,IAAI,OAAyBwK,IAElD,OAAO,YAAsB,MACxB,YAAmBjG,GADI,CAE1BkG,KAAMxC,GACNxP,UAAWA,EAAUgB,IACrBuG,QAASA,EAAQ0K,UAChBzB,KACD,EAAGvQ,eACGG,KAAKwP,SACPxP,KAAK6P,SAAS,CACZ3I,gBAAiBrH,EAAS0F,IAAIlF,IAAO,CACnCQ,OAAQR,EAAQQ,OAChB6G,QAASrH,EAAQqH,QAAQnC,IAAIe,IAAQ,CACnCO,KAAM,YAAUP,EAASO,MACzBvG,MAAOgG,EAAShG,eAM1B,SAIJ,KAAAkR,aAAe,KACb,MAAM,OAAE9F,GAAW1L,KAAKC,MAExB,OAAO,YAAmB,MACrB,YAAmByL,GADC,CAEvBgF,QAAS1Q,KAAK8R,uBACdF,KAAMxC,MACLgB,KACD,EAAGtJ,eACG9G,KAAKwP,SACPxP,KAAK6P,SAAS,CACZ5G,yBACEnC,EAAS7B,OAAS,OACajE,IAA3B8F,EAAS,GAAGiL,YAvQA,eAuQ4BjL,EAAS,GAAGiL,gBACpD/Q,EACN8F,cAIN,SAIJ,KAAAmK,oBAAsB,CACpBF,EACAlR,IAGEkR,EACGjJ,OAAOoG,GAAiB,OAAZA,EAAExL,OAGd6C,IAAI2I,GAAK,sCAA4BA,EAAGrO,IAGxCiI,OAAO,KAId,KAAAgK,qBAAuB,KACrB,MAAM,UAAElS,GAAcI,KAAKC,MAC3B,IAAI+R,EAAUpS,EAAUqS,YAAYhN,OAAS,EAC7C,KACE+M,EAAU,IACR,CACA,IAAmBrL,QACnB,IAAmBuL,UACnB,IAAmBxL,aACNgE,SAAS9K,EAAUqS,YAAYD,GAASvL,YAEvDuL,IAEF,OAAOpS,EAAUqS,YAAYD,GAASpR,KAGxC,KAAA6Q,mBAAqB,KACfzR,KAAKwP,SACPxP,KAAK6P,SAAS,CACZd,gBAAgB,KAKtB,KAAAoD,kBAAqBpL,IACnB,MAAM,UAAEnH,GAAcI,KAAKC,MAC3B,YA5T0C,8BA4TQL,EAAUgB,IAAKmG,GACjE/G,KAAK6P,SAAS,CAAE9I,QAAOgI,gBAAgB,GAAQ,KAC7C/O,KAAKuR,sBAAsBnB,KAAKpQ,KAAKyR,mBAAoBzR,KAAKyR,uBAjThE,MAAM,MAAE1K,GAAU,YAbwB,8BAayB9G,EAAML,UAAUgB,KACnFZ,KAAK0R,MAAQ,CAAE3K,SAGjB,oBACE/G,KAAKwP,SAAU,EACfxP,KAAKyP,aACLzP,KAAKsR,cAGP,mBAAmBc,GAEfpS,KAAKC,MAAML,UAAUgB,MAAQwR,EAAUxS,UAAUgB,KAChD,YAAiBZ,KAAKC,MAAMyL,OAAQ0G,EAAU1G,UAE/C1L,KAAKyP,aACLzP,KAAKsR,eAIT,uBACEtR,KAAKwP,SAAU,EAgSjB,SACE,MAAM,OAAE9D,EAAF,gBAAU1C,EAAV,UAA2BpJ,EAA3B,eAAsCsJ,GAAmBlJ,KAAKC,OAC9D,SACJ6G,EADI,QAEJ0F,EAFI,yBAGJvD,EAHI,MAIJlC,EAJI,cAKJiI,EALI,eAMJD,EANI,SAOJlP,EAPI,gBAQJqH,EARI,QASJC,EATI,OAUJnD,EAVI,WAWJqK,GACErO,KAAK0R,MAEHzC,GACc,IAAlBD,SACchO,IAAbnB,QAGOmB,IAFNnB,EAASiO,KAAKzN,GACX,CAAC,IAAUgS,MAAO,IAAUC,WAAwB5H,SAASrK,EAAQQ,OAAOD,OAGnF,OACE,gBAAC,GAAsB,CACrBkG,SAAUA,EACV0F,QAASA,EACTd,OAAQA,EACR1C,gBAAiBA,EACjBpJ,UAAWA,EACXqJ,yBAA0BA,EAC1BlC,MAAOA,EACPgI,eAAgBA,EAChBC,cAAeA,EACfnP,SAAUA,EACVqH,gBAAiBA,EACjBC,QAASA,EACTe,cAAelI,KAAKmS,kBACpBnO,OAAQA,EACRkF,eAAgBA,EAChB+F,eAAgBA,EAChBZ,WAAYA,KCzZpB,MAAMkE,GAAgB,OAAAC,EAAA,GAAkB,IAAM,yDACxCC,GAAsB,OAAAD,EAAA,GAAkB,IAAM,kCAa7C,MAAM,WAAY,gBAAzB,c,oBACE,KAAAE,YAAc,IACL,YAAgB1S,KAAKC,MAAML,UAAU6G,WAG9C,SACE,MACEkM,UAAU,gBAAE3J,GADR,WAEJrJ,EAFI,YAGJiT,EAHI,UAIJhT,EAJI,eAKJsJ,GACElJ,KAAKC,MAET,OAAID,KAAK0S,cACA,KAGF,YAAc/S,GACnB,gCACE,gBAACkT,EAAA,EAAW,CAACC,YAAY,kBACzB,gBAACL,GAAmB,CAAC9S,WAAYA,EAAYC,UAAWA,KAG1D,gCACE,gBAACiT,EAAA,EAAW,CAACC,YAAY,cAEvBlT,EAAUmT,cACV,gBAACR,GAAa,CACZ5S,WAAYA,EACZiT,YAAaA,EACbhT,UAAWA,EACXoT,YAAahT,KAAKC,MAAMgT,WAAajT,KAAKC,MAAMiT,aAChDhK,eAAgBA,IAInBtJ,EAAUmT,cACT,gBAAC,GAAc,CACbrH,OAAQ/L,EACRqJ,gBAAiBA,EACjBpJ,UAAWA,EACXsJ,eAAgBA,MAQb,iBAAAiK,EAAA,GAAW,OAAAC,EAAA,GAAa,M,ifC3DxB,SAAShJ,EAAV,GAAoD,IAA9B,KAAElJ,EAAO,IAAqB,EAAdjB,EAAc,cAChE,OACE,uBAAKU,UAAW,EAAW,eAAgBV,EAAMU,YAC/C,gBAAC,IAAO,CACN0S,gBAAiB,IACjBC,OAAQrT,EAAMqT,OACdvR,QAAS9B,EAAM8B,QACfwR,UAAWtT,EAAMsT,WACjB,wBAAM5S,UAAU,8BACbV,EAAM6C,UAAY,gBAAC,IAAQ,CAAC0Q,KAAM,SAAOC,OAAQvS,KAAMA,S,+fCflE,MAAMwS,EAAiB,gCACjBC,EAAc,YAAkB,IAAMD,GACtCE,EAAiB,YAAkB,IACvCF,EAAetD,KAAKyD,IAAG,CAAO3U,QAAS2U,EAAIC,cAE1B,YAAkB,IAAMJ,EAAetD,KAAKyD,IAAG,CAAO3U,QAAS2U,EAAIE,UAEtF,SAASC,IACP,OAAO,gBAAC,IAAW,CAACrT,UAAU,sCAAsCsT,UAAW,CAAE/S,KAAM,MAO1E,SAASgT,EAAV,GAAwE,IAAvD,SAAEC,GAAqD,EAAxClU,EAAwC,kBAEpF,MAAMmU,IAAYnU,EAAMmU,WAAYpP,QAAQ/E,EAAMK,OAClD,OACE,gBAACqT,EAAW,iBAAK1T,EAAK,CAAEmU,UAAWA,EAAWC,cAAeL,EAAaM,IAAKH,KAI5E,SAASL,EAAU7T,GACxB,OAAO,gBAAC2T,EAAc,iBAAK3T,EAAK,CAAEoU,cAAeL,O,iCCrDnD,wDA0Be,SAASnB,GAAY,YAAEC,IACpC,OACE,gBAAC,IAAmByB,SAAQ,KACzB,EAAGC,iBAAgBC,uBAClB,gBAACC,EAAgB,CACfF,eAAgBA,EAChBC,kBAAmBA,EACnB3B,YAAaA,KAavB,MAAM4B,UAAyB,gBAC7B,oBACE1U,KAAKC,MAAMuU,eAAexU,KAAKC,MAAM6S,aAGvC,mBAAmBV,GACbA,EAAUU,cAAgB9S,KAAKC,MAAM6S,cACvC9S,KAAKC,MAAMwU,kBAAkBzU,KAAKC,MAAM6S,aACxC9S,KAAKC,MAAMuU,eAAepC,EAAUU,cAIxC,uBACE9S,KAAKC,MAAMwU,kBAAkBzU,KAAKC,MAAM6S,aAG1C,SACE,OAAO,Q,iCC/DX,kGA4BO,MAAM6B,EAAkB,CAC7BC,KAAM,UACNC,MAAO,OACPC,IAAK,UACLC,KAAM,UACNC,OAAQ,WAGK,SAASpO,GAAkB,SAAE9D,EAAF,KAAY+D,IACpD,OACE,gBAAC,gBAAa,eAACvG,MAAO,YAAUuG,IAAW8N,GACxC7R,K,oBCvCP,IAAI/D,EAAM,EAAQ,KACFC,EAAU,EAAQ,KAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBC,GAFSP,EAAIC,EAASK,GAEXL,EAAQO,OAASP,EAAQO,OAAS,IAIjDJ,EAAOK,QAAUF,G,qBClBjBE,EADkC,EAAQ,IAChCkG,EAA4B,IAE9BC,KAAK,CAACxG,EAAOC,EAAI,iJAAkJ,KAE3KD,EAAOK,QAAUA,G,iCCNjB,wEAyCe,MAAMyV,UAAiB,gBAAtC,c,oBAKE,KAAAC,YAAetP,IACbA,EAAMuP,iBACNvP,EAAMwP,cAAcC,OACfrV,KAAKC,MAAMqV,UACdtV,KAAKC,MAAMsV,SAASvV,KAAKC,MAAMuV,QAASxV,KAAKC,MAAMO,KAIvD,SACE,MAAM,QAAEgV,EAAF,SAAW1S,EAAX,SAAqBwS,EAArB,GAA+B9U,EAA/B,QAAmCyG,EAAnC,MAA4CwO,EAA5C,WAAmDC,EAAnD,MAA+D5P,GAAU9F,KAAKC,MAC9EU,EAAY,EAAW,gBAAiB,CAC5C,wBAAyB6U,EACzB,uBAAwBE,EACxB,yBAA0BJ,IAG5B,OAAIxS,EAEA,oCACgB0S,EACd7U,UAAW,EAAW,gBAAiBX,KAAKC,MAAMU,UAAW,CAC3DgV,KAAML,EACNA,aAEFM,KAAK,IACLpV,GAAIA,EACJgF,QAASxF,KAAKkV,YACdW,KAAK,WACL/P,MAAOA,GACN2P,GAAS3S,EACV,gBAAC,IAAe,CAACmE,QAASjC,QAAQiC,IAChC,qBAAGtG,UAAWA,MAEd8U,GAAS3S,GAKbmE,EACK,gBAAC,IAAe,MAIvB,oCACgBuO,EACd7U,UAAW,EAAWA,EAAWX,KAAKC,MAAMU,WAC5CiV,KAAK,IACLpV,GAAIA,EACJgF,QAASxF,KAAKkV,YACdW,KAAK,WACL/P,MAAOA,KAtDN,EAAAgQ,aAAe,CACpBJ,YAAY,I,oBC3ChB,IAAI3W,EAAM,EAAQ,KACFC,EAAU,EAAQ,KAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBC,GAFSP,EAAIC,EAASK,GAEXL,EAAQO,OAASP,EAAQO,OAAS,IAIjDJ,EAAOK,QAAUF,G,qBClBjBE,EADkC,EAAQ,IAChCkG,EAA4B,IAE9BC,KAAK,CAACxG,EAAOC,EAAI,gvPAAivP,KAE1wPD,EAAOK,QAAUA,G,iCCNjB,yFAgCe,SAAS0K,EAAYjK,GAClC,MAAQ6C,SAAUiT,EAAoBC,IAAcA,GAA9C,KAAiDnP,EAAjD,cAAuDoP,GAAkBhW,EAC/E,IAAI6C,EAAWiT,EAEf,IAAKlP,EAMH,OAAO,gCAAGkP,EAAiB,YAAU,WAGnClP,GAAQoP,GAAiB,4BAAkBrO,KAAKsO,MAAOrP,GAAQ,IACjE/D,EAAW,IAAMiT,EAAiB,YAAU,0BAG9C,MAAMI,EAAa,YAAUtP,GAE7B,OACE,gBAAC,IAAiB,CAACA,KAAMsP,GACtBC,GACC,wBAAMtQ,MAAOsQ,GACX,gBAAC,oBAAiB,CAAC9V,MAAO6V,GAAarT,O,iCCvDjD,+DA6Be,SAASoM,EAAejP,GACrC,OACE,gBAAC,IAAYsU,SAAQ,KAClB,EAAG8B,kBAAiBC,wBACnB,gBAACC,EAAmB,eAClBF,gBAAiBA,EACjBC,mBAAoBA,GAChBrW,KAYP,MAAMsW,UAA4B,gBAAzC,c,oBASE,KAAAC,QAAU,KACR,MAAQrH,OAAQvO,EAAV,MAAeW,EAAQ,YAAU,mBAAjC,OAAqDkV,GAAWzW,KAAKC,MAC3E,MAAO,CAAEW,MAAKW,QAAOkV,WAVvB,oBACEzW,KAAKC,MAAMoW,gBAAgBrW,KAAKwW,WAGlC,uBACExW,KAAKC,MAAMqW,mBAAmBtW,KAAKwW,WAQrC,SACE,MAAM,OAAErH,GAAWnP,KAAKC,MACxB,OAAO,wBAAMO,GAAE,uBAAkB2O,Q,iCChErC,kGA6BO,MAAMwF,EAAkB,CAAEC,KAAM,UAAWC,MAAO,QAASC,IAAK,WAE1D4B,EAAsB,CAAE9B,KAAM,UAAWC,MAAO,OAAQC,IAAK,WAE3D,SAAS6B,GAAc,SAAE7T,EAAF,KAAY+D,EAAZ,KAAkB+P,IACtD,OACE,gBAAC,gBAAa,eAACtW,MAAO,YAAUuG,IAAY+P,EAAOF,EAAsB/B,GACtE7R,K,oBCpCP,IAAI/D,EAAM,EAAQ,KACFC,EAAU,EAAQ,KAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBC,GAFSP,EAAIC,EAASK,GAEXL,EAAQO,OAASP,EAAQO,OAAS,IAIjDJ,EAAOK,QAAUF,G,qBClBjBE,EADkC,EAAQ,IAChCkG,EAA4B,IAE9BC,KAAK,CAACxG,EAAOC,EAAI,4gEAA6gE,KAEtiED,EAAOK,QAAUA,G,iCCNjB,wEAiCe,SAAS2G,EAAMlG,GAC5B,MAAM4W,EAAY,wBAAc5W,EAAMyC,MAAO,SACvC/B,EAAY,EAAWV,EAAMU,UAAW,QAAS,SAAWV,EAAMyC,MAAO,CAC7E,cAAezC,EAAMmG,MACrB,cAAenG,EAAM6W,QAGvB,OACE,qCACc7W,EAAM,cAAa,kBACdA,EAAM,mBACvBU,UAAWA,GACVkW,K,6cClBQ,SAASrS,EAAV,GAAsD,IAC9D1E,GADgC,MAAEuC,GAA4B,EAAlB4R,EAAkB,eAGlE,OAAQ5R,EAAMU,eACZ,IAAK,MACL,IAAK,OACL,IAAK,WACHjD,EAAO,MACP,MACF,IAAK,gBACL,IAAK,kBACL,IAAK,sBACHA,EAAO,gBACP,MACF,IAAK,aACL,IAAK,cACL,IAAK,kBACHA,EAAO,aACP,MACF,IAAK,mBACL,IAAK,oBACL,IAAK,wBACHA,EAAO,mBACP,MACF,QACE,OAAO,KAGX,OAAO,gBAAC,IAAS,eAACA,KAAMA,GAAUmU,M,oeCvBrB,SAAS8C,EAAV,GAMN,IANuB,UAC7BpW,EAD6B,MAE7BmW,GAAQ,EAFqB,MAG7B1Q,GAAQ,EAHqB,MAI7B9F,GAEM,EADH0W,EACG,2CACN,QAAchW,IAAVV,EACF,OACE,mDAAkB,YAAU,qBAAyB0W,GAAS,KAKlE,MAAMH,EAAY,wBAAcvW,EAAO,UACvC,OACE,mDACc,YAAwB,sBAAuBuW,GAC3DlW,UAAW,EACT,SADmB,iBAETkW,GACV,CAAE,eAAgBzQ,EAAO,eAAgB0Q,GACzCnW,IAEEqW,GACHH,K,sdClCQ,SAASI,EAAV,GAAsD,IAAjC,KAAEzD,GAA+B,EAAtBS,EAAsB,cAClE,OACE,gBAAC,IAAI,iBAAKA,GACR,wBACEiD,EAAE,gcACFlL,MAAO,CAAEwH,KAAMA,GAAQ,SAAO2D,W,oBC5BtC,IAAIpY,EAAM,EAAQ,KACFC,EAAU,EAAQ,KAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBC,GAFSP,EAAIC,EAASK,GAEXL,EAAQO,OAASP,EAAQO,OAAS,IAIjDJ,EAAOK,QAAUF,G,qBClBjBE,EADkC,EAAQ,IAChCkG,EAA4B,IAE9BC,KAAK,CAACxG,EAAOC,EAAI,yuBAA0uB,KAEnwBD,EAAOK,QAAUA,G,0eCejB,MAAM4X,EAAgB,CACpB,eACA,yBACA,qBACA,kBACA,0BAGK,SAASC,EAAehX,EAAoB8G,GACjD,O,+VAAO,CAAP,GACK9G,EADL,CAEEQ,OAAQsG,EAAQ9G,EAAQQ,QACxB0P,KAAM+G,EAAajX,KAIhB,SAASiX,EAAajX,G,MAC3B,OAAsB,QAAtB,EAAOA,aAAO,EAAPA,EAAS2D,cAAM,eAAE1D,MAGnB,SAASiX,EAAiBvU,EAAmB1C,GAClD,MAAMkX,EAAiB,uBAAaxU,GAAaA,EAAUyU,OAAO,GAAKzU,EACvE,GAAIoU,EAAc1M,SAAS8M,GACzB,OAAO,2BAAqBA,EAAgBlX,K,6cCtBjC,SAASmF,EAAV,GAA4E,IAAlD,KAAE+N,EAAO,gBAAyC,EAAtBS,EAAsB,cACxF,OACE,gBAAC,IAAI,iBAAKA,GACR,wBACEiD,EAAE,mTACFlL,MAAO,CAAEwH,a,iCC3BjB,4FAmCe,SAASlP,GAAQ,UAC9B3D,EAD8B,SAE9BU,EAF8B,UAG9B2B,EAH8B,WAI9BuB,EAJ8B,MAK9B6B,EAL8B,MAM9B9F,IAEA,QAAcU,IAAVV,EACF,OAAO,wBAAMK,UAAWA,GAAS,KAGnC,GAAmB,UAAf4D,EACF,OAAO,gBAAC,IAAK,CAAC5D,UAAWA,EAAW+B,MAAOpC,EAAO8F,MAAOA,IAG3D,GAAmB,WAAf7B,EAAyB,CAC3B,MAAMmT,EAAiB,wBAAcpX,EAAOiE,EAAY,CACtDlD,WACAC,sBAAsC,YAAfiD,IAEzB,OAAO,wBAAM5D,UAAWA,GAA8B,MAAlB+W,EAAyBA,EAAiB,KAGhF,MAAMzV,EAAU,YAAiBe,EAAW7B,OAAOb,IAC7C0B,EAAS,gBAAC,IAAM,CAACoE,MAAOA,EAAO9F,MAAOA,IAC5C,OAAI2B,EAEA,gBAAC,IAAO,CAACF,QAASE,GAChB,wBAAMtB,UAAWA,GAAYqB,IAI5BA,I,iCCpET,wDAsBe,SAAS2V,EAAwBC,GAChC,oBACRC,SAAS,IAAuCD,M,+iBCEjD,MAAME,EAAgB,IAAUC,OAEjCC,EAA6C,CACjD,CAAC,IAAUD,QAAS,CAAC,IAAUE,KAAM,IAAUC,YAAa,IAAUC,iBACtE,CAAC,IAAU3K,UAAW,CAAC,IAAU4K,eAAgB,IAAUC,iBAC3D,CAAC,IAAUC,cAAe,CAAC,IAAUC,MAAO,IAAUC,mBAGlDC,EAAmC,CACvC,CAAC,IAAUV,QAASC,EAAyB,IAAUD,QAAQW,OAAO,CACpE,IAAUxV,mBACV,IAAUI,gBACV,IAAUG,eAEZ,CAAC,IAAU+J,UAAW,IAAIwK,EAAyB,IAAUxK,UAAW,IAAUA,UAClF,CAAC,IAAU8K,cAAe,IACrBN,EAAyB,IAAUM,cACtC,IAAUK,2BAIP,SAASC,EAAc7R,GAC5B,OAAOA,IAAU,IAAU8R,OAGtB,SAASC,EAAcC,GAAe,GAC3C,MAAM1R,EAAS,CAAC,IAAU0Q,OAAQ,IAAUvK,SAAU,IAAU8K,cAChE,OAAOS,EAAe1R,EAAS,IAAIA,EAAQ,IAAUwR,QAGhD,SAASG,EAAcC,GAC5B,OAAOA,EAAMC,KAAKxM,KAAKyM,GAASnU,QAAQmU,EAAMC,GAAiB,IAAZD,EAAMC,IAGpD,SAASC,EAAejS,GAC7B,OAAOA,EAAOsF,KAAKuM,GAASA,EAAMC,MAAQD,EAAMC,KAAKjU,OAAS,GAGzD,SAASqU,EAAoBlS,GAClC,OAAOA,EAAOnC,OAAS,EAAImC,EAAO,GAAGtH,KAAO,MAGvC,SAASyZ,EAA2BxS,EAAkByS,GAC3D,OAAOZ,EAAc7R,GAASyS,EAAgBxB,EAAyBjR,GAGlE,SAAS0S,EAAkB1S,EAAkByS,GAClD,OAAOZ,EAAc7R,GAASyS,EAAgBf,EAAe1R,GAOxD,SAAS2S,EAAoBtS,EAAiBuS,EAAkBC,GACrE,OAAO,IACL,IAAQxS,EAAQ6R,GAASA,EAAMnZ,MAC/BA,GAAQ,IAAMA,EAAM8Z,IACpBtU,MAAM,EAAGqU,GAqBN,SAASE,EACd3S,EACAH,EACAI,EACA2S,GAEA,OAAIA,EAAiB7U,QAAU,QAAyBjE,IAApBkG,EAC3B,GAEF,IACLA,EACGY,OAAOzH,GAAWyZ,EAAiB3U,QAAQ9E,EAAQQ,SAAW,GAC9D0E,IAAIlF,IACH,GAAIA,EAAQQ,SAAW,IAAUwX,kBAAoBO,EAAc7R,GACjE,OAhCH,SACLgT,EACA7S,GAEA,MAAM8S,EAAe9S,EAAgB4G,KAAKzN,GAAWA,EAAQQ,SAAW,IAAUuX,gBAClF,MAAO,CACLc,KAAMc,EACFD,EAAerS,QAAQnC,IAAI,CAACe,EAAU2T,KAAX,CACzBC,EAAG5T,EAASO,KACZuS,EAAGjY,OAAO6Y,EAAatS,QAAQuS,GAAK3Z,OAASa,OAAOmF,EAAShG,UAE/D,GACJmE,KAAM,gBACN0V,eAAgB,YAAU,gDAC1Bra,KAAM,OAkBOsa,CAA2B/Z,EAAS6G,GAE7C,MAAMrG,EAuCd,SAAoBD,EAAauG,GAC/B,GAAIkT,MAAMC,QAAQnT,GAChB,OAAOA,EAAQ2G,KAAKjN,GAAUA,EAAOD,MAAQA,GAE/C,OAAOuG,EAAQvG,GA3CM2Z,CAAWla,EAAQQ,OAAQsG,GAC1C,MAAO,CACL+R,KAAM7Y,EAAQqH,QAAQnC,IAAIe,IAAQ,CAChC4T,EAAG5T,EAASO,KACZuS,EAAGvY,GAA0B,UAAhBA,EAAOf,KAAmBwG,EAAShG,MAAQa,OAAOmF,EAAShG,UAE1EmE,KAAMpE,EAAQQ,OACdsZ,eAAgBtZ,EAAS,YAAuBA,GAAU,yBAAeR,EAAQQ,QACjFf,KAAMe,EAASA,EAAOf,KAAO,SAGnCmZ,GACEa,EAAiB3U,QAAuB,kBAAf8T,EAAMxU,KAA2B,kBAAoBwU,EAAMxU,OAInF,SAAS+V,EACdC,EACA/J,EACA3J,EACAI,EAAoB,IAEpB,YAAKsT,EAAW1T,EAAO2J,GACnBkI,EAAc7R,IAChB,YAAK,GAAD,OAAI0T,EAAJ,WAAwBtT,EAAQ0K,KAAK,KAAMnB,GAI5C,SAASgK,EACdD,EACA/J,GAEA,MAAMiK,EAAe,YAAI,GAAD,OAAIF,EAAJ,WAAwB/J,GAChD,MAAO,CACL3J,MAAQ,YAAI0T,EAAW/J,IAA0BoH,EACjD6C,aAAcA,EAAeA,EAAaC,MAAM,KAAO,M,oBC5J3D,IAAI7b,EAAM,EAAQ,KACFC,EAAU,EAAQ,KAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBC,GAFSP,EAAIC,EAASK,GAEXL,EAAQO,OAASP,EAAQO,OAAS,IAIjDJ,EAAOK,QAAUF,G,qBClBjBE,EADkC,EAAQ,IAChCkG,EAA4B,IAE9BC,KAAK,CAACxG,EAAOC,EAAI,u5BAAw5B,KAEj7BD,EAAOK,QAAUA,G,iCCajB,IAAYqb,EAnBZ,kCAmBA,SAAYA,GACV,kBACA,sBACA,8BACA,kBAJF,CAAYA,MAAS,M,weCWN,SAASC,EAAV,GAAiD,IAA7B,KAAEhb,GAA2B,EAAlBmU,EAAkB,cAC7D,OAAQnU,GACN,IAAK,MACH,OAAO,gBAAC,IAAO,iBAAKmU,IACtB,IAAK,gBACH,OAAO,gBAAC,IAAiB,iBAAKA,IAChC,IAAK,aACH,OAAO,gBAAC,IAAa,iBAAKA,IAC5B,IAAK,mBACH,OAAO,gBAAC,IAAmB,iBAAKA,IAClC,QACE,OAAO,Q,iCCzCb,0KAmBO,MAAM8G,EAAkB,iBAClBC,EAA0B,aAC1BC,EAAqB,YACrBC,EAA2B,kBAC3BC,EAA2C,mC,iCCvBxD,iEAuBA,MAAMC,EAAa,YACjB,IAAM,gCACN,cAGIC,EAAwB,CAAEjV,MAAO,GAAIkV,OAAQ,GAAIC,IAAK,GAAIC,KAAM,IAEhEC,EAA4B,CAAErV,MAAO,EAAGkV,OAAQ,EAAGC,IAAK,EAAGC,KAAM,GAQxD,SAASxQ,GAAe,MACrC8L,GAAQ,EAD6B,KAErC5V,EAAO,SAF8B,MAGrCZ,IAEA,IAAI4Y,EAAO,CAAC,CAAE5Y,MAAO,IAAKkT,KAAM,UAC5BkI,EAAW,EAEf,GAAa,MAATpb,EAAe,CACjB,MAAMqb,EAAcxa,OAAOb,GAC3B4Y,EAAO,CACL,CAAE5Y,MAAOqb,EAAanI,KAAMsD,EAAQ,SAAOrD,OAAS,SAAOmI,OAC3D,CAAEtb,MAAO,IAAMqb,EAAanI,KAAMsD,EAAQ,SAAO+E,mBAAqB,SAAOC,kBAE3D,IAAhBH,GAAqBA,EAAc,MACrCD,EAAW,IAIf,MAAMK,EAAQV,EAAsBna,GAC9B8a,EAAYP,EAA0Bva,GAE5C,OACE,gBAACka,EAAU,CACTlC,KAAMA,EACNjN,OAAQ8P,EACRL,SAAUA,EACVM,UAAWA,EACXD,MAAOA,M,oBClEb,IAAIE,EAAc,EAAQ,KACtBC,EAAW,EAAQ,KACnBC,EAAW,EAAQ,KAoDvBhd,EAAOK,QAZP,SAAiB4c,EAAQC,EAAOC,GAS9B,OARAD,EAAQH,EAASG,QACLrb,IAARsb,GACFA,EAAMD,EACNA,EAAQ,GAERC,EAAMJ,EAASI,GAEjBF,EAASD,EAASC,GACXH,EAAYG,EAAQC,EAAOC,K,iCCnDpC,4aAwBO,SAASC,EACdxM,EACArE,GAEA,OAAO,YAAQ,8BAA+B,CAAEqE,cAAarE,WAAU0E,KACrEoM,GAAKA,EAAEnM,MACP,KAIG,SAASoM,EAAsB1M,EAAqBrE,GACzD,OAAO,YAAQ,yBAA0B,CAAEqE,cAAarE,WAAU0E,KAChEoM,GAAKA,EAAEzM,YACP,KAIG,SAAS2M,EAAqBxD,GAMnC,OAAO,YAAK,kCAAmCA,GAAMyD,MAAM,KAGtD,SAASC,EAAwB1D,GAOtC,OAAO,YAAK,kCAAmCA,GAAMyD,MAAM,KAGtD,SAASE,EAAwB9M,EAAqBrE,GAC3D,OAAO,YAAK,kCAAmC,CAAEqE,cAAarE,WAAUiR,MAAM,KAGzE,SAASG,EAAuB5D,GAOrC,OAAO,YAAQ,oCAAqCA,GAAMyD,MAAM,KAG3D,SAASI,EAAwBhN,EAAqBW,GAC3D,OAAO,YAAK,gCAAiC,CAAEX,cAAaW,YAAWiM,MAAM,KAGxE,SAASK,EAA6BjN,EAAqBW,GAChE,OAAO,YAAK,mCAAoC,CAAEX,cAAaW,YAAWiM,MAAM,KAG3E,SAASM,EAAmBrc,GACjC,OAAO,YAAK,4BAA6B,CAAEA,QAAO+b,MAAM,KAGnD,SAASO,EACdzY,EACA4B,EACAzF,EACAuc,GASA,OAAO,YAAS,2BAA4B,CAAE9W,cAAazF,MAAK6D,OAAM0Y,eAAcR,MAClF,KAIG,SAASS,EAAkBrN,GAChC,OAAO,YAAK,2BAA4B,CAAEA,gBAAe4M,MAAM,KAG1D,SAASU,EAAgBtN,EAAqBtL,EAAc4B,GACjE,OAAO,YAAK,2BAA4B,CAAE5B,OAAM4B,cAAa0J,gBAAe4M,MAC1E,O,kBC7GJ,IAAIW,EAAYC,KAAKC,IACjBC,EAAYF,KAAKG,IAerBve,EAAOK,QAJP,SAAqB4c,EAAQC,EAAOC,GAClC,OAAOF,GAAUqB,EAAUpB,EAAOC,IAAQF,EAASkB,EAAUjB,EAAOC,K,62BCgBtE,MAAMqB,EAAe,IAAOC,IAAV,KAKZC,EAAa,wBAAmB,SAAOC,gBAEvCC,EAAsB,mDAEJ,SAAOC,4BAFH,YAMtBC,EAAY,IAAOC,OAAV,IAEOje,GAAUA,EAAMke,OAAS,QAAU,SAAOtC,mBAChDgC,EACCA,EAMb5d,IAAUA,EAAMke,QAAU,mBAER,QAAMC,SAExBne,GAAWA,EAAMke,OAA+B,KAAtBJ,EAGVF,GAIdQ,EAAe,IAAOT,IAAV,IACL3d,GAAUA,EAAMke,OAAS,QAAU,OAC1B,SAAOhH,MAQd,SAAS9J,EAAapN,GACnC,MAAM,UAAEU,EAAF,KAAaqM,EAAb,SAAmBO,GAAatN,EAEtC,OACE,gBAAC0d,EAAY,CAAChd,UAAWA,GACtBqM,EAAKzH,IAAI,EAAG3E,MAAKW,SAASnC,IACzB,gBAAC6e,EAAS,CACRE,OAAQ5Q,IAAa3M,EAErBA,IAAKxB,EACLoG,QAAS,IAAM+H,IAAa3M,GAAOX,EAAMqN,SAAS1M,GAClDd,KAAK,UACL,gBAACue,EAAY,CAACF,OAAQ5Q,IAAa3M,IAClCW,O,kHCzDI,SAAS+c,GAAmB,MAAExH,GAAQ,EAAV,KAAiB5V,EAAO,SAAxB,MAAkCZ,IAC3E,MAAMK,EAAY,EAAW,sBAAuB,CAClD,4BAAsC,UAATO,EAC7B,0BAAoC,QAATA,EAC3B,2BAAqC,SAATA,EAC5B,4BAA6B4V,GAAkB,MAATxW,GAAiBie,MAAMje,GAC7D,wBAAyB,IAAQA,GAAS,EAAG,EAAG,GAChD,wBAAyB,IAAQA,GAAS,EAAG,EAAG,GAChD,wBAAyB,IAAQA,GAAS,EAAG,EAAG,IAChD,wBAAyB,IAAQA,GAAS,EAAG,GAAI,IACjD,yBAA0BA,GAAS,IAAM,KAG3C,OAAO,uBAAKK,UAAWA,M,iCC3CzB,+CA2BO,MAAM6d,EAAmB,gBAA0C,CACxE7e,gBAAYqB,EACZpB,eAAWoB,K,kyBCJb,MAAMyd,EAAiB,CACrB,aACA,iBACA,qBACA,sBACA,mBACA,mBACA,kBACA,yBACA,0BACA,uBACA,uBACA,sBACA,cACA,kBACA,mBACA,wBACA,cACA,kBACA,OACA,WACA,kBACA,uBAGIC,EAA+C,CACnDC,mBAAoB,CAAEjd,SAAU,QAASmB,WAAY,WACrD+b,uBAAwB,CAAEld,SAAU,QAASmB,WAAY,WACzDgc,oBAAqB,CAAEnd,SAAU,QAASmB,WAAY,YACtDic,wBAAyB,CAAEpd,SAAU,QAASmB,WAAY,YAC1Dkc,iBAAkB,CAAErd,SAAU,QAASmB,WAAY,SACnDmc,qBAAsB,CAAEtd,SAAU,QAASmB,WAAY,SACvDoc,iBAAkB,CAAEvd,SAAU,QAASmB,WAAY,SACnDqc,qBAAsB,CAAExd,SAAU,QAASmB,WAAY,SACvDsc,gBAAiB,CAAEzd,SAAU,QAASmB,WAAY,QAClDuc,oBAAqB,CAAE1d,SAAU,QAASmB,WAAY,QACtDwc,YAAa,CAAE3d,SAAU,QAAS4d,SAAU,QAC5CC,gBAAiB,CAAE7d,SAAU,QAAS4d,SAAU,YAChDE,iBAAkB,CAAE9d,SAAU,QAAS4d,SAAU,aACjDG,sBAAuB,CAAEC,YAAa,kBACtCxH,YAAa,CAAExW,SAAU,QAASC,MAAO,cACzCge,gBAAiB,CAAEje,SAAU,QAASC,MAAO,cAC7CsW,KAAM,CAAEvW,SAAU,QAASC,MAAO,OAClCie,SAAU,CAAEle,SAAU,QAASC,MAAO,OACtCwW,gBAAiB,CAAEzW,SAAU,QAASC,MAAO,iBAC7Cke,oBAAqB,CAAEne,SAAU,QAASC,MAAO,kBAYpC,MAAMoC,UAAsB,gBAA3C,c,oBACE,KAAA+b,eAAiB,KACuC,IAA/CrB,EAAetZ,QAAQnF,KAAKC,MAAMY,QAG3C,KAAAkf,mBAAqB,KACnB,MAAMte,EAAM,KACNid,EAAqB1e,KAAKC,MAAMY,SAAW,CAAEa,SAAU,UAO7D,OAJI1B,KAAKC,MAAM2B,kBACbH,EAAOG,iBAAkB,GAGpBH,GAGT,KAAAue,iBAAmB,KACjB,MAAMC,EAAM,YAAsBjgB,KAAKC,MAAML,UAAZ,KAC5BI,KAAK+f,qBADuB,GAE5B,YAAmB/f,KAAKC,MAAMN,cAGnC,OACE,gBAAC,IAAI,CAACgB,UAAWX,KAAKC,MAAMU,UAAWkB,GAAIoe,GACxCjgB,KAAKC,MAAM6C,WAKlB,SACE,GAAI9C,KAAK8f,iBACP,OAAO9f,KAAKggB,mBAGd,MAAMC,EAAM,YAAyB,CACnC5O,aAAcrR,KAAKC,MAAML,UACzBiB,OAAQb,KAAKC,MAAMY,OACnBlB,WAAYK,KAAKC,MAAMN,WACvBugB,UAAU,IAEZ,OACE,gBAAC,IAAI,CAACvf,UAAWX,KAAKC,MAAMU,UAAWkB,GAAIoe,GACxCjgB,KAAKC,MAAM6C,a,iCC7HpB,yeA0BO,MAAMqd,EAAoB,CAE/B,IAAUC,aACV,IAAUC,qBAGV,IAAUpI,KACV,IAAU2H,SACV,IAAU1c,mBACV,IAAUG,uBAGV,IAAU8U,gBACV,IAAU0H,oBACV,IAAUvc,gBACV,IAAUE,oBAGV,IAAU8c,kBACV,IAAUC,sBACV,IAAU3c,2BACV,IAAUE,+BACV,IAAU0c,uBACV,IAAUC,2BAGV,IAAUvI,YACV,IAAUyH,gBACV,IAAUlc,aACV,IAAUE,2BACV,IAAUmH,YACV,IAAUD,mBAGV,IAAU2C,SACV,IAAUC,aACV,IAAU2K,eACV,IAAUsI,mBACV,IAAU/S,MAGV,IAAUgL,yBACV,IAAUgI,6BACV,IAAU9S,kBAGV,IAAU0K,MACV,IAAUqI,4BACV,IAAU7S,SACV,IAAUsE,MACV,IAAUC,WAGCuO,EAAuB,CAClC,IAAUrT,SACV,IAAUC,aACV,IAAUiT,mBAEV,IAAU/H,yBACV,IAAUgI,6BACV,IAAUrO,UACV,IAAUqN,gBACV,IAAUhc,2BACV,IAAUic,SACV,IAAUvc,uBACV,IAAUwc,oBACV,IAAUU,sBACV,IAAUE,2BACV,IAAUjd,qBAGCsd,EAAiC,CAC5C,IAAU7I,KACV,IAAUE,gBACV,IAAUrN,YACV,IAAU6N,yBACV,IAAUJ,MACV,IAAU/K,UAGZ,IAAYuT,GAAZ,SAAYA,GACV,sBACA,4BAFF,CAAYA,MAAe,KAK3B,MAAMC,EAAmB,CACvB,CAACD,EAAgBrT,UAAW,CAC1B7M,OAAQ,IAAU2M,SAClByT,UAAW,IAAUxT,aACrBrN,YAAa,IAAUgY,eACvB8I,eAAgB,IAAUR,mBAC1BS,iBAAkB,IAAU3T,SAC5BrN,SAAU,uBACVD,iBAAkB,+BAClBkhB,yBAA0B,mCAC1BrgB,UAAW,KAEb,CAACggB,EAAgBnT,aAAc,CAC7B/M,OAAQ,IAAU8X,yBAClBsI,UAAW,IAAUN,6BACrBvgB,YAAa,IAAUmY,MACvB2I,eAAgB,IAAU5O,UAC1B6O,iBAAkB,IAAUxI,yBAC5BxY,SAAU,6CACVD,iBAAkB,mCAClBkhB,yBAA0B,uCAC1BrgB,UAAW,MAIR,SAASsgB,EAAmBvhB,GACjC,OAAO,YAAU,gBAAiB,IAA0BA,GAAMwhB,YAG7D,SAASC,EAAkBzhB,GAChC,OAAO,IAA0BA,GAAMiB,UAGlC,SAASygB,EAAkB1hB,EAAiBC,GACjD,OAAOA,EACH,IAA0BD,GAAMmhB,UAChC,IAA0BnhB,GAAMe,OAG/B,SAAS4gB,EAAwB3hB,EAAiBC,GACvD,OAAOA,EACH,IAA0BD,GAAM4hB,UAChC,IAA0B5hB,GAAMkC,OAG/B,SAAS2f,EAAwB7hB,GACtC,OAAOkhB,EAAiBlhB,GAAMiB,UAGzB,SAAS6gB,EAAwB9hB,EAAuBC,GAC7D,OAAOA,EAAgBihB,EAAiBlhB,GAAMmhB,UAAYD,EAAiBlhB,GAAMe,OAG5E,SAASghB,EAAkC/hB,GAChD,OAAOkhB,EAAiBlhB,GAAMqhB,iBAGzB,SAASW,EAA6BhiB,EAAuBC,GAClE,OAAOA,EAAgBihB,EAAiBlhB,GAAMohB,eAAiBF,EAAiBlhB,GAAMM,YAGjF,SAAS2hB,EAAwBjiB,EAAuBC,GAC7D,MAAO,CACLG,iBAAkBH,EACdihB,EAAiBlhB,GAAMshB,yBACvBJ,EAAiBlhB,GAAMI,iBAC3BC,SAAU6gB,EAAiBlhB,GAAMK,Y,oBCjLrC,IAAIpB,EAAM,EAAQ,KACFC,EAAU,EAAQ,KAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBC,GAFSP,EAAIC,EAASK,GAEXL,EAAQO,OAASP,EAAQO,OAAS,IAIjDJ,EAAOK,QAAUF,G,qBClBjBE,EADkC,EAAQ,IAChCkG,EAA4B,IAE9BC,KAAK,CAACxG,EAAOC,EAAI,6iEAAgjE,KAEzkED,EAAOK,QAAUA,G,oIC6BF,SAASwiB,EAAkB/hB,GACxC,MAAM,OAAEke,EAAF,OAAUtF,EAAV,SAAkBvD,EAAlB,QAA4B2M,EAA5B,SAAqC1U,GAAatN,EAClDiiB,EAAU,IAAMjiB,EAAMiiB,QAAQD,GAC9BthB,EAAY,EAAW,CAAEwd,SAAQ7I,aACjC/T,EAAQtB,EAAMkiB,YAAYF,GAEhC,OACE,sBAAIG,QAASF,EAASG,YAAaH,GACjC,gBAACjN,EAAA,EAAQ,CACPO,QAASxQ,QAAQuI,GACjB5M,UAAWA,EACX2U,SAAUA,EACV9U,GAAIyhB,EACJ1M,QAAStV,EAAMqiB,gBACdzJ,EACC,+CACiB,YAAU,sBAD3B,aACqDtX,GACnDZ,UAAU,sBACV,uCAAmB,EAAMA,UAAU,uBAAqB,KAGvDY,GAGH,wBAAMZ,UAAU,sBAAsBY,KCAjC,MAAM,UAAoB,gBAavC,YAAYtB,GACVsP,MAAMtP,GAXR,KAAAuP,SAAU,EA2DV,KAAA+S,mBAAqB,CAAChV,EAAmBiV,KACnCjV,EACFvN,KAAKyiB,aAAaD,GAElBxiB,KAAK0iB,eAAeF,IAIxB,KAAAG,mBAAsBriB,IACpBN,KAAK4iB,cAAe5iB,KAAKC,MAA2B4iB,oBAAoBviB,KAG1E,KAAAwiB,mBAAsBb,IACpBjiB,KAAK6P,SAAS,CAACkT,EAAW9iB,KACjB,CAAE+iB,UAAWhjB,KAAKijB,eAAehjB,EAAO8iB,GAAW5d,QAAQ8c,OAItE,KAAAiB,eAAkBC,IAChB,OAAQA,EAAIC,SACV,KAAK,GACHD,EAAIE,kBACJF,EAAIhO,iBACJnV,KAAK6P,SAAS7P,KAAKsjB,mBACnB,MACF,KAAK,GACHH,EAAIE,kBACJF,EAAIhO,iBACJnV,KAAK6P,SAAS7P,KAAKujB,uBACnB,MACF,KAAK,GACL,KAAK,GACHJ,EAAIE,kBACJ,MACF,KAAK,GACCrjB,KAAK0R,MAAMsR,WAAa,GAC1BhjB,KAAKwjB,aAAaxjB,KAAKijB,eAAejjB,KAAKC,MAAOD,KAAK0R,OAAO1R,KAAK0R,MAAMsR,cAMjF,KAAAJ,cAAiBvgB,IACfrC,KAAK6P,SAAS,CAAEmT,UAAW,EAAG/b,SAAS,EAAM5E,UAC7CrC,KAAKC,MAAMwjB,SAASphB,GAAO+N,KAAKpQ,KAAK0jB,YAAa1jB,KAAK0jB,cAGzD,KAAAjB,aAAgBD,IACVxiB,KAAK2jB,aAAanB,EAAMxiB,KAAKC,QAC/BD,KAAK4iB,cAAc,IAErB5iB,KAAKC,MAAMqN,SAASkV,IAGtB,KAAAE,eAAkBF,GAAiBxiB,KAAKC,MAAM2jB,WAAWpB,GAEzD,KAAAmB,aAAe,CAACE,GAAgBC,mBAAkBC,cAChDF,EAAK5e,OAAS,IAAyC,IAApC6e,EAAiB3e,QAAQ0e,KAA4C,IAA5BE,EAAS5e,QAAQ0e,GAE/E,KAAAG,uBAA0B/jB,IACxBD,KAAK6P,SAAU6B,GACTA,EAAMrP,MACD,CACLyhB,iBAAkB7jB,EAAMgkB,eAAevS,EAAMrP,MAAOpC,EAAM6jB,mBAGrD,CAAEA,iBAAkB,IAAI7jB,EAAM6jB,qBAK3C,KAAAI,yBAA4BjkB,IAC1BD,KAAK6P,SAAU6B,GACU,IAAnBzR,EAAMkkB,SACD,CAAEC,mBAAoB,IAAWnkB,EAAM8jB,SAAU9jB,EAAM6jB,mBACrD7jB,EAAMkkB,SAAWzS,EAAMoS,iBAAiB7e,OAC1C,CAAEmf,mBAAoB,IAEtB,CACLA,mBAAoB,IAAWnkB,EAAM8jB,SAAU9jB,EAAM6jB,kBAAkBxe,MACrE,EACArF,EAAMkkB,SAAWzS,EAAMoS,iBAAiB7e,WAOlD,KAAAge,eAAiB,CAAChjB,EAAcyR,IAC1B1R,KAAK2jB,aAAajS,EAAMrP,MAAOpC,GAC1B,IAAIyR,EAAMoS,oBAAqBpS,EAAM0S,mBAAoB1S,EAAMrP,OAE/D,IAAIqP,EAAMoS,oBAAqBpS,EAAM0S,oBAIhD,KAAAC,iBAAoBpK,GAAgBja,KAAK6P,SAAS,CAAEmT,UAAW/I,IAE/D,KAAAqJ,kBAAoB,CAAC5R,EAAczR,KACjC,MAAM,UAAE+iB,GAActR,EAChB4S,EAActkB,KAAKijB,eAAehjB,EAAOyR,GAC/C,OAAIsR,EAAY,GAAKA,GAAasB,EAAYrf,OAAS,EAC9C,CAAE+d,UAAW,GAEb,CAAEA,UAAWA,EAAY,IAIpC,KAAAO,sBAAwB,CAAC7R,EAAczR,KACrC,MAAM,UAAE+iB,GAActR,EAChB4S,EAActkB,KAAKijB,eAAehjB,EAAOyR,GAC/C,GAAIsR,GAAa,EAAG,CAElB,MAAO,CAAEA,UADOsB,EAAYrf,OAAS,GAGrC,MAAO,CAAE+d,UAAWA,EAAY,IAIpC,KAAAU,YAAc,KACR1jB,KAAKwP,SACPxP,KAAK6P,SAAS,CAAE5I,SAAS,KAI7B,KAAAuc,aAAgBhB,KACqC,IAA/CxiB,KAAKC,MAAM6jB,iBAAiB3e,QAAQqd,GACtCxiB,KAAKyiB,aAAaD,GAElBxiB,KAAK0iB,eAAeF,IAhLtBxiB,KAAK0R,MAAQ,CACXsR,UAAW,EACX/b,SAAS,EACT5E,MAAO,GACPyhB,iBAAkB,GAClBM,mBAAoB,IAIxB,oBACEpkB,KAAKwP,SAAU,EACfxP,KAAK4iB,cAAc,IACnB5iB,KAAKgkB,uBAAuBhkB,KAAKC,OACjCD,KAAKkkB,yBAAyBlkB,KAAKC,OAC/BD,KAAKukB,WACPvkB,KAAKukB,UAAUC,iBAAiB,UAAWxkB,KAAKkjB,gBAAgB,GAIpE,0BAA0BuB,GACxB,GACEzkB,KAAKC,MAAM8jB,WAAaU,EAAUV,UAClC/jB,KAAKC,MAAM6jB,mBAAqBW,EAAUX,iBAC1C,CACA9jB,KAAKgkB,uBAAuBS,GAC5BzkB,KAAKkkB,yBAAyBO,GAE9B,MAAMC,EAAgB1kB,KAAKijB,eAAewB,EAAWzkB,KAAK0R,OAAOzM,OAC7DjF,KAAK0R,MAAMsR,WAAa0B,GAC1B1kB,KAAK6P,SAAS,CAAEmT,UAAW0B,EAAgB,KAKjD,qBACM1kB,KAAK2kB,aACP3kB,KAAK2kB,YAAYC,QAIrB,uBACE5kB,KAAKwP,SAAU,EACXxP,KAAKukB,WACPvkB,KAAKukB,UAAUM,oBAAoB,UAAW7kB,KAAKkjB,gBAyIvD,SACE,MAAM,eAAE4B,GAAiB,EAAnB,iBAAyBC,GAAmB,EAA5C,WAAkDC,EAAa,IAAOhlB,KAAKC,OAC3E,YAAEkiB,GAAgBniB,KAAKC,OACvB,MAAEoC,EAAF,UAAS2gB,EAAT,iBAAoBc,EAApB,mBAAsCM,GAAuBpkB,KAAK0R,MAClEuT,EAAgBjlB,KAAKijB,eAAejjB,KAAKC,MAAOD,KAAK0R,OAAOsR,GAC5DkC,EAAiBH,GAAoB/kB,KAAK2jB,aAAathB,EAAOrC,KAAKC,OACnEklB,EAAuC,IAAxBnlB,KAAKC,MAAMkkB,SAC1BiB,EAAc,EAAW,OAAQ,CACrC,0BAA2BD,EAC3B,aAAcA,EACd,qBAAsBA,EACtB,wBAAyBngB,QAAQggB,KAGnC,OACE,uBAAKrkB,UAAU,eAAe2T,IAAKsJ,GAAQ5d,KAAKukB,UAAY3G,GAC1D,uBAAKjd,UAAU,eACb,gBAAC0kB,EAAA,EAAS,CACRC,WAAW,EACX3kB,UAAU,oBACVsG,QAASjH,KAAK0R,MAAMzK,QACpBse,SAAUvlB,KAAK2iB,mBACf6C,YAAaxlB,KAAKC,MAAMulB,YACxBllB,MAAO+B,KAGX,sBAAI1B,UAAWykB,GACZtB,EAAiB7e,OAAS,GACzB6e,EAAiBve,IAAI0c,GACnB,gBAACD,EAAiB,CAChB7D,OAAQ8G,IAAkBhD,EAC1BA,QAASA,EACTrhB,IAAKqhB,EACLC,QAASliB,KAAK8iB,mBACdR,eAAgBtiB,KAAKuiB,mBACrBJ,YAAaA,EACb5U,UAAU,KAGf6W,EAAmBnf,OAAS,GAC3Bmf,EAAmB7e,IAAI0c,GACrB,gBAACD,EAAiB,CAChB7D,OAAQ8G,IAAkBhD,EAC1B3M,UAAWwP,EACX7C,QAASA,EACTrhB,IAAKqhB,EACLC,QAASliB,KAAK8iB,mBACdR,eAAgBtiB,KAAKuiB,mBACrBJ,YAAaA,KAGlB+C,GACC,gBAAClD,EAAiB,CAChB7D,OAAQ8G,IAAkB5iB,EAC1BwW,QAAQ,EACRoJ,QAAS5f,EACTzB,IAAKyB,EACL6f,QAASliB,KAAK8iB,mBACdR,eAAgBtiB,KAAKuiB,mBACrBJ,YAAaA,KAGf+C,GAAkBpB,EAAiB7e,OAAS,GAAKmf,EAAmBnf,OAAS,GAC7E,sBAAItE,UAAU,eAAe,YAAwB,mBAAoB0B,KAG5E2iB,IAhQA,EAAAlP,aAA6B,CAClCmO,eAAgB,CAAC5hB,EAAeyhB,IAC9BA,EAAiBhc,OAAO+b,GAAQA,EAAKnZ,SAASrI,IAChD8hB,SAAU,EACVhC,YAAcF,GAAoBA,EAClCY,oBAAsBviB,GAAkBA,I,iCCrE5C,0FA+Be,SAASmlB,GAAW,MAAE7f,EAAF,SAAS8f,IAC1C,OAAI,YAAuB9f,GAClB,gBAAC,IAAyB,CAACA,MAAOA,EAAO8f,SAAUA,IACjD,YAAwB9f,GAE/B,gBAAC,IAAiB2O,SAAQ,KACvB,EAAG5U,gBACF,gBAAC,IAA0B,CAACA,WAAYA,EAAYiG,MAAOA,EAAO8f,SAAUA,KAOlF,gBAAC,IAAO,CAAC3jB,QAAS6D,EAAMS,aAAe,MACrC,wBAAM1F,UAAU,eACd,wBAAMA,UAAU,4BACb,YAAU,iBAAkBiF,EAAMC,UAC9B,KACP,0BAAQlF,UAAU,gBAAgBiF,EAAMnB,U,iCClDhD,gKAkCO,SAASkhB,EAAwB/f,GACtC,MAA0B,sBAAnBA,EAAMC,eAA+D7E,IAA3B4E,EAAMggB,iBAalD,MAAMC,UAAmC,gBAAhD,c,oBACE,KAAAnU,MAAe,CAAEoU,UAAU,GAE3B,KAAAzC,gBAAmBzd,IACjBA,EAAMyd,mBAGR,KAAA0C,mBAAqB,KACnB/lB,KAAK6P,SAAS6B,IAAK,CAAOoU,UAAWpU,EAAMoU,aAG7C,KAAAE,kBAAoB,CAACtV,EAAwChF,IAC3D,gBAAC,IAAI,CACHlG,QAASxF,KAAKqjB,gBACdvd,MAAO4K,EAAQjM,KACf5C,GAAI,YAAc6O,EAAQ9P,IAAK8K,IAC9B,YAAmBgF,EAAQjM,KAAM,KAItC,KAAAwhB,aAAe,CAACva,EAAS,YAAU,0BACjC,wBAAM/K,UAAU,SAASmF,MAAO4F,GAC9B,gBAAC,IAAU,CAAC/K,UAAU,qCACrB+K,GAIL,oBAAoBgF,GAQlB,MAAMwV,GAAclmB,KAAKC,MAAMN,YAAc,YAAaK,KAAKC,MAAMN,YAErE,GAA2B,UAAvB+Q,EAAQyV,WAAwB,CAClC,MAAMvO,EAAUsO,EACZ,gCACA,uCACJ,OACE,uBAAKvlB,UAAU,iBACb,gBAAC,mBAAgB,CACfJ,eAAgB,YAAUqX,GAC1BpX,GAAIoX,EACJnX,OAAQ,CACNiQ,QAAS1Q,KAAKgmB,kBAAkBtV,EAASA,EAAQhF,QACjDA,OAAQ1L,KAAKimB,aAAavV,EAAQhF,YAKrC,GAA2B,YAAvBgF,EAAQyV,WAA0B,CAC3C,MAAMvO,EAAUsO,EACZ,kCACA,yCACJ,OACE,uBAAKvlB,UAAU,iBACb,gBAAC,mBAAgB,CACfJ,eAAgB,YAAUqX,GAC1BpX,GAAIoX,EACJnX,OAAQ,CACNiQ,QAAS1Q,KAAKgmB,kBAAkBtV,EAASA,EAAQhF,QACjDA,OAAQ1L,KAAKimB,aAAavV,EAAQhF,YAKrC,MAA2B,mBAAvBgF,EAAQyV,WAEf,gBAAC,mBAAgB,CACf5lB,eAAgB,YAAU,2CAC1BC,GAAG,0CACHC,OAAQ,CACNiQ,QAAS1Q,KAAKgmB,kBAAkBtV,EAASA,EAAQ0V,WACjDC,UAAWrmB,KAAKimB,aAAavV,EAAQ2V,WACrCD,UAAWpmB,KAAKimB,aAAavV,EAAQ0V,cAKtC,KAGT,SACE,MAAM,MAAExgB,EAAF,SAAS8f,GAAa1lB,KAAKC,OAC3B,SAAE6lB,GAAa9lB,KAAK0R,MAC1B,OACE,gCACE,wBAAM/Q,UAAU,QACb,YAAU,iBAAkBiF,EAAMC,WACjC6f,GAAY,MAGdA,GACA,2BACE,gBAAC,IAAU,CACT/kB,UAAU,yCACV6E,QAASxF,KAAK+lB,mBACd1C,iBAAiB,GAChByC,EAAW,YAAU,QAAU,YAAU,QAC1C,gBAAC,IAAY,CAACnlB,UAAU,qBAAqB2lB,OAAQR,MAK1DA,GACC,sBAAInlB,UAAU,0BACXiF,EAAMggB,iBAAiB7X,SAASxI,IAAImL,GACnC,sBAAI/P,UAAU,iCAAiCC,IAAK8P,EAAQ9P,KACzDZ,KAAKumB,oBAAoB7V,U,iCC/J1C,8IA8BO,SAAS8V,EAAuB5gB,GACrC,MAA0B,iBAAnBA,EAAMC,eAAqD7E,IAAtB4E,EAAMI,YAY7C,MAAMygB,UAAkC,gBAA/C,c,oBACE,KAAA/U,MAAe,CAAEoU,UAAU,GAE3B,KAAAzC,gBAAmBzd,IACjBA,EAAMyd,mBAGR,KAAA0C,mBAAqB,KACnB/lB,KAAK6P,SAAS6B,IAAK,CAAOoU,UAAWpU,EAAMoU,aAG7C,SACE,MAAM,MAAElgB,EAAF,SAAS8f,GAAa1lB,KAAKC,OAC3B,SAAE6lB,GAAa9lB,KAAK0R,MAC1B,OACE,gCACE,wBAAM/Q,UAAU,qBAAqB,YAAU,iBAAkBiF,EAAMC,UAAkB,KACxFD,EAAMI,YAAYC,aACjB,gBAAC,mBAAgB,CACf1F,eAAgB,YAAU,8BAC1BC,GAAG,6BACHC,OAAQ,CAAEyF,OAAQ,gBAAC,IAAK,CAACxD,MAAOkD,EAAMI,YAAYE,OAAQE,OAAO,OAGnE,gBAAC,IAAK,CAAC1D,MAAOkD,EAAMI,YAAYE,OAAQE,OAAO,IAGjD,4BACIsf,GAAY9f,EAAMI,YAAY0gB,QAAQzhB,OAAS,GAC/C,gBAAC,IAAe,CACdtE,UAAU,yCACV6E,QAASxF,KAAK+lB,mBACd1C,iBAAiB,GAChByC,EAAW,YAAU,QAAU,YAAU,QAC1C,gBAAC,IAAY,CAACnlB,UAAU,qBAAqB2lB,OAAQR,MAK1DA,GACC,sBAAInlB,UAAU,0BACXiF,EAAMI,YAAY0gB,QAAQnhB,IAAImL,GAC7B,sBAAI/P,UAAU,iCAAiCC,IAAK8P,EAAQ9P,KAC1D,gBAAC,IAAK,cACQ,YAAU,wBACtBD,UAAU,eACV+B,MAAOkD,EAAMI,YAAYE,OACzBE,OAAO,IAET,uBAAKzF,UAAU,wBACb,gBAAC,IAAI,CACH6E,QAASxF,KAAKqjB,gBACdvd,MAAO4K,EAAQjM,KACf5C,GAAI,YAAc6O,EAAQ9P,IAAK8P,EAAQhF,SACvC,qCAAkB,YAAwB,YAAagF,EAAQjM,OAC5DiM,EAAQjM,e,iCClG/B,mKAwBO,SAASkiB,EACdtV,EACAuV,GAEA,OAAO,YAAQ,iCAAkC,CAAEvV,eAAcuV,cAAajK,MAC5E,KAIG,SAASkK,EAAaxV,EAAsBuV,GACjD,IAAI3G,EAAG,UAAM,uBAAN,yDAAmE6G,mBACxEzV,IAOF,OAJIuV,IACF3G,GAAG,qBAAkB2G,IAGhB3G,EAGF,SAAS8G,EACd1V,EACAuV,GAEA,OAAO,YAAK,oCAAqC,CAAEvV,eAAcuV,cAAajK,MAC5E,KAIG,SAASqK,EACd3V,EACAuV,GAEA,OAAO,YAAK,sCAAuC,CAAEvV,eAAcuV,cAAajK,MAC9E,O,6cCrCW,SAASsK,EAAV,GAAwE,IAAlD,KAAEzT,EAAO,gBAAyC,EAAtBS,EAAsB,cACpF,OACE,gBAAC,IAAI,iBAAKA,GACR,wBACEiD,EAAE,iOACFlL,MAAO,CAAEwH,a,iCC3BjB,8LAuBO,SAAS0T,EACdhO,GAQA,OAAO,YAAQ,+BAAgCA,GAAMyD,MAAM,KAWtD,SAASwK,EACd7gB,EACA7B,EACAoB,EACAQ,GAEA,MAAM6S,EAAoB,CAAE5S,WAAU7B,QAOtC,OANIoB,IACFqT,EAAKrT,SAAWA,GAEdQ,IACF6S,EAAK7S,YAAcA,GAEd,YAAS,qCAAsC6S,GAAM9I,KAAKoM,GAAKA,EAAE5W,MAAO,KAG1E,SAASwhB,EAAYxhB,GAC1B,OAAO,YAAK,qCAAsC,CAAEA,UAAS+W,MAAM,KAG9D,SAAS0K,EACdzhB,EACAnB,EACA4B,GAEA,MAAM6S,EAAoB,CAAEtT,SAO5B,OANInB,IACFyU,EAAKzU,KAAOA,GAEV4B,IACF6S,EAAK7S,YAAcA,GAEd,YAAS,qCAAsC6S,GAAM9I,KAAKoM,GAAKA,EAAE5W,MAAO,KAG1E,SAAS0hB,EAAehhB,GAC7B,OAAO,YAAK,+BAAgC,CAAEA,aAAYqW,MAAM,O,oBC/ElE,IAAI5d,EAAM,EAAQ,KACFC,EAAU,EAAQ,KAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBC,GAFSP,EAAIC,EAASK,GAEXL,EAAQO,OAASP,EAAQO,OAAS,IAIjDJ,EAAOK,QAAUF,G,iCCpBjB,yHAuBO,SAASioB,EACdvjB,EACAwjB,GAEA,IAAKxjB,EACH,OAGF,IAAI6H,EAAY7H,EAAOyjB,WAAazjB,EAAO6H,WAAa,GAExD,OAAQ7H,EAAO2G,MACb,IAAK,oBACHkB,EAAY2b,EAAcxjB,EAAO6C,MACjC,MACF,IAAK,mBACHgF,EAAYA,GAAa2b,EAAcxjB,EAAO6C,MAC9C,MAIF,IAAK,mBACH,IAAKgF,EACH,OAAO,YAAU,8CAEnB,MACF,IAAK,OACHA,EAAYA,GAAa2b,EAAc3b,GACvC,MACF,IAAK,kBACHA,EAAYA,GAAa2b,EAAcxjB,EAAO6C,MAKlD,OAAO,YAAwB,mBAAD,OAAoB7C,EAAO2G,KAAK5H,eAAiB8I,GAG1E,SAAS6b,EAAc1jB,GAC5B,OAAOA,GAAUA,EAAO6C,KAAO,YAAU7C,EAAO6C,WAAQ7F,EAGnD,SAAS2mB,EACd3jB,GAEA,YAAiDhD,IAAzCgD,EAA6B0M,U,oBCnEvC,IAAI3R,EAAM,EAAQ,KACFC,EAAU,EAAQ,KAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBC,GAFSP,EAAIC,EAASK,GAEXL,EAAQO,OAASP,EAAQO,OAAS,IAIjDJ,EAAOK,QAAUF,G,8wBCwBV,SAASsoB,EACd1O,EAOA2O,GAEA,OAvBK,SACL3O,GASA,OAAO,YAAQ,+BAAgCA,GAAMyD,MAAM,KAapDmL,CAAmB,EAAD,GAAM5O,EAAN,CAAY6O,GAAI,OAAQ3X,KAAKoM,IACpD,MAAMwL,EAASH,EACX,CACEhoB,SAAUgoB,EAAKhoB,SAAS0F,IAAI,CAAClF,EAAS4Z,IAAV,KACvB5Z,EADuB,CAE1BqH,QAASrH,EAAQqH,QAAQgR,OAAO8D,EAAE3c,SAASoa,GAAKvS,YAElDugB,OAAQzL,EAAEyL,QAEZzL,EAEJ,OAAIwL,EAAOC,OAAOC,UAAYF,EAAOC,OAAOE,UAAYH,EAAOC,OAAOG,MAC7DJ,EAEFJ,EAAsB,EAAD,GAAM1O,EAAN,CAAYtK,EAAGoZ,EAAOC,OAAOC,UAAY,IAAKF,O,qBClE9ExoB,EADkC,EAAQ,IAChCkG,EAA4B,IAE9BC,KAAK,CAACxG,EAAOC,EAAI,+3BAAk4B,KAE35BD,EAAOK,QAAUA,G,oBCNjB,IAAIT,EAAM,EAAQ,KACFC,EAAU,EAAQ,KAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBC,GAFSP,EAAIC,EAASK,GAEXL,EAAQO,OAASP,EAAQO,OAAS,IAIjDJ,EAAOK,QAAUF,G,qBClBjBE,EADkC,EAAQ,IAChCkG,EAA4B,IAE9BC,KAAK,CAACxG,EAAOC,EAAI,8rBAA+rB,KAExtBD,EAAOK,QAAUA,G,qBCJjBA,EADkC,EAAQ,IAChCkG,EAA4B,IAE9BC,KAAK,CAACxG,EAAOC,EAAI,+jBAAgkB,KAEzlBD,EAAOK,QAAUA,G,iCCNjB,iGAqCe,SAAS4I,EAAanI,GACnC,MAAM,WAAEN,EAAF,UAAcC,EAAd,MAAyBmH,EAAzB,MAAgCxF,EAAhC,OAAuCV,GAAWZ,EACxD,OACE,gBAAC,IAAI,CACHU,UAAU,gBACVkB,QACab,IAAXH,QAAkCG,IAAV+F,GAAuB,YAAcA,GACzD,YAAqBnH,EAAWiB,EAAQlB,GACxC,YAAeC,EAAWD,EAAYoH,IAE5C,gBAAC,IAAW,CAACpG,UAAU,sBAAsBO,KAAM,KACnD,4BAAOK,GAAS,YAAU,+B,oBChDhC,IAAIxC,EAAM,EAAQ,KACFC,EAAU,EAAQ,KAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBC,GAFSP,EAAIC,EAASK,GAEXL,EAAQO,OAASP,EAAQO,OAAS,IAIjDJ,EAAOK,QAAUF,G,qBClBjBE,EADkC,EAAQ,IAChCkG,EAA4B,IAE9BC,KAAK,CAACxG,EAAOC,EAAI,mFAAoF,KAE7GD,EAAOK,QAAUA,G,8gCCkEF,MAAM,UAAyB,gBAQ5C,YAAYS,GACVsP,MAAMtP,GAiDR,KAAAooB,eAAkBC,GACT,cACJC,OAAO,CAAC,EAAG,EAAG,EAAG,EAAG,IACpBC,MAAM,CAACF,EAAiB,IAG7B,KAAAG,cAAiBH,GACR,cACJC,OAAO,CAAC,QAAS,OAAQ,OACzBC,MAAM,CAACF,EAAiB,IAG7B,KAAAI,UAAY,CAACzoB,EAAcqoB,EAAyBK,IACzB,WAArB1oB,EAAMsE,WACDvE,KAAKqoB,eAAeC,GACG,UAArBroB,EAAMsE,WACRvE,KAAKyoB,cAAcH,GAErB,cACJE,MAAM,CAACF,EAAiB,IACxBC,OAAO,CAAC,EAAG,OAAA/K,EAAA,GAAImL,EAAUzR,GAAK/V,OAAO+V,EAAEkC,GAAK,KAAO,IACnDwP,OAGL,KAAAC,UAAY,EACRthB,YAAWuhB,WACbC,EACAJ,KAEA,MAAMK,EAAY,OAAAC,EAAA,GAAON,EAAUzR,GAAKA,EAAEgD,GACpCmC,EAAQ9U,GAAaA,EAAYyhB,EAAU,GAAKzhB,EAAYyhB,EAAU,GACtE1M,EAAMwM,GAAWA,EAAUE,EAAU,GAAKF,EAAUE,EAAU,GAC9DE,EAAoC,cACvCX,OAAO,IAAO,CAAClM,EAAOC,KACtBkM,MAAM,CAAC,EAAGO,IACVI,OAAM,GACT,MAAO,CACLD,SACAE,UAAWJ,EAAUzjB,IAAI2jB,KAI7B,KAAAG,UAAappB,IACX,MAAM8oB,EAAiB9oB,EAAM8b,MAAQ9b,EAAMqpB,QAAQ,GAAKrpB,EAAMqpB,QAAQ,GAChEhB,EAAkBroB,EAAMgM,OAAShM,EAAMqpB,QAAQ,GAAKrpB,EAAMqpB,QAAQ,GAClEX,EAAW,IAAQ1oB,EAAMmH,OAAO7B,IAAI0T,GAASA,EAAMC,OACzD,OAAO,EAAP,GACKlZ,KAAK6oB,UAAU5oB,EAAO8oB,EAAgBJ,GAD3C,CAEEY,OAAQvpB,KAAK0oB,UAAUzoB,EAAOqoB,EAAiBK,MAInD,KAAAa,mBAAqB,CAACN,EAAgBO,KACpC,MAAMC,EAAa1pB,KAAKC,MAAMmH,OAAO,GACrC,GAAIqiB,GAAgBC,EAAY,CAC9B,MAAMzP,EAAMyP,EAAWxQ,KAAKyQ,UAAU/a,GAAKA,EAAEsL,EAAE0P,YAAcH,EAAaG,WACpEC,EAAS,IAAOX,EAAOV,SACvBsB,EAAOZ,EAAOO,GACpB,GAAIxP,GAAO,GAAK6P,GAAQD,EAAO,IAAMC,GAAQD,EAAO,GAClD,MAAO,CACLJ,eACAM,iBAAkBb,EAAOO,GACzBO,gBAAiB/P,GAIvB,MAAO,CAAEwP,kBAAczoB,EAAW+oB,sBAAkB/oB,EAAWgpB,qBAAiBhpB,IAGlF,KAAAipB,eAAkB/oB,IAChB,MAAMgpB,EAAOhpB,EAAO,EACpB,MAAM,IAAN,OAAWgpB,EAAX,eAAsBhpB,EAAtB,YAA8BgpB,EAA9B,cAAwCA,EAAxC,YAAgDhpB,EAAhD,eAA2DgpB,EAA3D,aAAoEA,EAApE,eAA+EhpB,EAA/E,YAAuFgpB,IAGzF,KAAAC,YAAevkB,IACbA,EAAMuP,iBACN,MAAM,UAAEiU,EAAF,OAAaF,GAAWlpB,KAAK0R,MAC7B0Y,EAAaxkB,EAAMwP,cAAciV,wBACjCC,GAAa1kB,EAAM2kB,MAAQH,EAAWI,MAAQJ,EAAWrO,MACzD8N,EAASX,EAAOV,QAEhBiC,EAAQ7kB,EAAM8kB,UACf,GAAK9kB,EAAM8kB,UAAa1qB,KAAKC,MAAM0qB,UACpC3qB,KAAKC,MAAM0qB,UACTC,EAAUf,EAAO,GAAKtM,KAAKsN,MAAMJ,EAAQ7kB,EAAMklB,OAASR,GACxDS,EAAWlB,EAAO,GAAKtM,KAAKsN,MAAMJ,EAAQ7kB,EAAMklB,QAAU,EAAIR,IAC9D/iB,EAAYqjB,EAAUxB,EAAU,GAAKF,EAAO8B,OAAOJ,QAAW5pB,EAC9D8nB,EAAUiC,EAAW3B,EAAU,GAAKF,EAAO8B,OAAOD,QAAY/pB,EACpEhB,KAAKirB,iBAAiB1jB,EAAWuhB,IAGnC,KAAAmC,iBAAmB,CAAC1jB,EAAkBuhB,KAChC9oB,KAAKC,MAAMirB,YACblrB,KAAKC,MAAMirB,WAAW3jB,EAAWuhB,IAIrC,KAAAqC,gBAAmBvlB,IACjB,MAAMwkB,EAAaxkB,EAAMwP,cAAciV,wBACvCrqB,KAAKorB,iBAAiBxlB,EAAM2kB,MAAQH,EAAWI,OAGjD,KAAAa,iBAAmB,KACjBrrB,KAAK6P,SAAS,CAAEyb,WAAW,KAG7B,KAAAC,eAAiB,KACf,MAAM,cAAEC,GAAkBxrB,KAAKC,MAC3BurB,IACFxrB,KAAK6P,SAAS,CACZyb,WAAW,EACX7B,kBAAczoB,EACd+oB,sBAAkB/oB,EAClBgpB,qBAAiBhpB,IAEnBwqB,OAAcxqB,OAAWA,OAAWA,KAIxC,KAAAkU,YAAc,KACZ,MAAM,mBAAEuW,GAAuBzrB,KAAKC,MAChCwrB,GACFA,EAAmBzrB,KAAK0R,MAAM+X,mBAAgBzoB,IAIlD,KAAA0qB,uBAA0BC,IACpBA,GACF3rB,KAAK6P,SAAS,CAAE+b,oBAAqBD,EAAKtB,wBAAwBtO,SAItE,KAAAqP,iBAAoBtB,IAClB9pB,KAAK6P,SAAS6B,IACZ,MAAMgY,EAAa1pB,KAAKC,MAAMmH,OAAO,GACrC,GAAIsK,EAAM4Z,WAAa5B,EAAY,CACjC,MAAM,cAAE8B,GAAkBxrB,KAAKC,MACzB4G,EAAO6K,EAAMwX,OAAO8B,OAAOlB,GAEjC,IAAI7P,GAAM4R,EADM,OAAAC,EAAA,GAA8B5U,GAAKA,EAAEgD,GAAGzE,OACtCiU,EAAWxQ,KAAMrS,GACnC,GAAIoT,GAAO,EAAG,CACZ,MAAM8R,EAAgBrC,EAAWxQ,KAAKe,EAAM,GACtC+R,EAAYtC,EAAWxQ,KAAKe,KAE/B+R,GACAD,GACCllB,EAAK+iB,UAAYmC,EAAc7R,EAAE0P,WAAaoC,EAAU9R,EAAE0P,UAAY/iB,EAAK+iB,YAE7E3P,IAEF,MAAMwP,EAAeC,EAAWxQ,KAAKe,GAAKC,EACpC4P,EAAOpY,EAAMwX,OAAOO,GAI1B,OAHI+B,GACFA,EAAc/B,EAAcK,EAAM7P,GAE7B,CAAEwP,eAAcM,iBAAkBD,EAAME,gBAAiB/P,IAGpE,OAAO,QAIX,KAAAgS,qBAAuB,KACrB,MAAM,YAAEC,GAAgBlsB,KAAKC,OACvB,OAAEipB,EAAF,OAAUK,GAAWvpB,KAAK0R,MAEhC,IAAIya,EADqC,mBAAjB5C,EAAO4C,MAE3B5C,EAAO4C,MAAMnsB,KAAKC,MAAMmsB,gBACxB7C,EAAOhB,SAQX,GANK4D,EAAMlnB,QACTknB,EAAMxmB,KAAK4jB,EAAOhB,SAAS,IAKzB2D,EAAa,CACf,MAAMG,EAAiBF,EAAM5mB,IAAI+mB,GAAQJ,EAAYI,IACjDH,EAAMlnB,OAAS,IAAKonB,GAAgBpnB,SACtCknB,EAAQ5C,EAAOhB,UAInB,OACE,yBACG4D,EAAM5mB,IAAI+mB,GACT,qBAAG1rB,IAAK0rB,GACU,MAAfJ,GACC,wBACEvrB,UAAU,oCACV4rB,GAAG,OACHC,GAAG,QACHC,WAAW,MACXvS,EAAGgP,EAAOV,QAAQ,GAClBpP,EAAGmQ,EAAO+C,IACTJ,EAAYI,IAGjB,wBACE3rB,UAAU,kBACV+rB,GAAIxD,EAAOV,QAAQ,GACnBmE,GAAIzD,EAAOV,QAAQ,GACnBoE,GAAIrD,EAAO+C,GACXO,GAAItD,EAAO+C,SAQvB,KAAAQ,iBAAmB,KACjB,MAAM,OAAE5D,EAAF,OAAUK,GAAWvpB,KAAK0R,MAC1Bqb,EAAS7D,EAAO8D,WAAW,GAC3Bb,EAAQjD,EAAOiD,MAAM,GACrB/S,EAAImQ,EAAOf,QAAQ,GACzB,OACE,qBAAGyE,UAAU,oBACVd,EAAM7mB,MAAM,GAAI,GAAGC,IAAI,CAAC+mB,EAAMY,KAC7B,MAAMC,EAAWD,EAAQ,EAAIf,EAAMlnB,OAASknB,EAAMe,EAAQ,GAAKhE,EAAOX,SAAS,GACzErO,GAAKgP,EAAOoD,GAAQpD,EAAOiE,IAAa,EAC9C,OACE,wBACExsB,UAAU,kBAEVC,IAAKssB,EACLT,WAAW,MACXQ,UAAS,sBAAiB/S,EAAjB,aAAuBd,EAAvB,KACTc,EAAGA,EACHd,EAAGA,GACF2T,EAAOT,QAQpB,KAAAc,oBAAuB3rB,IACrB,MAAM,UAAE4rB,EAAF,UAAaC,GAAc7rB,GAC3B,oBAAEmqB,EAAF,OAAuB1C,EAAvB,OAA+BK,GAAWvpB,KAAK0R,MAC/C6b,EAAShE,EAAOf,QAChBqB,EAASX,EAAOV,QAEhBgF,GAAkB5B,GAAuB,GAAK,WAASze,KACvDsgB,EAAgB,WAAStgB,KAAO,EAEtC,IAAIugB,EACAC,EACAC,EACAC,EACAC,EAgBJ,OAdIR,GAAaE,GACfG,EAAwBL,EACxBI,EAA2BL,EAC3BO,EAAe,EACfC,EAAiBH,EAA2BD,EAC5CK,EAAmB,UAEnBH,EAAwBH,EACxBE,EAA2B7D,EAAOA,EAAO5kB,OAAS,GAAK0oB,EACvDC,EAAe,WAASzgB,KAAO,EAC/B0gB,EAAiBhE,EAAOA,EAAO5kB,OAAS,GAAKwoB,EAC7CK,EAAmB,OAInB,gCACE,wBACEta,KAAM,SAAOua,iBACb9hB,OAtViB,GAuVjB8P,MAAO4R,EACPzT,EAAGwT,EACHtU,EAAGmU,EAAOA,EAAOtoB,OAAS,GAzVT,GAyVmC2oB,IAEtD,wBACEjtB,UAAU,kBACV2T,IAAKtU,KAAK0rB,uBACVxR,EAAG2T,EACHzU,EAAGmU,EAAOA,EAAOtoB,OAAS,GAAKwoB,EAAgBG,EAC/CnB,WAAYqB,GAAgB,cAOpC,KAAAE,WAAa,KACX,MAAM,qBAAEC,EAAF,eAAwBjnB,GAAmBhH,KAAKC,MACtD,IAAK+G,EACH,OAAO,KAET,MAAM,OAAEkiB,EAAF,OAAUK,GAAWvpB,KAAK0R,MAC1B6b,EAAShE,EAAOf,QAChBqB,EAASX,EAAOV,QAIhB6E,EAAY9P,KAAKC,IAAI0L,EAAOliB,GAAiB6iB,EAAO,IAEpDyD,EAAYzD,EAAOA,EAAO5kB,OAAS,GAAKooB,EAC9C,OAAIC,EAAY,EACP,KAIP,gCACGW,GAAwBjuB,KAAKotB,oBAAoB,CAAEC,YAAWC,cAC/D,wBACE3sB,UAAU,kBACV6S,KAAM,SAAOua,iBACb9hB,OAAQshB,EAAO,GAAKA,EAAOA,EAAOtoB,OAAS,GAC3C8W,MAAOuR,EACPpT,EAAGmT,EACHjU,EAAGmU,EAAOA,EAAOtoB,OAAS,OAMlC,KAAAipB,YAAc,KACZ,MAAMC,EAAgB,cACnBC,QAAQlX,GAAKlS,QAAQkS,EAAEkC,GAAa,IAARlC,EAAEkC,IAC9Bc,EAAEhD,GAAKlX,KAAK0R,MAAMwX,OAAOhS,EAAEgD,IAC3Bd,EAAElC,GAAKlX,KAAK0R,MAAM6X,OAAOrS,EAAEkC,IAI9B,OAHIpZ,KAAKC,MAAMouB,YACbF,EAAcG,MAAM,KAGpB,yBACGtuB,KAAKC,MAAMmH,OAAO7B,IAAI,CAAC0T,EAAOgB,IAC7B,wBACEtZ,UAAW,EAAW,kBAAmB,mBAAqBsZ,GAC9D/C,EAAGiX,EAAclV,EAAMC,YAASlY,EAChCJ,IAAKqY,EAAMxU,UAOrB,KAAA8pB,WAAa,IAET,yBACGvuB,KAAKC,MAAMmH,OACT7B,IAAI,CAAC0T,EAAOuV,IACXvV,EAAMC,KACH3T,IAAI,CAAC4T,EAAOc,KACX,MAAMwU,GAAmBtV,EAAMC,GAAiB,IAAZD,EAAMC,EACpCsV,EACJzV,EAAMC,KAAKe,EAAM,KAAOhB,EAAMC,KAAKe,EAAM,GAAGb,GAA+B,IAA1BH,EAAMC,KAAKe,EAAM,GAAGb,GACjEuV,EACJ1V,EAAMC,KAAKe,EAAM,KAAOhB,EAAMC,KAAKe,EAAM,GAAGb,GAA+B,IAA1BH,EAAMC,KAAKe,EAAM,GAAGb,GACvE,KAAIqV,GAAmBC,GAAkBC,GAGzC,OACE,0BACEhuB,UAAW,EAAW,iBAAkB,kBAAoB6tB,GAC5DI,GAAI5uB,KAAK0R,MAAMwX,OAAO/P,EAAMe,GAC5B2U,GAAI7uB,KAAK0R,MAAM6X,OAAOpQ,EAAMC,GAE5BxY,IAAKqY,EAAMxU,KAAOwV,EAClBuC,EAAE,QAIP1U,OAAO,MAEXA,OAAOgnB,GAAQA,EAAK7pB,OAAS,IAKtC,KAAA8pB,YAAc,KACZ,MAAMC,EAAgB,cACnBZ,QAAQlX,GAAKlS,QAAQkS,EAAEkC,GAAa,IAARlC,EAAEkC,IAC9Bc,EAAEhD,GAAKlX,KAAK0R,MAAMwX,OAAOhS,EAAEgD,IAC3B0S,GAAG1V,GAAKlX,KAAK0R,MAAM6X,OAAOrS,EAAEkC,IAC5B6V,GAAGjvB,KAAK0R,MAAM6X,OAAO,IAIxB,OAHIvpB,KAAKC,MAAMouB,YACbW,EAAcV,MAAM,KAGpB,yBACGtuB,KAAKC,MAAMmH,OAAO7B,IAAI,CAAC0T,EAAOgB,IAC7B,wBACEtZ,UAAW,EAAW,kBAAmB,mBAAqBsZ,GAC9D/C,EAAG8X,EAAc/V,EAAMC,YAASlY,EAChCJ,IAAKqY,EAAMxU,UAOrB,KAAAyqB,mBAAqB,KACnB,MAAM,gBAAElF,EAAF,iBAAmBD,EAAnB,OAAqCR,GAAWvpB,KAAK0R,MACrDgY,EAAa1pB,KAAKC,MAAMmH,OAAO,GACrC,OAAuB,MAAnB4iB,GAA+C,MAApBD,GAA6BL,EAK1D,yBACE,wBACE/oB,UAAU,eACV+rB,GAAI3C,EACJ4C,GAAI5C,EACJ6C,GAAIrD,EAAOf,QAAQ,GACnBqE,GAAItD,EAAOf,QAAQ,KAEpBxoB,KAAKC,MAAMmH,OAAO7B,IAAI,CAAC0T,EAAOgB,KAC7B,MAAMd,EAAQF,EAAMC,KAAK8Q,GACzB,OAAK7Q,IAAWA,EAAMC,GAAiB,IAAZD,EAAMC,EACxB,KAGP,0BACEzY,UAAW,EAAW,iBAAkB,kBAAoBsZ,GAC5D2U,GAAI7E,EACJ8E,GAAItF,EAAOpQ,EAAMC,GACjBxY,IAAKqY,EAAMxU,KACX+X,EAAE,SAvBH,MA+BX,KAAA2S,eAAiB,IAEb,4BACE,4BAAU3uB,GAAG,cACX,wBACEyL,OAAQjM,KAAK0R,MAAM6X,OAAOf,QAAQ,GAAK,GACvCyE,UAAU,kBACVlR,MAAO/b,KAAK0R,MAAMwX,OAAOV,QAAQ,OAO3C,KAAA4G,yBAA4BC,IAC1B,MAAMC,EAAuD,GAY7D,OAXID,IACFC,EAAYC,QAAUvvB,KAAKmqB,aAEzBnqB,KAAKC,MAAMurB,gBACb8D,EAAYE,aAAexvB,KAAKqrB,iBAChCiE,EAAYG,YAAczvB,KAAKmrB,gBAC/BmE,EAAYI,WAAa1vB,KAAKurB,gBAE5BvrB,KAAKC,MAAMwrB,qBACb6D,EAAY9pB,QAAUxF,KAAKkV,aAG3B,sCACEvU,UAAU,6BACVsL,OAAQjM,KAAK0R,MAAM6X,OAAOf,QAAQ,GAClCzM,MAAO/b,KAAK0R,MAAMwX,OAAOV,QAAQ,IAC7B8G,KAhgBR,MAAMK,EAAS3vB,KAAKqpB,UAAUppB,GACxB2vB,EAAkB5vB,KAAKwpB,mBAAmBmG,EAAOzG,OAAQjpB,EAAMwpB,cACrEzpB,KAAK0R,MAAL,KAAkBie,EAAlB,GAA6BC,GAC7B5vB,KAAKorB,iBAAmB,IAASprB,KAAKorB,iBAAkB,IACxDprB,KAAKirB,iBAAmB,IAASjrB,KAAKirB,iBAAkB,IAG1D,mBAAmB7Y,GACjB,IAAIud,EACAC,EAgBJ,GAdE5vB,KAAKC,MAAMsE,aAAe6N,EAAU7N,YACpCvE,KAAKC,MAAMsH,YAAc6K,EAAU7K,WACnCvH,KAAKC,MAAM6oB,UAAY1W,EAAU0W,SACjC9oB,KAAKC,MAAM8b,QAAU3J,EAAU2J,OAC/B/b,KAAKC,MAAMqpB,UAAYlX,EAAUkX,SACjCtpB,KAAKC,MAAMgM,SAAWmG,EAAUnG,QAChCjM,KAAKC,MAAMmH,SAAWgL,EAAUhL,SAEhCuoB,EAAS3vB,KAAKqpB,UAAUrpB,KAAKC,OACE,MAA3BD,KAAK0R,MAAM+X,eACbmG,EAAkB5vB,KAAKwpB,mBAAmBmG,EAAOzG,OAAQlpB,KAAK0R,MAAM+X,iBAInE,IAAQzpB,KAAKC,MAAMwpB,aAAcrX,EAAUqX,cAAe,CAC7D,MAAMP,EAASyG,EAASA,EAAOzG,OAASlpB,KAAK0R,MAAMwX,OACnD0G,EAAkB5vB,KAAKwpB,mBAAmBN,EAAQlpB,KAAKC,MAAMwpB,eAG3DkG,GAAUC,KACRD,GACF3vB,KAAK6P,SAAL,KAAmB8f,IAEjBC,GACF5vB,KAAK6P,SAAL,KAAmB+f,IAGjBA,GAAmB5vB,KAAKC,MAAMurB,eAChCxrB,KAAKC,MAAMurB,cACToE,EAAgBnG,aAChBmG,EAAgB7F,iBAChB6F,EAAgB5F,kBA2dxB,SACE,IAAKhqB,KAAKC,MAAM8b,QAAU/b,KAAKC,MAAMgM,OACnC,OAAO,4BAET,MAAMojB,GAAervB,KAAKC,MAAM4vB,aAAwC,MAAzB7vB,KAAKC,MAAMirB,WACpD4E,EAAW9qB,QAAQhF,KAAKC,MAAMsH,WAAavH,KAAKC,MAAM6oB,SAC5D,OACE,uBACEnoB,UAAW,EAAW,aAAc,CAAE,eAAgBmvB,IACtD7jB,OAAQjM,KAAKC,MAAMgM,OACnB8P,MAAO/b,KAAKC,MAAM8b,OACjBsT,GAAervB,KAAKmvB,iBACrB,qBAAGlC,UAAS,oBAAejtB,KAAKC,MAAMqpB,QAAQ,GAAlC,aAAyCtpB,KAAKC,MAAMqpB,QAAQ,GAA5D,MACoB,MAA7BtpB,KAAKC,MAAM+G,gBAA0BhH,KAAKguB,cACzChuB,KAAKC,MAAM8vB,UAAY/vB,KAAKisB,wBAC5BjsB,KAAKC,MAAM+vB,WAAahwB,KAAK8sB,mBAC9B9sB,KAAKC,MAAMgwB,WAAajwB,KAAK+uB,cAC7B/uB,KAAKkuB,cACLluB,KAAKuuB,aACLvuB,KAAKkvB,qBACLlvB,KAAKovB,yBAAyBC,MAliBhC,EAAAvZ,aAAe,CACpBoa,UAAW,EACX9D,eAAgB,EAChB9C,QAAS,CAAC,GAAI,GAAI,GAAI,IACtBqB,UAAW,G,qaChDA,SAASwF,EAAV,GAAwD,IAA9B,MAAEjD,GAA4B,EAAlBjZ,EAAkB,eACpE,MAAMmc,EAAS,CAAC,SAAOjZ,KAAM,SAAOkZ,SAAU,WAC9C,OACE,gBAACC,EAAA,EAAI,iBAAKrc,GACR,wBACEiD,EAAE,wKACFlL,MAAO,CAAEwH,KAAM4c,EAAOlD,IAAUkD,EAAO,OCDhC,MAAM,UAAyB,gBAA9C,c,oBACE,KAAAlb,YAAc,KACRlV,KAAKC,MAAMswB,cACbvwB,KAAKC,MAAMswB,aAAavwB,KAAKC,MAAMY,SAIvC,SACE,MAAM2vB,EAA0C,MAA3BxwB,KAAKC,MAAMswB,aAC1BE,EAAc,EAClB,CAAE,mCAAoCD,GACtCxwB,KAAKC,MAAMU,WAEb,OACE,wBAAMA,UAAW8vB,GACdzwB,KAAKC,MAAMywB,YACV,gBAACC,EAAA,EAAa,CAAChwB,UAAU,iBAEzB,gBAACwvB,EAAe,CAACxvB,UAAU,2BAA2BusB,MAAOltB,KAAKC,MAAMitB,QAE1E,wBAAMvsB,UAAU,eAAeX,KAAKC,MAAMwE,MACzC+rB,GACC,gBAAC,IAAW,CACV7vB,UAAU,sCACVsT,UAAW,CAAE/S,KAAM,IACnBsE,QAASxF,KAAKkV,gB,aC5BX,SAAS0b,EAAmB3wB,GACzC,MAAM,OAAEmH,GAAWnH,EACnB,OACE,uBAAKU,UAAU,8CACb,uBAAKA,UAAU,UACZyG,EAAO7B,IAAI,CAAC0T,EAAOgB,KAClB,MAAM4W,EAAU,YAAc5X,GACxB6X,EACJ,gBAAC,EAAgB,CACf5D,MAAOjT,EACPpZ,OAAQoY,EAAMxU,KACdA,KAAMwU,EAAMkB,eACZoW,aAActwB,EAAMswB,aACpBG,aAAcG,IAGlB,OAAKA,EAUH,wBAAMlwB,UAAU,2BAA2BC,IAAKqY,EAAMxU,MACnDqsB,GATD,gBAACC,EAAA,EAAO,CACNnwB,IAAKqY,EAAMxU,KACX1C,QAAS,YAAU,qDACnB,wBAAMpB,UAAU,4BAA4BmwB,QCzB7C,SAASE,GAAmB,OAAE5pB,IAC3C,OACE,uBAAKzG,UAAU,0BACZyG,EAAO7B,IAAI,CAAC0T,EAAOgB,IAClB,gBAAC,EAAgB,CACftZ,UAAU,mCACVusB,MAAOjT,EACPrZ,IAAKqY,EAAMxU,KACX5D,OAAQoY,EAAMxU,KACdA,KAAMwU,EAAMkB,mB,sBCPP,SAAS8W,GAAsB,KAAExsB,EAAF,MAAQyoB,EAAR,eAAe/S,EAAf,MAA+B7Z,IAC3E,OACE,sBAAIK,UAAU,8BAA8BC,IAAK6D,GAC/C,sBAAI9D,UAAU,QACZ,gBAACwvB,EAAe,CAACxvB,UAAU,eAAeusB,MAAOA,KAEnD,sBAAIvsB,UAAU,6DAA6DL,GAC3E,0BAAK6Z,ICNI,SAAS+W,GAA8B,aACpDC,EADoD,gBAEpDjqB,EAFoD,WAGpDkqB,IAEA,MAAMC,EAAYnqB,EAAgB4G,KAAKzN,GAA8B,oBAAnBA,EAAQQ,QACpD2M,EAAWtG,EAAgB4G,KAAKzN,GAA8B,aAAnBA,EAAQQ,QACzD,KAAKwwB,GAAcA,EAAU3pB,QAAQ0pB,IAAgB5jB,GAAaA,EAAS9F,QAAQ0pB,IACjF,OAAO,KAET,MAAME,EAAiBD,EAAU3pB,QAAQ0pB,GAAY9wB,MAC/CixB,EAAgB/jB,EAAS9F,QAAQ0pB,GAAY9wB,MACnD,OACE,6BACG6wB,GACC,0BACE,sBAAIxwB,UAAU,mCAAmC6wB,QAAS,GACxD,6BAILF,GACC,sBAAI3wB,UAAU,+BACZ,sBAAIA,UAAU,4DAA4D6wB,QAAS,GAChF,wBAAcF,EAAgB,cAEjC,0BAAK,YAAU,iCAGlBC,GACC,sBAAI5wB,UAAU,+BACZ,sBAAIA,UAAU,4DAA4D6wB,QAAS,GAChF,wBAAcD,EAAe,YAEhC,0BAAK,YAAU,2BClCV,SAASE,GAAiC,aACvDN,EADuD,gBAEvDjqB,EAFuD,WAGvDkqB,IAEA,MAAMM,EAAqBxqB,EAAgB4G,KACzCzN,GAA8B,6BAAnBA,EAAQQ,QAErB,IAAK6wB,IAAuBA,EAAmBhqB,QAAQ0pB,GACrD,OAAO,KAET,MAAMO,EAA0BD,EAAmBhqB,QAAQ0pB,GAAY9wB,MACvE,OAAKqxB,EAIH,6BACGR,GACC,0BACE,sBAAIxwB,UAAU,mCAAmC6wB,QAAS,GACxD,6BAIN,sBAAI7wB,UAAU,+BACZ,sBAAIA,UAAU,4DAA4D6wB,QAAS,GAChF,wBAAcG,EAAyB,YAE1C,0BAAK,YAAU,2CAfZ,K,aChBI,SAASC,GAA4B,aAAET,EAAF,OAAgB3qB,IAClE,OACE,6BACG2qB,GACC,0BACE,sBAAIxwB,UAAU,mCAAmC6wB,QAAS,GACxD,6BAIN,sBAAI7wB,UAAU,+BACZ,sBAAI6wB,QAAS,GACVhrB,EAAOjB,IAAIK,GACV,uBAAKjF,UAAU,uBAAuBC,IAAKgF,EAAMhF,KAC/C,gBAAC6kB,EAAA,EAAU,CAAC7f,MAAOA,EAAO8f,UAAU,QAK3CyL,GACC,0BACE,sBAAIxwB,UAAU,mCAAmC6wB,QAAS,GACxD,8B,aChBZ,MAAMK,GAAgC,CACpC5Z,KAAM,qBACNE,gBAAiB,kBACjBD,YAAa,gBAGA,SAAS4Z,GAA4B7xB,GAClD,MAAM+B,EAAS/B,EAAMiH,gBAAgB4G,KACnCzN,GAAWA,EAAQQ,SAAWgxB,GAAc5xB,EAAMwE,OAEpD,IAAKzC,IAAWA,EAAO0F,QAAQzH,EAAMmxB,YACnC,OAAO,KAET,MAAMW,EAAc/vB,EAAO0F,QAAQzH,EAAMmxB,YAAY9wB,MACrD,OACE,sBAAIK,UAAU,qCAAqCC,IAAKX,EAAMwE,MAC5D,sBAAI9D,UAAU,QACZ,gBAACwvB,EAAe,CAACxvB,UAAU,eAAeusB,MAAOjtB,EAAMitB,SAEzD,sBAAIvsB,UAAU,2BACZ,wBAAMA,UAAU,gCAAgCV,EAAMK,OACrDyxB,GAAe,gBAAChb,EAAA,EAAM,CAACpW,UAAU,cAAcyF,OAAO,EAAM9F,MAAOyxB,KAEtE,0BAAK9xB,EAAMka,iBCXF,MAAM,WAAuB,gBAC1C,gBACE,MAAM,WAAEiX,GAAepxB,KAAKC,MAE5B,OAAOD,KAAKC,MAAMmH,OAAO7B,IAAI,CAAC0T,EAAOgB,KACnC,MAAMd,EAAQF,EAAMC,KAAKkY,GACzB,OAAKjY,IAAWA,EAAMC,GAAiB,IAAZD,EAAMC,EACxB,KAELpZ,KAAKC,MAAM8G,QAAU,IAErB,gBAAC+qB,GAA2B,CAC1B5E,MAAOjT,EACPrZ,IAAKqY,EAAMxU,KACXyC,gBAAiBlH,KAAKC,MAAMiH,gBAC5BzC,KAAMwU,EAAMxU,KACZ2sB,WAAYA,EACZjX,eAAgBlB,EAAMkB,eACtB7Z,MAAON,KAAKC,MAAM+xB,YAAY7Y,EAAMC,KAKtC,gBAAC6X,EAAqB,CACpB/D,MAAOjT,EACPrZ,IAAKqY,EAAMxU,KACXA,KAAMwU,EAAMxU,KACZ0V,eAAgBlB,EAAMkB,eACtB7Z,MAAON,KAAKC,MAAM+xB,YAAY7Y,EAAMC,OAO9C,SACE,MAAM,OAAE5S,EAAF,gBAAUU,EAAV,WAA2BkqB,GAAepxB,KAAKC,MAErD,IAAIuqB,EAAOxqB,KAAKC,MAAMgyB,WAAa,GAC/B1e,EAAY,IAAe2e,SAC3B1H,EAAOxqB,KAAKC,MAAMkyB,WA1CJ,IA0CiC,KACjD3H,GA3CgB,IA4ChBjX,EAAY,IAAe6e,SAE7B,MAAMC,EAAiBryB,KAAKsyB,gBAAgBxqB,OAAO,KAC7CqpB,EAAekB,EAAeptB,OAAS,EAC7C,OACE,gBAAC,IAAK,CACJtE,UAAU,0BACV4S,UAAWA,EACXvH,MAAO,CAAEkB,IAbD,GAaMsd,OAAMzO,MApDN,MAqDd,uBAAKpb,UAAU,0BACb,uBAAKA,UAAU,8CACb,gBAACiG,EAAA,EAAiB,CAACC,KAAM7G,KAAKC,MAAMwpB,gBAEtC,yBAAO9oB,UAAU,aACd6F,GAAUA,EAAOvB,OAAS,GACzB,gBAAC2sB,EAA2B,CAACT,aAAcA,EAAc3qB,OAAQA,IAEnE,6BAAQ6rB,GACc,aAArBryB,KAAKC,MAAM8G,OACV,gBAACmqB,EAA6B,CAC5BC,aAAcA,EACdjqB,gBAAiBA,EACjBkqB,WAAYA,IAGM,iBAArBpxB,KAAKC,MAAM8G,OACV,gBAAC0qB,EAAgC,CAC/BN,aAAcA,EACdjqB,gBAAiBA,EACjBkqB,WAAYA,QCjEb,MAAM,WAAqB,gBAA1C,c,oBACE,KAAA1f,MAAe,GAEf,KAAAsgB,YAAe1F,GACN,wBAAcA,EAAM,uBAAatsB,KAAKC,MAAMsyB,cAGrD,KAAAC,mBAAsBlG,GACb,wBAAcA,EAAMtsB,KAAKC,MAAMsyB,aAGxC,KAAA/G,cAAgB,CAAC/B,EAAqBgJ,EAAsBrB,KAC1DpxB,KAAKC,MAAMurB,cAAc/B,GACzBzpB,KAAK6P,SAAS,CAAE4iB,cAAarB,gBAG/B,SACE,MAAM,OACJ5qB,EADI,MAEJO,EAFI,aAGJ2rB,EAHI,eAIJC,EAJI,SAKJC,EALI,eAMJ5rB,EANI,gBAOJE,EAPI,YAQJqrB,EARI,aASJ9I,EATI,OAUJriB,EAVI,UAWJ6oB,GACEjwB,KAAKC,OACH,WAAEmxB,EAAF,YAAcqB,GAAgBzyB,KAAK0R,MAEzC,OACE,uBAAK/Q,UAAU,2GACZiyB,GAAY5yB,KAAKC,MAAM4yB,mBACtB,gBAACjC,EAAkB,CAACL,aAAcvwB,KAAKC,MAAM4yB,mBAAoBzrB,OAAQA,IAEzE,gBAAC4pB,EAAkB,CAAC5pB,OAAQA,IAG9B,uBAAKzG,UAAU,UACb,gBAACmyB,EAAA,UAAS,KACP,EAAG7mB,SAAQ8P,WACV,2BACE,gBAAC,EAAgB,CACfkS,sBAAsB,EACtBnF,QAAS4J,EACTxG,YAAalsB,KAAKgyB,YAClB/lB,OAAQA,EACRjF,eAAgBA,EAChBzC,WAAYguB,EACZ9I,aAAcA,EACdriB,OAAQA,EACR6oB,UAAWA,EACX1oB,UAAWorB,EACXlH,mBAAoBzrB,KAAKC,MAAMwrB,mBAC/BD,cAAexrB,KAAKwrB,cACpBN,WAAYlrB,KAAKC,MAAM8yB,gBACvBhX,MAAOA,SAES/a,IAAjByoB,QACgBzoB,IAAfowB,QACgBpwB,IAAhByxB,GACE,gBAAC,GAAc,CACbjsB,OAAQA,EACRwrB,YAAahyB,KAAKwyB,mBAClBzrB,MAAOA,EACPorB,WAAYpW,EACZ7U,gBAAiBA,EACjBuiB,aAAcA,EACdriB,OAAQA,EACRgqB,WAAYA,EACZa,WAAYQ,S,OC1EnB,MAAM,WAAsB,gBACzC,YAAYxyB,GACVsP,MAAMtP,GAYR,KAAA+yB,sBAAwB,KACtB,MAAM,aAAEvJ,GAAiBzpB,KAAK0R,OACxB,SAAE5K,GAAa9G,KAAKC,MAC1B,GAAI6G,GAAY2iB,EAAc,CAC5B,MAAMnjB,EAAWQ,EAASgH,KAAK/F,GAAKA,EAAElB,KAAK+iB,YAAcH,EAAaG,WACtE,GAAItjB,EACF,OAAOA,EAASE,OAGpB,MAAO,IAGT,KAAAglB,cAAiB/B,IACfzpB,KAAK6P,SAAS,CAAE4Z,kBAxBhBzpB,KAAK0R,MAAQ,CACX+X,aAAcxpB,EAAMwpB,cAIxB,0BAA0BhF,GACnB,IAAQA,EAAUgF,aAAczpB,KAAKC,MAAMwpB,eAC9CzpB,KAAK6P,SAAS,CAAE4Z,aAAchF,EAAUgF,eAoB5C,SACE,MAAM,MAAE1iB,EAAF,QAASE,EAAT,OAAkBG,GAAWpH,KAAKC,MAClC2yB,EAAW,YAAc7rB,GAE/B,GAAIE,EACF,OACE,uBAAKtG,UAAU,2GACb,uBAAKA,UAAU,eACb,gBAAC0H,EAAA,EAAe,CAACpB,QAASA,MAMlC,IAAK,YAAeG,GAClB,OACE,uBAAKzG,UAAU,2GACb,uBAAKA,UAAU,mDACb,uBACEuL,IAAI,GACJvL,UAAU,eACVsL,OAAQ,GACRE,IAAG,UAAK,uBAAL,gCAEL,uBAAKxL,UAAU,iCAAiCqL,MAAO,CAAEI,SAAU,MAChE,YACCwmB,EACI,4CACA,oCAOhB,MAAMpsB,EAASxG,KAAKgzB,wBACd/C,EAAY,CAAC,IAAUziB,SAAU,IAAU8K,cAAc5N,SAAS3D,GACxE,OACE,uBAAKpG,UAAU,kFACZX,KAAKC,MAAMoH,OAAO9B,IAAI,CAAC0tB,EAAahZ,IACnC,gBAAC,GAAY,CACXzT,OAAQA,EACRO,MAAOA,EACP2rB,aAAc1yB,KAAKC,MAAMyyB,aACzBC,eAAgB3yB,KAAKC,MAAM0yB,eAC3BC,SAAUA,EACVhyB,IAAKqZ,EACLjT,eAAgBhH,KAAKC,MAAM+G,eAC3BE,gBAAiBlH,KAAKC,MAAMiH,gBAC5BqrB,YAAa,YAAoBU,GACjCJ,mBAAoB7yB,KAAKC,MAAM4yB,mBAC/BpJ,aAAczpB,KAAK0R,MAAM+X,aACzBriB,OAAQ6rB,EACRhD,UAAWA,EACX8C,gBAAiB/yB,KAAKC,MAAM8yB,gBAC5BtH,mBAAoBzrB,KAAKC,MAAMwrB,mBAC/BD,cAAexrB,KAAKwrB,qB,gkBCnGjB,SAAS0H,EAAV,GAIa,IAJiB,SAC1CnP,EAD0C,kBAE1CoP,GAEyB,EADtBlzB,EACsB,sCACrB+kB,EAA8B,GAsBlC,OApBI/kB,EAAM6jB,iBAAiB7e,QAAU,EACnC+f,EACE,gBAACrc,EAAA,EAAK,CAAChI,UAAU,sCAAsC6H,QAAQ,QAC5D,YAAU,mDAGN2qB,GAAqBA,EAAkBluB,OAAS,IACzD+f,EACE,gBAACrc,EAAA,EAAK,CAAChI,UAAU,sCAAsC6H,QAAQ,QAC5D,YACC,gDACA2qB,EACG5tB,IAAKzF,GAAiB,YAAU,cAAeA,IAC/CszB,OACAvhB,KAAK,SAOd,uBAAKlR,UAAU,sBACb,gBAAC0yB,EAAA,EAAW,CACVtO,kBAAkB,EAClBD,eAAgB7kB,EAAM6jB,iBAAiB7e,OAAS,EAChD8e,SAAUA,EACVE,eAAgBhkB,EAAMgkB,eACtBe,WAAYA,EACZvB,SAAUxjB,EAAMwjB,SAChBnW,SAAWkV,GAAiBuB,EAASrZ,SAAS8X,IAASviB,EAAMqN,SAASkV,GACtEoB,WAAY3jB,EAAM2jB,WAClB4B,YAAa,YAAU,0BACvBrD,YAAaliB,EAAMkiB,YACnB2B,iBAAkB7jB,EAAM6jB,oBCjCjB,MAAM,UAAuB,gBAA5C,c,oBACE,KAAApS,MAAe,CACbvK,QAAS,GACT9E,MAAO,GACPixB,gBAAiB,IAGnB,KAAArP,eAAiB,CAAC5hB,EAAeyhB,IACxBA,EAAiBhc,OAAOma,GAC7BjiB,KAAKuzB,8BAA8BtR,GAChClf,cACA2H,SAASrI,EAAMU,gBAItB,KAAAywB,sBAAwB,EACpBL,oBAAmBhsB,UAASmsB,mBAC9BjxB,IAEO8E,EACJW,OAAOjH,KAEJA,EAAO4yB,QACP,uBAAa5yB,EAAOD,MACpB,CAAC,OAAQ,WAAW8J,SAAS7J,EAAOf,OACpCwzB,EAAgB5oB,SAAS7J,EAAOD,OAC/B,YAAuBC,GACrBkC,cACA2H,SAASrI,EAAMU,oBAIhBowB,GAAqBA,EAAkBluB,OAAS,IAC3CkuB,EAAkBzoB,SAAS7J,EAAOf,QAI5CyF,IAAI1E,GAAUA,EAAOD,KAG1B,KAAA8yB,2BAA6B,CAACvsB,EAAqBmsB,KACjD,MAAM/lB,EAAW+lB,GAAmBtzB,KAAKC,MAAMqzB,gBAC/C,OAAOnsB,EAAQW,OAAOjH,GAAU0M,EAAS7C,SAAS7J,EAAOD,MAAM2E,IAAI1E,GAAUA,EAAOD,MAGtF,KAAA2yB,8BAAiC3yB,IAC/B,MAAMC,EAAS,IAAKb,KAAKC,MAAMkH,QAAS,CAAEvG,QAC1C,YAAkBI,IAAXH,EAAuBD,EAAM,YAAuBC,IAG7D,KAAA4iB,SAAYphB,IACVrC,KAAK6P,SAAS,CAAExN,UACTmO,QAAQmjB,WAGjB,KAAArmB,SAAYzM,IACVb,KAAKC,MAAM2zB,UAAU/yB,GACrBb,KAAK6P,SAAS6B,IACL,CACL4hB,gBAAiB,IAAO,IAAI5hB,EAAM4hB,gBAAiBzyB,IACnDsG,QAASnH,KAAKwzB,sBAAsBxzB,KAAKC,MAAOyR,EAAMrP,WAK5D,KAAAuhB,WAAc/iB,IACZb,KAAKC,MAAMswB,aAAa1vB,GACxBb,KAAK6P,SAAS6B,IACL,CACLvK,QAAS,IAAO,IAAIuK,EAAMvK,QAAStG,IACnCyyB,gBAAiB5hB,EAAM4hB,gBAAgBxrB,OAAOyF,GAAYA,IAAa1M,OAK7E,SACE,MAAM,MAAEwB,GAAUrC,KAAK0R,MACjBmiB,EAAkB7zB,KAAKwzB,sBAAsBxzB,KAAKC,MAAOoC,GACzDixB,EAAkBtzB,KAAK0zB,2BAC3B1zB,KAAKC,MAAMkH,QACXnH,KAAKC,MAAMqzB,iBAEb,OACE,gBAACQ,EAAA,EAAQ,CACPnzB,UAAU,uBACVozB,cAAc,EACdC,qBAAqB,EACrBjyB,QACE,gBAACmxB,EAAmB,CAClBnP,SAAU8P,EACV5P,eAAgBjkB,KAAKikB,eACrBkP,kBAAmBnzB,KAAKC,MAAMkzB,kBAC9B1P,SAAUzjB,KAAKyjB,SACfnW,SAAUtN,KAAKsN,SACfsW,WAAY5jB,KAAK4jB,WACjBzB,YAAaF,GAAWjiB,KAAKuzB,8BAA8BtR,GAC3D6B,iBAAkBwP,KAGtB,gBAAC,IAAM,CAAC3yB,UAAU,eAChB,wBAAMA,UAAU,6BACb,YAAU,uCAEb,gBAACszB,EAAA,EAAY,CAACtzB,UAAU,mC,oBC3GnB,MAAM,UAAqB,gBAA1C,c,oBACE,KAAAwR,kBAAqB+hB,IACfA,EAAO5zB,QAAUN,KAAKC,MAAM8G,OAC9B/G,KAAKC,MAAMgI,YAAYisB,EAAO5zB,QAIlC,SACE,MAAM,gBACJ6zB,EADI,UAEJxzB,EAFI,MAGJoG,EAHI,QAIJI,EAJI,kBAKJgsB,EALI,mBAMJN,EANI,gBAOJS,EAAkB,IAChBtzB,KAAKC,MAIHm0B,EAFQ,iBAAkCpzB,IAApBmzB,QAAwDnzB,IAAvB6xB,GAEjCttB,IAAIzF,IAAI,CAClCyB,MAAO,YAAU,0BAA2BzB,GAC5CQ,MAAOR,KAGT,OACE,uBAAKa,UAAW,IAAWA,EAAW,sBACpC,gBAACuT,EAAA,EAAM,CACLvT,UAAU,yBACVyT,WAAW,EACXmR,SAAUvlB,KAAKmS,kBACf9S,QAAS+0B,EACTC,YAAY,EACZ/zB,MAAOyG,IAER,YAAcA,SACO/F,IAApBmzB,QACuBnzB,IAAvB6xB,GACE,gBAAC,EAAc,CACbe,UAAWO,EACXxzB,UAAU,wBACVwG,QAASA,EACTgsB,kBAAmBA,EACnB5C,aAAcsC,EACdS,gBAAiBA,Q,sIC5ChB,SAASgB,EAA+Br0B,GACrD,MAAM,OAAEyL,EAAF,UAAU9L,EAAV,UAAqB20B,EAArB,WAAgCC,EAAhC,aAA4CC,EAA5C,oBAA0DC,GAAwBz0B,EAElF00B,EAAuB,CAACC,GAAS,IAEnC,qBACEC,SAAU,CAACj1B,EAAU6E,KAAMiH,aAAM,EAANA,EAAQjH,KAAM,kBAAkBqD,OAAOyG,KAAOA,GAAGsD,KAAK,OACjF+D,KAAM,YAAahW,EAAUgB,IAAK8K,aAAM,EAANA,EAAQjH,MAC1CqwB,OAAO,SAAQ,YACL,uCACVC,IAAI,uBACHH,EACG,YAAU,iBACV,YACE,4BACA,YAAU,YAAah1B,EAAU6G,WAAW1D,gBA0BxD,OAAO0xB,EACL,gBAACX,EAAA,EAAQ,CACP/xB,QACE,sBAAIpB,UAAU,QACZ,0BAAKg0B,GAAqB,IAC1B,0BAzByB,MAC/B,IAAKD,EACH,OACE,wBAAM/zB,UAAU,gBAAgB,YAAU,2CAI9C,MAAMq0B,EAAiBR,EACnB,iCACA,+BACES,EAAiBT,EAAav0B,EAAMi1B,qBAAuBj1B,EAAMk1B,mBACjEC,EAAuB,YAAU,mBAAoBb,GAAWxxB,cAEtE,OACE,qBAAG6S,KAAK,IAAIpQ,QAASyvB,EAAc,YAAY,wCAC5C,YAAwBD,EAAgBI,KAUlCC,MAGT,gBAAC,IAAM,CAAC10B,UAAU,mBACf,YACC,0BACA,YAAU,YAAaf,EAAU6G,YAEnC,gBAACwtB,EAAA,EAAY,CAACtzB,UAAU,wCAI5Bg0B,ICjDG,MAAM,UAA+B,gBAA5C,c,oBACE,KAAAnlB,SAAU,EACV,KAAAkC,MAAe,GAcf,KAAA4jB,iBAAmB1lB,UACjB,MAAM,UAAEhQ,EAAF,OAAa8L,GAAW1L,KAAKC,MAE7BiG,QAAe,YAAgBtG,EAAUgB,IAAK8K,aAAM,EAANA,EAAQjH,MAAMkY,MAAM,QAEpE3c,KAAKwP,SACPxP,KAAK6P,SAAS,CAAE3J,SAAQ8I,eAAe,KAI3C,KAAAmmB,mBAAsBX,IACpB,MAAM,UAAE50B,GAAcI,KAAKC,OACrB,OAAEiG,GAAWlG,KAAK0R,MAElBsjB,EAAiBR,EACnB,uCACA,yCACEY,EAAuB,YAC3B,oBACAlvB,aAAM,EAANA,EAAQqvB,sBAAsBrvB,aAAM,EAANA,EAAQsvB,kBAAmB,IACzDzyB,cACI0yB,EAAuB,YAAU,YAAa71B,EAAU6G,WAAW1D,cAEzE,OAAA4U,EAAA,GACE,YAAwBqd,EAAgBI,EAAsBK,IAGhEz1B,KAAKs1B,oBAGP,KAAAI,gBAAkB9lB,UAChB,MAAM,UAAEhQ,EAAF,OAAa8L,GAAW1L,KAAKC,YAE7B,YAAuBL,EAAUgB,IAAK8K,aAAM,EAANA,EAAQjH,MAEpDzE,KAAKm1B,oBAAmB,IAG1B,KAAAQ,kBAAoB/lB,UAClB,MAAM,UAAEhQ,EAAF,OAAa8L,GAAW1L,KAAKC,YAE7B,YAA2BL,EAAUgB,IAAK8K,aAAM,EAANA,EAAQjH,MAExDzE,KAAKm1B,oBAAmB,IAvD1B,oBACEn1B,KAAKwP,SAAU,EACWxP,KAAKC,MAAM0S,SAASijB,WAAWlrB,SAAS,IAAmBwH,YAEnFlS,KAAKs1B,mBAIT,uBACEt1B,KAAKwP,SAAU,EAiDjB,SACE,MAAM,YAAEzG,EAAF,UAAenJ,EAAf,OAA0B8L,GAAW1L,KAAKC,OAC1C,OAAEiG,EAAF,cAAU8I,GAAkBhP,KAAK0R,MAEvC,GAAI1C,IAAkB9I,GAAWwF,IAAWA,EAAOoF,kBACjD,OAAO,KAGT,MAAM4jB,EAAsB,YAAW3rB,MAAkBA,EAAY8sB,MAErE,OACE,gBAACvB,EAA8B,CAC7B5oB,OAAQA,EACR9L,UAAWA,EACX20B,UAAWruB,EAAOqvB,oBAAsBrvB,EAAOsvB,gBAC/ChB,WAAYtuB,EAAOsuB,WACnBC,aAAcvuB,EAAOuuB,aACrBC,oBAAqBA,EACrBS,mBAAoBn1B,KAAK01B,gBACzBR,qBAAsBl1B,KAAK21B,qBAUpB,WAAA7sB,EAAA,GAAgB,YAJN4I,IAAD,CACtBiB,SAAUjB,EAAMiB,WAGa,CAAyB","file":"js/280.m.c5654c2a.chunk.js","sourcesContent":["var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { getLeakValue } from '../../../components/measure/utils';\nimport DrilldownLink from '../../../components/shared/DrilldownLink';\nimport { translate } from '../../../helpers/l10n';\nimport { findMeasure, formatMeasure } from '../../../helpers/measures';\nimport { BranchLike } from '../../../types/branch-like';\nimport {\n  getMeasurementIconClass,\n  getMeasurementLabelKeys,\n  getMeasurementLinesMetricKey,\n  getMeasurementMetricKey,\n  MeasurementType\n} from '../utils';\n\ninterface Props {\n  branchLike?: BranchLike;\n  centered?: boolean;\n  component: T.Component;\n  measures: T.MeasureEnhanced[];\n  type: MeasurementType;\n  useDiffMetric?: boolean;\n}\n\nexport default class MeasurementLabel extends React.Component<Props> {\n  getLabelText = () => {\n    const { branchLike, component, measures, type, useDiffMetric = false } = this.props;\n    const { expandedLabelKey, labelKey } = getMeasurementLabelKeys(type, useDiffMetric);\n    const linesMetric = getMeasurementLinesMetricKey(type, useDiffMetric);\n    const measure = findMeasure(measures, linesMetric);\n\n    if (!measure) {\n      return translate(labelKey);\n    } else {\n      const value = useDiffMetric ? getLeakValue(measure) : measure.value;\n\n      return (\n        <FormattedMessage\n          defaultMessage={translate(expandedLabelKey)}\n          id={expandedLabelKey}\n          values={{\n            count: (\n              <DrilldownLink\n                branchLike={branchLike}\n                className=\"big\"\n                component={component.key}\n                metric={linesMetric}>\n                {formatMeasure(value, 'SHORT_INT')}\n              </DrilldownLink>\n            )\n          }}\n        />\n      );\n    }\n  };\n\n  render() {\n    const { branchLike, centered, component, measures, type, useDiffMetric = false } = this.props;\n    const iconClass = getMeasurementIconClass(type);\n    const metric = getMeasurementMetricKey(type, useDiffMetric);\n    const measure = findMeasure(measures, metric);\n\n    let value;\n    if (measure) {\n      value = useDiffMetric ? getLeakValue(measure) : measure.value;\n    }\n\n    if (value === undefined) {\n      return (\n        <div className=\"display-flex-center\">\n          <span aria-label={translate('no_data')} className=\"overview-measures-empty-value\" />\n          <span className=\"big-spacer-left\">{this.getLabelText()}</span>\n        </div>\n      );\n    }\n\n    const icon = React.createElement(iconClass, { size: 'big', value: Number(value) });\n    const link = (\n      <DrilldownLink\n        branchLike={branchLike}\n        className=\"overview-measures-value text-light\"\n        component={component.key}\n        metric={metric}>\n        {formatMeasure(value, 'PERCENT', { decimals: 2, omitExtraDecimalZeros: true })}\n      </DrilldownLink>\n    );\n    const label = this.getLabelText();\n\n    return centered ? (\n      <div className=\"display-flex-column flex-1\">\n        <div className=\"display-flex-center display-flex-justify-center\">\n          <span className=\"big-spacer-right\">{icon}</span>\n          {link}\n        </div>\n        <div className=\"spacer-top text-center\">{label}</div>\n      </div>\n    ) : (\n      <div className=\"display-flex-center\">\n        <span className=\"big-spacer-right\">{icon}</span>\n        <div className=\"display-flex-column\">\n          <span>{link}</span>\n          <span className=\"spacer-top\">{label}</span>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport HelpTooltip from '../../../components/controls/HelpTooltip';\nimport { getLeakValue } from '../../../components/measure/utils';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { translate } from '../../../helpers/l10n';\nimport { findMeasure, formatMeasure, localizeMetric } from '../../../helpers/measures';\nimport { getComponentIssuesUrl, getComponentSecurityHotspotsUrl } from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\nimport { IssueType } from '../../../types/issues';\nimport { getIssueIconClass, getIssueMetricKey } from '../utils';\n\nexport interface IssueLabelProps {\n  branchLike?: BranchLike;\n  component: T.Component;\n  helpTooltip?: string;\n  measures: T.MeasureEnhanced[];\n  type: IssueType;\n  useDiffMetric?: boolean;\n}\n\nexport function IssueLabel(props: IssueLabelProps) {\n  const { branchLike, component, helpTooltip, measures, type, useDiffMetric = false } = props;\n  const metric = getIssueMetricKey(type, useDiffMetric);\n  const measure = findMeasure(measures, metric);\n  const iconClass = getIssueIconClass(type);\n\n  let value;\n  if (measure) {\n    value = useDiffMetric ? getLeakValue(measure) : measure.value;\n  }\n\n  const params = {\n    ...getBranchLikeQuery(branchLike),\n    resolved: 'false',\n    types: type,\n    sinceLeakPeriod: useDiffMetric ? 'true' : 'false'\n  };\n\n  return (\n    <>\n      {value === undefined ? (\n        <span aria-label={translate('no_data')} className=\"overview-measures-empty-value\" />\n      ) : (\n        <Link\n          className=\"overview-measures-value text-light\"\n          to={\n            type === IssueType.SecurityHotspot\n              ? getComponentSecurityHotspotsUrl(component.key, params)\n              : getComponentIssuesUrl(component.key, params)\n          }>\n          {formatMeasure(value, 'SHORT_INT')}\n        </Link>\n      )}\n      {React.createElement(iconClass, { className: 'big-spacer-left little-spacer-right' })}\n      {localizeMetric(metric)}\n      {helpTooltip && <HelpTooltip className=\"little-spacer-left\" overlay={helpTooltip} />}\n    </>\n  );\n}\n\nexport default React.memo(IssueLabel);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { getLeakValue, getRatingTooltip } from '../../../components/measure/utils';\nimport DrilldownLink from '../../../components/shared/DrilldownLink';\nimport Rating from '../../../components/ui/Rating';\nimport { findMeasure } from '../../../helpers/measures';\nimport { BranchLike } from '../../../types/branch-like';\nimport { IssueType } from '../../../types/issues';\nimport { getIssueRatingMetricKey, getIssueRatingName } from '../utils';\n\nexport interface IssueRatingProps {\n  branchLike?: BranchLike;\n  component: T.Component;\n  measures: T.MeasureEnhanced[];\n  type: IssueType;\n  useDiffMetric?: boolean;\n}\n\nfunction renderRatingLink(props: IssueRatingProps) {\n  const { branchLike, component, useDiffMetric = false, measures, type } = props;\n  const rating = getIssueRatingMetricKey(type, useDiffMetric);\n  const measure = findMeasure(measures, rating);\n\n  if (!rating || !measure) {\n    return (\n      <div className=\"padded\">\n        <Rating value={undefined} />\n      </div>\n    );\n  }\n\n  const value = measure && (useDiffMetric ? getLeakValue(measure) : measure.value);\n  const tooltip = value && getRatingTooltip(rating, Number(value));\n\n  return (\n    <Tooltip overlay={tooltip}>\n      <span>\n        <DrilldownLink\n          branchLike={branchLike}\n          className=\"link-no-underline\"\n          component={component.key}\n          metric={rating}>\n          <Rating value={value} />\n        </DrilldownLink>\n      </span>\n    </Tooltip>\n  );\n}\n\nexport function IssueRating(props: IssueRatingProps) {\n  const { type } = props;\n\n  return (\n    <>\n      <span className=\"flex-1 big-spacer-right text-right\">{getIssueRatingName(type)}</span>\n      {renderRatingLink(props)}\n    </>\n  );\n}\n\nexport default React.memo(IssueRating);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport IssueTypeIcon from '../../../components/icons/IssueTypeIcon';\nimport Measure from '../../../components/measure/Measure';\nimport DrilldownLink from '../../../components/shared/DrilldownLink';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { translate } from '../../../helpers/l10n';\nimport { formatMeasure, isDiffMetric } from '../../../helpers/measures';\nimport {\n  getComponentIssuesUrl,\n  getComponentSecurityHotspotsUrl,\n  Location\n} from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\nimport { IssueType } from '../../../types/issues';\nimport { MetricKey } from '../../../types/metrics';\nimport { QualityGateStatusConditionEnhanced } from '../../../types/quality-gates';\n\ninterface Props {\n  branchLike?: BranchLike;\n  component: Pick<T.Component, 'key'>;\n  condition: QualityGateStatusConditionEnhanced;\n}\n\nexport default class QualityGateCondition extends React.PureComponent<Props> {\n  getIssuesUrl = (sinceLeakPeriod: boolean, customQuery: T.Dict<string>) => {\n    const query: T.Dict<string | undefined> = {\n      resolved: 'false',\n      ...getBranchLikeQuery(this.props.branchLike),\n      ...customQuery\n    };\n    if (sinceLeakPeriod) {\n      Object.assign(query, { sinceLeakPeriod: 'true' });\n    }\n    return getComponentIssuesUrl(this.props.component.key, query);\n  };\n\n  getUrlForSecurityHotspot(sinceLeakPeriod: boolean) {\n    const query: T.Dict<string | undefined> = {\n      ...getBranchLikeQuery(this.props.branchLike)\n    };\n    if (sinceLeakPeriod) {\n      Object.assign(query, { sinceLeakPeriod: 'true' });\n    }\n    return getComponentSecurityHotspotsUrl(this.props.component.key, query);\n  }\n\n  getUrlForCodeSmells(sinceLeakPeriod: boolean) {\n    return this.getIssuesUrl(sinceLeakPeriod, { types: 'CODE_SMELL' });\n  }\n\n  getUrlForBugsOrVulnerabilities(type: string, sinceLeakPeriod: boolean) {\n    const RATING_TO_SEVERITIES_MAPPING = [\n      'BLOCKER,CRITICAL,MAJOR,MINOR',\n      'BLOCKER,CRITICAL,MAJOR',\n      'BLOCKER,CRITICAL',\n      'BLOCKER'\n    ];\n\n    const { condition } = this.props;\n    const threshold = condition.level === 'ERROR' ? condition.error : condition.warning;\n\n    return this.getIssuesUrl(sinceLeakPeriod, {\n      types: type,\n      severities: RATING_TO_SEVERITIES_MAPPING[Number(threshold) - 1]\n    });\n  }\n\n  wrapWithLink(children: React.ReactNode) {\n    const { branchLike, component, condition } = this.props;\n\n    const className = classNames(\n      'overview-quality-gate-condition',\n      `overview-quality-gate-condition-${condition.level.toLowerCase()}`\n    );\n\n    const metricKey = condition.measure.metric.key;\n\n    const METRICS_TO_URL_MAPPING: T.Dict<() => Location> = {\n      [MetricKey.reliability_rating]: () =>\n        this.getUrlForBugsOrVulnerabilities(IssueType.Bug, false),\n      [MetricKey.new_reliability_rating]: () =>\n        this.getUrlForBugsOrVulnerabilities(IssueType.Bug, true),\n      [MetricKey.security_rating]: () =>\n        this.getUrlForBugsOrVulnerabilities(IssueType.Vulnerability, false),\n      [MetricKey.new_security_rating]: () =>\n        this.getUrlForBugsOrVulnerabilities(IssueType.Vulnerability, true),\n      [MetricKey.sqale_rating]: () => this.getUrlForCodeSmells(false),\n      [MetricKey.new_maintainability_rating]: () => this.getUrlForCodeSmells(true),\n      [MetricKey.security_hotspots_reviewed]: () => this.getUrlForSecurityHotspot(false),\n      [MetricKey.new_security_hotspots_reviewed]: () => this.getUrlForSecurityHotspot(true)\n    };\n\n    return METRICS_TO_URL_MAPPING[metricKey] ? (\n      <Link className={className} to={METRICS_TO_URL_MAPPING[metricKey]()}>\n        {children}\n      </Link>\n    ) : (\n      <DrilldownLink\n        branchLike={branchLike}\n        className={className}\n        component={component.key}\n        metric={condition.measure.metric.key}\n        sinceLeakPeriod={condition.period != null}>\n        {children}\n      </DrilldownLink>\n    );\n  }\n\n  render() {\n    const { condition } = this.props;\n    const { measure } = condition;\n    const { metric } = measure;\n\n    const isDiff = isDiffMetric(metric.key);\n\n    const threshold = (condition.level === 'ERROR' ? condition.error : condition.warning) as string;\n    const actual = (condition.period ? measure.period?.value : measure.value) as string;\n\n    let operator = translate('quality_gates.operator', condition.op);\n\n    if (metric.type === 'RATING') {\n      operator = translate('quality_gates.operator', condition.op, 'rating');\n    }\n\n    return this.wrapWithLink(\n      <div className=\"overview-quality-gate-condition-container display-flex-center\">\n        <div className=\"overview-quality-gate-condition-value text-center spacer-right\">\n          <Measure\n            decimals={2}\n            metricKey={measure.metric.key}\n            metricType={measure.metric.type}\n            value={actual}\n          />\n        </div>\n\n        <div>\n          <span className=\"overview-quality-gate-condition-metric little-spacer-right\">\n            <IssueTypeIcon className=\"little-spacer-right\" query={metric.key} />\n            {metric.name}\n          </span>\n          {!isDiff && condition.period != null && (\n            <span className=\"overview-quality-gate-condition-period text-ellipsis little-spacer-right\">\n              {translate('quality_gates.conditions.new_code')}\n            </span>\n          )}\n          <span className=\"little-spacer-top small text-muted\">\n            {operator} {formatMeasure(threshold, metric.type)}\n          </span>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { ButtonLink } from '../../../components/controls/buttons';\nimport ChevronDownIcon from '../../../components/icons/ChevronDownIcon';\nimport { translateWithParameters } from '../../../helpers/l10n';\nimport { BranchLike } from '../../../types/branch-like';\nimport { QualityGateStatusConditionEnhanced } from '../../../types/quality-gates';\nimport QualityGateCondition from './QualityGateCondition';\n\nconst LEVEL_ORDER = ['ERROR', 'WARN'];\n\nexport interface QualityGateConditionsProps {\n  branchLike?: BranchLike;\n  component: Pick<T.Component, 'key'>;\n  collapsible?: boolean;\n  failedConditions: QualityGateStatusConditionEnhanced[];\n}\n\nconst MAX_CONDITIONS = 5;\n\nexport function QualityGateConditions(props: QualityGateConditionsProps) {\n  const { branchLike, collapsible, component, failedConditions } = props;\n  const [collapsed, toggleCollapsed] = React.useState(Boolean(collapsible));\n\n  if (failedConditions.length === 0) {\n    return null;\n  }\n\n  const sortedConditions = sortBy(failedConditions, condition =>\n    LEVEL_ORDER.indexOf(condition.level)\n  );\n\n  let renderConditions;\n  let renderCollapsed;\n  if (collapsed && sortedConditions.length > MAX_CONDITIONS) {\n    renderConditions = sortedConditions.slice(0, MAX_CONDITIONS);\n    renderCollapsed = true;\n  } else {\n    renderConditions = sortedConditions;\n    renderCollapsed = false;\n  }\n\n  return (\n    <div\n      className=\"overview-quality-gate-conditions-list\"\n      id=\"overview-quality-gate-conditions-list\">\n      {renderConditions.map(condition => (\n        <QualityGateCondition\n          branchLike={branchLike}\n          component={component}\n          condition={condition}\n          key={condition.measure.metric.key}\n        />\n      ))}\n      {renderCollapsed && (\n        <ButtonLink\n          className=\"overview-quality-gate-conditions-list-collapse\"\n          onClick={() => toggleCollapsed(!collapsed)}>\n          {translateWithParameters(\n            'overview.X_more_failed_conditions',\n            sortedConditions.length - MAX_CONDITIONS\n          )}\n          <ChevronDownIcon className=\"little-spacer-left\" />\n        </ButtonLink>\n      )}\n    </div>\n  );\n}\n\nexport default React.memo(QualityGateConditions);\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".overview{animation:fadeIn .5s forwards}.overview-panel{min-height:100%}.overview-panel-content{background:#fff;border:1px solid #e6e6e6}.overview-panel-title{text-transform:uppercase;font-weight:600;font-size:12px;margin-bottom:8px}.overview-panel-padded{padding:16px}.overview-panel-big-padded{padding:24px}.overview-panel-huge-padded{padding:40px}.overview-measures-row{min-height:105px;box-sizing:border-box}.overview-measures-row+.overview-measures-row{border-top:1px solid #e6e6e6}.overview-measures-value{line-height:1;font-size:36px;white-space:nowrap}.overview-measures-empty-value{height:1px;width:16px;background:#333}.overview-measures-aside{flex-basis:200px;box-sizing:border-box}.overview-measures-tab{width:128px}.overview-measures-emphasis{background:#f5f9fc}.overview-quality-gate-badge-large{padding:16px;color:#fff;box-sizing:border-box}.overview-quality-gate-badge-large.failed{background:#d4333f}.overview-quality-gate-badge-large.success{background:#0a0;height:160px}.overview-quality-gate-badge-large h3{color:#fff}.overview-quality-gate-conditions{padding-bottom:16px}.overview-quality-gate-conditions-project-name{padding:8px 0 8px 16px;font-size:16px;background:#e6e6e6}.overview-quality-gate-conditions-section-title{padding:16px 16px 8px;border-bottom:1px solid #e6e6e6;margin:0;font-size:13px}.overview-quality-gate-conditions-list{margin-bottom:16px}.overview-quality-gate-conditions-list-collapse{margin:16px 0}.overview-quality-gate-condition,.overview-quality-gate-condition:hover{display:block;color:#333;border:none;transition:background-color .3s ease}.overview-quality-gate-condition:hover{background-color:#ecf6fe}.overview-quality-gate-condition-container{padding:12px 8px 12px 24px;border-bottom:1px solid #e6e6e6}.overview-quality-gate-condition-value{flex:0 0 20%;line-height:1;font-size:16px}.overview-quality-gate-condition-value span{display:inline-block;vertical-align:top}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.pr-overview{max-width:1020px;margin:0 auto}.pr-overview.has-conditions{max-width:1260px}.pr-overview-failed-conditions{flex:0 0 240px}.pr-overview .overview-quality-gate-condition:first-of-type{margin-top:0}.pr-overview .overview-quality-gate-condition{margin-top:12px;background-color:#fff;border-left:5px solid;border-top-right-radius:2px;border-bottom-right-radius:2px}.pr-overview .overview-quality-gate-condition-error{border-color:#d4333f}.pr-overview .overview-quality-gate-condition-warn{border-color:#ed7d20}.pr-overview .overview-quality-gate-condition:focus .overview-quality-gate-condition-container,.pr-overview .overview-quality-gate-condition:hover .overview-quality-gate-condition-container{border-color:inherit}.pr-overview .overview-quality-gate-condition-metric,.pr-overview .overview-quality-gate-condition-period{display:block;max-width:125px;line-height:16px;font-size:12px}.pr-overview .overview-quality-gate-condition-container{min-width:150px;min-height:52px;padding:8px;border-top:1px solid #e6e6e6;border-right:1px solid #e6e6e6;transition:border-color .3s ease}.pr-overview .overview-quality-gate-condition-value{font-size:24px}.pr-overview .overview-quality-gate-badge-large{width:240px;min-height:160px;color:hsla(0,0%,100%,.62)}.pr-pverview .overview-measures-row{min-height:85px}.pr-overview .overview-measures-aside{flex-basis:270px}@media (max-width:1200px){.pr-overview .overview-measures-aside{flex-basis:220px}}.overview-panel .activity-graph-legends{text-align:right;margin-top:-30px}.overview-panel .activity-graph-new-code-legend{position:relative;z-index:3;width:12px;overflow:hidden;margin-top:1px;margin-left:16px;text-indent:-9999px}.overview-panel .activity-graph-new-code-legend:after{margin:0}.overview-analysis{color:#666}.overview-analysis+.overview-analysis{margin-top:16px}.overview-activity-events{display:flex;flex-direction:column;align-items:flex-start}.overview-analysis-event{display:inline-block}.overview-analysis-event.badge{border-radius:2px;font-weight:700;font-size:12px;letter-spacing:0;overflow:hidden;text-overflow:ellipsis}.overview-analysis-event+.overview-analysis-event{margin-top:4px}.overview-panel .activity-graph-container{min-height:200px;padding-bottom:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./DismissableAlert.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".dismissable-alert-banner .dismissable-alert-content{max-width:1320px}.dismissable-alert-banner .button-icon{height:16px;width:16px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport Level from '../../../components/ui/Level';\nimport { translate } from '../../../helpers/l10n';\nimport { isDefinitionChangeEvent } from '../../projectActivity/components/DefinitionChangeEventInner';\nimport { isRichQualityGateEvent } from '../../projectActivity/components/RichQualityGateEventInner';\n\ninterface Props {\n  event: T.AnalysisEvent;\n}\n\nexport function Event({ event }: Props) {\n  if (event.category === 'VERSION') {\n    return (\n      <span\n        className=\"overview-analysis-event analysis-version text-ellipsis max-width-80\"\n        title={`${translate('version')} ${event.name}`}>\n        {event.name}\n      </span>\n    );\n  }\n\n  const eventCategory = translate('event.category', event.category);\n  if (isDefinitionChangeEvent(event)) {\n    return (\n      <div className=\"overview-analysis-event\">\n        <span className=\"note\">{eventCategory}</span>\n      </div>\n    );\n  }\n\n  if (isRichQualityGateEvent(event)) {\n    return (\n      <div className=\"overview-analysis-event\">\n        <span className=\"note\">{eventCategory}:</span>{' '}\n        {event.qualityGate.stillFailing ? (\n          <FormattedMessage\n            defaultMessage={translate('event.quality_gate.still_x')}\n            id=\"event.quality_gate.still_x\"\n            values={{ status: <Level level={event.qualityGate.status} small={true} /> }}\n          />\n        ) : (\n          <Level level={event.qualityGate.status} small={true} />\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"overview-analysis-event\">\n      <span className=\"note text-ellipsis width-80\">{eventCategory}:</span>{' '}\n      {event.description ? (\n        <strong title={event.description}>{event.name}</strong>\n      ) : (\n        <strong>{event.name}</strong>\n      )}\n    </div>\n  );\n}\n\nexport default React.memo(Event);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport DateTimeFormatter from '../../../components/intl/DateTimeFormatter';\nimport { translate } from '../../../helpers/l10n';\nimport { ComponentQualifier } from '../../../types/component';\nimport Event from './Event';\n\nexport interface AnalysisProps {\n  analysis: T.Analysis;\n  qualifier: string;\n}\n\nexport function Analysis({ analysis, ...props }: AnalysisProps) {\n  const sortedEvents = sortBy(\n    analysis.events,\n    // versions first\n    event => (event.category === 'VERSION' ? 0 : 1),\n    // then the rest sorted by category\n    'category'\n  );\n\n  // use `TRK` for all components but applications\n  const qualifier =\n    props.qualifier === ComponentQualifier.Application\n      ? ComponentQualifier.Application\n      : ComponentQualifier.Project;\n\n  return (\n    <li className=\"overview-analysis\">\n      <div className=\"small little-spacer-bottom\">\n        <strong>\n          <DateTimeFormatter date={analysis.date} />\n        </strong>\n      </div>\n\n      {sortedEvents.length > 0 ? (\n        <div className=\"overview-activity-events\">\n          {sortedEvents.map(event => (\n            <Event event={event} key={event.key} />\n          ))}\n        </div>\n      ) : (\n        <span className=\"note\">{translate('project_activity.analyzed', qualifier)}</span>\n      )}\n    </li>\n  );\n}\n\nexport default React.memo(Analysis);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport GraphsHeader from '../../../components/activity-graph/GraphsHeader';\nimport GraphsHistory from '../../../components/activity-graph/GraphsHistory';\nimport {\n  DEFAULT_GRAPH,\n  generateSeries,\n  getDisplayedHistoryMetrics,\n  splitSeriesInGraphs\n} from '../../../components/activity-graph/utils';\nimport ActivityLink from '../../../components/common/ActivityLink';\nimport DeferredSpinner from '../../../components/ui/DeferredSpinner';\nimport { parseDate } from '../../../helpers/dates';\nimport { translate } from '../../../helpers/l10n';\nimport { BranchLike } from '../../../types/branch-like';\nimport { GraphType, MeasureHistory } from '../../../types/project-activity';\nimport Analysis from './Analysis';\n\nexport interface ActivityPanelProps {\n  analyses?: T.Analysis[];\n  branchLike?: BranchLike;\n  component: Pick<T.Component, 'key' | 'qualifier'>;\n  graph?: GraphType;\n  leakPeriodDate?: Date;\n  loading?: boolean;\n  measuresHistory: MeasureHistory[];\n  metrics: T.Metric[];\n  onGraphChange: (graph: GraphType) => void;\n}\n\nconst MAX_ANALYSES_NB = 5;\nconst MAX_GRAPH_NB = 2;\nconst MAX_SERIES_PER_GRAPH = 3;\n\nexport function ActivityPanel(props: ActivityPanelProps) {\n  const {\n    analyses = [],\n    branchLike,\n    component,\n    graph = DEFAULT_GRAPH,\n    leakPeriodDate,\n    loading,\n    measuresHistory,\n    metrics\n  } = props;\n\n  const series = generateSeries(\n    measuresHistory,\n    graph,\n    metrics,\n    getDisplayedHistoryMetrics(graph, [])\n  );\n  const graphs = splitSeriesInGraphs(series, MAX_GRAPH_NB, MAX_SERIES_PER_GRAPH);\n  let shownLeakPeriodDate;\n  if (leakPeriodDate !== undefined) {\n    const startDate = measuresHistory.reduce((oldest: Date, { history }) => {\n      if (history.length > 0) {\n        const date = parseDate(history[0].date);\n        return oldest.getTime() > date.getTime() ? date : oldest;\n      } else {\n        return oldest;\n      }\n    }, new Date());\n    shownLeakPeriodDate =\n      startDate.getTime() > leakPeriodDate.getTime() ? startDate : leakPeriodDate;\n  }\n\n  const filteredAnalyses = analyses.filter(a => a.events.length > 0).slice(0, MAX_ANALYSES_NB);\n\n  return (\n    <div className=\"overview-panel big-spacer-top\" data-test=\"overview__activity-panel\">\n      <h2 className=\"overview-panel-title\">{translate('overview.activity')}</h2>\n\n      <div className=\"overview-panel-content\">\n        <div className=\"display-flex-row\">\n          <div className=\"display-flex-column flex-1\">\n            <div aria-hidden={true} className=\"overview-panel-padded display-flex-column flex-1\">\n              <GraphsHeader graph={graph} metrics={metrics} updateGraph={props.onGraphChange} />\n              <GraphsHistory\n                analyses={[]}\n                graph={graph}\n                graphs={graphs}\n                leakPeriodDate={shownLeakPeriodDate}\n                loading={Boolean(loading)}\n                measuresHistory={measuresHistory}\n                series={series}\n              />\n            </div>\n\n            <div className=\"overview-panel-padded bordered-top text-right\">\n              <ActivityLink branchLike={branchLike} component={component.key} graph={graph} />\n            </div>\n          </div>\n\n          <div className=\"overview-panel-padded bordered-left width-30\">\n            <div data-test=\"overview__activity-analyses\">\n              <DeferredSpinner\n                className=\"spacer-top spacer-left\"\n                loading={analyses.length === 0 && loading}>\n                {analyses.length === 0 ? (\n                  <p className=\"spacer-top spacer-left note\">{translate('no_results')}</p>\n                ) : (\n                  <ul className=\"spacer-top spacer-left\">\n                    {filteredAnalyses.map(analysis => (\n                      <Analysis\n                        analysis={analysis}\n                        key={analysis.key}\n                        qualifier={component.qualifier}\n                      />\n                    ))}\n                  </ul>\n                )}\n              </DeferredSpinner>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default React.memo(ActivityPanel);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { ButtonIcon } from '../../components/controls/buttons';\nimport ClearIcon from '../../components/icons/ClearIcon';\nimport { Alert, AlertProps } from '../../components/ui/Alert';\nimport { translate } from '../../helpers/l10n';\nimport { get, save } from '../../helpers/storage';\nimport './DismissableAlert.css';\n\nexport interface DismissableAlertProps extends AlertProps {\n  alertKey: string;\n  children?: React.ReactNode;\n  className?: string;\n}\n\nexport const DISMISSED_ALERT_STORAGE_KEY = 'sonarqube.dismissed_alert';\n\nexport default function DismissableAlert(props: DismissableAlertProps) {\n  const { alertKey, children, className, display = 'banner', variant } = props;\n  const [show, setShow] = React.useState(false);\n\n  React.useEffect(() => {\n    if (get(DISMISSED_ALERT_STORAGE_KEY, alertKey) !== 'true') {\n      setShow(true);\n    }\n  }, [alertKey]);\n\n  const hideAlert = () => {\n    save(DISMISSED_ALERT_STORAGE_KEY, 'true', alertKey);\n  };\n\n  return !show ? null : (\n    <Alert\n      className={classNames(`dismissable-alert-${display}`, className)}\n      display={display}\n      variant={variant}>\n      <div className=\"display-flex-center dismissable-alert-content\">\n        <div className=\"flex-1\">{children}</div>\n        <ButtonIcon\n          aria-label={translate('alert.dismiss')}\n          onClick={() => {\n            hideAlert();\n            setShow(false);\n          }}>\n          <ClearIcon size={12} thin={true} />\n        </ButtonIcon>\n      </div>\n    </Alert>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { withCurrentUser } from '../../../components/hoc/withCurrentUser';\nimport DismissableAlert from '../../../components/ui/DismissableAlert';\nimport { translate } from '../../../helpers/l10n';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { ProjectAlmBindingResponse } from '../../../types/alm-settings';\nimport { ComponentQualifier } from '../../../types/component';\nimport { PULL_REQUEST_DECORATION_BINDING_CATEGORY } from '../../settings/components/AdditionalCategoryKeys';\n\nexport interface FirstAnalysisNextStepsNotifProps {\n  branchesEnabled?: boolean;\n  component: T.Component;\n  currentUser: T.CurrentUser;\n  detectedCIOnLastAnalysis?: boolean;\n  projectBinding?: ProjectAlmBindingResponse;\n}\n\nexport function FirstAnalysisNextStepsNotif(props: FirstAnalysisNextStepsNotifProps) {\n  const {\n    component,\n    currentUser,\n    branchesEnabled,\n    detectedCIOnLastAnalysis,\n    projectBinding\n  } = props;\n\n  if (!isLoggedIn(currentUser) || component.qualifier !== ComponentQualifier.Project) {\n    return null;\n  }\n\n  const showConfigurePullRequestDecoNotif = branchesEnabled && projectBinding === undefined;\n  const showConfigureCINotif =\n    detectedCIOnLastAnalysis !== undefined ? !detectedCIOnLastAnalysis : false;\n\n  if (!showConfigureCINotif && !showConfigurePullRequestDecoNotif) {\n    return null;\n  }\n\n  const showOnlyConfigureCI = showConfigureCINotif && !showConfigurePullRequestDecoNotif;\n  const showOnlyConfigurePR = showConfigurePullRequestDecoNotif && !showConfigureCINotif;\n  const showBoth = showConfigureCINotif && showConfigurePullRequestDecoNotif;\n  const isProjectAdmin = component.configuration?.showSettings;\n  const tutorialsLink = (\n    <Link\n      to={{\n        pathname: '/tutorials',\n        query: { id: component.key }\n      }}>\n      {translate('overview.project.next_steps.links.set_up_ci')}\n    </Link>\n  );\n  const projectSettingsLink = (\n    <Link\n      to={{\n        pathname: '/project/settings',\n        query: {\n          id: component.key,\n          category: PULL_REQUEST_DECORATION_BINDING_CATEGORY\n        }\n      }}>\n      {translate('overview.project.next_steps.links.project_settings')}\n    </Link>\n  );\n\n  return (\n    <DismissableAlert alertKey={`config_ci_pr_deco.${component.key}`} variant=\"info\">\n      {showOnlyConfigureCI && (\n        <FormattedMessage\n          defaultMessage={translate('overview.project.next_steps.set_up_ci')}\n          id=\"overview.project.next_steps.set_up_ci\"\n          values={{\n            link: tutorialsLink\n          }}\n        />\n      )}\n\n      {showOnlyConfigurePR &&\n        (isProjectAdmin ? (\n          <FormattedMessage\n            defaultMessage={translate('overview.project.next_steps.set_up_pr_deco.admin')}\n            id=\"overview.project.next_steps.set_up_pr_deco.admin\"\n            values={{\n              link_project_settings: projectSettingsLink\n            }}\n          />\n        ) : (\n          translate('overview.project.next_steps.set_up_pr_deco')\n        ))}\n\n      {showBoth &&\n        (isProjectAdmin ? (\n          <FormattedMessage\n            defaultMessage={translate('overview.project.next_steps.set_up_pr_deco_and_ci.admin')}\n            id=\"overview.project.next_steps.set_up_pr_deco_and_ci.admin\"\n            values={{\n              link_ci: tutorialsLink,\n              link_project_settings: projectSettingsLink\n            }}\n          />\n        ) : (\n          <FormattedMessage\n            defaultMessage={translate('overview.project.next_steps.set_up_pr_deco_and_ci')}\n            id=\"overview.project.next_steps.set_up_pr_deco_and_ci\"\n            values={{ link_ci: tutorialsLink }}\n          />\n        ))}\n    </DismissableAlert>\n  );\n}\n\nexport default withCurrentUser(FirstAnalysisNextStepsNotif);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DrilldownLink from '../../../components/shared/DrilldownLink';\nimport { getLocalizedMetricName } from '../../../helpers/l10n';\nimport { findMeasure, formatMeasure } from '../../../helpers/measures';\nimport { BranchLike } from '../../../types/branch-like';\nimport { MetricKey } from '../../../types/metrics';\n\nexport interface DrilldownMeasureValueProps {\n  branchLike?: BranchLike;\n  component: T.Component;\n  measures: T.MeasureEnhanced[];\n  metric: MetricKey;\n}\n\nexport function DrilldownMeasureValue(props: DrilldownMeasureValueProps) {\n  const { branchLike, component, measures, metric } = props;\n  const measure = findMeasure(measures, metric);\n\n  let content;\n  if (!measure) {\n    content = <span className=\"overview-measures-value text-light\">-</span>;\n  } else {\n    content = (\n      <span>\n        <DrilldownLink\n          branchLike={branchLike}\n          className=\"overview-measures-value text-light\"\n          component={component.key}\n          metric={metric}>\n          {formatMeasure(measure.value, 'SHORT_INT')}\n        </DrilldownLink>\n      </span>\n    );\n  }\n\n  return (\n    <div className=\"display-flex-column display-flex-center\">\n      {content}\n      <span className=\"spacer-top\">{getLocalizedMetricName({ key: metric })}</span>\n    </div>\n  );\n}\n\nexport default React.memo(DrilldownMeasureValue);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from '../../../components/controls/HelpTooltip';\nimport DateFromNow from '../../../components/intl/DateFromNow';\nimport { translateWithParameters } from '../../../helpers/l10n';\nimport { ApplicationPeriod } from '../../../types/application';\n\nexport interface ApplicationLeakPeriodInfoProps {\n  leakPeriod: ApplicationPeriod;\n}\n\nexport function ApplicationLeakPeriodInfo({ leakPeriod }: ApplicationLeakPeriodInfoProps) {\n  return (\n    <div className=\"note spacer-top display-inline-flex-center\">\n      <DateFromNow date={leakPeriod.date}>\n        {fromNow => translateWithParameters('overview.started_x', fromNow)}\n      </DateFromNow>\n      <HelpTooltip\n        className=\"little-spacer-left\"\n        overlay={translateWithParameters(\n          'overview.max_new_code_period_from_x',\n          leakPeriod.projectName\n        )}\n      />\n    </div>\n  );\n}\n\nexport default React.memo(ApplicationLeakPeriodInfo);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { InjectedIntl, injectIntl } from 'react-intl';\nimport { longFormatterOption } from '../../../components/intl/DateFormatter';\nimport DateFromNow from '../../../components/intl/DateFromNow';\nimport { formatterOption } from '../../../components/intl/DateTimeFormatter';\nimport { translateWithParameters } from '../../../helpers/l10n';\nimport { getPeriodDate, getPeriodLabel } from '../../../helpers/periods';\n\nexport interface ProjectLeakPeriodInfoProps {\n  intl: Pick<InjectedIntl, 'formatDate' | 'formatTime'>;\n  leakPeriod: T.Period;\n}\n\nexport function ProjectLeakPeriodInfo(props: ProjectLeakPeriodInfoProps) {\n  const {\n    intl: { formatDate, formatTime },\n    leakPeriod\n  } = props;\n\n  const leakPeriodLabel = getPeriodLabel(\n    leakPeriod,\n    ['manual_baseline', 'SPECIFIC_ANALYSIS'].includes(leakPeriod.mode)\n      ? (date: string) => formatTime(date, formatterOption)\n      : (date: string) => formatDate(date, longFormatterOption)\n  );\n\n  if (!leakPeriodLabel) {\n    return null;\n  }\n\n  if (leakPeriod.mode === 'days' || leakPeriod.mode === 'NUMBER_OF_DAYS') {\n    return <div className=\"note spacer-top\">{leakPeriodLabel} </div>;\n  }\n\n  const leakPeriodDate = getPeriodDate(leakPeriod);\n\n  if (!leakPeriodDate) {\n    return null;\n  }\n\n  return (\n    <>\n      <div className=\"note spacer-top text-ellipsis\" title={leakPeriodLabel}>\n        {leakPeriodLabel}\n      </div>\n      <DateFromNow date={leakPeriodDate}>\n        {fromNow => (\n          <div className=\"note little-spacer-top\">\n            {translateWithParameters(\n              leakPeriod.mode === 'previous_analysis'\n                ? 'overview.previous_analysis_x'\n                : 'overview.started_x',\n              fromNow\n            )}\n          </div>\n        )}\n      </DateFromNow>\n    </>\n  );\n}\n\nexport default React.memo(injectIntl(ProjectLeakPeriodInfo));\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { isApplicationPeriod } from '../../../helpers/periods';\nimport { ApplicationPeriod } from '../../../types/application';\nimport ApplicationLeakPeriodInfo from './ApplicationLeakPeriodInfo';\nimport ProjectLeakPeriodInfo from './ProjectLeakPeriodInfo';\n\nexport interface LeakPeriodInfoProps {\n  leakPeriod: T.Period | ApplicationPeriod;\n}\n\nexport function LeakPeriodInfo({ leakPeriod }: LeakPeriodInfoProps) {\n  if (isApplicationPeriod(leakPeriod)) {\n    return <ApplicationLeakPeriodInfo leakPeriod={leakPeriod} />;\n  } else {\n    return <ProjectLeakPeriodInfo leakPeriod={leakPeriod} />;\n  }\n}\n\nexport default React.memo(LeakPeriodInfo);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getLeakValue } from '../../../components/measure/utils';\nimport DrilldownLink from '../../../components/shared/DrilldownLink';\nimport { getLocalizedMetricName, translate } from '../../../helpers/l10n';\nimport { findMeasure, formatMeasure, localizeMetric } from '../../../helpers/measures';\nimport { BranchLike } from '../../../types/branch-like';\nimport { MetricKey } from '../../../types/metrics';\n\nexport interface DebtValueProps {\n  branchLike?: BranchLike;\n  component: T.Component;\n  measures: T.MeasureEnhanced[];\n  useDiffMetric?: boolean;\n}\n\nexport function DebtValue(props: DebtValueProps) {\n  const { branchLike, component, measures, useDiffMetric = false } = props;\n  const metric = useDiffMetric ? MetricKey.new_technical_debt : MetricKey.sqale_index;\n  const measure = findMeasure(measures, metric);\n\n  let value;\n  if (measure) {\n    value = useDiffMetric ? getLeakValue(measure) : measure.value;\n  }\n\n  return (\n    <>\n      {value === undefined ? (\n        <span aria-label={translate('no_data')} className=\"overview-measures-empty-value\" />\n      ) : (\n        <DrilldownLink\n          branchLike={branchLike}\n          className=\"overview-measures-value text-light\"\n          component={component.key}\n          metric={metric}>\n          {formatMeasure(value, 'WORK_DUR')}\n        </DrilldownLink>\n      )}\n      <span className=\"big-spacer-left\">\n        {measure ? getLocalizedMetricName(measure.metric, true) : localizeMetric(metric)}\n      </span>\n    </>\n  );\n}\n\nexport default React.memo(DebtValue);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getLeakValue } from '../../../components/measure/utils';\nimport CoverageRating from '../../../components/ui/CoverageRating';\nimport { translate } from '../../../helpers/l10n';\nimport { findMeasure, formatMeasure } from '../../../helpers/measures';\nimport { MetricKey } from '../../../types/metrics';\n\nexport interface SecurityHotspotsReviewedProps {\n  measures: T.MeasureEnhanced[];\n  useDiffMetric?: boolean;\n}\n\nexport default function SecurityHotspotsReviewed(props: SecurityHotspotsReviewedProps) {\n  const { measures, useDiffMetric = false } = props;\n  const metric = useDiffMetric\n    ? MetricKey.new_security_hotspots_reviewed\n    : MetricKey.security_hotspots_reviewed;\n  const measure = findMeasure(measures, metric);\n\n  let value;\n  if (measure) {\n    value = useDiffMetric ? getLeakValue(measure) : measure.value;\n  }\n\n  return (\n    <>\n      {value === undefined ? (\n        <span aria-label={translate('no_data')} className=\"overview-measures-empty-value\" />\n      ) : (\n        <>\n          <CoverageRating value={value} />\n          <span className=\"huge spacer-left\">{formatMeasure(value, 'PERCENT')}</span>\n        </>\n      )}\n      <span className=\"big-spacer-left\">\n        {translate('overview.measures.security_hotspots_reviewed')}\n      </span>\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport { BranchLike } from '../../../types/branch-like';\nimport { ComponentQualifier } from '../../../types/component';\nimport { IssueType } from '../../../types/issues';\nimport IssueLabel from '../components/IssueLabel';\nimport IssueRating from '../components/IssueRating';\nimport DebtValue from './DebtValue';\nimport SecurityHotspotsReviewed from './SecurityHotspotsReviewed';\n\nexport interface MeasuresPanelIssueMeasureRowProps {\n  branchLike?: BranchLike;\n  component: T.Component;\n  isNewCodeTab: boolean;\n  measures: T.MeasureEnhanced[];\n  type: IssueType;\n}\n\nexport default function MeasuresPanelIssueMeasureRow(props: MeasuresPanelIssueMeasureRowProps) {\n  const { branchLike, component, isNewCodeTab, measures, type } = props;\n\n  const isApp = component.qualifier === ComponentQualifier.Application;\n\n  return (\n    <div\n      className=\"display-flex-row overview-measures-row\"\n      data-test={`overview__measures-${type.toString().toLowerCase()}`}>\n      {type === IssueType.CodeSmell ? (\n        <>\n          <div className=\"overview-panel-big-padded flex-1 small display-flex-center big-spacer-left\">\n            <DebtValue\n              branchLike={branchLike}\n              component={component}\n              measures={measures}\n              useDiffMetric={isNewCodeTab}\n            />\n          </div>\n          <div className=\"flex-1 small display-flex-center\">\n            <IssueLabel\n              branchLike={branchLike}\n              component={component}\n              measures={measures}\n              type={type}\n              useDiffMetric={isNewCodeTab}\n            />\n          </div>\n        </>\n      ) : (\n        <div className=\"overview-panel-big-padded flex-1 small display-flex-center big-spacer-left\">\n          <IssueLabel\n            branchLike={branchLike}\n            component={component}\n            helpTooltip={\n              type === IssueType.SecurityHotspot\n                ? translate('metric.security_hotspots.full_description')\n                : undefined\n            }\n            measures={measures}\n            type={type}\n            useDiffMetric={isNewCodeTab}\n          />\n        </div>\n      )}\n      {type === IssueType.SecurityHotspot && (\n        <div className=\"flex-1 small display-flex-center\">\n          <SecurityHotspotsReviewed measures={measures} useDiffMetric={isNewCodeTab} />\n        </div>\n      )}\n      {(!isApp || !isNewCodeTab) && (\n        <div className=\"overview-panel-big-padded overview-measures-aside display-flex-center\">\n          <IssueRating\n            branchLike={branchLike}\n            component={component}\n            measures={measures}\n            type={type}\n            useDiffMetric={isNewCodeTab}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { rawSizes } from '../../../app/theme';\nimport BoxedTabs from '../../../components/controls/BoxedTabs';\nimport ComponentReportActions from '../../../components/controls/ComponentReportActions';\nimport DeferredSpinner from '../../../components/ui/DeferredSpinner';\nimport { translate } from '../../../helpers/l10n';\nimport { findMeasure, isDiffMetric } from '../../../helpers/measures';\nimport { ApplicationPeriod } from '../../../types/application';\nimport { Branch } from '../../../types/branch-like';\nimport { ComponentQualifier } from '../../../types/component';\nimport { IssueType } from '../../../types/issues';\nimport { MetricKey } from '../../../types/metrics';\nimport MeasurementLabel from '../components/MeasurementLabel';\nimport { MeasurementType } from '../utils';\nimport { DrilldownMeasureValue } from './DrilldownMeasureValue';\nimport { LeakPeriodInfo } from './LeakPeriodInfo';\nimport MeasuresPanelIssueMeasureRow from './MeasuresPanelIssueMeasureRow';\nimport MeasuresPanelNoNewCode from './MeasuresPanelNoNewCode';\n\nexport interface MeasuresPanelProps {\n  appLeak?: ApplicationPeriod;\n  branch?: Branch;\n  component: T.Component;\n  loading?: boolean;\n  measures?: T.MeasureEnhanced[];\n  period?: T.Period;\n}\n\nexport enum MeasuresPanelTabs {\n  New,\n  Overall\n}\n\nexport function MeasuresPanel(props: MeasuresPanelProps) {\n  const { appLeak, branch, component, loading, measures = [], period } = props;\n\n  const hasDiffMeasures = measures.some(m => isDiffMetric(m.metric.key));\n  const isApp = component.qualifier === ComponentQualifier.Application;\n  const leakPeriod = isApp ? appLeak : period;\n\n  const [tab, selectTab] = React.useState(MeasuresPanelTabs.New);\n\n  const isNewCodeTab = tab === MeasuresPanelTabs.New;\n\n  React.useEffect(() => {\n    // Open Overall tab by default if there are no new measures.\n    if (loading === false && !hasDiffMeasures && isNewCodeTab) {\n      selectTab(MeasuresPanelTabs.Overall);\n    }\n    // In this case, we explicitly do NOT want to mark tab as a dependency, as\n    // it would prevent the user from selecting it, even if it's empty.\n    /* eslint-disable-next-line react-hooks/exhaustive-deps */\n  }, [loading, hasDiffMeasures]);\n\n  const tabs = [\n    {\n      key: MeasuresPanelTabs.New,\n      label: (\n        <div className=\"text-left overview-measures-tab\">\n          <span className=\"text-bold\">{translate('overview.new_code')}</span>\n          {leakPeriod && <LeakPeriodInfo leakPeriod={leakPeriod} />}\n        </div>\n      )\n    },\n    {\n      key: MeasuresPanelTabs.Overall,\n      label: (\n        <div className=\"text-left overview-measures-tab\">\n          <span className=\"text-bold\" style={{ position: 'absolute', top: 2 * rawSizes.grid }}>\n            {translate('overview.overall_code')}\n          </span>\n        </div>\n      )\n    }\n  ];\n\n  return (\n    <div className=\"overview-panel\" data-test=\"overview__measures-panel\">\n      <div className=\"display-flex-space-between display-flex-start\">\n        <h2 className=\"overview-panel-title\">{translate('overview.measures')}</h2>\n        <ComponentReportActions component={component} branch={branch} />\n      </div>\n\n      {loading ? (\n        <div className=\"overview-panel-content overview-panel-big-padded\">\n          <DeferredSpinner loading={loading} />\n        </div>\n      ) : (\n        <>\n          <BoxedTabs onSelect={selectTab} selected={tab} tabs={tabs} />\n\n          <div className=\"overview-panel-content flex-1 bordered\">\n            {!hasDiffMeasures && isNewCodeTab ? (\n              <MeasuresPanelNoNewCode branch={branch} component={component} period={period} />\n            ) : (\n              <>\n                {[\n                  IssueType.Bug,\n                  IssueType.Vulnerability,\n                  IssueType.SecurityHotspot,\n                  IssueType.CodeSmell\n                ].map((type: IssueType) => (\n                  <MeasuresPanelIssueMeasureRow\n                    branchLike={branch}\n                    component={component}\n                    isNewCodeTab={isNewCodeTab}\n                    key={type}\n                    measures={measures}\n                    type={type}\n                  />\n                ))}\n\n                <div className=\"display-flex-row overview-measures-row\">\n                  {(findMeasure(measures, MetricKey.coverage) ||\n                    findMeasure(measures, MetricKey.new_coverage)) && (\n                    <div\n                      className=\"overview-panel-huge-padded flex-1 bordered-right display-flex-center\"\n                      data-test=\"overview__measures-coverage\">\n                      <MeasurementLabel\n                        branchLike={branch}\n                        centered={isNewCodeTab}\n                        component={component}\n                        measures={measures}\n                        type={MeasurementType.Coverage}\n                        useDiffMetric={isNewCodeTab}\n                      />\n\n                      {tab === MeasuresPanelTabs.Overall && (\n                        <div className=\"huge-spacer-left\">\n                          <DrilldownMeasureValue\n                            branchLike={branch}\n                            component={component}\n                            measures={measures}\n                            metric={MetricKey.tests}\n                          />\n                        </div>\n                      )}\n                    </div>\n                  )}\n                  <div className=\"overview-panel-huge-padded flex-1 display-flex-center\">\n                    <MeasurementLabel\n                      branchLike={branch}\n                      centered={isNewCodeTab}\n                      component={component}\n                      measures={measures}\n                      type={MeasurementType.Duplication}\n                      useDiffMetric={isNewCodeTab}\n                    />\n\n                    {tab === MeasuresPanelTabs.Overall && (\n                      <div className=\"huge-spacer-left\">\n                        <DrilldownMeasureValue\n                          branchLike={branch}\n                          component={component}\n                          measures={measures}\n                          metric={MetricKey.duplicated_blocks}\n                        />\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default React.memo(MeasuresPanel);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { translate } from '../../../helpers/l10n';\nimport { getBaseUrl } from '../../../helpers/system';\nimport { Branch } from '../../../types/branch-like';\nimport { ComponentQualifier } from '../../../types/component';\n\nexport interface MeasuresPanelNoNewCodeProps {\n  branch?: Branch;\n  component: T.Component;\n  period?: T.Period;\n}\n\nexport default function MeasuresPanelNoNewCode(props: MeasuresPanelNoNewCodeProps) {\n  const { branch, component, period } = props;\n\n  const isApp = component.qualifier === ComponentQualifier.Application;\n\n  const hasBadReferenceBranch =\n    !isApp && !!period && !period.date && period.mode === 'REFERENCE_BRANCH';\n  /*\n   * If the period is \"reference branch\"-based, and if there's no date, it means\n   * that we're not lacking a second analysis, but that we'll never have new code because the\n   * selected reference branch is itself, or has disappeared for some reason.\n   * Makes no sense for Apps (project aggregate)\n   */\n  const hasBadNewCodeSettingSameRef = hasBadReferenceBranch && branch?.name === period?.parameter;\n\n  const badExplanationKey = hasBadReferenceBranch\n    ? hasBadNewCodeSettingSameRef\n      ? 'overview.measures.same_reference.explanation'\n      : 'overview.measures.bad_reference.explanation'\n    : 'overview.measures.empty_explanation';\n\n  const showSettingsLink = !!(component.configuration && component.configuration.showSettings);\n\n  return (\n    <div className=\"display-flex-center display-flex-justify-center\" style={{ height: 500 }}>\n      <img\n        alt=\"\" /* Make screen readers ignore this image; it's purely eye candy. */\n        className=\"spacer-right\"\n        height={52}\n        src={`${getBaseUrl()}/images/source-code.svg`}\n      />\n      <div className=\"big-spacer-left text-muted\" style={{ maxWidth: 500 }}>\n        <p className=\"spacer-bottom big-spacer-top big\">{translate(badExplanationKey)}</p>\n        {hasBadNewCodeSettingSameRef ? (\n          showSettingsLink && (\n            <p>\n              <FormattedMessage\n                defaultMessage={translate('overview.measures.bad_setting.link')}\n                id=\"overview.measures.bad_setting.link\"\n                values={{\n                  setting_link: (\n                    <Link\n                      to={{\n                        pathname: '/project/baseline',\n                        query: { id: component.key, ...getBranchLikeQuery(branch) }\n                      }}>\n                      {translate('settings.new_code_period.category')}\n                    </Link>\n                  )\n                }}\n              />\n            </p>\n          )\n        ) : (\n          <p>\n            <FormattedMessage\n              defaultMessage={translate('overview.measures.empty_link')}\n              id=\"overview.measures.empty_link\"\n              values={{\n                learn_more_link: (\n                  <Link to=\"/documentation/user-guide/clean-as-you-code/\">\n                    {translate('learn_more')}\n                  </Link>\n                )\n              }}\n            />\n          </p>\n        )}\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Alert } from '../../../components/ui/Alert';\nimport { getBranchLikeDisplayName, isMainBranch } from '../../../helpers/branch-like';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { BranchLike } from '../../../types/branch-like';\nimport { ComponentQualifier } from '../../../types/component';\nimport { MetricKey } from '../../../types/metrics';\n\ninterface Props {\n  branchLike?: BranchLike;\n  component: T.Component;\n  measures?: T.MeasureEnhanced[];\n}\n\nexport function NoCodeWarning({ branchLike, component, measures }: Props) {\n  const isApp = component.qualifier === ComponentQualifier.Application;\n\n  /* eslint-disable no-lonely-if */\n  // - Is App\n  //     - No measures, OR measures, but no projects => empty\n  //     - Else => no lines of code\n  // - Else\n  //   - No measures => empty\n  //       - Main branch?\n  //       - LLB?\n  //       - No branch info?\n  //   - Measures, but no ncloc (checked in isEmpty()) => no lines of code\n  //       - Main branch?\n  //       - LLB?\n  //       - No branch info?\n  let title = translate('overview.project.no_lines_of_code');\n  if (isApp) {\n    if (\n      measures === undefined ||\n      measures.find(measure => measure.metric.key === MetricKey.projects) === undefined\n    ) {\n      title = translate('portfolio.app.empty');\n    } else {\n      title = translate('portfolio.app.no_lines_of_code');\n    }\n  } else {\n    if (measures === undefined || measures.length === 0) {\n      if (isMainBranch(branchLike)) {\n        title = translate('overview.project.main_branch_empty');\n      } else if (branchLike !== undefined) {\n        title = translateWithParameters(\n          'overview.project.branch_X_empty',\n          getBranchLikeDisplayName(branchLike)\n        );\n      } else {\n        title = translate('overview.project.empty');\n      }\n    } else {\n      if (isMainBranch(branchLike)) {\n        title = translate('overview.project.main_branch_no_lines_of_code');\n      } else if (branchLike !== undefined) {\n        title = translateWithParameters(\n          'overview.project.branch_X_no_lines_of_code',\n          getBranchLikeDisplayName(branchLike)\n        );\n      }\n    }\n  }\n  /* eslint-enable no-lonely-if */\n\n  return (\n    <Alert display=\"banner\" variant=\"warning\">\n      {title}\n    </Alert>\n  );\n}\n\nexport default React.memo(NoCodeWarning);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport { isDiffMetric } from '../../../helpers/measures';\nimport { BranchLike } from '../../../types/branch-like';\nimport { ComponentQualifier } from '../../../types/component';\nimport { QualityGateStatus } from '../../../types/quality-gates';\nimport { QualityGateConditions } from '../components/QualityGateConditions';\n\nexport interface QualityGatePanelSectionProps {\n  branchLike?: BranchLike;\n  component: Pick<T.Component, 'key' | 'qualifier'>;\n  qgStatus: QualityGateStatus;\n}\n\nexport function QualityGatePanelSection(props: QualityGatePanelSectionProps) {\n  const { component, qgStatus } = props;\n  const newCodeFailedConditions = qgStatus.failedConditions.filter(c => isDiffMetric(c.metric));\n  const overallFailedConditions = qgStatus.failedConditions.filter(c => !isDiffMetric(c.metric));\n\n  if (newCodeFailedConditions.length === 0 && overallFailedConditions.length === 0) {\n    return null;\n  }\n\n  const showName = component.qualifier === ComponentQualifier.Application;\n\n  return (\n    <div className=\"overview-quality-gate-conditions\">\n      {showName && (\n        <h3 className=\"overview-quality-gate-conditions-project-name\">{qgStatus.name}</h3>\n      )}\n\n      {newCodeFailedConditions.length > 0 && (\n        <>\n          <h4 className=\"overview-quality-gate-conditions-section-title\">\n            {translate('quality_gates.conditions.new_code')}\n          </h4>\n          <QualityGateConditions\n            component={qgStatus}\n            branchLike={qgStatus.branchLike}\n            failedConditions={newCodeFailedConditions}\n          />\n        </>\n      )}\n\n      {overallFailedConditions.length > 0 && (\n        <>\n          <h4 className=\"overview-quality-gate-conditions-section-title\">\n            {translate('quality_gates.conditions.overall_code')}\n          </h4>\n          <QualityGateConditions\n            component={qgStatus}\n            branchLike={qgStatus.branchLike}\n            failedConditions={overallFailedConditions}\n          />\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default React.memo(QualityGatePanelSection);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport HelpTooltip from '../../../components/controls/HelpTooltip';\nimport { Alert } from '../../../components/ui/Alert';\nimport DeferredSpinner from '../../../components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { QualityGateStatus } from '../../../types/quality-gates';\nimport QualityGatePanelSection from './QualityGatePanelSection';\n\nexport interface QualityGatePanelProps {\n  component: Pick<T.Component, 'key' | 'qualifier'>;\n  loading?: boolean;\n  qgStatuses?: QualityGateStatus[];\n}\n\nexport function QualityGatePanel(props: QualityGatePanelProps) {\n  const { component, loading, qgStatuses = [] } = props;\n\n  if (qgStatuses === undefined) {\n    return null;\n  }\n\n  const overallLevel = qgStatuses.map(s => s.status).includes('ERROR') ? 'ERROR' : 'OK';\n  const success = overallLevel === 'OK';\n\n  const overallFailedConditionsCount = qgStatuses.reduce(\n    (acc, qgStatus) => acc + qgStatus.failedConditions.length,\n    0\n  );\n\n  const showIgnoredConditionWarning =\n    component.qualifier === 'TRK' &&\n    qgStatuses !== undefined &&\n    qgStatuses.some(p => Boolean(p.ignoredConditions));\n\n  return (\n    <div className=\"overview-panel\" data-test=\"overview__quality-gate-panel\">\n      <h2 className=\"overview-panel-title display-inline-flex-center\">\n        {translate('overview.quality_gate')}{' '}\n        <HelpTooltip\n          className=\"little-spacer-left\"\n          overlay={\n            <div className=\"big-padded-top big-padded-bottom\">\n              {translate('overview.quality_gate.help')}\n            </div>\n          }\n        />\n      </h2>\n\n      {showIgnoredConditionWarning && (\n        <Alert className=\"big-spacer-bottom\" display=\"inline\" variant=\"info\">\n          <span className=\"text-middle\">\n            {translate('overview.quality_gate.ignored_conditions')}\n          </span>\n          <HelpTooltip\n            className=\"spacer-left\"\n            overlay={translate('overview.quality_gate.ignored_conditions.tooltip')}\n          />\n        </Alert>\n      )}\n\n      <div className=\"overview-panel-content\">\n        {loading ? (\n          <div className=\"overview-panel-big-padded\">\n            <DeferredSpinner loading={loading} />\n          </div>\n        ) : (\n          <>\n            <div\n              className={classNames('overview-quality-gate-badge-large', {\n                failed: !success,\n                success\n              })}>\n              <h3 className=\"big-spacer-bottom huge\">{translate('metric.level', overallLevel)}</h3>\n\n              <span className=\"small\">\n                {overallFailedConditionsCount > 0\n                  ? translateWithParameters(\n                      'overview.X_conditions_failed',\n                      overallFailedConditionsCount\n                    )\n                  : translate('overview.quality_gate_all_conditions_passed')}\n              </span>\n            </div>\n\n            {overallFailedConditionsCount > 0 && (\n              <div data-test=\"overview__quality-gate-conditions\">\n                {qgStatuses.map(qgStatus => (\n                  <QualityGatePanelSection\n                    component={component}\n                    key={qgStatus.key}\n                    qgStatus={qgStatus}\n                  />\n                ))}\n              </div>\n            )}\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default React.memo(QualityGatePanel);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport A11ySkipTarget from '../../../app/components/a11y/A11ySkipTarget';\nimport { parseDate } from '../../../helpers/dates';\nimport { ProjectAlmBindingResponse } from '../../../types/alm-settings';\nimport { ApplicationPeriod } from '../../../types/application';\nimport { Branch } from '../../../types/branch-like';\nimport { ComponentQualifier } from '../../../types/component';\nimport { GraphType, MeasureHistory } from '../../../types/project-activity';\nimport { QualityGateStatus } from '../../../types/quality-gates';\nimport ActivityPanel from './ActivityPanel';\nimport FirstAnalysisNextStepsNotif from './FirstAnalysisNextStepsNotif';\nimport { MeasuresPanel } from './MeasuresPanel';\nimport NoCodeWarning from './NoCodeWarning';\nimport QualityGatePanel from './QualityGatePanel';\n\nexport interface BranchOverviewRendererProps {\n  analyses?: T.Analysis[];\n  appLeak?: ApplicationPeriod;\n  branch?: Branch;\n  branchesEnabled?: boolean;\n  component: T.Component;\n  detectedCIOnLastAnalysis?: boolean;\n  graph?: GraphType;\n  loadingHistory?: boolean;\n  loadingStatus?: boolean;\n  measures?: T.MeasureEnhanced[];\n  measuresHistory?: MeasureHistory[];\n  metrics?: T.Metric[];\n  onGraphChange: (graph: GraphType) => void;\n  period?: T.Period;\n  projectBinding?: ProjectAlmBindingResponse;\n  projectIsEmpty?: boolean;\n  qgStatuses?: QualityGateStatus[];\n}\n\nexport function BranchOverviewRenderer(props: BranchOverviewRendererProps) {\n  const {\n    analyses,\n    appLeak,\n    branch,\n    branchesEnabled,\n    component,\n    detectedCIOnLastAnalysis,\n    graph,\n    loadingHistory,\n    loadingStatus,\n    measures,\n    measuresHistory = [],\n    metrics = [],\n    onGraphChange,\n    period,\n    projectBinding,\n    projectIsEmpty,\n    qgStatuses\n  } = props;\n\n  const leakPeriod = component.qualifier === ComponentQualifier.Application ? appLeak : period;\n\n  return (\n    <>\n      <FirstAnalysisNextStepsNotif\n        component={component}\n        branchesEnabled={branchesEnabled}\n        detectedCIOnLastAnalysis={detectedCIOnLastAnalysis}\n        projectBinding={projectBinding}\n      />\n      <div className=\"page page-limited\">\n        <div className=\"overview\">\n          <A11ySkipTarget anchor=\"overview_main\" />\n\n          {projectIsEmpty ? (\n            <NoCodeWarning branchLike={branch} component={component} measures={measures} />\n          ) : (\n            <div className=\"display-flex-row\">\n              <div className=\"width-25 big-spacer-right\">\n                <QualityGatePanel\n                  component={component}\n                  loading={loadingStatus}\n                  qgStatuses={qgStatuses}\n                />\n              </div>\n\n              <div className=\"flex-1\">\n                <div className=\"display-flex-column\">\n                  <MeasuresPanel\n                    appLeak={appLeak}\n                    branch={branch}\n                    component={component}\n                    loading={loadingStatus}\n                    measures={measures}\n                    period={period}\n                  />\n\n                  <ActivityPanel\n                    analyses={analyses}\n                    branchLike={branch}\n                    component={component}\n                    graph={graph}\n                    leakPeriodDate={leakPeriod && parseDate(leakPeriod.date)}\n                    loading={loadingHistory}\n                    measuresHistory={measuresHistory}\n                    metrics={metrics}\n                    onGraphChange={onGraphChange}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default React.memo(BranchOverviewRenderer);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy, uniq } from 'lodash';\nimport * as React from 'react';\nimport { getApplicationDetails, getApplicationLeak } from '../../../api/application';\nimport { getMeasuresWithPeriodAndMetrics } from '../../../api/measures';\nimport { getProjectActivity } from '../../../api/projectActivity';\nimport { getApplicationQualityGate, getQualityGateProjectStatus } from '../../../api/quality-gates';\nimport { getAllTimeMachineData } from '../../../api/time-machine';\nimport {\n  getActivityGraph,\n  getHistoryMetrics,\n  saveActivityGraph\n} from '../../../components/activity-graph/utils';\nimport {\n  getBranchLikeDisplayName,\n  getBranchLikeQuery,\n  isMainBranch,\n  isSameBranchLike\n} from '../../../helpers/branch-like';\nimport { parseDate, toNotSoISOString } from '../../../helpers/dates';\nimport { enhanceConditionWithMeasure, enhanceMeasuresWithMetrics } from '../../../helpers/measures';\nimport {\n  extractStatusConditionsFromApplicationStatusChildProject,\n  extractStatusConditionsFromProjectStatus\n} from '../../../helpers/qualityGates';\nimport { isDefined } from '../../../helpers/types';\nimport { ProjectAlmBindingResponse } from '../../../types/alm-settings';\nimport { ApplicationPeriod } from '../../../types/application';\nimport { Branch, BranchLike } from '../../../types/branch-like';\nimport { ComponentQualifier } from '../../../types/component';\nimport { MetricKey } from '../../../types/metrics';\nimport { GraphType, MeasureHistory } from '../../../types/project-activity';\nimport { QualityGateStatus, QualityGateStatusCondition } from '../../../types/quality-gates';\nimport '../styles.css';\nimport { HISTORY_METRICS_LIST, METRICS } from '../utils';\nimport BranchOverviewRenderer from './BranchOverviewRenderer';\n\ninterface Props {\n  branch?: Branch;\n  branchesEnabled?: boolean;\n  component: T.Component;\n  projectBinding?: ProjectAlmBindingResponse;\n}\n\ninterface State {\n  analyses?: T.Analysis[];\n  appLeak?: ApplicationPeriod;\n  detectedCIOnLastAnalysis?: boolean;\n  graph: GraphType;\n  loadingHistory?: boolean;\n  loadingStatus?: boolean;\n  measures?: T.MeasureEnhanced[];\n  measuresHistory?: MeasureHistory[];\n  metrics?: T.Metric[];\n  period?: T.Period;\n  qgStatuses?: QualityGateStatus[];\n}\n\nexport const BRANCH_OVERVIEW_ACTIVITY_GRAPH = 'sonar_branch_overview.graph';\nexport const NO_CI_DETECTED = 'undetected';\n\n// Get all history data over the past year.\nconst FROM_DATE = toNotSoISOString(new Date().setFullYear(new Date().getFullYear() - 1));\n\nexport default class BranchOverview extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State;\n\n  constructor(props: Props) {\n    super(props);\n\n    const { graph } = getActivityGraph(BRANCH_OVERVIEW_ACTIVITY_GRAPH, props.component.key);\n    this.state = { graph };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadStatus();\n    this.loadHistory();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      this.props.component.key !== prevProps.component.key ||\n      !isSameBranchLike(this.props.branch, prevProps.branch)\n    ) {\n      this.loadStatus();\n      this.loadHistory();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadStatus = () => {\n    if (this.props.component.qualifier === ComponentQualifier.Application) {\n      this.loadApplicationStatus();\n    } else {\n      this.loadProjectStatus();\n    }\n  };\n\n  loadApplicationStatus = async () => {\n    const { branch, component } = this.props;\n    this.setState({ loadingStatus: true });\n    // Start by loading the application quality gate info, as well as the meta\n    // data for the application as a whole.\n    const appStatus = await getApplicationQualityGate({\n      application: component.key,\n      ...getBranchLikeQuery(branch)\n    });\n    const { measures: appMeasures, metrics, period } = await this.loadMeasuresAndMeta(\n      component.key,\n      branch\n    );\n\n    const appBranchName =\n      (branch && !isMainBranch(branch) && getBranchLikeDisplayName(branch)) || undefined;\n\n    const appDetails = await getApplicationDetails(component.key, appBranchName);\n\n    // We also need to load the application leak periods separately.\n    getApplicationLeak(component.key, appBranchName).then(\n      leaks => {\n        if (this.mounted && leaks && leaks.length) {\n          const sortedLeaks = sortBy(leaks, leak => {\n            return new Date(leak.date);\n          });\n          this.setState({\n            appLeak: sortedLeaks[0]\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ appLeak: undefined });\n        }\n      }\n    );\n\n    // We need to load the measures for each project in an application\n    // individually, in order to display all QG conditions correctly. Loading\n    // them at the parent application level will not get all the necessary\n    // information, unfortunately, as they are aggregated.\n    Promise.all(\n      appStatus.projects.map(project => {\n        const projectDetails = appDetails.projects.find(p => p.key === project.key);\n        const projectBranchLike = projectDetails\n          ? { isMain: projectDetails.isMain, name: projectDetails.branch, excludedFromPurge: false }\n          : undefined;\n\n        return this.loadMeasuresAndMeta(\n          project.key,\n          projectBranchLike,\n          // Only load metrics that apply to failing QG conditions; we don't\n          // need the others anyway.\n          project.conditions.filter(c => c.status !== 'OK').map(c => c.metric)\n        ).then(({ measures }) => ({\n          measures,\n          project,\n          projectBranchLike\n        }));\n      })\n    ).then(\n      results => {\n        if (this.mounted) {\n          const qgStatuses = results.map(({ measures = [], project, projectBranchLike }) => {\n            const { key, name, status } = project;\n            const conditions = extractStatusConditionsFromApplicationStatusChildProject(project);\n            const failedConditions = this.getFailedConditions(conditions, measures);\n\n            return {\n              failedConditions,\n              key,\n              name,\n              status,\n              branchLike: projectBranchLike\n            };\n          });\n\n          this.setState({\n            loadingStatus: false,\n            measures: appMeasures,\n            metrics,\n            period,\n            qgStatuses\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loadingStatus: false, qgStatuses: undefined });\n        }\n      }\n    );\n  };\n\n  loadProjectStatus = async () => {\n    const {\n      branch,\n      component: { key, name }\n    } = this.props;\n    this.setState({ loadingStatus: true });\n\n    const projectStatus = await getQualityGateProjectStatus({\n      projectKey: key,\n      ...getBranchLikeQuery(branch)\n    });\n\n    // Get failing condition metric keys. We need measures for them as well to\n    // render them.\n    const metricKeys =\n      projectStatus.conditions !== undefined\n        ? uniq([...METRICS, ...projectStatus.conditions.map(c => c.metricKey)])\n        : METRICS;\n\n    this.loadMeasuresAndMeta(key, branch, metricKeys).then(\n      ({ measures, metrics, period }) => {\n        if (this.mounted && measures) {\n          const { ignoredConditions, status } = projectStatus;\n          const conditions = extractStatusConditionsFromProjectStatus(projectStatus);\n          const failedConditions = this.getFailedConditions(conditions, measures);\n\n          const qgStatus = {\n            ignoredConditions,\n            failedConditions,\n            key,\n            name,\n            status,\n            branchLike: branch\n          };\n\n          this.setState({\n            loadingStatus: false,\n            measures,\n            metrics,\n            period,\n            qgStatuses: [qgStatus]\n          });\n        } else if (this.mounted) {\n          this.setState({ loadingStatus: false, qgStatuses: undefined });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loadingStatus: false, qgStatuses: undefined });\n        }\n      }\n    );\n  };\n\n  loadMeasuresAndMeta = (\n    componentKey: string,\n    branchLike?: BranchLike,\n    metricKeys: string[] = []\n  ) => {\n    return getMeasuresWithPeriodAndMetrics(\n      componentKey,\n      metricKeys.length > 0 ? metricKeys : METRICS,\n      getBranchLikeQuery(branchLike)\n    ).then(({ component: { measures }, metrics, period }) => {\n      return {\n        measures: enhanceMeasuresWithMetrics(measures || [], metrics || []),\n        metrics,\n        period\n      };\n    });\n  };\n\n  loadHistory = () => {\n    this.setState({ loadingHistory: true });\n\n    return Promise.all([this.loadHistoryMeasures(), this.loadAnalyses()]).then(\n      this.doneLoadingHistory,\n      this.doneLoadingHistory\n    );\n  };\n\n  loadHistoryMeasures = () => {\n    const { branch, component } = this.props;\n    const { graph } = this.state;\n\n    const graphMetrics = getHistoryMetrics(graph, []);\n    const metrics = uniq([...HISTORY_METRICS_LIST, ...graphMetrics]);\n\n    return getAllTimeMachineData({\n      ...getBranchLikeQuery(branch),\n      from: FROM_DATE,\n      component: component.key,\n      metrics: metrics.join()\n    }).then(\n      ({ measures }) => {\n        if (this.mounted) {\n          this.setState({\n            measuresHistory: measures.map(measure => ({\n              metric: measure.metric,\n              history: measure.history.map(analysis => ({\n                date: parseDate(analysis.date),\n                value: analysis.value\n              }))\n            }))\n          });\n        }\n      },\n      () => {}\n    );\n  };\n\n  loadAnalyses = () => {\n    const { branch } = this.props;\n\n    return getProjectActivity({\n      ...getBranchLikeQuery(branch),\n      project: this.getTopLevelComponent(),\n      from: FROM_DATE\n    }).then(\n      ({ analyses }) => {\n        if (this.mounted) {\n          this.setState({\n            detectedCIOnLastAnalysis:\n              analyses.length > 0\n                ? analyses[0].detectedCI !== undefined && analyses[0].detectedCI !== NO_CI_DETECTED\n                : undefined,\n            analyses\n          });\n        }\n      },\n      () => {}\n    );\n  };\n\n  getFailedConditions = (\n    conditions: QualityGateStatusCondition[],\n    measures: T.MeasureEnhanced[]\n  ) => {\n    return (\n      conditions\n        .filter(c => c.level !== 'OK')\n        // Enhance them with Metric information, which will be needed\n        // to render the conditions properly.\n        .map(c => enhanceConditionWithMeasure(c, measures))\n        // The enhancement will return undefined if it cannot find the\n        // appropriate measure. Make sure we filter them out.\n        .filter(isDefined)\n    );\n  };\n\n  getTopLevelComponent = () => {\n    const { component } = this.props;\n    let current = component.breadcrumbs.length - 1;\n    while (\n      current > 0 &&\n      !([\n        ComponentQualifier.Project,\n        ComponentQualifier.Portfolio,\n        ComponentQualifier.Application\n      ] as string[]).includes(component.breadcrumbs[current].qualifier)\n    ) {\n      current--;\n    }\n    return component.breadcrumbs[current].key;\n  };\n\n  doneLoadingHistory = () => {\n    if (this.mounted) {\n      this.setState({\n        loadingHistory: false\n      });\n    }\n  };\n\n  handleGraphChange = (graph: GraphType) => {\n    const { component } = this.props;\n    saveActivityGraph(BRANCH_OVERVIEW_ACTIVITY_GRAPH, component.key, graph);\n    this.setState({ graph, loadingHistory: true }, () => {\n      this.loadHistoryMeasures().then(this.doneLoadingHistory, this.doneLoadingHistory);\n    });\n  };\n\n  render() {\n    const { branch, branchesEnabled, component, projectBinding } = this.props;\n    const {\n      analyses,\n      appLeak,\n      detectedCIOnLastAnalysis,\n      graph,\n      loadingStatus,\n      loadingHistory,\n      measures,\n      measuresHistory,\n      metrics,\n      period,\n      qgStatuses\n    } = this.state;\n\n    const projectIsEmpty =\n      loadingStatus === false &&\n      (measures === undefined ||\n        measures.find(measure =>\n          ([MetricKey.lines, MetricKey.new_lines] as string[]).includes(measure.metric.key)\n        ) === undefined);\n\n    return (\n      <BranchOverviewRenderer\n        analyses={analyses}\n        appLeak={appLeak}\n        branch={branch}\n        branchesEnabled={branchesEnabled}\n        component={component}\n        detectedCIOnLastAnalysis={detectedCIOnLastAnalysis}\n        graph={graph}\n        loadingHistory={loadingHistory}\n        loadingStatus={loadingStatus}\n        measures={measures}\n        measuresHistory={measuresHistory}\n        metrics={metrics}\n        onGraphChange={this.handleGraphChange}\n        period={period}\n        projectBinding={projectBinding}\n        projectIsEmpty={projectIsEmpty}\n        qgStatuses={qgStatuses}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Suggestions from '../../../app/components/embed-docs-modal/Suggestions';\nimport { withAppState } from '../../../components/hoc/withAppState';\nimport { Router, withRouter } from '../../../components/hoc/withRouter';\nimport { lazyLoadComponent } from '../../../components/lazyLoadComponent';\nimport { isPullRequest } from '../../../helpers/branch-like';\nimport { ProjectAlmBindingResponse } from '../../../types/alm-settings';\nimport { BranchLike } from '../../../types/branch-like';\nimport { isPortfolioLike } from '../../../types/component';\nimport BranchOverview from '../branches/BranchOverview';\n\nconst EmptyOverview = lazyLoadComponent(() => import('./EmptyOverview'));\nconst PullRequestOverview = lazyLoadComponent(() => import('../pullRequests/PullRequestOverview'));\n\ninterface Props {\n  appState: Pick<T.AppState, 'branchesEnabled'>;\n  branchLike?: BranchLike;\n  branchLikes: BranchLike[];\n  component: T.Component;\n  isInProgress?: boolean;\n  isPending?: boolean;\n  projectBinding?: ProjectAlmBindingResponse;\n  router: Pick<Router, 'replace'>;\n}\n\nexport class App extends React.PureComponent<Props> {\n  isPortfolio = () => {\n    return isPortfolioLike(this.props.component.qualifier);\n  };\n\n  render() {\n    const {\n      appState: { branchesEnabled },\n      branchLike,\n      branchLikes,\n      component,\n      projectBinding\n    } = this.props;\n\n    if (this.isPortfolio()) {\n      return null;\n    }\n\n    return isPullRequest(branchLike) ? (\n      <>\n        <Suggestions suggestions=\"pull_requests\" />\n        <PullRequestOverview branchLike={branchLike} component={component} />\n      </>\n    ) : (\n      <>\n        <Suggestions suggestions=\"overview\" />\n\n        {!component.analysisDate && (\n          <EmptyOverview\n            branchLike={branchLike}\n            branchLikes={branchLikes}\n            component={component}\n            hasAnalyses={this.props.isPending || this.props.isInProgress}\n            projectBinding={projectBinding}\n          />\n        )}\n\n        {component.analysisDate && (\n          <BranchOverview\n            branch={branchLike}\n            branchesEnabled={branchesEnabled}\n            component={component}\n            projectBinding={projectBinding}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nexport default withRouter(withAppState(App));\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { colors } from '../../app/theme';\nimport HelpIcon from '../icons/HelpIcon';\nimport { IconProps } from '../icons/Icon';\nimport './HelpTooltip.css';\nimport Tooltip, { Placement } from './Tooltip';\n\ninterface Props extends Pick<IconProps, 'size'> {\n  className?: string;\n  children?: React.ReactNode;\n  onShow?: () => void;\n  overlay: React.ReactNode;\n  placement?: Placement;\n}\n\nexport default function HelpTooltip({ size = 12, ...props }: Props) {\n  return (\n    <div className={classNames('help-tooltip', props.className)}>\n      <Tooltip\n        mouseLeaveDelay={0.25}\n        onShow={props.onShow}\n        overlay={props.overlay}\n        placement={props.placement}>\n        <span className=\"display-inline-flex-center\">\n          {props.children || <HelpIcon fill={colors.gray71} size={size} />}\n        </span>\n      </Tooltip>\n    </div>\n  );\n}\n\nexport function DarkHelpTooltip({ size = 12, ...props }: Omit<Props, 'children'>) {\n  return (\n    <HelpTooltip {...props}>\n      <HelpIcon fill={colors.transparentBlack} fillInner={colors.white} size={size} />\n    </HelpTooltip>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ReactSelectClass, {\n  ReactAsyncSelectProps,\n  ReactCreatableSelectProps,\n  ReactSelectProps\n} from 'react-select';\nimport { lazyLoadComponent } from '../lazyLoadComponent';\nimport { ClearButton } from './buttons';\nimport './Select.css';\n\nconst ReactSelectLib = import('react-select');\nconst ReactSelect = lazyLoadComponent(() => ReactSelectLib);\nconst ReactCreatable = lazyLoadComponent(() =>\n  ReactSelectLib.then(lib => ({ default: lib.Creatable }))\n);\nconst ReactAsync = lazyLoadComponent(() => ReactSelectLib.then(lib => ({ default: lib.Async })));\n\nfunction renderInput() {\n  return <ClearButton className=\"button-tiny spacer-left text-middle\" iconProps={{ size: 12 }} />;\n}\n\nexport interface WithInnerRef {\n  innerRef?: React.Ref<ReactSelectClass<unknown>>;\n}\n\nexport default function Select({ innerRef, ...props }: WithInnerRef & ReactSelectProps) {\n  // hide the \"x\" icon when select is empty\n  const clearable = props.clearable ? Boolean(props.value) : false;\n  return (\n    <ReactSelect {...props} clearable={clearable} clearRenderer={renderInput} ref={innerRef} />\n  );\n}\n\nexport function Creatable(props: ReactCreatableSelectProps) {\n  return <ReactCreatable {...props} clearRenderer={renderInput} />;\n}\n\nexport function AsyncSelect(props: ReactAsyncSelectProps & WithInnerRef) {\n  return <ReactAsync {...props} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport const formatterOption = {\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric'\n};\n\nexport default function DateTimeFormatter({ children, date }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...formatterOption}>\n      {children}\n    </FormattedDate>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./HelpTooltip.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".help-tooltip{display:inline-flex;align-items:center;vertical-align:middle}.help-toolip-link{display:block;width:12px;height:12px;border:none}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\n/* eslint-disable jsx-a11y/anchor-has-content */\n/* eslint-disable jsx-a11y/control-has-associated-label */\n\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport DeferredSpinner from '../ui/DeferredSpinner';\nimport './Checkbox.css';\n\ninterface Props {\n  checked: boolean;\n  disabled?: boolean;\n  children?: React.ReactNode;\n  className?: string;\n  id?: string;\n  loading?: boolean;\n  onCheck: (checked: boolean, id?: string) => void;\n  right?: boolean;\n  thirdState?: boolean;\n  title?: string;\n}\n\nexport default class Checkbox extends React.PureComponent<Props> {\n  static defaultProps = {\n    thirdState: false\n  };\n\n  handleClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (!this.props.disabled) {\n      this.props.onCheck(!this.props.checked, this.props.id);\n    }\n  };\n\n  render() {\n    const { checked, children, disabled, id, loading, right, thirdState, title } = this.props;\n    const className = classNames('icon-checkbox', {\n      'icon-checkbox-checked': checked,\n      'icon-checkbox-single': thirdState,\n      'icon-checkbox-disabled': disabled\n    });\n\n    if (children) {\n      return (\n        <a\n          aria-checked={checked}\n          className={classNames('link-checkbox', this.props.className, {\n            note: disabled,\n            disabled\n          })}\n          href=\"#\"\n          id={id}\n          onClick={this.handleClick}\n          role=\"checkbox\"\n          title={title}>\n          {right && children}\n          <DeferredSpinner loading={Boolean(loading)}>\n            <i className={className} />\n          </DeferredSpinner>\n          {!right && children}\n        </a>\n      );\n    }\n\n    if (loading) {\n      return <DeferredSpinner />;\n    }\n\n    return (\n      <a\n        aria-checked={checked}\n        className={classNames(className, this.props.className)}\n        href=\"#\"\n        id={id}\n        onClick={this.handleClick}\n        role=\"checkbox\"\n        title={title}\n      />\n    );\n  }\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Select.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".Select{position:relative;display:inline-block;vertical-align:middle;font-size:12px;text-align:left}.Select,.Select div,.Select input,.Select span{box-sizing:border-box}.Select.is-disabled>.Select-control{background-color:#ebebeb!important;border-color:#ddd!important}.Select.is-disabled>.Select-control:hover{box-shadow:none!important}.Select.is-disabled .Select-arrow-zone{cursor:not-allowed!important;pointer-events:none!important}.Select.is-disabled .Select-placeholder,.Select.is-disabled .Select-value{color:#bbb!important}.Select-control{position:relative;display:table;width:100%;height:24px;line-height:22px;border:1px solid #cdcdcd;border-collapse:separate;border-radius:2px;background-color:#fff;color:#333;cursor:default;outline:none;overflow:hidden}.is-searchable.is-open>.Select-control{cursor:text}.is-open>.Select-control{border-bottom-right-radius:0;border-bottom-left-radius:0;background:#fff}.is-open>.Select-control>.Select-arrow{border-color:transparent transparent #999;border-width:0 5px 5px}.is-searchable.is-focused:not(.is-open)>.Select-control{cursor:text}.is-focused:not(.is-open)>.Select-control{border-color:#4b9fd5}.Select-placeholder{color:#666}.Select-placeholder,:not(.Select--multi)>.Select-control .Select-value{bottom:0;left:0;line-height:23px;padding-left:8px;padding-right:24px;position:absolute;right:0;top:0;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.Select-value [class^=icon-]{padding-top:5px}.Select-value img,.Select-value svg{padding-top:3px}.Select-option [class^=icon-],.Select-option img,.Select-option svg{padding-top:2px}.has-value.is-pseudo-focused:not(.Select--multi)>.Select-control>.Select-value .Select-value-label,.has-value:not(.Select--multi)>.Select-control>.Select-value .Select-value-label{color:#333}.has-value.is-pseudo-focused:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label,.has-value:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label{cursor:pointer;text-decoration:none}.has-value.is-pseudo-focused:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label:focus,.has-value.is-pseudo-focused:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label:hover,.has-value:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label:focus,.has-value:not(.Select--multi)>.Select-control>.Select-value a.Select-value-label:hover{color:#007eff;outline:none;text-decoration:underline}.Select-input{vertical-align:top;height:22px;padding-left:8px;padding-right:8px;outline:none}.Select-input>input{background:none transparent;border:0;cursor:default;display:inline-block;font-family:inherit;font-size:12px;height:22px;margin:0;outline:none;padding:0;box-shadow:none;-webkit-appearance:none}.is-focused .Select-input>input{cursor:text}.has-value.is-pseudo-focused .Select-input{opacity:0}.Select-control:not(.is-searchable)>.Select-input{outline:none}.Select-loading-zone{cursor:pointer;display:table-cell;position:relative;text-align:center;vertical-align:middle;width:16px}.Select-loading{animation:Select-animation-spin .4s linear infinite;box-sizing:border-box;border-radius:50%;border:2px solid #ccc;border-right-color:#333;display:inline-block}.Select-clear-zone,.Select-loading{width:16px;height:16px;position:relative;vertical-align:middle}.Select-clear-zone{animation:Select-animation-fadeIn .2s;color:#999;cursor:pointer;display:table-cell;text-align:center;padding-right:4px}.Select-clear-zone:hover .Select-clear{background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTQgMTQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxLjQxNCI+PHBhdGggZD0iTTEzLjk2OSAxLjQwNkw4LjM5IDYuOTg0bDUuNTc4IDUuNTc5LTEuNDA2IDEuNDA2TDYuOTg0IDguMzlsLTUuNTc4IDUuNTc4TDAgMTIuNTYzbDUuNTc4LTUuNTc5TDAgMS40MDYgMS40MDYgMGw1LjU3OCA1LjU3OEwxMi41NjMgMGwxLjQwNiAxLjQwNnoiIGZpbGw9IiNlNzE0MzgiIGZpbGwtcnVsZT0ibm9uemVybyIvPjwvc3ZnPg==)}.Select-clear{display:block;width:9px;height:9px;background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTQgMTQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxLjQxNCI+PHBhdGggZD0iTTEzLjk2OSAxLjQwNkw4LjM5IDYuOTg0bDUuNTc4IDUuNTc5LTEuNDA2IDEuNDA2TDYuOTg0IDguMzlsLTUuNTc4IDUuNTc4TDAgMTIuNTYzbDUuNTc4LTUuNTc5TDAgMS40MDYgMS40MDYgMGw1LjU3OCA1LjU3OEwxMi41NjMgMGwxLjQwNiAxLjQwNnoiIGZpbGw9IiM5OTkiIGZpbGwtcnVsZT0ibm9uemVybyIvPjwvc3ZnPg==);background-size:9px 9px;text-indent:-9999px}.Select--multi .Select-clear-zone{width:17px}.Select-arrow-zone{cursor:pointer;display:table-cell;position:relative;text-align:center;vertical-align:middle;width:20px;padding-right:5px}.Select-arrow{border-color:#999 transparent transparent;border-style:solid;border-width:4px 4px 2px;display:inline-block;height:0;width:0}.is-open .Select-arrow,.Select-arrow-zone:hover>.Select-arrow{border-top-color:#666}@keyframes Select-animation-fadeIn{0%{opacity:0}to{opacity:1}}.Select-menu-outer{border-bottom-right-radius:4px;border-bottom-left-radius:4px;background-color:#fff;border:1px solid #ccc;border-top-color:#e6e6e6;box-sizing:border-box;margin-top:-1px;max-height:200px;position:absolute;top:100%;width:100%;z-index:7500;-webkit-overflow-scrolling:touch;box-shadow:0 6px 12px rgba(0,0,0,.175)}.Select-menu{max-height:198px;padding:5px 0;overflow-y:auto}.Select-option{display:block;line-height:20px;padding:0 8px;box-sizing:border-box;color:#333;font-size:12px;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.Select-option:last-child{border-bottom-right-radius:2px;border-bottom-left-radius:2px}.Select-option.is-focused{background-color:#f3f3f3}.Select-option.is-disabled{cursor:default;opacity:.4;font-style:italic}.Select-noresults{box-sizing:border-box;color:#999;cursor:default;display:block;padding:8px 10px}.Select--multi .Select-value{background-color:rgba(0,126,255,.08);border-radius:2px;border:1px solid rgba(0,126,255,.24);color:#333;display:inline-block;font-size:12px;line-height:14px;margin:1px 4px 1px 1px;vertical-align:top}.Select-value-label{font-size:12px}.is-searchable.is-open .Select-value-label{opacity:.5}.Select-big .Select-control{padding-top:4px;padding-bottom:4px}.Select-big .Select-placeholder{margin-top:4px;margin-bottom:4px}.Select-big .Select-value-label{display:inline-block;margin-top:7px;line-height:16px}.Select-big .Select-option{padding:7px 8px;line-height:16px}.Select-big img,.Select-big svg{padding-top:0}.Select--multi .Select-value-icon,.Select--multi .Select-value-label{display:inline-block;vertical-align:middle}.Select--multi .Select-value-label{display:inline-block;max-width:200px;border-bottom-right-radius:2px;border-top-right-radius:2px;cursor:default;padding:2px 5px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.Select--multi a.Select-value-label{color:#007eff;cursor:pointer;text-decoration:none}.Select--multi a.Select-value-label:hover{text-decoration:underline}.Select--multi .Select-value-icon{cursor:pointer;border-bottom-left-radius:2px;border-top-left-radius:2px;border-right:1px solid rgba(0,126,255,.24);padding:1px 5px}.Select--multi .Select-value-icon:focus,.Select--multi .Select-value-icon:hover{background-color:rgba(0,113,230,.08);color:#0071e6}.Select--multi .Select-value-icon:active{background-color:rgba(0,126,255,.24)}.Select--multi.is-disabled .Select-value{background-color:#fcfcfc;border:1px solid #e3e3e3;color:#333}.Select--multi.is-disabled .Select-value-icon{cursor:not-allowed;border-right:1px solid #e3e3e3}.Select--multi.is-disabled .Select-value-icon:active,.Select--multi.is-disabled .Select-value-icon:focus,.Select--multi.is-disabled .Select-value-icon:hover{background-color:#fcfcfc}.Select-aria-only{display:none}@keyframes Select-animation-spin{to{transform:rotate(1turn)}}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { differenceInHours } from 'date-fns';\nimport * as React from 'react';\nimport { DateSource, FormattedRelative } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\nimport { translate } from '../../helpers/l10n';\nimport DateTimeFormatter from './DateTimeFormatter';\n\nexport interface DateFromNowProps {\n  children?: (formattedDate: string) => React.ReactNode;\n  date?: DateSource;\n  hourPrecision?: boolean;\n}\n\nexport default function DateFromNow(props: DateFromNowProps) {\n  const { children: originalChildren = (f: string) => f, date, hourPrecision } = props;\n  let children = originalChildren;\n\n  if (!date) {\n    /*\n     * We return a JSX.Element to bypass typescript issue with functional components return type\n     * (https://github.com/DefinitelyTyped/DefinitelyTyped/issues/20544)\n     */\n    // eslint-disable-next-line react/jsx-no-useless-fragment\n    return <>{originalChildren(translate('never'))}</>;\n  }\n\n  if (date && hourPrecision && differenceInHours(Date.now(), date) < 1) {\n    children = () => originalChildren(translate('less_than_1_hour_ago'));\n  }\n\n  const parsedDate = parseDate(date);\n\n  return (\n    <DateTimeFormatter date={parsedDate}>\n      {formattedDate => (\n        <span title={formattedDate}>\n          <FormattedRelative value={parsedDate}>{children}</FormattedRelative>\n        </span>\n      )}\n    </DateTimeFormatter>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport { A11yContext } from './A11yContext';\n\ninterface Props {\n  anchor: string;\n  label?: string;\n  weight?: number;\n}\n\nexport default function A11ySkipTarget(props: Props) {\n  return (\n    <A11yContext.Consumer>\n      {({ addA11ySkipLink, removeA11ySkipLink }) => (\n        <A11ySkipTargetInner\n          addA11ySkipLink={addA11ySkipLink}\n          removeA11ySkipLink={removeA11ySkipLink}\n          {...props}\n        />\n      )}\n    </A11yContext.Consumer>\n  );\n}\n\ninterface InnerProps {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n}\n\nexport class A11ySkipTargetInner extends React.PureComponent<Props & InnerProps> {\n  componentDidMount() {\n    this.props.addA11ySkipLink(this.getLink());\n  }\n\n  componentWillUnmount() {\n    this.props.removeA11ySkipLink(this.getLink());\n  }\n\n  getLink = (): T.A11ySkipLink => {\n    const { anchor: key, label = translate('skip_to_content'), weight } = this.props;\n    return { key, label, weight };\n  };\n\n  render() {\n    const { anchor } = this.props;\n    return <span id={`a11y_target__${anchor}`} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\n\nexport interface DateFormatterProps {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n  long?: boolean;\n}\n\nexport const formatterOption = { year: 'numeric', month: 'short', day: '2-digit' };\n\nexport const longFormatterOption = { year: 'numeric', month: 'long', day: 'numeric' };\n\nexport default function DateFormatter({ children, date, long }: DateFormatterProps) {\n  return (\n    <FormattedDate value={parseDate(date)} {...(long ? longFormatterOption : formatterOption)}>\n      {children}\n    </FormattedDate>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Checkbox.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".icon-checkbox{display:inline-block;line-height:1;vertical-align:top;padding:1px 2px;box-sizing:border-box}a.icon-checkbox{border-bottom:none}.icon-checkbox:focus{outline:none}.icon-checkbox:before{content:\\\" \\\";display:inline-block;width:10px;height:10px;border:1px solid #236a97;border-radius:2px;transition:border-color .2s ease,background-color .2s ease,background-image .2s ease,box-shadow .4s ease}.icon-checkbox:not(.icon-checkbox-disabled):focus:before,.link-checkbox:not(.disabled):focus:focus .icon-checkbox:before{box-shadow:0 0 0 3px rgba(35,106,151,.25)}.icon-checkbox-checked:before{background-color:#4b9fd5;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 14 14' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' stroke-linejoin='round' stroke-miterlimit='1.414'%3E%3Cpath d='M12 4.665c0 .172-.06.318-.18.438l-5.55 5.55c-.12.12-.266.18-.438.18s-.318-.06-.438-.18L2.18 7.438C2.06 7.317 2 7.17 2 7s.06-.318.18-.44l.878-.876c.12-.12.267-.18.44-.18.17 0 .317.06.437.18l1.897 1.903 4.233-4.24c.12-.12.266-.18.438-.18s.32.06.44.18l.876.88c.12.12.18.265.18.438z' fill='%23fff' fill-rule='nonzero'/%3E%3C/svg%3E\\\");border-color:#4b9fd5}.icon-checkbox-checked.icon-checkbox-single:before{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 14 14' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' stroke-linejoin='round' stroke-miterlimit='1.414'%3E%3Cpath d='M10 4.698A.697.697 0 0 0 9.302 4H4.698A.697.697 0 0 0 4 4.698v4.604c0 .386.312.698.698.698h4.604A.697.697 0 0 0 10 9.302V4.698z' fill='%23fff'/%3E%3C/svg%3E\\\")}.icon-checkbox-disabled:before{border:1px solid #bbb;cursor:not-allowed}.icon-checkbox-disabled.icon-checkbox-checked:before{background-color:#bbb}.icon-checkbox-invisible{visibility:hidden}.link-checkbox{color:inherit;border-bottom:none}.link-checkbox.disabled,.link-checkbox.disabled:hover,.link-checkbox.disabled label{color:#666;cursor:not-allowed}.link-checkbox:active,.link-checkbox:focus,.link-checkbox:hover{color:inherit}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { formatMeasure } from '../../helpers/measures';\nimport './Level.css';\n\nexport interface LevelProps {\n  'aria-label'?: string;\n  'aria-labelledby'?: string;\n  className?: string;\n  level: string;\n  small?: boolean;\n  muted?: boolean;\n}\n\nexport default function Level(props: LevelProps) {\n  const formatted = formatMeasure(props.level, 'LEVEL');\n  const className = classNames(props.className, 'level', 'level-' + props.level, {\n    'level-small': props.small,\n    'level-muted': props.muted\n  });\n\n  return (\n    <span\n      aria-label={props['aria-label']}\n      aria-labelledby={props['aria-labelledby']}\n      className={className}>\n      {formatted}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { IconProps } from './Icon';\nimport IssueIcon from './IssueIcon';\n\nexport interface Props extends IconProps {\n  query: string;\n}\n\nexport default function IssueTypeIcon({ query, ...iconProps }: Props) {\n  let type: T.IssueType;\n\n  switch (query.toLowerCase()) {\n    case 'bug':\n    case 'bugs':\n    case 'new_bugs':\n      type = 'BUG';\n      break;\n    case 'vulnerability':\n    case 'vulnerabilities':\n    case 'new_vulnerabilities':\n      type = 'VULNERABILITY';\n      break;\n    case 'code_smell':\n    case 'code_smells':\n    case 'new_code_smells':\n      type = 'CODE_SMELL';\n      break;\n    case 'security_hotspot':\n    case 'security_hotspots':\n    case 'new_security_hotspots':\n      type = 'SECURITY_HOTSPOT';\n      break;\n    default:\n      return null;\n  }\n\n  return <IssueIcon type={type} {...iconProps} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\nimport { formatMeasure } from '../../helpers/measures';\nimport './Rating.css';\n\ninterface Props extends React.AriaAttributes {\n  className?: string;\n  muted?: boolean;\n  small?: boolean;\n  value: string | number | undefined;\n}\n\nexport default function Rating({\n  className,\n  muted = false,\n  small = false,\n  value,\n  ...ariaAttrs\n}: Props) {\n  if (value === undefined) {\n    return (\n      <span aria-label={translate('metric.no_rating')} {...ariaAttrs}>\n        \n      </span>\n    );\n  }\n  const formatted = formatMeasure(value, 'RATING');\n  return (\n    <span\n      aria-label={translateWithParameters('metric.has_rating_X', formatted)}\n      className={classNames(\n        'rating',\n        `rating-${formatted}`,\n        { 'rating-small': small, 'rating-muted': muted },\n        className\n      )}\n      {...ariaAttrs}>\n      {formatted}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { colors } from '../../app/theme';\nimport Icon, { IconProps } from './Icon';\n\nexport default function BranchIcon({ fill, ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M12.5 6.5c0-1.1-.9-2-2-2s-2 .9-2 2c0 .8.5 1.5 1.2 1.8-.3.6-.7 1.1-1.2 1.4-.9.5-1.9.5-2.5.4V4c.9-.2 1.5-1 1.5-1.9 0-1.1-.9-2-2-2s-2 .9-2 2C3.5 3 4.1 3.8 5 4v8c-.9.2-1.5 1-1.5 1.9 0 1.1.9 2 2 2s2-.9 2-2c0-.9-.6-1.7-1.5-1.9v-1c.2 0 .5.1.7.1.7 0 1.5-.1 2.2-.6.8-.5 1.4-1.2 1.7-2.1 1.1 0 1.9-.9 1.9-1.9zm-8-4.4c0-.6.4-1 1-1s1 .4 1 1-.4 1-1 1-1-.5-1-1zm2 11.9c0 .6-.4 1-1 1s-1-.4-1-1 .4-1 1-1 1 .4 1 1zm4-6.5c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1z\"\n        style={{ fill: fill || colors.blue }}\n      />\n    </Icon>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Level.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".level{display:inline-block;min-width:80px;height:24px;line-height:24px;border-radius:24px;box-sizing:border-box;color:#fff;letter-spacing:.02em;font-size:13px;font-weight:400;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.level,.level-small{width:auto;padding-left:9px;padding-right:9px}.level-small{min-width:64px;margin-top:-1px;margin-bottom:-1px;height:20px;line-height:20px;font-size:12px}.level-muted{background-color:#bdbdbd!important}a>.level{margin-bottom:-1px;border-bottom:1px solid;transition:all .2s ease}a>.level:hover{opacity:.8}.level-OK{background-color:#0a0}.level-WARN{background-color:#ed7d20}.level-ERROR{background-color:#d4333f}.level-NONE{background-color:#b4b4b4}.level-NOT_COMPUTED{background-color:#404040}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\n\nconst KNOWN_RATINGS = [\n  'sqale_rating',\n  'maintainability_rating', // Needed to provide the label for \"new_maintainability_rating\"\n  'reliability_rating',\n  'security_rating',\n  'security_review_rating'\n];\n\nexport function enhanceMeasure(measure: T.Measure, metrics: T.Dict<T.Metric>): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.MeasureIntern | undefined): string | undefined {\n  return measure?.period?.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function ChevronDownIcon({ fill = 'currentColor', ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M7.72 11.596L3.119 6.992A.382.382 0 0 1 3 6.713c0-.108.04-.2.118-.279l1.03-1.03a.382.382 0 0 1 .278-.117c.108 0 .201.04.28.117L8 8.7l3.294-3.295a.382.382 0 0 1 .28-.117c.108 0 .2.04.279.117l1.03 1.03a.382.382 0 0 1 .117.28c0 .107-.04.2-.118.278L8.28 11.596a.382.382 0 0 1-.279.117.382.382 0 0 1-.28-.117z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from '../../components/controls/Tooltip';\nimport Level from '../../components/ui/Level';\nimport Rating from '../../components/ui/Rating';\nimport { formatMeasure } from '../../helpers/measures';\nimport { getRatingTooltip } from './utils';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span className={className}></span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, {\n      decimals,\n      omitExtraDecimalZeros: metricType === 'PERCENT'\n    });\n    return <span className={className}>{formattedValue != null ? formattedValue : ''}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as globalMessages from '../../store/globalMessages';\nimport getStore from './getStore';\n\nexport default function addGlobalSuccessMessage(message: string): void {\n  const store = getStore();\n  store.dispatch(globalMessages.addGlobalSuccessMessage(message));\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { chunk, flatMap, groupBy, sortBy } from 'lodash';\nimport { getLocalizedMetricName, translate } from '../../helpers/l10n';\nimport { localizeMetric } from '../../helpers/measures';\nimport { get, save } from '../../helpers/storage';\nimport { MetricKey } from '../../types/metrics';\nimport { GraphType, MeasureHistory, Serie } from '../../types/project-activity';\n\nexport const DEFAULT_GRAPH = GraphType.issues;\n\nconst GRAPHS_METRICS_DISPLAYED: T.Dict<string[]> = {\n  [GraphType.issues]: [MetricKey.bugs, MetricKey.code_smells, MetricKey.vulnerabilities],\n  [GraphType.coverage]: [MetricKey.lines_to_cover, MetricKey.uncovered_lines],\n  [GraphType.duplications]: [MetricKey.ncloc, MetricKey.duplicated_lines]\n};\n\nconst GRAPHS_METRICS: T.Dict<string[]> = {\n  [GraphType.issues]: GRAPHS_METRICS_DISPLAYED[GraphType.issues].concat([\n    MetricKey.reliability_rating,\n    MetricKey.security_rating,\n    MetricKey.sqale_rating\n  ]),\n  [GraphType.coverage]: [...GRAPHS_METRICS_DISPLAYED[GraphType.coverage], MetricKey.coverage],\n  [GraphType.duplications]: [\n    ...GRAPHS_METRICS_DISPLAYED[GraphType.duplications],\n    MetricKey.duplicated_lines_density\n  ]\n};\n\nexport function isCustomGraph(graph: GraphType) {\n  return graph === GraphType.custom;\n}\n\nexport function getGraphTypes(ignoreCustom = false) {\n  const graphs = [GraphType.issues, GraphType.coverage, GraphType.duplications];\n  return ignoreCustom ? graphs : [...graphs, GraphType.custom];\n}\n\nexport function hasDataValues(serie: Serie) {\n  return serie.data.some(point => Boolean(point.y || point.y === 0));\n}\n\nexport function hasHistoryData(series: Serie[]) {\n  return series.some(serie => serie.data && serie.data.length > 1);\n}\n\nexport function getSeriesMetricType(series: Serie[]) {\n  return series.length > 0 ? series[0].type : 'INT';\n}\n\nexport function getDisplayedHistoryMetrics(graph: GraphType, customMetrics: string[]) {\n  return isCustomGraph(graph) ? customMetrics : GRAPHS_METRICS_DISPLAYED[graph];\n}\n\nexport function getHistoryMetrics(graph: GraphType, customMetrics: string[]) {\n  return isCustomGraph(graph) ? customMetrics : GRAPHS_METRICS[graph];\n}\n\nexport function hasHistoryDataValue(series: Serie[]) {\n  return series.some(serie => serie.data && serie.data.length > 1 && hasDataValues(serie));\n}\n\nexport function splitSeriesInGraphs(series: Serie[], maxGraph: number, maxSeries: number) {\n  return flatMap(\n    groupBy(series, serie => serie.type),\n    type => chunk(type, maxSeries)\n  ).slice(0, maxGraph);\n}\n\nexport function generateCoveredLinesMetric(\n  uncoveredLines: MeasureHistory,\n  measuresHistory: MeasureHistory[]\n) {\n  const linesToCover = measuresHistory.find(measure => measure.metric === MetricKey.lines_to_cover);\n  return {\n    data: linesToCover\n      ? uncoveredLines.history.map((analysis, idx) => ({\n          x: analysis.date,\n          y: Number(linesToCover.history[idx].value) - Number(analysis.value)\n        }))\n      : [],\n    name: 'covered_lines',\n    translatedName: translate('project_activity.custom_metric.covered_lines'),\n    type: 'INT'\n  };\n}\n\nexport function generateSeries(\n  measuresHistory: MeasureHistory[],\n  graph: GraphType,\n  metrics: T.Metric[] | T.Dict<T.Metric>,\n  displayedMetrics: string[]\n): Serie[] {\n  if (displayedMetrics.length <= 0 || measuresHistory === undefined) {\n    return [];\n  }\n  return sortBy(\n    measuresHistory\n      .filter(measure => displayedMetrics.indexOf(measure.metric) >= 0)\n      .map(measure => {\n        if (measure.metric === MetricKey.uncovered_lines && !isCustomGraph(graph)) {\n          return generateCoveredLinesMetric(measure, measuresHistory);\n        }\n        const metric = findMetric(measure.metric, metrics);\n        return {\n          data: measure.history.map(analysis => ({\n            x: analysis.date,\n            y: metric && metric.type === 'LEVEL' ? analysis.value : Number(analysis.value)\n          })),\n          name: measure.metric,\n          translatedName: metric ? getLocalizedMetricName(metric) : localizeMetric(measure.metric),\n          type: metric ? metric.type : 'INT'\n        };\n      }),\n    serie =>\n      displayedMetrics.indexOf(serie.name === 'covered_lines' ? 'uncovered_lines' : serie.name)\n  );\n}\n\nexport function saveActivityGraph(\n  namespace: string,\n  project: string,\n  graph: GraphType,\n  metrics: string[] = []\n) {\n  save(namespace, graph, project);\n  if (isCustomGraph(graph)) {\n    save(`${namespace}.custom`, metrics.join(','), project);\n  }\n}\n\nexport function getActivityGraph(\n  namespace: string,\n  project: string\n): { graph: GraphType; customGraphs: string[] } {\n  const customGraphs = get(`${namespace}.custom`, project);\n  return {\n    graph: (get(namespace, project) as GraphType) || DEFAULT_GRAPH,\n    customGraphs: customGraphs ? customGraphs.split(',') : []\n  };\n}\n\nfunction findMetric(key: string, metrics: T.Metric[] | T.Dict<T.Metric>) {\n  if (Array.isArray(metrics)) {\n    return metrics.find(metric => metric.key === key);\n  }\n  return metrics[key];\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Rating.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".rating{display:inline-block;width:24px;height:24px;line-height:24px;border-radius:24px;box-sizing:border-box;color:#fff;font-size:16px;font-weight:400;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.rating-muted{background-color:#bdbdbd!important;color:#fff!important;text-shadow:0 0 1px rgba(0,0,0,.35)!important}a>.rating{margin-bottom:-1px;border-bottom:1px solid;transition:all .2s ease}a>.rating:hover{opacity:.8}.rating-A{line-height:23px;background-color:#0a0}a>.rating-A{border-bottom-color:#0a0}.rating-B{background-color:#b0d513}a .rating-B{border-bottom-color:#b0d513}.rating-C{background-color:#eabe06}a .rating-C{border-bottom-color:#eabe06}.rating-D{background-color:#ed7d20}a .rating-D{border-bottom-color:#ed7d20}.rating-E{background-color:#d4333f}a .rating-E{border-bottom-color:#d4333f}.rating-small{width:18px;height:18px;line-height:18px;margin-top:-1px;margin-bottom:-1px;font-size:12px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum GraphType {\n  issues = 'issues',\n  coverage = 'coverage',\n  duplications = 'duplications',\n  custom = 'custom'\n}\n\nexport interface HistoryItem {\n  date: Date;\n  value?: string;\n}\n\nexport interface MeasureHistory {\n  metric: string;\n  history: HistoryItem[];\n}\n\nexport interface Serie {\n  data: Point[];\n  name: string;\n  translatedName: string;\n  type: string;\n}\n\nexport interface Point {\n  x: Date;\n  y: number | string | undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport BugIcon from './BugIcon';\nimport CodeSmellIcon from './CodeSmellIcon';\nimport { IconProps } from './Icon';\nimport SecurityHotspotIcon from './SecurityHotspotIcon';\nimport VulnerabilityIcon from './VulnerabilityIcon';\n\ninterface Props extends IconProps {\n  type: T.IssueType;\n}\n\nexport default function IssueIcon({ type, ...iconProps }: Props) {\n  switch (type) {\n    case 'BUG':\n      return <BugIcon {...iconProps} />;\n    case 'VULNERABILITY':\n      return <VulnerabilityIcon {...iconProps} />;\n    case 'CODE_SMELL':\n      return <CodeSmellIcon {...iconProps} />;\n    case 'SECURITY_HOTSPOT':\n      return <SecurityHotspotIcon {...iconProps} />;\n    default:\n      return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport const ALM_INTEGRATION = 'almintegration';\nexport const ANALYSIS_SCOPE_CATEGORY = 'exclusions';\nexport const LANGUAGES_CATEGORY = 'languages';\nexport const NEW_CODE_PERIOD_CATEGORY = 'new_code_period';\nexport const PULL_REQUEST_DECORATION_BINDING_CATEGORY = 'pull_request_decoration_binding';\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { colors } from '../../app/theme';\nimport { lazyLoadComponent } from '../lazyLoadComponent';\n\nconst DonutChart = lazyLoadComponent(\n  () => import('../../components/charts/DonutChart'),\n  'DonutChart'\n);\n\nconst SIZE_TO_WIDTH_MAPPING = { small: 16, normal: 24, big: 40, huge: 60 };\n\nconst SIZE_TO_THICKNESS_MAPPING = { small: 2, normal: 3, big: 3, huge: 4 };\n\nexport interface CoverageRatingProps {\n  muted?: boolean;\n  size?: 'small' | 'normal' | 'big' | 'huge';\n  value: number | string | null | undefined;\n}\n\nexport default function CoverageRating({\n  muted = false,\n  size = 'normal',\n  value\n}: CoverageRatingProps) {\n  let data = [{ value: 100, fill: '#ccc ' }];\n  let padAngle = 0;\n\n  if (value != null) {\n    const numberValue = Number(value);\n    data = [\n      { value: numberValue, fill: muted ? colors.gray71 : colors.green },\n      { value: 100 - numberValue, fill: muted ? colors.barBackgroundColor : colors.lineCoverageRed }\n    ];\n    if (numberValue !== 0 && numberValue < 100) {\n      padAngle = 0.1; // Same for all sizes, because it scales automatically\n    }\n  }\n\n  const width = SIZE_TO_WIDTH_MAPPING[size];\n  const thickness = SIZE_TO_THICKNESS_MAPPING[size];\n\n  return (\n    <DonutChart\n      data={data}\n      height={width}\n      padAngle={padAngle}\n      thickness={thickness}\n      width={width}\n    />\n  );\n}\n","var baseInRange = require('./_baseInRange'),\n    toFinite = require('./toFinite'),\n    toNumber = require('./toNumber');\n\n/**\n * Checks if `n` is between `start` and up to, but not including, `end`. If\n * `end` is not specified, it's set to `start` with `start` then set to `0`.\n * If `start` is greater than `end` the params are swapped to support\n * negative ranges.\n *\n * @static\n * @memberOf _\n * @since 3.3.0\n * @category Number\n * @param {number} number The number to check.\n * @param {number} [start=0] The start of the range.\n * @param {number} end The end of the range.\n * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n * @see _.range, _.rangeRight\n * @example\n *\n * _.inRange(3, 2, 4);\n * // => true\n *\n * _.inRange(4, 8);\n * // => true\n *\n * _.inRange(4, 2);\n * // => false\n *\n * _.inRange(2, 2);\n * // => false\n *\n * _.inRange(1.2, 2);\n * // => true\n *\n * _.inRange(5.2, 4);\n * // => false\n *\n * _.inRange(-3, -2, -6);\n * // => true\n */\nfunction inRange(number, start, end) {\n  start = toFinite(start);\n  if (end === undefined) {\n    end = start;\n    start = 0;\n  } else {\n    end = toFinite(end);\n  }\n  number = toNumber(number);\n  return baseInRange(number, start, end);\n}\n\nmodule.exports = inRange;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { getJSON, post, postJSON } from '../helpers/request';\nimport { Application, ApplicationPeriod, ApplicationProject } from '../types/application';\nimport { Visibility } from '../types/component';\n\nexport function getApplicationLeak(\n  application: string,\n  branch?: string\n): Promise<ApplicationPeriod[]> {\n  return getJSON('/api/applications/show_leak', { application, branch }).then(\n    r => r.leaks,\n    throwGlobalError\n  );\n}\n\nexport function getApplicationDetails(application: string, branch?: string): Promise<Application> {\n  return getJSON('/api/applications/show', { application, branch }).then(\n    r => r.application,\n    throwGlobalError\n  );\n}\n\nexport function addApplicationBranch(data: {\n  application: string;\n  branch: string;\n  project: string[];\n  projectBranch: string[];\n}) {\n  return post('/api/applications/create_branch', data).catch(throwGlobalError);\n}\n\nexport function updateApplicationBranch(data: {\n  application: string;\n  branch: string;\n  name: string;\n  project: string[];\n  projectBranch: string[];\n}) {\n  return post('/api/applications/update_branch', data).catch(throwGlobalError);\n}\n\nexport function deleteApplicationBranch(application: string, branch: string) {\n  return post('/api/applications/delete_branch', { application, branch }).catch(throwGlobalError);\n}\n\nexport function getApplicationProjects(data: {\n  application: string;\n  p?: number;\n  ps?: number;\n  q?: string;\n  selected: string;\n}): Promise<{ paging: T.Paging; projects: ApplicationProject[] }> {\n  return getJSON('/api/applications/search_projects', data).catch(throwGlobalError);\n}\n\nexport function addProjectToApplication(application: string, project: string) {\n  return post('/api/applications/add_project', { application, project }).catch(throwGlobalError);\n}\n\nexport function removeProjectFromApplication(application: string, project: string) {\n  return post('/api/applications/remove_project', { application, project }).catch(throwGlobalError);\n}\n\nexport function refreshApplication(key: string) {\n  return post('/api/applications/refresh', { key }).catch(throwGlobalError);\n}\n\nexport function createApplication(\n  name: string,\n  description: string,\n  key: string | undefined,\n  visibility: string\n): Promise<{\n  application: {\n    description?: string;\n    key: string;\n    name: string;\n    visibility: Visibility;\n  };\n}> {\n  return postJSON('/api/applications/create', { description, key, name, visibility }).catch(\n    throwGlobalError\n  );\n}\n\nexport function deleteApplication(application: string) {\n  return post('/api/applications/delete', { application }).catch(throwGlobalError);\n}\n\nexport function editApplication(application: string, name: string, description: string) {\n  return post('/api/applications/update', { name, description, application }).catch(\n    throwGlobalError\n  );\n}\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * The base implementation of `_.inRange` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to check.\n * @param {number} start The start of the range.\n * @param {number} end The end of the range.\n * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n */\nfunction baseInRange(number, start, end) {\n  return number >= nativeMin(start, end) && number < nativeMax(start, end);\n}\n\nmodule.exports = baseInRange;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport styled from '@emotion/styled';\nimport * as React from 'react';\nimport { colors, sizes } from '../../app/theme';\n\nexport interface BoxedTabsProps<K> {\n  className?: string;\n  onSelect: (key: K) => void;\n  selected?: K;\n  tabs: Array<{ key: K; label: React.ReactNode }>;\n}\n\nconst TabContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n`;\n\nconst baseBorder = () => `1px solid ${colors.barBorderColor}`;\n\nconst highlightHoverMixin = () => `\n  &:hover {\n    background-color: ${colors.barBackgroundColorHighlight};\n  }\n`;\n\nconst StyledTab = styled.button<{ active: boolean }>`\n  position: relative;\n  background-color: ${props => (props.active ? 'white' : colors.barBackgroundColor)};\n  border-top: ${baseBorder};\n  border-left: ${baseBorder};\n  border-right: none;\n  border-bottom: none;\n  margin-bottom: -1px;\n  min-width: 128px;\n  min-height: 56px;\n  ${props => !props.active && 'cursor: pointer;'}\n  outline: 0;\n  padding: calc(2 * ${sizes.gridSize});\n\n  ${props => (!props.active ? highlightHoverMixin : null)}\n\n  &:last-child {\n    border-right: ${baseBorder};\n  }\n`;\n\nconst ActiveBorder = styled.div<{ active: boolean }>`\n  display: ${props => (props.active ? 'block' : 'none')};\n  background-color: ${colors.blue};\n  height: 3px;\n  width: 100%;\n  position: absolute;\n  left: 0;\n  top: -1px;\n`;\n\nexport default function BoxedTabs<K>(props: BoxedTabsProps<K>) {\n  const { className, tabs, selected } = props;\n\n  return (\n    <TabContainer className={className}>\n      {tabs.map(({ key, label }, i) => (\n        <StyledTab\n          active={selected === key}\n          // eslint-disable-next-line react/no-array-index-key\n          key={i}\n          onClick={() => selected !== key && props.onSelect(key)}\n          type=\"button\">\n          <ActiveBorder active={selected === key} />\n          {label}\n        </StyledTab>\n      ))}\n    </TabContainer>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { inRange } from 'lodash';\nimport * as React from 'react';\nimport './DuplicationsRating.css';\n\ninterface Props {\n  muted?: boolean;\n  size?: 'small' | 'normal' | 'big' | 'huge';\n  value: number | null | undefined;\n}\n\nexport default function DuplicationsRating({ muted = false, size = 'normal', value }: Props) {\n  const className = classNames('duplications-rating', {\n    'duplications-rating-small': size === 'small',\n    'duplications-rating-big': size === 'big',\n    'duplications-rating-huge': size === 'huge',\n    'duplications-rating-muted': muted || value == null || isNaN(value),\n    'duplications-rating-A': inRange(value || 0, 0, 3),\n    'duplications-rating-B': inRange(value || 0, 3, 5),\n    'duplications-rating-C': inRange(value || 0, 5, 10),\n    'duplications-rating-D': inRange(value || 0, 10, 20),\n    'duplications-rating-E': (value || 0) >= 20\n  });\n\n  return <div className={className} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../types/branch-like';\n\ninterface ComponentContextType {\n  branchLike: BranchLike | undefined;\n  component: T.Component | undefined;\n}\n\nexport const ComponentContext = React.createContext<ComponentContextType>({\n  branchLike: undefined,\n  component: undefined\n});\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { getBranchLikeQuery } from '../../helpers/branch-like';\nimport { getComponentDrilldownUrl, getComponentIssuesUrl } from '../../helpers/urls';\nimport { BranchLike } from '../../types/branch-like';\n\nconst ISSUE_MEASURES = [\n  'violations',\n  'new_violations',\n  'blocker_violations',\n  'critical_violations',\n  'major_violations',\n  'minor_violations',\n  'info_violations',\n  'new_blocker_violations',\n  'new_critical_violations',\n  'new_major_violations',\n  'new_minor_violations',\n  'new_info_violations',\n  'open_issues',\n  'reopened_issues',\n  'confirmed_issues',\n  'false_positive_issues',\n  'code_smells',\n  'new_code_smells',\n  'bugs',\n  'new_bugs',\n  'vulnerabilities',\n  'new_vulnerabilities'\n];\n\nconst issueParamsPerMetric: T.Dict<T.Dict<string>> = {\n  blocker_violations: { resolved: 'false', severities: 'BLOCKER' },\n  new_blocker_violations: { resolved: 'false', severities: 'BLOCKER' },\n  critical_violations: { resolved: 'false', severities: 'CRITICAL' },\n  new_critical_violations: { resolved: 'false', severities: 'CRITICAL' },\n  major_violations: { resolved: 'false', severities: 'MAJOR' },\n  new_major_violations: { resolved: 'false', severities: 'MAJOR' },\n  minor_violations: { resolved: 'false', severities: 'MINOR' },\n  new_minor_violations: { resolved: 'false', severities: 'MINOR' },\n  info_violations: { resolved: 'false', severities: 'INFO' },\n  new_info_violations: { resolved: 'false', severities: 'INFO' },\n  open_issues: { resolved: 'false', statuses: 'OPEN' },\n  reopened_issues: { resolved: 'false', statuses: 'REOPENED' },\n  confirmed_issues: { resolved: 'false', statuses: 'CONFIRMED' },\n  false_positive_issues: { resolutions: 'FALSE-POSITIVE' },\n  code_smells: { resolved: 'false', types: 'CODE_SMELL' },\n  new_code_smells: { resolved: 'false', types: 'CODE_SMELL' },\n  bugs: { resolved: 'false', types: 'BUG' },\n  new_bugs: { resolved: 'false', types: 'BUG' },\n  vulnerabilities: { resolved: 'false', types: 'VULNERABILITY' },\n  new_vulnerabilities: { resolved: 'false', types: 'VULNERABILITY' }\n};\n\ninterface Props {\n  branchLike?: BranchLike;\n  children?: React.ReactNode;\n  className?: string;\n  component: string;\n  metric: string;\n  sinceLeakPeriod?: boolean;\n}\n\nexport default class DrilldownLink extends React.PureComponent<Props> {\n  isIssueMeasure = () => {\n    return ISSUE_MEASURES.indexOf(this.props.metric) !== -1;\n  };\n\n  propsToIssueParams = () => {\n    const params: T.Dict<string | boolean> = {\n      ...(issueParamsPerMetric[this.props.metric] || { resolved: 'false' })\n    };\n\n    if (this.props.sinceLeakPeriod) {\n      params.sinceLeakPeriod = true;\n    }\n\n    return params;\n  };\n\n  renderIssuesLink = () => {\n    const url = getComponentIssuesUrl(this.props.component, {\n      ...this.propsToIssueParams(),\n      ...getBranchLikeQuery(this.props.branchLike)\n    });\n\n    return (\n      <Link className={this.props.className} to={url}>\n        {this.props.children}\n      </Link>\n    );\n  };\n\n  render() {\n    if (this.isIssueMeasure()) {\n      return this.renderIssuesLink();\n    }\n\n    const url = getComponentDrilldownUrl({\n      componentKey: this.props.component,\n      metric: this.props.metric,\n      branchLike: this.props.branchLike,\n      listView: true\n    });\n    return (\n      <Link className={this.props.className} to={url}>\n        {this.props.children}\n      </Link>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport CoverageRating from '../../components/ui/CoverageRating';\nimport DuplicationsRating from '../../components/ui/DuplicationsRating';\nimport { ISSUETYPE_METRIC_KEYS_MAP } from '../../helpers/issues';\nimport { translate } from '../../helpers/l10n';\nimport { IssueType } from '../../types/issues';\nimport { MetricKey } from '../../types/metrics';\n\nexport const METRICS: string[] = [\n  // quality gate\n  MetricKey.alert_status,\n  MetricKey.quality_gate_details, // TODO: still relevant?\n\n  // bugs\n  MetricKey.bugs,\n  MetricKey.new_bugs,\n  MetricKey.reliability_rating,\n  MetricKey.new_reliability_rating,\n\n  // vulnerabilities\n  MetricKey.vulnerabilities,\n  MetricKey.new_vulnerabilities,\n  MetricKey.security_rating,\n  MetricKey.new_security_rating,\n\n  // hotspots\n  MetricKey.security_hotspots,\n  MetricKey.new_security_hotspots,\n  MetricKey.security_hotspots_reviewed,\n  MetricKey.new_security_hotspots_reviewed,\n  MetricKey.security_review_rating,\n  MetricKey.new_security_review_rating,\n\n  // code smells\n  MetricKey.code_smells,\n  MetricKey.new_code_smells,\n  MetricKey.sqale_rating,\n  MetricKey.new_maintainability_rating,\n  MetricKey.sqale_index,\n  MetricKey.new_technical_debt,\n\n  // coverage\n  MetricKey.coverage,\n  MetricKey.new_coverage,\n  MetricKey.lines_to_cover,\n  MetricKey.new_lines_to_cover,\n  MetricKey.tests,\n\n  // duplications\n  MetricKey.duplicated_lines_density,\n  MetricKey.new_duplicated_lines_density,\n  MetricKey.duplicated_blocks,\n\n  // size\n  MetricKey.ncloc,\n  MetricKey.ncloc_language_distribution,\n  MetricKey.projects,\n  MetricKey.lines,\n  MetricKey.new_lines\n];\n\nexport const PR_METRICS: string[] = [\n  MetricKey.coverage,\n  MetricKey.new_coverage,\n  MetricKey.new_lines_to_cover,\n\n  MetricKey.duplicated_lines_density,\n  MetricKey.new_duplicated_lines_density,\n  MetricKey.new_lines,\n  MetricKey.new_code_smells,\n  MetricKey.new_maintainability_rating,\n  MetricKey.new_bugs,\n  MetricKey.new_reliability_rating,\n  MetricKey.new_vulnerabilities,\n  MetricKey.new_security_hotspots,\n  MetricKey.new_security_review_rating,\n  MetricKey.new_security_rating\n];\n\nexport const HISTORY_METRICS_LIST: string[] = [\n  MetricKey.bugs,\n  MetricKey.vulnerabilities,\n  MetricKey.sqale_index,\n  MetricKey.duplicated_lines_density,\n  MetricKey.ncloc,\n  MetricKey.coverage\n];\n\nexport enum MeasurementType {\n  Coverage = 'COVERAGE',\n  Duplication = 'DUPLICATION'\n}\n\nconst MEASUREMENTS_MAP = {\n  [MeasurementType.Coverage]: {\n    metric: MetricKey.coverage,\n    newMetric: MetricKey.new_coverage,\n    linesMetric: MetricKey.lines_to_cover,\n    newLinesMetric: MetricKey.new_lines_to_cover,\n    afterMergeMetric: MetricKey.coverage,\n    labelKey: 'metric.coverage.name',\n    expandedLabelKey: 'overview.coverage_on_X_lines',\n    newLinesExpandedLabelKey: 'overview.coverage_on_X_new_lines',\n    iconClass: CoverageRating\n  },\n  [MeasurementType.Duplication]: {\n    metric: MetricKey.duplicated_lines_density,\n    newMetric: MetricKey.new_duplicated_lines_density,\n    linesMetric: MetricKey.ncloc,\n    newLinesMetric: MetricKey.new_lines,\n    afterMergeMetric: MetricKey.duplicated_lines_density,\n    labelKey: 'metric.duplicated_lines_density.short_name',\n    expandedLabelKey: 'overview.duplications_on_X_lines',\n    newLinesExpandedLabelKey: 'overview.duplications_on_X_new_lines',\n    iconClass: DuplicationsRating\n  }\n};\n\nexport function getIssueRatingName(type: IssueType) {\n  return translate('metric_domain', ISSUETYPE_METRIC_KEYS_MAP[type].ratingName);\n}\n\nexport function getIssueIconClass(type: IssueType) {\n  return ISSUETYPE_METRIC_KEYS_MAP[type].iconClass;\n}\n\nexport function getIssueMetricKey(type: IssueType, useDiffMetric: boolean) {\n  return useDiffMetric\n    ? ISSUETYPE_METRIC_KEYS_MAP[type].newMetric\n    : ISSUETYPE_METRIC_KEYS_MAP[type].metric;\n}\n\nexport function getIssueRatingMetricKey(type: IssueType, useDiffMetric: boolean) {\n  return useDiffMetric\n    ? ISSUETYPE_METRIC_KEYS_MAP[type].newRating\n    : ISSUETYPE_METRIC_KEYS_MAP[type].rating;\n}\n\nexport function getMeasurementIconClass(type: MeasurementType) {\n  return MEASUREMENTS_MAP[type].iconClass;\n}\n\nexport function getMeasurementMetricKey(type: MeasurementType, useDiffMetric: boolean) {\n  return useDiffMetric ? MEASUREMENTS_MAP[type].newMetric : MEASUREMENTS_MAP[type].metric;\n}\n\nexport function getMeasurementAfterMergeMetricKey(type: MeasurementType) {\n  return MEASUREMENTS_MAP[type].afterMergeMetric;\n}\n\nexport function getMeasurementLinesMetricKey(type: MeasurementType, useDiffMetric: boolean) {\n  return useDiffMetric ? MEASUREMENTS_MAP[type].newLinesMetric : MEASUREMENTS_MAP[type].linesMetric;\n}\n\nexport function getMeasurementLabelKeys(type: MeasurementType, useDiffMetric: boolean) {\n  return {\n    expandedLabelKey: useDiffMetric\n      ? MEASUREMENTS_MAP[type].newLinesExpandedLabelKey\n      : MEASUREMENTS_MAP[type].expandedLabelKey,\n    labelKey: MEASUREMENTS_MAP[type].labelKey\n  };\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./DuplicationsRating.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".duplications-rating{position:relative;display:inline-flex;vertical-align:top;justify-content:center;align-items:center;width:24px;height:24px;border:3px solid #ed7d20;border-radius:24px;box-sizing:border-box}.duplications-rating-small{width:16px;height:16px;border-width:2px}.duplications-rating-big{width:40px;height:40px;border-width:3px}.duplications-rating-huge{width:60px;height:60px;border-width:4px;border-radius:30px}.duplications-rating-muted{border-color:#bdbdbd!important}.duplications-rating-muted:after{background-color:#bdbdbd!important}.duplications-rating:after{border-radius:24px;content:\\\"\\\"}.duplications-rating-A{border-color:#0a0}.duplications-rating-A:after{display:none}.duplications-rating-B{border-color:#b0d513}.duplications-rating-B:after{width:6px;height:6px;background-color:#b0d513}.duplications-rating-small.duplications-rating-B:after{width:2px;height:2px}.duplications-rating-big.duplications-rating-B:after{width:12px;height:12px}.duplications-rating-huge.duplications-rating-B:after{width:18px;height:18px}.duplications-rating-C{border-color:#eabe06}.duplications-rating-C:after{width:8px;height:8px;background-color:#eabe06}.duplications-rating-small.duplications-rating-C:after{width:6px;height:6px}.duplications-rating-big.duplications-rating-C:after{width:16px;height:16px}.duplications-rating-huge.duplications-rating-C:after{width:24px;height:24px}.duplications-rating-D{border-color:#ed7d20}.duplications-rating-D:after{width:12px;height:12px;background-color:#ed7d20}.duplications-rating-small.duplications-rating-D:after{width:8px;height:8px}.duplications-rating-big.duplications-rating-D:after{width:24px;height:24px}.duplications-rating-huge.duplications-rating-D:after{width:36px;height:36px}.duplications-rating-E{border-color:#d4333f}.duplications-rating-E:after{width:14px;height:14px;background-color:#d4333f}.duplications-rating-small.duplications-rating-E:after{width:10px;height:10px}.duplications-rating-big.duplications-rating-E:after{width:28px;height:28px}.duplications-rating-huge.duplications-rating-E:after{width:42px;height:42px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from '../../components/controls/Checkbox';\nimport { translate } from '../../helpers/l10n';\n\nexport interface MultiSelectOptionProps {\n  active?: boolean;\n  custom?: boolean;\n  disabled?: boolean;\n  element: string;\n  onHover: (element: string) => void;\n  onSelectChange: (selected: boolean, element: string) => void;\n  renderLabel: (element: string) => React.ReactNode;\n  selected?: boolean;\n}\n\nexport default function MultiSelectOption(props: MultiSelectOptionProps) {\n  const { active, custom, disabled, element, selected } = props;\n  const onHover = () => props.onHover(element);\n  const className = classNames({ active, disabled });\n  const label = props.renderLabel(element);\n\n  return (\n    <li onFocus={onHover} onMouseOver={onHover}>\n      <Checkbox\n        checked={Boolean(selected)}\n        className={className}\n        disabled={disabled}\n        id={element}\n        onCheck={props.onSelectChange}>\n        {custom ? (\n          <span\n            aria-label={`${translate('create_new_element')}: ${label}`}\n            className=\"little-spacer-left\">\n            <span aria-hidden={true} className=\"little-spacer-right\">\n              +\n            </span>\n            {label}\n          </span>\n        ) : (\n          <span className=\"little-spacer-left\">{label}</span>\n        )}\n      </Checkbox>\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { difference } from 'lodash';\nimport * as React from 'react';\nimport SearchBox from '../../components/controls/SearchBox';\nimport { translateWithParameters } from '../../helpers/l10n';\nimport MultiSelectOption from './MultiSelectOption';\n\ninterface Props {\n  allowNewElements?: boolean;\n  allowSelection?: boolean;\n  elements: string[];\n  filterSelected?: (query: string, selectedElements: string[]) => string[];\n  footerNode?: React.ReactNode;\n  listSize?: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  placeholder: string;\n  renderLabel?: (element: string) => React.ReactNode;\n  selectedElements: string[];\n  validateSearchInput?: (value: string) => string;\n}\n\ninterface State {\n  activeIdx: number;\n  loading: boolean;\n  query: string;\n  selectedElements: string[];\n  unselectedElements: string[];\n}\n\ninterface DefaultProps {\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  listSize: number;\n  renderLabel: (element: string) => React.ReactNode;\n  validateSearchInput: (value: string) => string;\n}\n\ntype PropsWithDefault = Props & DefaultProps;\n\nexport default class MultiSelect extends React.PureComponent<Props, State> {\n  container?: HTMLDivElement | null;\n  searchInput?: HTMLInputElement | null;\n  mounted = false;\n\n  static defaultProps: DefaultProps = {\n    filterSelected: (query: string, selectedElements: string[]) =>\n      selectedElements.filter(elem => elem.includes(query)),\n    listSize: 0,\n    renderLabel: (element: string) => element,\n    validateSearchInput: (value: string) => value\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      activeIdx: 0,\n      loading: true,\n      query: '',\n      selectedElements: [],\n      unselectedElements: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.onSearchQuery('');\n    this.updateSelectedElements(this.props as PropsWithDefault);\n    this.updateUnselectedElements(this.props as PropsWithDefault);\n    if (this.container) {\n      this.container.addEventListener('keydown', this.handleKeyboard, true);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: PropsWithDefault) {\n    if (\n      this.props.elements !== nextProps.elements ||\n      this.props.selectedElements !== nextProps.selectedElements\n    ) {\n      this.updateSelectedElements(nextProps);\n      this.updateUnselectedElements(nextProps);\n\n      const totalElements = this.getAllElements(nextProps, this.state).length;\n      if (this.state.activeIdx >= totalElements) {\n        this.setState({ activeIdx: totalElements - 1 });\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.searchInput) {\n      this.searchInput.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.container) {\n      this.container.removeEventListener('keydown', this.handleKeyboard);\n    }\n  }\n\n  handleSelectChange = (selected: boolean, item: string) => {\n    if (selected) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  handleSearchChange = (value: string) => {\n    this.onSearchQuery((this.props as PropsWithDefault).validateSearchInput(value));\n  };\n\n  handleElementHover = (element: string) => {\n    this.setState((prevState, props) => {\n      return { activeIdx: this.getAllElements(props, prevState).indexOf(element) };\n    });\n  };\n\n  handleKeyboard = (evt: KeyboardEvent) => {\n    switch (evt.keyCode) {\n      case 40: // down\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectNextElement);\n        break;\n      case 38: // up\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectPreviousElement);\n        break;\n      case 37: // left\n      case 39: // right\n        evt.stopPropagation();\n        break;\n      case 13: // enter\n        if (this.state.activeIdx >= 0) {\n          this.toggleSelect(this.getAllElements(this.props, this.state)[this.state.activeIdx]);\n        }\n        break;\n    }\n  };\n\n  onSearchQuery = (query: string) => {\n    this.setState({ activeIdx: 0, loading: true, query });\n    this.props.onSearch(query).then(this.stopLoading, this.stopLoading);\n  };\n\n  onSelectItem = (item: string) => {\n    if (this.isNewElement(item, this.props)) {\n      this.onSearchQuery('');\n    }\n    this.props.onSelect(item);\n  };\n\n  onUnselectItem = (item: string) => this.props.onUnselect(item);\n\n  isNewElement = (elem: string, { selectedElements, elements }: Props) =>\n    elem.length > 0 && selectedElements.indexOf(elem) === -1 && elements.indexOf(elem) === -1;\n\n  updateSelectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (state.query) {\n        return {\n          selectedElements: props.filterSelected(state.query, props.selectedElements)\n        };\n      } else {\n        return { selectedElements: [...props.selectedElements] };\n      }\n    });\n  };\n\n  updateUnselectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (props.listSize === 0) {\n        return { unselectedElements: difference(props.elements, props.selectedElements) };\n      } else if (props.listSize < state.selectedElements.length) {\n        return { unselectedElements: [] };\n      } else {\n        return {\n          unselectedElements: difference(props.elements, props.selectedElements).slice(\n            0,\n            props.listSize - state.selectedElements.length\n          )\n        };\n      }\n    });\n  };\n\n  getAllElements = (props: Props, state: State) => {\n    if (this.isNewElement(state.query, props)) {\n      return [...state.selectedElements, ...state.unselectedElements, state.query];\n    } else {\n      return [...state.selectedElements, ...state.unselectedElements];\n    }\n  };\n\n  setElementActive = (idx: number) => this.setState({ activeIdx: idx });\n\n  selectNextElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx < 0 || activeIdx >= allElements.length - 1) {\n      return { activeIdx: 0 };\n    } else {\n      return { activeIdx: activeIdx + 1 };\n    }\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx <= 0) {\n      const lastIdx = allElements.length - 1;\n      return { activeIdx: lastIdx };\n    } else {\n      return { activeIdx: activeIdx - 1 };\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  toggleSelect = (item: string) => {\n    if (this.props.selectedElements.indexOf(item) === -1) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  render() {\n    const { allowSelection = true, allowNewElements = true, footerNode = '' } = this.props;\n    const { renderLabel } = this.props as PropsWithDefault;\n    const { query, activeIdx, selectedElements, unselectedElements } = this.state;\n    const activeElement = this.getAllElements(this.props, this.state)[activeIdx];\n    const showNewElement = allowNewElements && this.isNewElement(query, this.props);\n    const infiniteList = this.props.listSize === 0;\n    const listClasses = classNames('menu', {\n      'menu-vertically-limited': infiniteList,\n      'spacer-top': infiniteList,\n      'with-top-separator': infiniteList,\n      'with-bottom-separator': Boolean(footerNode)\n    });\n\n    return (\n      <div className=\"multi-select\" ref={div => (this.container = div)}>\n        <div className=\"menu-search\">\n          <SearchBox\n            autoFocus={true}\n            className=\"little-spacer-top\"\n            loading={this.state.loading}\n            onChange={this.handleSearchChange}\n            placeholder={this.props.placeholder}\n            value={query}\n          />\n        </div>\n        <ul className={listClasses}>\n          {selectedElements.length > 0 &&\n            selectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n                selected={true}\n              />\n            ))}\n          {unselectedElements.length > 0 &&\n            unselectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                disabled={!allowSelection}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n              />\n            ))}\n          {showNewElement && (\n            <MultiSelectOption\n              active={activeElement === query}\n              custom={true}\n              element={query}\n              key={query}\n              onHover={this.handleElementHover}\n              onSelectChange={this.handleSelectChange}\n              renderLabel={renderLabel}\n            />\n          )}\n          {!showNewElement && selectedElements.length < 1 && unselectedElements.length < 1 && (\n            <li className=\"spacer-left\">{translateWithParameters('no_results_for_x', query)}</li>\n          )}\n        </ul>\n        {footerNode}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ComponentContext } from '../../../app/components/ComponentContext';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { translate } from '../../../helpers/l10n';\nimport { DefinitionChangeEventInner, isDefinitionChangeEvent } from './DefinitionChangeEventInner';\nimport { isRichQualityGateEvent, RichQualityGateEventInner } from './RichQualityGateEventInner';\n\nexport interface EventInnerProps {\n  event: T.AnalysisEvent;\n  readonly?: boolean;\n}\n\nexport default function EventInner({ event, readonly }: EventInnerProps) {\n  if (isRichQualityGateEvent(event)) {\n    return <RichQualityGateEventInner event={event} readonly={readonly} />;\n  } else if (isDefinitionChangeEvent(event)) {\n    return (\n      <ComponentContext.Consumer>\n        {({ branchLike }) => (\n          <DefinitionChangeEventInner branchLike={branchLike} event={event} readonly={readonly} />\n        )}\n      </ComponentContext.Consumer>\n    );\n  }\n\n  return (\n    <Tooltip overlay={event.description || null}>\n      <span className=\"text-middle\">\n        <span className=\"note little-spacer-right\">\n          {translate('event.category', event.category)}:\n        </span>\n        <strong className=\"spacer-right\">{event.name}</strong>\n      </span>\n    </Tooltip>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { ButtonLink } from '../../../components/controls/buttons';\nimport BranchIcon from '../../../components/icons/BranchIcon';\nimport DropdownIcon from '../../../components/icons/DropdownIcon';\nimport { isMainBranch } from '../../../helpers/branch-like';\nimport { translate } from '../../../helpers/l10n';\nimport { limitComponentName } from '../../../helpers/path';\nimport { getProjectUrl } from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\n\nexport type DefinitionChangeEvent = T.AnalysisEvent &\n  Required<Pick<T.AnalysisEvent, 'definitionChange'>>;\n\nexport function isDefinitionChangeEvent(event: T.AnalysisEvent): event is DefinitionChangeEvent {\n  return event.category === 'DEFINITION_CHANGE' && event.definitionChange !== undefined;\n}\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  event: DefinitionChangeEvent;\n  readonly?: boolean;\n}\n\ninterface State {\n  expanded: boolean;\n}\n\nexport class DefinitionChangeEventInner extends React.PureComponent<Props, State> {\n  state: State = { expanded: false };\n\n  stopPropagation = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.stopPropagation();\n  };\n\n  toggleProjectsList = () => {\n    this.setState(state => ({ expanded: !state.expanded }));\n  };\n\n  renderProjectLink = (project: { key: string; name: string }, branch: string | undefined) => (\n    <Link\n      onClick={this.stopPropagation}\n      title={project.name}\n      to={getProjectUrl(project.key, branch)}>\n      {limitComponentName(project.name, 28)}\n    </Link>\n  );\n\n  renderBranch = (branch = translate('branches.main_branch')) => (\n    <span className=\"nowrap\" title={branch}>\n      <BranchIcon className=\"little-spacer-left text-text-top\" />\n      {branch}\n    </span>\n  );\n\n  renderProjectChange(project: {\n    changeType: string;\n    key: string;\n    name: string;\n    branch?: string;\n    newBranch?: string;\n    oldBranch?: string;\n  }) {\n    const mainBranch = !this.props.branchLike || isMainBranch(this.props.branchLike);\n\n    if (project.changeType === 'ADDED') {\n      const message = mainBranch\n        ? 'event.definition_change.added'\n        : 'event.definition_change.branch_added';\n      return (\n        <div className=\"text-ellipsis\">\n          <FormattedMessage\n            defaultMessage={translate(message)}\n            id={message}\n            values={{\n              project: this.renderProjectLink(project, project.branch),\n              branch: this.renderBranch(project.branch)\n            }}\n          />\n        </div>\n      );\n    } else if (project.changeType === 'REMOVED') {\n      const message = mainBranch\n        ? 'event.definition_change.removed'\n        : 'event.definition_change.branch_removed';\n      return (\n        <div className=\"text-ellipsis\">\n          <FormattedMessage\n            defaultMessage={translate(message)}\n            id={message}\n            values={{\n              project: this.renderProjectLink(project, project.branch),\n              branch: this.renderBranch(project.branch)\n            }}\n          />\n        </div>\n      );\n    } else if (project.changeType === 'BRANCH_CHANGED') {\n      return (\n        <FormattedMessage\n          defaultMessage={translate('event.definition_change.branch_replaced')}\n          id=\"event.definition_change.branch_replaced\"\n          values={{\n            project: this.renderProjectLink(project, project.newBranch),\n            oldBranch: this.renderBranch(project.oldBranch),\n            newBranch: this.renderBranch(project.newBranch)\n          }}\n        />\n      );\n    }\n    return null;\n  }\n\n  render() {\n    const { event, readonly } = this.props;\n    const { expanded } = this.state;\n    return (\n      <>\n        <span className=\"note\">\n          {translate('event.category', event.category)}\n          {!readonly && ':'}\n        </span>\n\n        {!readonly && (\n          <div>\n            <ButtonLink\n              className=\"project-activity-event-inner-more-link\"\n              onClick={this.toggleProjectsList}\n              stopPropagation={true}>\n              {expanded ? translate('hide') : translate('more')}\n              <DropdownIcon className=\"little-spacer-left\" turned={expanded} />\n            </ButtonLink>\n          </div>\n        )}\n\n        {expanded && (\n          <ul className=\"spacer-left spacer-top\">\n            {event.definitionChange.projects.map(project => (\n              <li className=\"display-flex-center spacer-top\" key={project.key}>\n                {this.renderProjectChange(project)}\n              </li>\n            ))}\n          </ul>\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { ResetButtonLink } from '../../../components/controls/buttons';\nimport DropdownIcon from '../../../components/icons/DropdownIcon';\nimport Level from '../../../components/ui/Level';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { getProjectUrl } from '../../../helpers/urls';\n\nexport type RichQualityGateEvent = T.AnalysisEvent & Required<Pick<T.AnalysisEvent, 'qualityGate'>>;\n\nexport function isRichQualityGateEvent(event: T.AnalysisEvent): event is RichQualityGateEvent {\n  return event.category === 'QUALITY_GATE' && event.qualityGate !== undefined;\n}\n\ninterface Props {\n  event: RichQualityGateEvent;\n  readonly?: boolean;\n}\n\ninterface State {\n  expanded: boolean;\n}\n\nexport class RichQualityGateEventInner extends React.PureComponent<Props, State> {\n  state: State = { expanded: false };\n\n  stopPropagation = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.stopPropagation();\n  };\n\n  toggleProjectsList = () => {\n    this.setState(state => ({ expanded: !state.expanded }));\n  };\n\n  render() {\n    const { event, readonly } = this.props;\n    const { expanded } = this.state;\n    return (\n      <>\n        <span className=\"note spacer-right\">{translate('event.category', event.category)}:</span>\n        {event.qualityGate.stillFailing ? (\n          <FormattedMessage\n            defaultMessage={translate('event.quality_gate.still_x')}\n            id=\"event.quality_gate.still_x\"\n            values={{ status: <Level level={event.qualityGate.status} small={true} /> }}\n          />\n        ) : (\n          <Level level={event.qualityGate.status} small={true} />\n        )}\n\n        <div>\n          {!readonly && event.qualityGate.failing.length > 0 && (\n            <ResetButtonLink\n              className=\"project-activity-event-inner-more-link\"\n              onClick={this.toggleProjectsList}\n              stopPropagation={true}>\n              {expanded ? translate('hide') : translate('more')}\n              <DropdownIcon className=\"little-spacer-left\" turned={expanded} />\n            </ResetButtonLink>\n          )}\n        </div>\n\n        {expanded && (\n          <ul className=\"spacer-left spacer-top\">\n            {event.qualityGate.failing.map(project => (\n              <li className=\"display-flex-center spacer-top\" key={project.key}>\n                <Level\n                  aria-label={translate('quality_gates.status')}\n                  className=\"spacer-right\"\n                  level={event.qualityGate.status}\n                  small={true}\n                />\n                <div className=\"flex-1 text-ellipsis\">\n                  <Link\n                    onClick={this.stopPropagation}\n                    title={project.name}\n                    to={getProjectUrl(project.key, project.branch)}>\n                    <span aria-label={translateWithParameters('project_x', project.name)}>\n                      {project.name}\n                    </span>\n                  </Link>\n                </div>\n              </li>\n            ))}\n          </ul>\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { getJSON, post } from '../helpers/request';\nimport { getBaseUrl } from '../helpers/system';\nimport { ComponentReportStatus } from '../types/component-report';\n\nexport function getReportStatus(\n  componentKey: string,\n  branchKey?: string\n): Promise<ComponentReportStatus> {\n  return getJSON('/api/governance_reports/status', { componentKey, branchKey }).catch(\n    throwGlobalError\n  );\n}\n\nexport function getReportUrl(componentKey: string, branchKey?: string): string {\n  let url = `${getBaseUrl()}/api/governance_reports/download?componentKey=${encodeURIComponent(\n    componentKey\n  )}`;\n\n  if (branchKey) {\n    url += `&branchKey=${branchKey}`;\n  }\n\n  return url;\n}\n\nexport function subscribeToEmailReport(\n  componentKey: string,\n  branchKey?: string\n): Promise<void | Response> {\n  return post('/api/governance_reports/subscribe', { componentKey, branchKey }).catch(\n    throwGlobalError\n  );\n}\n\nexport function unsubscribeFromEmailReport(\n  componentKey: string,\n  branchKey?: string\n): Promise<void | Response> {\n  return post('/api/governance_reports/unsubscribe', { componentKey, branchKey }).catch(\n    throwGlobalError\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function HistoryIcon({ fill = 'currentColor', ...iconProps }: IconProps) {\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M14.7 3.4v3.3c0 .1 0 .2-.1.2s-.2 0-.3-.1l-.9-.9-4.8 4.8c-.1.1-.1.1-.2.1s-.1 0-.2-.1L6.4 9l-3.2 3.2-1.5-1.5 4.5-4.5c.1-.1.1-.1.2-.1s.1 0 .2.1L8.4 8l3.5-3.5-.9-1c-.1-.1-.1-.2-.1-.3s.1-.1.2-.1h3.3c.1 0 .1 0 .2.1.1 0 .1.1.1.2z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { getJSON, post, postJSON, RequestData } from '../helpers/request';\nimport { BranchParameters } from '../types/branch-like';\n\nexport function getProjectActivity(\n  data: {\n    project: string;\n    category?: string;\n    from?: string;\n    p?: number;\n    ps?: number;\n  } & BranchParameters\n): Promise<{ analyses: T.Analysis[]; paging: T.Paging }> {\n  return getJSON('/api/project_analyses/search', data).catch(throwGlobalError);\n}\n\ninterface CreateEventResponse {\n  analysis: string;\n  key: string;\n  name: string;\n  category: string;\n  description?: string;\n}\n\nexport function createEvent(\n  analysis: string,\n  name: string,\n  category?: string,\n  description?: string\n): Promise<CreateEventResponse> {\n  const data: RequestData = { analysis, name };\n  if (category) {\n    data.category = category;\n  }\n  if (description) {\n    data.description = description;\n  }\n  return postJSON('/api/project_analyses/create_event', data).then(r => r.event, throwGlobalError);\n}\n\nexport function deleteEvent(event: string): Promise<void | Response> {\n  return post('/api/project_analyses/delete_event', { event }).catch(throwGlobalError);\n}\n\nexport function changeEvent(\n  event: string,\n  name?: string,\n  description?: string\n): Promise<CreateEventResponse> {\n  const data: RequestData = { event };\n  if (name) {\n    data.name = name;\n  }\n  if (description) {\n    data.description = description;\n  }\n  return postJSON('/api/project_analyses/update_event', data).then(r => r.event, throwGlobalError);\n}\n\nexport function deleteAnalysis(analysis: string): Promise<void | Response> {\n  return post('/api/project_analyses/delete', { analysis }).catch(throwGlobalError);\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { parseDate } from '../helpers/dates';\nimport { translate, translateWithParameters } from '../helpers/l10n';\nimport { ApplicationPeriod } from '../types/application';\n\nexport function getPeriodLabel(\n  period: T.Period | undefined,\n  dateFormatter: (date: string) => string\n) {\n  if (!period) {\n    return undefined;\n  }\n\n  let parameter = period.modeParam || period.parameter || '';\n\n  switch (period.mode) {\n    case 'SPECIFIC_ANALYSIS':\n      parameter = dateFormatter(period.date);\n      break;\n    case 'PREVIOUS_VERSION':\n      parameter = parameter || dateFormatter(period.date);\n      break;\n    /*\n     * Handle legacy period modes, that predate MMF-1579\n     */\n    case 'previous_version':\n      if (!parameter) {\n        return translate('overview.period.previous_version_only_date');\n      }\n      break;\n    case 'date':\n      parameter = parameter && dateFormatter(parameter);\n      break;\n    case 'manual_baseline':\n      parameter = parameter || dateFormatter(period.date);\n      break;\n    default: // No change in the parameter\n  }\n\n  return translateWithParameters(`overview.period.${period.mode.toLowerCase()}`, parameter);\n}\n\nexport function getPeriodDate(period?: { date?: string }): Date | undefined {\n  return period && period.date ? parseDate(period.date) : undefined;\n}\n\nexport function isApplicationPeriod(\n  period: T.Period | ApplicationPeriod\n): period is ApplicationPeriod {\n  return (period as ApplicationPeriod).project !== undefined;\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LineChart.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { getJSON } from '../helpers/request';\nimport { BranchParameters } from '../types/branch-like';\n\ninterface TimeMachineResponse {\n  measures: {\n    metric: string;\n    history: Array<{ date: string; value?: string }>;\n  }[];\n  paging: T.Paging;\n}\n\nexport function getTimeMachineData(\n  data: {\n    component: string;\n    from?: string;\n    metrics: string;\n    p?: number;\n    ps?: number;\n    to?: string;\n  } & BranchParameters\n): Promise<TimeMachineResponse> {\n  return getJSON('/api/measures/search_history', data).catch(throwGlobalError);\n}\n\nexport function getAllTimeMachineData(\n  data: {\n    component: string;\n    metrics: string;\n    from?: string;\n    p?: number;\n    to?: string;\n  } & BranchParameters,\n  prev?: TimeMachineResponse\n): Promise<TimeMachineResponse> {\n  return getTimeMachineData({ ...data, ps: 1000 }).then(r => {\n    const result = prev\n      ? {\n          measures: prev.measures.map((measure, idx) => ({\n            ...measure,\n            history: measure.history.concat(r.measures[idx].history)\n          })),\n          paging: r.paging\n        }\n      : r;\n\n    if (result.paging.pageIndex * result.paging.pageSize >= result.paging.total) {\n      return result;\n    }\n    return getAllTimeMachineData({ ...data, p: result.paging.pageIndex + 1 }, result);\n  });\n}\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".activity-graph-container{padding:10px 0}.activity-graph-tooltip{padding:8px}.activity-graph-tooltip-line{height:20px}.activity-graph-tooltip-line+.activity-graph-tooltip-line{padding-top:4px}.activity-graph-tooltip-issues-line{height:26px;padding-bottom:4px}.activity-graph-tooltip-separator{padding-left:16px;padding-right:16px}.activity-graph-tooltip-separator hr{margin-top:8px;margin-bottom:8px}.activity-graph-tooltip-title,.activity-graph-tooltip-value{font-weight:700}.activity-graph-legends{flex-grow:0;padding-bottom:16px;text-align:center}.activity-graph-legend-actionable{display:inline-block;padding:4px 8px 4px 12px;border-width:1px;border-style:solid;border-radius:12px}.activity-graph-new-code-legend{margin-right:10px}.activity-graph-new-code-legend:after{content:\\\"\\\";display:inline-block;margin-left:4px;width:8px;height:8px;background-color:#fbf3d5;border:2px solid #f1e8cb}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./AdvancedTimeline.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".line-tooltip{fill:none;stroke:#666;stroke-width:1px;shape-rendering:crispEdges}.chart-mouse-events-overlay{fill:none;stroke:none;pointer-events:all}.chart-zoomed .leak-chart-rect,.chart-zoomed .line-chart-area,.chart-zoomed .line-chart-path{-webkit-clip-path:url(#chart-clip);clip-path:url(#chart-clip)}.line-chart-dot{fill:#4b9fd5}.line-chart-dot.line-chart-dot-1{fill:#236a97}.line-chart-dot.line-chart-dot-2{fill:#24c6e0}.line-chart-event{fill:#fff;stroke:#4b9fd5;stroke-width:2px}.line-chart-event.VERSION{stroke:#4b9fd5}.line-chart-event.QUALITY_GATE{stroke:#0a0}.line-chart-event.QUALITY_PROFILE{stroke:#ed7d20}.line-chart-event.OTHER{stroke:#9139d4}.new-code-legend{fill:#666;font-size:12px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".line-chart-path{fill:none;stroke:#4b9fd5;stroke-width:2px}.line-chart-path.line-chart-path-1{stroke:#236a97}.line-chart-path.line-chart-path-2{stroke:#24c6e0}.line-chart-area{fill:rgba(75,159,213,.3);stroke-width:0}.line-chart-area.line-chart-area-1{fill:rgba(35,106,151,.3)}.line-chart-area.line-chart-area-2{fill:rgba(36,198,224,.3)}.line-chart-point{fill:#fff;stroke:#4b9fd5;stroke-width:2px}.line-chart-tick{fill:#666;font-size:12px}.line-chart-tick-x{text-anchor:end}.line-chart-tick-x-right{text-anchor:start}.line-chart-grid{shape-rendering:crispedges;stroke:#eee}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport HistoryIcon from '../../components/icons/HistoryIcon';\nimport { translate } from '../../helpers/l10n';\nimport { getActivityUrl, getMeasureHistoryUrl } from '../../helpers/urls';\nimport { BranchLike } from '../../types/branch-like';\nimport { GraphType } from '../../types/project-activity';\nimport { isCustomGraph } from '../activity-graph/utils';\nimport './ActivityLink.css';\n\nexport interface ActivityLinkProps {\n  branchLike?: BranchLike;\n  component: string;\n  graph?: GraphType;\n  label?: string;\n  metric?: string;\n}\n\nexport default function ActivityLink(props: ActivityLinkProps) {\n  const { branchLike, component, graph, label, metric } = props;\n  return (\n    <Link\n      className=\"activity-link\"\n      to={\n        metric !== undefined && graph !== undefined && isCustomGraph(graph)\n          ? getMeasureHistoryUrl(component, metric, branchLike)\n          : getActivityUrl(component, branchLike, graph)\n      }>\n      <HistoryIcon className=\"little-spacer-right\" size={14} />\n      <span>{label || translate('portfolio.activity_link')}</span>\n    </Link>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./ActivityLink.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"a.activity-link{border:none}.activity-link>span{border-bottom:1px solid #cae3f2}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { bisector, extent, max } from 'd3-array';\nimport { scaleLinear, scalePoint, scaleTime, ScaleTime } from 'd3-scale';\nimport { area, curveBasis, line as d3Line } from 'd3-shape';\nimport { flatten, isEqual, sortBy, throttle, uniq } from 'lodash';\nimport * as React from 'react';\nimport { colors, rawSizes } from '../../app/theme';\nimport { isDefined } from '../../helpers/types';\nimport './AdvancedTimeline.css';\nimport './LineChart.css';\n\nexport interface Props {\n  basisCurve?: boolean;\n  endDate?: Date;\n  disableZoom?: boolean;\n  displayNewCodeLegend?: boolean;\n  formatYTick?: (tick: number | string) => string;\n  hideGrid?: boolean;\n  hideXAxis?: boolean;\n  height: number;\n  width: number;\n  leakPeriodDate?: Date;\n  // used to avoid same y ticks labels\n  maxYTicksCount: number;\n  metricType: string;\n  padding: number[];\n  selectedDate?: Date;\n  series: T.Chart.Serie[];\n  showAreas?: boolean;\n  startDate?: Date;\n  updateSelectedDate?: (selectedDate?: Date) => void;\n  updateTooltip?: (selectedDate?: Date, tooltipXPos?: number, tooltipIdx?: number) => void;\n  updateZoom?: (start?: Date, endDate?: Date) => void;\n  zoomSpeed: number;\n}\n\ntype XScale = ScaleTime<number, number>;\n// TODO it should be `ScaleLinear<number, number> | ScalePoint<number> | ScalePoint<string>`, but it's super hard to make it work :'(\ntype YScale = any;\n\nconst LEGEND_LINE_HEIGHT = 16;\n\ninterface State {\n  leakLegendTextWidth?: number;\n  maxXRange: number[];\n  mouseOver?: boolean;\n  selectedDate?: Date;\n  selectedDateXPos?: number;\n  selectedDateIdx?: number;\n  yScale: YScale;\n  xScale: XScale;\n}\n\nexport default class AdvancedTimeline extends React.PureComponent<Props, State> {\n  static defaultProps = {\n    eventSize: 8,\n    maxYTicksCount: 4,\n    padding: [26, 10, 50, 60],\n    zoomSpeed: 1\n  };\n\n  constructor(props: Props) {\n    super(props);\n    const scales = this.getScales(props);\n    const selectedDatePos = this.getSelectedDatePos(scales.xScale, props.selectedDate);\n    this.state = { ...scales, ...selectedDatePos };\n    this.updateTooltipPos = throttle(this.updateTooltipPos, 40);\n    this.handleZoomUpdate = throttle(this.handleZoomUpdate, 40);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    let scales;\n    let selectedDatePos;\n    if (\n      this.props.metricType !== prevProps.metricType ||\n      this.props.startDate !== prevProps.startDate ||\n      this.props.endDate !== prevProps.endDate ||\n      this.props.width !== prevProps.width ||\n      this.props.padding !== prevProps.padding ||\n      this.props.height !== prevProps.height ||\n      this.props.series !== prevProps.series\n    ) {\n      scales = this.getScales(this.props);\n      if (this.state.selectedDate != null) {\n        selectedDatePos = this.getSelectedDatePos(scales.xScale, this.state.selectedDate);\n      }\n    }\n\n    if (!isEqual(this.props.selectedDate, prevProps.selectedDate)) {\n      const xScale = scales ? scales.xScale : this.state.xScale;\n      selectedDatePos = this.getSelectedDatePos(xScale, this.props.selectedDate);\n    }\n\n    if (scales || selectedDatePos) {\n      if (scales) {\n        this.setState({ ...scales });\n      }\n      if (selectedDatePos) {\n        this.setState({ ...selectedDatePos });\n      }\n\n      if (selectedDatePos && this.props.updateTooltip) {\n        this.props.updateTooltip(\n          selectedDatePos.selectedDate,\n          selectedDatePos.selectedDateXPos,\n          selectedDatePos.selectedDateIdx\n        );\n      }\n    }\n  }\n\n  getRatingScale = (availableHeight: number) => {\n    return scalePoint<number>()\n      .domain([5, 4, 3, 2, 1])\n      .range([availableHeight, 0]);\n  };\n\n  getLevelScale = (availableHeight: number) => {\n    return scalePoint()\n      .domain(['ERROR', 'WARN', 'OK'])\n      .range([availableHeight, 0]);\n  };\n\n  getYScale = (props: Props, availableHeight: number, flatData: T.Chart.Point[]): YScale => {\n    if (props.metricType === 'RATING') {\n      return this.getRatingScale(availableHeight);\n    } else if (props.metricType === 'LEVEL') {\n      return this.getLevelScale(availableHeight);\n    }\n    return scaleLinear()\n      .range([availableHeight, 0])\n      .domain([0, max(flatData, d => Number(d.y || 0)) || 1])\n      .nice();\n  };\n\n  getXScale = (\n    { startDate, endDate }: Props,\n    availableWidth: number,\n    flatData: T.Chart.Point[]\n  ) => {\n    const dateRange = extent(flatData, d => d.x) as [Date, Date];\n    const start = startDate && startDate > dateRange[0] ? startDate : dateRange[0];\n    const end = endDate && endDate < dateRange[1] ? endDate : dateRange[1];\n    const xScale: ScaleTime<number, number> = scaleTime()\n      .domain(sortBy([start, end]))\n      .range([0, availableWidth])\n      .clamp(false);\n    return {\n      xScale,\n      maxXRange: dateRange.map(xScale)\n    };\n  };\n\n  getScales = (props: Props) => {\n    const availableWidth = props.width - props.padding[1] - props.padding[3];\n    const availableHeight = props.height - props.padding[0] - props.padding[2];\n    const flatData = flatten(props.series.map(serie => serie.data));\n    return {\n      ...this.getXScale(props, availableWidth, flatData),\n      yScale: this.getYScale(props, availableHeight, flatData)\n    };\n  };\n\n  getSelectedDatePos = (xScale: XScale, selectedDate?: Date) => {\n    const firstSerie = this.props.series[0];\n    if (selectedDate && firstSerie) {\n      const idx = firstSerie.data.findIndex(p => p.x.valueOf() === selectedDate.valueOf());\n      const xRange = sortBy(xScale.range());\n      const xPos = xScale(selectedDate);\n      if (idx >= 0 && xPos >= xRange[0] && xPos <= xRange[1]) {\n        return {\n          selectedDate,\n          selectedDateXPos: xScale(selectedDate),\n          selectedDateIdx: idx\n        };\n      }\n    }\n    return { selectedDate: undefined, selectedDateXPos: undefined, selectedDateIdx: undefined };\n  };\n\n  getEventMarker = (size: number) => {\n    const half = size / 2;\n    return `M${half} 0 L${size} ${half} L ${half} ${size} L0 ${half} L${half} 0 L${size} ${half}`;\n  };\n\n  handleWheel = (event: React.WheelEvent<SVGElement>) => {\n    event.preventDefault();\n    const { maxXRange, xScale } = this.state;\n    const parentBbox = event.currentTarget.getBoundingClientRect();\n    const mouseXPos = (event.pageX - parentBbox.left) / parentBbox.width;\n    const xRange = xScale.range();\n\n    const speed = event.deltaMode\n      ? (25 / event.deltaMode) * this.props.zoomSpeed\n      : this.props.zoomSpeed;\n    const leftPos = xRange[0] - Math.round(speed * event.deltaY * mouseXPos);\n    const rightPos = xRange[1] + Math.round(speed * event.deltaY * (1 - mouseXPos));\n    const startDate = leftPos > maxXRange[0] ? xScale.invert(leftPos) : undefined;\n    const endDate = rightPos < maxXRange[1] ? xScale.invert(rightPos) : undefined;\n    this.handleZoomUpdate(startDate, endDate);\n  };\n\n  handleZoomUpdate = (startDate?: Date, endDate?: Date) => {\n    if (this.props.updateZoom) {\n      this.props.updateZoom(startDate, endDate);\n    }\n  };\n\n  handleMouseMove = (event: React.MouseEvent<SVGElement>) => {\n    const parentBbox = event.currentTarget.getBoundingClientRect();\n    this.updateTooltipPos(event.pageX - parentBbox.left);\n  };\n\n  handleMouseEnter = () => {\n    this.setState({ mouseOver: true });\n  };\n\n  handleMouseOut = () => {\n    const { updateTooltip } = this.props;\n    if (updateTooltip) {\n      this.setState({\n        mouseOver: false,\n        selectedDate: undefined,\n        selectedDateXPos: undefined,\n        selectedDateIdx: undefined\n      });\n      updateTooltip(undefined, undefined, undefined);\n    }\n  };\n\n  handleClick = () => {\n    const { updateSelectedDate } = this.props;\n    if (updateSelectedDate) {\n      updateSelectedDate(this.state.selectedDate || undefined);\n    }\n  };\n\n  setLeakLegendTextWidth = (node: SVGTextElement | null) => {\n    if (node) {\n      this.setState({ leakLegendTextWidth: node.getBoundingClientRect().width });\n    }\n  };\n\n  updateTooltipPos = (xPos: number) => {\n    this.setState(state => {\n      const firstSerie = this.props.series[0];\n      if (state.mouseOver && firstSerie) {\n        const { updateTooltip } = this.props;\n        const date = state.xScale.invert(xPos);\n        const bisectX = bisector<T.Chart.Point, Date>(d => d.x).right;\n        let idx = bisectX(firstSerie.data, date);\n        if (idx >= 0) {\n          const previousPoint = firstSerie.data[idx - 1];\n          const nextPoint = firstSerie.data[idx];\n          if (\n            !nextPoint ||\n            (previousPoint &&\n              date.valueOf() - previousPoint.x.valueOf() <= nextPoint.x.valueOf() - date.valueOf())\n          ) {\n            idx--;\n          }\n          const selectedDate = firstSerie.data[idx].x;\n          const xPos = state.xScale(selectedDate);\n          if (updateTooltip) {\n            updateTooltip(selectedDate, xPos, idx);\n          }\n          return { selectedDate, selectedDateXPos: xPos, selectedDateIdx: idx };\n        }\n      }\n      return null;\n    });\n  };\n\n  renderHorizontalGrid = () => {\n    const { formatYTick } = this.props;\n    const { xScale, yScale } = this.state;\n    const hasTicks = typeof yScale.ticks === 'function';\n    let ticks: Array<string | number> = hasTicks\n      ? yScale.ticks(this.props.maxYTicksCount)\n      : yScale.domain();\n\n    if (!ticks.length) {\n      ticks.push(yScale.domain()[1]);\n    }\n\n    // if there are duplicated ticks, that means 4 ticks are too much for this data\n    // so let's just use the domain values (min and max)\n    if (formatYTick) {\n      const formattedTicks = ticks.map(tick => formatYTick(tick));\n      if (ticks.length > uniq(formattedTicks).length) {\n        ticks = yScale.domain();\n      }\n    }\n\n    return (\n      <g>\n        {ticks.map(tick => (\n          <g key={tick}>\n            {formatYTick != null && (\n              <text\n                className=\"line-chart-tick line-chart-tick-x\"\n                dx=\"-1em\"\n                dy=\"0.3em\"\n                textAnchor=\"end\"\n                x={xScale.range()[0]}\n                y={yScale(tick)}>\n                {formatYTick(tick)}\n              </text>\n            )}\n            <line\n              className=\"line-chart-grid\"\n              x1={xScale.range()[0]}\n              x2={xScale.range()[1]}\n              y1={yScale(tick)}\n              y2={yScale(tick)}\n            />\n          </g>\n        ))}\n      </g>\n    );\n  };\n\n  renderXAxisTicks = () => {\n    const { xScale, yScale } = this.state;\n    const format = xScale.tickFormat(7);\n    const ticks = xScale.ticks(7);\n    const y = yScale.range()[0];\n    return (\n      <g transform=\"translate(0, 20)\">\n        {ticks.slice(0, -1).map((tick, index) => {\n          const nextTick = index + 1 < ticks.length ? ticks[index + 1] : xScale.domain()[1];\n          const x = (xScale(tick) + xScale(nextTick)) / 2;\n          return (\n            <text\n              className=\"line-chart-tick\"\n              // eslint-disable-next-line react/no-array-index-key\n              key={index}\n              textAnchor=\"end\"\n              transform={`rotate(-35, ${x}, ${y})`}\n              x={x}\n              y={y}>\n              {format(tick)}\n            </text>\n          );\n        })}\n      </g>\n    );\n  };\n\n  renderNewCodeLegend = (params: { leakStart: number; leakWidth: number }) => {\n    const { leakStart, leakWidth } = params;\n    const { leakLegendTextWidth, xScale, yScale } = this.state;\n    const yRange = yScale.range();\n    const xRange = xScale.range();\n\n    const legendMinWidth = (leakLegendTextWidth || 0) + rawSizes.grid;\n    const legendPadding = rawSizes.grid / 2;\n\n    let legendBackgroundPosition;\n    let legendBackgroundWidth;\n    let legendMargin;\n    let legendPosition;\n    let legendTextAnchor;\n\n    if (leakWidth >= legendMinWidth) {\n      legendBackgroundWidth = leakWidth;\n      legendBackgroundPosition = leakStart;\n      legendMargin = 0;\n      legendPosition = legendBackgroundPosition + legendPadding;\n      legendTextAnchor = 'start';\n    } else {\n      legendBackgroundWidth = legendMinWidth;\n      legendBackgroundPosition = xRange[xRange.length - 1] - legendBackgroundWidth;\n      legendMargin = rawSizes.grid / 2;\n      legendPosition = xRange[xRange.length - 1] - legendPadding;\n      legendTextAnchor = 'end';\n    }\n\n    return (\n      <>\n        <rect\n          fill={colors.leakPrimaryColor}\n          height={LEGEND_LINE_HEIGHT}\n          width={legendBackgroundWidth}\n          x={legendBackgroundPosition}\n          y={yRange[yRange.length - 1] - LEGEND_LINE_HEIGHT - legendMargin}\n        />\n        <text\n          className=\"new-code-legend\"\n          ref={this.setLeakLegendTextWidth}\n          x={legendPosition}\n          y={yRange[yRange.length - 1] - legendPadding - legendMargin}\n          textAnchor={legendTextAnchor}>\n          new code\n        </text>\n      </>\n    );\n  };\n\n  renderLeak = () => {\n    const { displayNewCodeLegend, leakPeriodDate } = this.props;\n    if (!leakPeriodDate) {\n      return null;\n    }\n    const { xScale, yScale } = this.state;\n    const yRange = yScale.range();\n    const xRange = xScale.range();\n\n    // truncate leak to start of chart to prevent weird visual artifacts when too far left\n    // (occurs when leak starts a long time before first analysis)\n    const leakStart = Math.max(xScale(leakPeriodDate), xRange[0]);\n\n    const leakWidth = xRange[xRange.length - 1] - leakStart;\n    if (leakWidth < 1) {\n      return null;\n    }\n\n    return (\n      <>\n        {displayNewCodeLegend && this.renderNewCodeLegend({ leakStart, leakWidth })}\n        <rect\n          className=\"leak-chart-rect\"\n          fill={colors.leakPrimaryColor}\n          height={yRange[0] - yRange[yRange.length - 1]}\n          width={leakWidth}\n          x={leakStart}\n          y={yRange[yRange.length - 1]}\n        />\n      </>\n    );\n  };\n\n  renderLines = () => {\n    const lineGenerator = d3Line<T.Chart.Point>()\n      .defined(d => Boolean(d.y || d.y === 0))\n      .x(d => this.state.xScale(d.x))\n      .y(d => this.state.yScale(d.y));\n    if (this.props.basisCurve) {\n      lineGenerator.curve(curveBasis);\n    }\n    return (\n      <g>\n        {this.props.series.map((serie, idx) => (\n          <path\n            className={classNames('line-chart-path', 'line-chart-path-' + idx)}\n            d={lineGenerator(serie.data) || undefined}\n            key={serie.name}\n          />\n        ))}\n      </g>\n    );\n  };\n\n  renderDots = () => {\n    return (\n      <g>\n        {this.props.series\n          .map((serie, serieIdx) =>\n            serie.data\n              .map((point, idx) => {\n                const pointNotDefined = !point.y && point.y !== 0;\n                const hasPointBefore =\n                  serie.data[idx - 1] && (serie.data[idx - 1].y || serie.data[idx - 1].y === 0);\n                const hasPointAfter =\n                  serie.data[idx + 1] && (serie.data[idx + 1].y || serie.data[idx + 1].y === 0);\n                if (pointNotDefined || hasPointBefore || hasPointAfter) {\n                  return undefined;\n                }\n                return (\n                  <circle\n                    className={classNames('line-chart-dot', 'line-chart-dot-' + serieIdx)}\n                    cx={this.state.xScale(point.x)}\n                    cy={this.state.yScale(point.y)}\n                    // eslint-disable-next-line react/no-array-index-key\n                    key={serie.name + idx}\n                    r=\"2\"\n                  />\n                );\n              })\n              .filter(isDefined)\n          )\n          .filter(dots => dots.length > 0)}\n      </g>\n    );\n  };\n\n  renderAreas = () => {\n    const areaGenerator = area<T.Chart.Point>()\n      .defined(d => Boolean(d.y || d.y === 0))\n      .x(d => this.state.xScale(d.x))\n      .y1(d => this.state.yScale(d.y))\n      .y0(this.state.yScale(0));\n    if (this.props.basisCurve) {\n      areaGenerator.curve(curveBasis);\n    }\n    return (\n      <g>\n        {this.props.series.map((serie, idx) => (\n          <path\n            className={classNames('line-chart-area', 'line-chart-area-' + idx)}\n            d={areaGenerator(serie.data) || undefined}\n            key={serie.name}\n          />\n        ))}\n      </g>\n    );\n  };\n\n  renderSelectedDate = () => {\n    const { selectedDateIdx, selectedDateXPos, yScale } = this.state;\n    const firstSerie = this.props.series[0];\n    if (selectedDateIdx == null || selectedDateXPos == null || !firstSerie) {\n      return null;\n    }\n\n    return (\n      <g>\n        <line\n          className=\"line-tooltip\"\n          x1={selectedDateXPos}\n          x2={selectedDateXPos}\n          y1={yScale.range()[0]}\n          y2={yScale.range()[1]}\n        />\n        {this.props.series.map((serie, idx) => {\n          const point = serie.data[selectedDateIdx];\n          if (!point || (!point.y && point.y !== 0)) {\n            return null;\n          }\n          return (\n            <circle\n              className={classNames('line-chart-dot', 'line-chart-dot-' + idx)}\n              cx={selectedDateXPos}\n              cy={yScale(point.y)}\n              key={serie.name}\n              r=\"4\"\n            />\n          );\n        })}\n      </g>\n    );\n  };\n\n  renderClipPath = () => {\n    return (\n      <defs>\n        <clipPath id=\"chart-clip\">\n          <rect\n            height={this.state.yScale.range()[0] + 10}\n            transform=\"translate(0,-5)\"\n            width={this.state.xScale.range()[1]}\n          />\n        </clipPath>\n      </defs>\n    );\n  };\n\n  renderMouseEventsOverlay = (zoomEnabled: boolean) => {\n    const mouseEvents: Partial<React.SVGProps<SVGRectElement>> = {};\n    if (zoomEnabled) {\n      mouseEvents.onWheel = this.handleWheel;\n    }\n    if (this.props.updateTooltip) {\n      mouseEvents.onMouseEnter = this.handleMouseEnter;\n      mouseEvents.onMouseMove = this.handleMouseMove;\n      mouseEvents.onMouseOut = this.handleMouseOut;\n    }\n    if (this.props.updateSelectedDate) {\n      mouseEvents.onClick = this.handleClick;\n    }\n    return (\n      <rect\n        className=\"chart-mouse-events-overlay\"\n        height={this.state.yScale.range()[0]}\n        width={this.state.xScale.range()[1]}\n        {...mouseEvents}\n      />\n    );\n  };\n\n  render() {\n    if (!this.props.width || !this.props.height) {\n      return <div />;\n    }\n    const zoomEnabled = !this.props.disableZoom && this.props.updateZoom != null;\n    const isZoomed = Boolean(this.props.startDate || this.props.endDate);\n    return (\n      <svg\n        className={classNames('line-chart', { 'chart-zoomed': isZoomed })}\n        height={this.props.height}\n        width={this.props.width}>\n        {zoomEnabled && this.renderClipPath()}\n        <g transform={`translate(${this.props.padding[3]}, ${this.props.padding[0]})`}>\n          {this.props.leakPeriodDate != null && this.renderLeak()}\n          {!this.props.hideGrid && this.renderHorizontalGrid()}\n          {!this.props.hideXAxis && this.renderXAxisTicks()}\n          {this.props.showAreas && this.renderAreas()}\n          {this.renderLines()}\n          {this.renderDots()}\n          {this.renderSelectedDate()}\n          {this.renderMouseEventsOverlay(zoomEnabled)}\n        </g>\n      </svg>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { colors } from '../../app/theme';\nimport Icon from './Icon';\n\ninterface Props {\n  className?: string;\n  index: number;\n  size?: number;\n}\n\nexport default function ChartLegendIcon({ index, ...iconProps }: Props) {\n  const COLORS = [colors.blue, colors.darkBlue, '#24c6e0'];\n  return (\n    <Icon {...iconProps}>\n      <path\n        d=\"M14.325 7.143v1.714q0 0.357-0.25 0.607t-0.607 0.25h-10.857q-0.357 0-0.607-0.25t-0.25-0.607v-1.714q0-0.357 0.25-0.607t0.607-0.25h10.857q0.357 0 0.607 0.25t0.25 0.607z\"\n        style={{ fill: COLORS[index] || COLORS[0] }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { ClearButton } from '../../components/controls/buttons';\nimport AlertWarnIcon from '../../components/icons/AlertWarnIcon';\nimport ChartLegendIcon from '../../components/icons/ChartLegendIcon';\n\ninterface Props {\n  className?: string;\n  index: number;\n  metric: string;\n  name: string;\n  showWarning?: boolean;\n  removeMetric?: (metric: string) => void;\n}\n\nexport default class GraphsLegendItem extends React.PureComponent<Props> {\n  handleClick = () => {\n    if (this.props.removeMetric) {\n      this.props.removeMetric(this.props.metric);\n    }\n  };\n\n  render() {\n    const isActionable = this.props.removeMetric != null;\n    const legendClass = classNames(\n      { 'activity-graph-legend-actionable': isActionable },\n      this.props.className\n    );\n    return (\n      <span className={legendClass}>\n        {this.props.showWarning ? (\n          <AlertWarnIcon className=\"spacer-right\" />\n        ) : (\n          <ChartLegendIcon className=\"text-middle spacer-right\" index={this.props.index} />\n        )}\n        <span className=\"text-middle\">{this.props.name}</span>\n        {isActionable && (\n          <ClearButton\n            className=\"button-tiny spacer-left text-middle\"\n            iconProps={{ size: 12 }}\n            onClick={this.handleClick}\n          />\n        )}\n      </span>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from '../../components/controls/Tooltip';\nimport { translate } from '../../helpers/l10n';\nimport { Serie } from '../../types/project-activity';\nimport GraphsLegendItem from './GraphsLegendItem';\nimport { hasDataValues } from './utils';\n\nexport interface GraphsLegendCustomProps {\n  removeMetric: (metric: string) => void;\n  series: Serie[];\n}\n\nexport default function GraphsLegendCustom(props: GraphsLegendCustomProps) {\n  const { series } = props;\n  return (\n    <div className=\"activity-graph-legends display-flex-center\">\n      <div className=\"flex-1\">\n        {series.map((serie, idx) => {\n          const hasData = hasDataValues(serie);\n          const legendItem = (\n            <GraphsLegendItem\n              index={idx}\n              metric={serie.name}\n              name={serie.translatedName}\n              removeMetric={props.removeMetric}\n              showWarning={!hasData}\n            />\n          );\n          if (!hasData) {\n            return (\n              <Tooltip\n                key={serie.name}\n                overlay={translate('project_activity.graphs.custom.metric_no_history')}>\n                <span className=\"spacer-left spacer-right\">{legendItem}</span>\n              </Tooltip>\n            );\n          }\n          return (\n            <span className=\"spacer-left spacer-right\" key={serie.name}>\n              {legendItem}\n            </span>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Serie } from '../../types/project-activity';\nimport GraphsLegendItem from './GraphsLegendItem';\n\nexport interface GraphsLegendStaticProps {\n  series: Array<Pick<Serie, 'name' | 'translatedName'>>;\n}\n\nexport default function GraphsLegendStatic({ series }: GraphsLegendStaticProps) {\n  return (\n    <div className=\"activity-graph-legends\">\n      {series.map((serie, idx) => (\n        <GraphsLegendItem\n          className=\"big-spacer-left big-spacer-right\"\n          index={idx}\n          key={serie.name}\n          metric={serie.name}\n          name={serie.translatedName}\n        />\n      ))}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ChartLegendIcon from '../../components/icons/ChartLegendIcon';\n\ninterface Props {\n  name: string;\n  index: number;\n  translatedName: string;\n  value: string;\n}\n\nexport default function GraphsTooltipsContent({ name, index, translatedName, value }: Props) {\n  return (\n    <tr className=\"activity-graph-tooltip-line\" key={name}>\n      <td className=\"thin\">\n        <ChartLegendIcon className=\"spacer-right\" index={index} />\n      </td>\n      <td className=\"activity-graph-tooltip-value text-right spacer-right thin\">{value}</td>\n      <td>{translatedName}</td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../helpers/l10n';\nimport { formatMeasure } from '../../helpers/measures';\nimport { MeasureHistory } from '../../types/project-activity';\n\nexport interface GraphsTooltipsContentCoverageProps {\n  addSeparator: boolean;\n  measuresHistory: MeasureHistory[];\n  tooltipIdx: number;\n}\n\nexport default function GraphsTooltipsContentCoverage({\n  addSeparator,\n  measuresHistory,\n  tooltipIdx\n}: GraphsTooltipsContentCoverageProps) {\n  const uncovered = measuresHistory.find(measure => measure.metric === 'uncovered_lines');\n  const coverage = measuresHistory.find(measure => measure.metric === 'coverage');\n  if (!uncovered || !uncovered.history[tooltipIdx] || !coverage || !coverage.history[tooltipIdx]) {\n    return null;\n  }\n  const uncoveredValue = uncovered.history[tooltipIdx].value;\n  const coverageValue = coverage.history[tooltipIdx].value;\n  return (\n    <tbody>\n      {addSeparator && (\n        <tr>\n          <td className=\"activity-graph-tooltip-separator\" colSpan={3}>\n            <hr />\n          </td>\n        </tr>\n      )}\n      {uncoveredValue && (\n        <tr className=\"activity-graph-tooltip-line\">\n          <td className=\"activity-graph-tooltip-value text-right spacer-right thin\" colSpan={2}>\n            {formatMeasure(uncoveredValue, 'SHORT_INT')}\n          </td>\n          <td>{translate('metric.uncovered_lines.name')}</td>\n        </tr>\n      )}\n      {coverageValue && (\n        <tr className=\"activity-graph-tooltip-line\">\n          <td className=\"activity-graph-tooltip-value text-right spacer-right thin\" colSpan={2}>\n            {formatMeasure(coverageValue, 'PERCENT')}\n          </td>\n          <td>{translate('metric.coverage.name')}</td>\n        </tr>\n      )}\n    </tbody>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../helpers/l10n';\nimport { formatMeasure } from '../../helpers/measures';\nimport { MeasureHistory } from '../../types/project-activity';\n\nexport interface GraphsTooltipsContentDuplicationProps {\n  addSeparator: boolean;\n  measuresHistory: MeasureHistory[];\n  tooltipIdx: number;\n}\n\nexport default function GraphsTooltipsContentDuplication({\n  addSeparator,\n  measuresHistory,\n  tooltipIdx\n}: GraphsTooltipsContentDuplicationProps) {\n  const duplicationDensity = measuresHistory.find(\n    measure => measure.metric === 'duplicated_lines_density'\n  );\n  if (!duplicationDensity || !duplicationDensity.history[tooltipIdx]) {\n    return null;\n  }\n  const duplicationDensityValue = duplicationDensity.history[tooltipIdx].value;\n  if (!duplicationDensityValue) {\n    return null;\n  }\n  return (\n    <tbody>\n      {addSeparator && (\n        <tr>\n          <td className=\"activity-graph-tooltip-separator\" colSpan={3}>\n            <hr />\n          </td>\n        </tr>\n      )}\n      <tr className=\"activity-graph-tooltip-line\">\n        <td className=\"activity-graph-tooltip-value text-right spacer-right thin\" colSpan={2}>\n          {formatMeasure(duplicationDensityValue, 'PERCENT')}\n        </td>\n        <td>{translate('metric.duplicated_lines_density.name')}</td>\n      </tr>\n    </tbody>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport EventInner from '../../apps/projectActivity/components/EventInner';\n\ninterface Props {\n  addSeparator: boolean;\n  events: T.AnalysisEvent[];\n}\n\nexport default function GraphsTooltipsContentEvents({ addSeparator, events }: Props) {\n  return (\n    <tbody>\n      {addSeparator && (\n        <tr>\n          <td className=\"activity-graph-tooltip-separator\" colSpan={3}>\n            <hr />\n          </td>\n        </tr>\n      )}\n      <tr className=\"activity-graph-tooltip-line\">\n        <td colSpan={3}>\n          {events.map(event => (\n            <div className=\"little-spacer-bottom\" key={event.key}>\n              <EventInner event={event} readonly={true} />\n            </div>\n          ))}\n        </td>\n      </tr>\n      {addSeparator && (\n        <tr>\n          <td className=\"activity-graph-tooltip-separator\" colSpan={3}>\n            <hr />\n          </td>\n        </tr>\n      )}\n    </tbody>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ChartLegendIcon from '../../components/icons/ChartLegendIcon';\nimport Rating from '../../components/ui/Rating';\nimport { MeasureHistory } from '../../types/project-activity';\n\nexport interface GraphsTooltipsContentIssuesProps {\n  index: number;\n  measuresHistory: MeasureHistory[];\n  name: string;\n  tooltipIdx: number;\n  translatedName: string;\n  value: string;\n}\n\nconst METRIC_RATING: T.Dict<string> = {\n  bugs: 'reliability_rating',\n  vulnerabilities: 'security_rating',\n  code_smells: 'sqale_rating'\n};\n\nexport default function GraphsTooltipsContentIssues(props: GraphsTooltipsContentIssuesProps) {\n  const rating = props.measuresHistory.find(\n    measure => measure.metric === METRIC_RATING[props.name]\n  );\n  if (!rating || !rating.history[props.tooltipIdx]) {\n    return null;\n  }\n  const ratingValue = rating.history[props.tooltipIdx].value;\n  return (\n    <tr className=\"activity-graph-tooltip-issues-line\" key={props.name}>\n      <td className=\"thin\">\n        <ChartLegendIcon className=\"spacer-right\" index={props.index} />\n      </td>\n      <td className=\"text-right spacer-right\">\n        <span className=\"activity-graph-tooltip-value\">{props.value}</span>\n        {ratingValue && <Rating className=\"spacer-left\" small={true} value={ratingValue} />}\n      </td>\n      <td>{props.translatedName}</td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Popup, PopupPlacement } from '../../components/ui/popups';\nimport { isDefined } from '../../helpers/types';\nimport { MeasureHistory, Serie } from '../../types/project-activity';\nimport DateTimeFormatter from '../intl/DateTimeFormatter';\nimport GraphsTooltipsContent from './GraphsTooltipsContent';\nimport GraphsTooltipsContentCoverage from './GraphsTooltipsContentCoverage';\nimport GraphsTooltipsContentDuplication from './GraphsTooltipsContentDuplication';\nimport GraphsTooltipsContentEvents from './GraphsTooltipsContentEvents';\nimport GraphsTooltipsContentIssues from './GraphsTooltipsContentIssues';\nimport { DEFAULT_GRAPH } from './utils';\n\ninterface Props {\n  events: T.AnalysisEvent[];\n  formatValue: (tick: number | string) => string;\n  graph: string;\n  graphWidth: number;\n  measuresHistory: MeasureHistory[];\n  selectedDate: Date;\n  series: Serie[];\n  tooltipIdx: number;\n  tooltipPos: number;\n}\n\nconst TOOLTIP_WIDTH = 250;\n\nexport default class GraphsTooltips extends React.PureComponent<Props> {\n  renderContent() {\n    const { tooltipIdx } = this.props;\n\n    return this.props.series.map((serie, idx) => {\n      const point = serie.data[tooltipIdx];\n      if (!point || (!point.y && point.y !== 0)) {\n        return null;\n      }\n      if (this.props.graph === DEFAULT_GRAPH) {\n        return (\n          <GraphsTooltipsContentIssues\n            index={idx}\n            key={serie.name}\n            measuresHistory={this.props.measuresHistory}\n            name={serie.name}\n            tooltipIdx={tooltipIdx}\n            translatedName={serie.translatedName}\n            value={this.props.formatValue(point.y)}\n          />\n        );\n      } else {\n        return (\n          <GraphsTooltipsContent\n            index={idx}\n            key={serie.name}\n            name={serie.name}\n            translatedName={serie.translatedName}\n            value={this.props.formatValue(point.y)}\n          />\n        );\n      }\n    });\n  }\n\n  render() {\n    const { events, measuresHistory, tooltipIdx } = this.props;\n    const top = 30;\n    let left = this.props.tooltipPos + 60;\n    let placement = PopupPlacement.RightTop;\n    if (left > this.props.graphWidth - TOOLTIP_WIDTH - 50) {\n      left -= TOOLTIP_WIDTH;\n      placement = PopupPlacement.LeftTop;\n    }\n    const tooltipContent = this.renderContent().filter(isDefined);\n    const addSeparator = tooltipContent.length > 0;\n    return (\n      <Popup\n        className=\"disabled-pointer-events\"\n        placement={placement}\n        style={{ top, left, width: TOOLTIP_WIDTH }}>\n        <div className=\"activity-graph-tooltip\">\n          <div className=\"activity-graph-tooltip-title spacer-bottom\">\n            <DateTimeFormatter date={this.props.selectedDate} />\n          </div>\n          <table className=\"width-100\">\n            {events && events.length > 0 && (\n              <GraphsTooltipsContentEvents addSeparator={addSeparator} events={events} />\n            )}\n            <tbody>{tooltipContent}</tbody>\n            {this.props.graph === 'coverage' && (\n              <GraphsTooltipsContentCoverage\n                addSeparator={addSeparator}\n                measuresHistory={measuresHistory}\n                tooltipIdx={tooltipIdx}\n              />\n            )}\n            {this.props.graph === 'duplications' && (\n              <GraphsTooltipsContentDuplication\n                addSeparator={addSeparator}\n                measuresHistory={measuresHistory}\n                tooltipIdx={tooltipIdx}\n              />\n            )}\n          </table>\n        </div>\n      </Popup>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { AutoSizer } from 'react-virtualized/dist/commonjs/AutoSizer';\nimport AdvancedTimeline from '../../components/charts/AdvancedTimeline';\nimport { formatMeasure, getShortType } from '../../helpers/measures';\nimport { MeasureHistory, Serie } from '../../types/project-activity';\nimport GraphsLegendCustom from './GraphsLegendCustom';\nimport GraphsLegendStatic from './GraphsLegendStatic';\nimport GraphsTooltips from './GraphsTooltips';\n\ninterface Props {\n  events: T.AnalysisEvent[];\n  graph: string;\n  graphEndDate?: Date;\n  graphStartDate?: Date;\n  leakPeriodDate?: Date;\n  isCustom?: boolean;\n  measuresHistory: MeasureHistory[];\n  metricsType: string;\n  removeCustomMetric?: (metric: string) => void;\n  showAreas: boolean;\n  series: Serie[];\n  selectedDate?: Date;\n  updateGraphZoom?: (from?: Date, to?: Date) => void;\n  updateSelectedDate?: (selectedDate?: Date) => void;\n  updateTooltip: (selectedDate?: Date) => void;\n}\n\ninterface State {\n  tooltipIdx?: number;\n  tooltipXPos?: number;\n}\n\nexport default class GraphHistory extends React.PureComponent<Props, State> {\n  state: State = {};\n\n  formatValue = (tick: string | number) => {\n    return formatMeasure(tick, getShortType(this.props.metricsType));\n  };\n\n  formatTooltipValue = (tick: string | number) => {\n    return formatMeasure(tick, this.props.metricsType);\n  };\n\n  updateTooltip = (selectedDate?: Date, tooltipXPos?: number, tooltipIdx?: number) => {\n    this.props.updateTooltip(selectedDate);\n    this.setState({ tooltipXPos, tooltipIdx });\n  };\n\n  render() {\n    const {\n      events,\n      graph,\n      graphEndDate,\n      graphStartDate,\n      isCustom,\n      leakPeriodDate,\n      measuresHistory,\n      metricsType,\n      selectedDate,\n      series,\n      showAreas\n    } = this.props;\n    const { tooltipIdx, tooltipXPos } = this.state;\n\n    return (\n      <div className=\"activity-graph-container flex-grow display-flex-column display-flex-stretch display-flex-justify-center\">\n        {isCustom && this.props.removeCustomMetric ? (\n          <GraphsLegendCustom removeMetric={this.props.removeCustomMetric} series={series} />\n        ) : (\n          <GraphsLegendStatic series={series} />\n        )}\n\n        <div className=\"flex-1\">\n          <AutoSizer>\n            {({ height, width }) => (\n              <div>\n                <AdvancedTimeline\n                  displayNewCodeLegend={true}\n                  endDate={graphEndDate}\n                  formatYTick={this.formatValue}\n                  height={height}\n                  leakPeriodDate={leakPeriodDate}\n                  metricType={metricsType}\n                  selectedDate={selectedDate}\n                  series={series}\n                  showAreas={showAreas}\n                  startDate={graphStartDate}\n                  updateSelectedDate={this.props.updateSelectedDate}\n                  updateTooltip={this.updateTooltip}\n                  updateZoom={this.props.updateGraphZoom}\n                  width={width}\n                />\n                {selectedDate !== undefined &&\n                  tooltipIdx !== undefined &&\n                  tooltipXPos !== undefined && (\n                    <GraphsTooltips\n                      events={events}\n                      formatValue={this.formatTooltipValue}\n                      graph={graph}\n                      graphWidth={width}\n                      measuresHistory={measuresHistory}\n                      selectedDate={selectedDate}\n                      series={series}\n                      tooltipIdx={tooltipIdx}\n                      tooltipPos={tooltipXPos}\n                    />\n                  )}\n              </div>\n            )}\n          </AutoSizer>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { isEqual } from 'lodash';\nimport * as React from 'react';\nimport DeferredSpinner from '../../components/ui/DeferredSpinner';\nimport { translate } from '../../helpers/l10n';\nimport { getBaseUrl } from '../../helpers/system';\nimport { GraphType, MeasureHistory, Serie } from '../../types/project-activity';\nimport GraphHistory from './GraphHistory';\nimport './styles.css';\nimport { getSeriesMetricType, hasHistoryData, isCustomGraph } from './utils';\n\ninterface Props {\n  analyses: T.ParsedAnalysis[];\n  graph: GraphType;\n  graphs: Serie[][];\n  graphEndDate?: Date;\n  graphStartDate?: Date;\n  leakPeriodDate?: Date;\n  loading: boolean;\n  measuresHistory: MeasureHistory[];\n  removeCustomMetric?: (metric: string) => void;\n  selectedDate?: Date;\n  series: Serie[];\n  updateGraphZoom?: (from?: Date, to?: Date) => void;\n  updateSelectedDate?: (selectedDate?: Date) => void;\n}\n\ninterface State {\n  selectedDate?: Date;\n}\n\nexport default class GraphsHistory extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      selectedDate: props.selectedDate\n    };\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (!isEqual(nextProps.selectedDate, this.props.selectedDate)) {\n      this.setState({ selectedDate: nextProps.selectedDate });\n    }\n  }\n\n  getSelectedDateEvents = () => {\n    const { selectedDate } = this.state;\n    const { analyses } = this.props;\n    if (analyses && selectedDate) {\n      const analysis = analyses.find(a => a.date.valueOf() === selectedDate.valueOf());\n      if (analysis) {\n        return analysis.events;\n      }\n    }\n    return [];\n  };\n\n  updateTooltip = (selectedDate?: Date) => {\n    this.setState({ selectedDate });\n  };\n\n  render() {\n    const { graph, loading, series } = this.props;\n    const isCustom = isCustomGraph(graph);\n\n    if (loading) {\n      return (\n        <div className=\"activity-graph-container flex-grow display-flex-column display-flex-stretch display-flex-justify-center\">\n          <div className=\"text-center\">\n            <DeferredSpinner loading={loading} />\n          </div>\n        </div>\n      );\n    }\n\n    if (!hasHistoryData(series)) {\n      return (\n        <div className=\"activity-graph-container flex-grow display-flex-column display-flex-stretch display-flex-justify-center\">\n          <div className=\"display-flex-center display-flex-justify-center\">\n            <img\n              alt=\"\" /* Make screen readers ignore this image; it's purely eye candy. */\n              className=\"spacer-right\"\n              height={52}\n              src={`${getBaseUrl()}/images/activity-chart.svg`}\n            />\n            <div className=\"big-spacer-left big text-muted\" style={{ maxWidth: 300 }}>\n              {translate(\n                isCustom\n                  ? 'project_activity.graphs.custom.no_history'\n                  : 'component_measures.no_history'\n              )}\n            </div>\n          </div>\n        </div>\n      );\n    }\n    const events = this.getSelectedDateEvents();\n    const showAreas = [GraphType.coverage, GraphType.duplications].includes(graph);\n    return (\n      <div className=\"display-flex-justify-center display-flex-column display-flex-stretch flex-grow\">\n        {this.props.graphs.map((graphSeries, idx) => (\n          <GraphHistory\n            events={events}\n            graph={graph}\n            graphEndDate={this.props.graphEndDate}\n            graphStartDate={this.props.graphStartDate}\n            isCustom={isCustom}\n            key={idx}\n            leakPeriodDate={this.props.leakPeriodDate}\n            measuresHistory={this.props.measuresHistory}\n            metricsType={getSeriesMetricType(graphSeries)}\n            removeCustomMetric={this.props.removeCustomMetric}\n            selectedDate={this.state.selectedDate}\n            series={graphSeries}\n            showAreas={showAreas}\n            updateGraphZoom={this.props.updateGraphZoom}\n            updateSelectedDate={this.props.updateSelectedDate}\n            updateTooltip={this.updateTooltip}\n          />\n        ))}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Alert } from '../../components/ui/Alert';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\nimport MultiSelect from '../common/MultiSelect';\n\nexport interface AddGraphMetricPopupProps {\n  elements: string[];\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  metricsTypeFilter?: string[];\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  popupPosition?: any;\n  renderLabel: (element: string) => React.ReactNode;\n  selectedElements: string[];\n}\n\nexport default function AddGraphMetricPopup({\n  elements,\n  metricsTypeFilter,\n  ...props\n}: AddGraphMetricPopupProps) {\n  let footerNode: React.ReactNode = '';\n\n  if (props.selectedElements.length >= 6) {\n    footerNode = (\n      <Alert className=\"spacer-left spacer-right spacer-top\" variant=\"info\">\n        {translate('project_activity.graphs.custom.add_metric_info')}\n      </Alert>\n    );\n  } else if (metricsTypeFilter && metricsTypeFilter.length > 0) {\n    footerNode = (\n      <Alert className=\"spacer-left spacer-right spacer-top\" variant=\"info\">\n        {translateWithParameters(\n          'project_activity.graphs.custom.type_x_message',\n          metricsTypeFilter\n            .map((type: string) => translate('metric.type', type))\n            .sort()\n            .join(', ')\n        )}\n      </Alert>\n    );\n  }\n\n  return (\n    <div className=\"menu abs-width-300\">\n      <MultiSelect\n        allowNewElements={false}\n        allowSelection={props.selectedElements.length < 6}\n        elements={elements}\n        filterSelected={props.filterSelected}\n        footerNode={footerNode}\n        onSearch={props.onSearch}\n        onSelect={(item: string) => elements.includes(item) && props.onSelect(item)}\n        onUnselect={props.onUnselect}\n        placeholder={translate('search.search_for_tags')}\n        renderLabel={props.renderLabel}\n        selectedElements={props.selectedElements}\n      />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { find, sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Button } from '../../components/controls/buttons';\nimport Dropdown from '../../components/controls/Dropdown';\nimport DropdownIcon from '../../components/icons/DropdownIcon';\nimport { getLocalizedMetricName, translate } from '../../helpers/l10n';\nimport { isDiffMetric } from '../../helpers/measures';\nimport AddGraphMetricPopup from './AddGraphMetricPopup';\n\ninterface Props {\n  addMetric: (metric: string) => void;\n  className?: string;\n  metrics: T.Metric[];\n  metricsTypeFilter?: string[];\n  removeMetric: (metric: string) => void;\n  selectedMetrics: string[];\n}\n\ninterface State {\n  metrics: string[];\n  query: string;\n  selectedMetrics: string[];\n}\n\nexport default class AddGraphMetric extends React.PureComponent<Props, State> {\n  state: State = {\n    metrics: [],\n    query: '',\n    selectedMetrics: []\n  };\n\n  filterSelected = (query: string, selectedElements: string[]) => {\n    return selectedElements.filter(element =>\n      this.getLocalizedMetricNameFromKey(element)\n        .toLowerCase()\n        .includes(query.toLowerCase())\n    );\n  };\n\n  filterMetricsElements = (\n    { metricsTypeFilter, metrics, selectedMetrics }: Props,\n    query: string\n  ) => {\n    return metrics\n      .filter(metric => {\n        if (\n          metric.hidden ||\n          isDiffMetric(metric.key) ||\n          ['DATA', 'DISTRIB'].includes(metric.type) ||\n          selectedMetrics.includes(metric.key) ||\n          !getLocalizedMetricName(metric)\n            .toLowerCase()\n            .includes(query.toLowerCase())\n        ) {\n          return false;\n        }\n        if (metricsTypeFilter && metricsTypeFilter.length > 0) {\n          return metricsTypeFilter.includes(metric.type);\n        }\n        return true;\n      })\n      .map(metric => metric.key);\n  };\n\n  getSelectedMetricsElements = (metrics: T.Metric[], selectedMetrics?: string[]) => {\n    const selected = selectedMetrics || this.props.selectedMetrics;\n    return metrics.filter(metric => selected.includes(metric.key)).map(metric => metric.key);\n  };\n\n  getLocalizedMetricNameFromKey = (key: string) => {\n    const metric = find(this.props.metrics, { key });\n    return metric === undefined ? key : getLocalizedMetricName(metric);\n  };\n\n  onSearch = (query: string) => {\n    this.setState({ query });\n    return Promise.resolve();\n  };\n\n  onSelect = (metric: string) => {\n    this.props.addMetric(metric);\n    this.setState(state => {\n      return {\n        selectedMetrics: sortBy([...state.selectedMetrics, metric]),\n        metrics: this.filterMetricsElements(this.props, state.query)\n      };\n    });\n  };\n\n  onUnselect = (metric: string) => {\n    this.props.removeMetric(metric);\n    this.setState(state => {\n      return {\n        metrics: sortBy([...state.metrics, metric]),\n        selectedMetrics: state.selectedMetrics.filter(selected => selected !== metric)\n      };\n    });\n  };\n\n  render() {\n    const { query } = this.state;\n    const filteredMetrics = this.filterMetricsElements(this.props, query);\n    const selectedMetrics = this.getSelectedMetricsElements(\n      this.props.metrics,\n      this.props.selectedMetrics\n    );\n    return (\n      <Dropdown\n        className=\"display-inline-block\"\n        closeOnClick={false}\n        closeOnClickOutside={true}\n        overlay={\n          <AddGraphMetricPopup\n            elements={filteredMetrics}\n            filterSelected={this.filterSelected}\n            metricsTypeFilter={this.props.metricsTypeFilter}\n            onSearch={this.onSearch}\n            onSelect={this.onSelect}\n            onUnselect={this.onUnselect}\n            renderLabel={element => this.getLocalizedMetricNameFromKey(element)}\n            selectedElements={selectedMetrics}\n          />\n        }>\n        <Button className=\"spacer-left\">\n          <span className=\"text-ellipsis text-middle\">\n            {translate('project_activity.graphs.custom.add')}\n          </span>\n          <DropdownIcon className=\"text-top little-spacer-left\" />\n        </Button>\n      </Dropdown>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Select from '../../components/controls/Select';\nimport { translate } from '../../helpers/l10n';\nimport { GraphType } from '../../types/project-activity';\nimport AddGraphMetric from './AddGraphMetric';\nimport './styles.css';\nimport { getGraphTypes, isCustomGraph } from './utils';\n\ninterface Props {\n  addCustomMetric?: (metric: string) => void;\n  className?: string;\n  removeCustomMetric?: (metric: string) => void;\n  graph: GraphType;\n  metrics: T.Metric[];\n  metricsTypeFilter?: string[];\n  selectedMetrics?: string[];\n  updateGraph: (graphType: string) => void;\n}\n\nexport default class GraphsHeader extends React.PureComponent<Props> {\n  handleGraphChange = (option: { value: string }) => {\n    if (option.value !== this.props.graph) {\n      this.props.updateGraph(option.value);\n    }\n  };\n\n  render() {\n    const {\n      addCustomMetric,\n      className,\n      graph,\n      metrics,\n      metricsTypeFilter,\n      removeCustomMetric,\n      selectedMetrics = []\n    } = this.props;\n\n    const types = getGraphTypes(addCustomMetric === undefined || removeCustomMetric === undefined);\n\n    const selectOptions = types.map(type => ({\n      label: translate('project_activity.graphs', type),\n      value: type\n    }));\n\n    return (\n      <div className={classNames(className, 'position-relative')}>\n        <Select\n          className=\"pull-left input-medium\"\n          clearable={false}\n          onChange={this.handleGraphChange}\n          options={selectOptions}\n          searchable={false}\n          value={graph}\n        />\n        {isCustomGraph(graph) &&\n          addCustomMetric !== undefined &&\n          removeCustomMetric !== undefined && (\n            <AddGraphMetric\n              addMetric={addCustomMetric}\n              className=\"pull-left spacer-left\"\n              metrics={metrics}\n              metricsTypeFilter={metricsTypeFilter}\n              removeMetric={removeCustomMetric}\n              selectedMetrics={selectedMetrics}\n            />\n          )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as React from 'react';\nimport { getReportUrl } from '../../api/component-report';\nimport { Button } from '../../components/controls/buttons';\nimport Dropdown from '../../components/controls/Dropdown';\nimport DropdownIcon from '../../components/icons/DropdownIcon';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\nimport { Branch } from '../../types/branch-like';\n\nexport interface ComponentReportActionsRendererProps {\n  component: T.Component;\n  branch?: Branch;\n  frequency: string;\n  subscribed: boolean;\n  canSubscribe: boolean;\n  currentUserHasEmail: boolean;\n  handleSubscription: () => void;\n  handleUnsubscription: () => void;\n}\n\nexport default function ComponentReportActionsRenderer(props: ComponentReportActionsRendererProps) {\n  const { branch, component, frequency, subscribed, canSubscribe, currentUserHasEmail } = props;\n\n  const renderDownloadButton = (simple = false) => {\n    return (\n      <a\n        download={[component.name, branch?.name, 'PDF Report.pdf'].filter(s => !!s).join(' - ')}\n        href={getReportUrl(component.key, branch?.name)}\n        target=\"_blank\"\n        data-test=\"overview__download-pdf-report-button\"\n        rel=\"noopener noreferrer\">\n        {simple\n          ? translate('download_verb')\n          : translateWithParameters(\n              'component_report.download',\n              translate('qualifier', component.qualifier).toLowerCase()\n            )}\n      </a>\n    );\n  };\n\n  const renderSubscriptionButton = () => {\n    if (!currentUserHasEmail) {\n      return (\n        <span className=\"text-muted-2\">{translate('component_report.no_email_to_subscribe')}</span>\n      );\n    }\n\n    const translationKey = subscribed\n      ? 'component_report.unsubscribe_x'\n      : 'component_report.subscribe_x';\n    const onClickHandler = subscribed ? props.handleUnsubscription : props.handleSubscription;\n    const frequencyTranslation = translate('report.frequency', frequency).toLowerCase();\n\n    return (\n      <a href=\"#\" onClick={onClickHandler} data-test=\"overview__subscribe-to-report-button\">\n        {translateWithParameters(translationKey, frequencyTranslation)}\n      </a>\n    );\n  };\n\n  return canSubscribe ? (\n    <Dropdown\n      overlay={\n        <ul className=\"menu\">\n          <li>{renderDownloadButton(true)}</li>\n          <li>{renderSubscriptionButton()}</li>\n        </ul>\n      }>\n      <Button className=\"dropdown-toggle\">\n        {translateWithParameters(\n          'component_report.report',\n          translate('qualifier', component.qualifier)\n        )}\n        <DropdownIcon className=\"spacer-left icon-half-transparent\" />\n      </Button>\n    </Dropdown>\n  ) : (\n    renderDownloadButton()\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  getReportStatus,\n  subscribeToEmailReport,\n  unsubscribeFromEmailReport\n} from '../../api/component-report';\nimport addGlobalSuccessMessage from '../../app/utils/addGlobalSuccessMessage';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\nimport { isLoggedIn } from '../../helpers/users';\nimport { Store } from '../../store/rootReducer';\nimport { Branch } from '../../types/branch-like';\nimport { ComponentQualifier } from '../../types/component';\nimport { ComponentReportStatus } from '../../types/component-report';\nimport { withCurrentUser } from '../hoc/withCurrentUser';\nimport ComponentReportActionsRenderer from './ComponentReportActionsRenderer';\n\ninterface Props {\n  appState: Pick<T.AppState, 'qualifiers'>;\n  component: T.Component;\n  branch?: Branch;\n  currentUser: T.CurrentUser;\n}\n\ninterface State {\n  loadingStatus?: boolean;\n  status?: ComponentReportStatus;\n}\n\nexport class ComponentReportActions extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {};\n\n  componentDidMount() {\n    this.mounted = true;\n    const governanceEnabled = this.props.appState.qualifiers.includes(ComponentQualifier.Portfolio);\n    if (governanceEnabled) {\n      this.loadReportStatus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadReportStatus = async () => {\n    const { component, branch } = this.props;\n\n    const status = await getReportStatus(component.key, branch?.name).catch(() => undefined);\n\n    if (this.mounted) {\n      this.setState({ status, loadingStatus: false });\n    }\n  };\n\n  handleSubscription = (subscribed: boolean) => {\n    const { component } = this.props;\n    const { status } = this.state;\n\n    const translationKey = subscribed\n      ? 'component_report.subscribe_x_success'\n      : 'component_report.unsubscribe_x_success';\n    const frequencyTranslation = translate(\n      'report.frequency',\n      status?.componentFrequency || status?.globalFrequency || ''\n    ).toLowerCase();\n    const qualifierTranslation = translate('qualifier', component.qualifier).toLowerCase();\n\n    addGlobalSuccessMessage(\n      translateWithParameters(translationKey, frequencyTranslation, qualifierTranslation)\n    );\n\n    this.loadReportStatus();\n  };\n\n  handleSubscribe = async () => {\n    const { component, branch } = this.props;\n\n    await subscribeToEmailReport(component.key, branch?.name);\n\n    this.handleSubscription(true);\n  };\n\n  handleUnsubscribe = async () => {\n    const { component, branch } = this.props;\n\n    await unsubscribeFromEmailReport(component.key, branch?.name);\n\n    this.handleSubscription(false);\n  };\n\n  render() {\n    const { currentUser, component, branch } = this.props;\n    const { status, loadingStatus } = this.state;\n\n    if (loadingStatus || !status || (branch && !branch.excludedFromPurge)) {\n      return null;\n    }\n\n    const currentUserHasEmail = isLoggedIn(currentUser) && !!currentUser.email;\n\n    return (\n      <ComponentReportActionsRenderer\n        branch={branch}\n        component={component}\n        frequency={status.componentFrequency || status.globalFrequency}\n        subscribed={status.subscribed}\n        canSubscribe={status.canSubscribe}\n        currentUserHasEmail={currentUserHasEmail}\n        handleSubscription={this.handleSubscribe}\n        handleUnsubscription={this.handleUnsubscribe}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store) => ({\n  appState: state.appState\n});\n\nexport default withCurrentUser(connect(mapStateToProps)(ComponentReportActions));\n"],"sourceRoot":""}